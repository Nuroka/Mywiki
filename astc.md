# Adaptive Scalable Texture Compression (ASTC) 사용자 가이드 분석

## 1. 개요

**Adaptive Scalable Texture Compression (ASTC)**는 Arm과 AMD가 개발한 고급 손실 압축 기술로, OpenGL, OpenGL ES, 및 Vulkan API의 표준 기능으로 채택되었습니다. ASTC는 텍스처 데이터를 효율적으로 압축하여 메모리 대역폭과 전력 소비를 줄이면서도 높은 이미지 품질을 유지할 수 있게 합니다.

## 2. 모범 사례

### 최적의 사용을 위한 권장 사항:

- **비트레이트 선택**: 텍스처의 가시성과 중요도에 따라 비트레이트를 조정합니다. 일반적으로 텍스처를 고품질, 중간 품질, 저품질로 나누어 각각에 적합한 비트레이트를 설정합니다.
- **노멀 맵**: 노멀 맵의 경우 `-normal_psnr` 또는 `-normal_percep` 옵션을 사용하여 각도 오류를 최적화합니다.
- **마스크**: 각 채널의 내용이 서로 무관한 텍스처에서 `-mask` 옵션을 사용하여 채널 간 간섭을 방지합니다.
- **sRGB**: sRGB 색 공간을 사용하여 색상의 정확도와 품질을 유지합니다.

## 3. 텍스처를 다르게 처리해야 하는 이유

텍스처 접근은 메모리 대역폭 소비의 주요 요인 중 하나입니다. 고해상도 텍스처는 GPU와 메인 메모리 간의 데이터 전송량을 증가시키며, 이는 성능 저하와 전력 소비 증가로 이어질 수 있습니다. ASTC와 같은 실시간 압축 스킴을 사용하면 텍스처 리소스의 크기를 줄여 이러한 문제를 완화할 수 있습니다.

## 4. ASTC 포맷 개요

### ASTC의 주요 장점:

- **형식 유연성**: 1~4개의 채널 데이터를 압축할 수 있으며, 비연관 채널도 지원합니다.
- **비트레이트 유연성**: 이미지 압축 시 0.89 bpt에서 8 bpt까지 다양한 비트레이트를 제공합니다.
- **고급 형식 지원**: LDR, sRGB, HDR, 3D 텍스처를 포함한 다양한 색상 공간을 지원합니다.
- **향상된 이미지 품질**: 기존의 압축 포맷보다 더 나은 이미지 품질을 제공합니다.

## 5. ASTC 알고리즘

### 블록 압축 및 색상 인코딩:

- **블록 압축**: ASTC는 고정 크기의 블록(4x4에서 12x12 텍셀)을 사용하여 텍스처를 압축합니다.
- **색상 인코딩**: 각 블록은 색상 끝점을 저장하고, 텍셀별로 색상 값을 보간하여 생성합니다. 최대 4개의 색상 구분을 정의할 수 있습니다.
- **정수 인코딩**: BISE(유한 정수 시퀀스 인코딩)를 사용하여 효율적으로 정보를 저장합니다.
- **알파벳 저장**: 색상 및 가중치 값을 양자화하여 저장 크기를 줄입니다.
- **퀸트 및 트릿**: 3개의 퀸트 또는 5개의 트릿 문자를 그룹으로 묶어 저장 효율성을 높입니다.
- **블록 크기**: 다양한 블록 크기를 선택하여 이미지 품질과 크기 간의 균형을 맞춥니다.
- **색상 끝점 및 구분**: 복잡한 색상 분포를 처리하기 위해 여러 색상 끝점과 구분을 사용합니다.
- **텍셀 가중치 및 이중 평면 가중치**: 각 텍셀에 대해 가중치를 제공하며, 필요에 따라 이중 평면 모드를 사용합니다.

## 6. ASTC의 이점

- **적응형 압축**: 각 블록에 대해 동적으로 비트를 할당하여 최적의 이미지 품질을 제공합니다.
- **지원 형식의 범위**: 다양한 형식과 비트레이트를 효과적으로 압축할 수 있습니다.
- **이미지 품질**: 기존 포맷에 비해 현저하게 향상된 이미지 품질을 제공합니다.
- **3D 압축**: 3D 텍스처의 압축을 지원합니다.

## 7. ASTC 압축 도구

- **Arm ASTC Encoder**: 명령줄 도구로, 다양한 이미지 형식을 ASTC로 압축 및 해제압축할 수 있습니다.
- **Arm Mali Texture Compression Tool**: GUI 도구로, 압축된 텍스처를 미리 보고 분석할 수 있습니다.
- **Intel Fast ISPC Texture Compressor**: 고성능 도구로, 제한된 ASTC 지원을 제공합니다.
- **AMD Compressonator**: SDK, 명령줄 및 GUI 도구로, ASTC 지원이 제한적입니다.

## 8. 게임 에셋에 ASTC 사용

- **비트레이트 선택**: 텍스처의 가시성과 중요도에 따라 적절한 비트레이트를 선택합니다.
- **노멀 맵**: 각도 오류를 줄이기 위해 `-normal_psnr` 및 `-normal_percep` 옵션을 사용합니다.
- **마스크**: 채널 간 간섭을 방지하기 위해 `-mask` 옵션을 사용합니다.
- **sRGB**: sRGB 색 공간을 유지하여 색상 품질을 보장합니다.

## 9. 그래픽 API와 ASTC

- **OpenGL ES와 Vulkan**: ASTC를 지원하는 확장을 통해 쉽게 통합하고 하드웨어를 활용할 수 있습니다.
- **ASTC 헤더**: 압축된 데이터의 ASTC 블록 크기와 크기를 계산하기 위한 정보를 제공합니다.
- **OpenGL ES**: 텍스처 준비, 로드 및 구성 단계에 따라 ASTC 데이터를 사용합니다.
- **Vulkan**: ASTC는 Vulkan의 코어 기능으로, 지원 여부를 확인한 후 ASTC 데이터를 업로드합니다.


[astc 인코더 사용법](https://developer.arm.com/documentation/102162/0430/About-Arm-ASTC-Encoder?lang=en)
<https://developer.arm.com/documentation/102162/0430/About-Arm-ASTC-Encoder?lang=en>

[astc 인코더 설명](https://developer.arm.com/Tools%20and%20Software/ASTC%20Encoder)
<https://developer.arm.com/Tools%20and%20Software/ASTC%20Encoder>

실행화면
![캡처화면](https://github.com/Nuroka/Mywiki/blob/main/%EC%84%A0%ED%98%95%20LDR%20%EC%83%89%EC%83%81%20%ED%94%84%EB%A1%9C%ED%95%84%20%EC%82%AC%EC%9A%A9%EC%8B%9C%20%ED%92%88%EC%A7%88%20%EC%B8%A1%EC%A0%95.PNG)
