\doxysection{C\+:/\+Users/inhyu/\+One\+Drive/바탕 화면/랩실 내용/astc-\/encoder-\/main/\+Source/astcenc\+\_\+find\+\_\+best\+\_\+partitioning.cpp 파일 참조}
\hypertarget{astcenc__find__best__partitioning_8cpp}{}\label{astcenc__find__best__partitioning_8cpp}\index{C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-\/encoder-\/main/Source/astcenc\_find\_best\_partitioning.cpp@{C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-\/encoder-\/main/Source/astcenc\_find\_best\_partitioning.cpp}}
{\ttfamily \#include $<$limits$>$}\newline
{\ttfamily \#include "{}astcenc\+\_\+internal.\+h"{}}\newline
astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp에 대한 include 의존 그래프
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp__incl}
\end{center}
\end{figure}
\doxysubsubsection*{타입정의}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a046ffcca4b17ecd136a86a06bde0b674}{mismatch\+\_\+dispatch}} = unsigned int (\texorpdfstring{$\ast$}{*})(const uint64\+\_\+t\texorpdfstring{$\ast$}{*}, const uint64\+\_\+t\texorpdfstring{$\ast$}{*})
\end{DoxyCompactItemize}
\doxysubsubsection*{함수}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e}{kmeans\+\_\+init}} (const \mbox{\hyperlink{structimage__block}{image\+\_\+block}} \&blk, unsigned int texel\+\_\+count, unsigned int partition\+\_\+count, \mbox{\hyperlink{structvfloat4}{vfloat4}} cluster\+\_\+centers\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONS}}\mbox{]})
\begin{DoxyCompactList}\small\item\em Functions for finding best partition for a block. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f}{kmeans\+\_\+assign}} (const \mbox{\hyperlink{structimage__block}{image\+\_\+block}} \&blk, unsigned int texel\+\_\+count, unsigned int partition\+\_\+count, const \mbox{\hyperlink{structvfloat4}{vfloat4}} cluster\+\_\+centers\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONS}}\mbox{]}, uint8\+\_\+t partition\+\_\+of\+\_\+texel\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_ad694a8ff82a68a50b11bac439531241e}{BLOCK\+\_\+\+MAX\+\_\+\+TEXELS}}\mbox{]})
\begin{DoxyCompactList}\small\item\em Assign texels to clusters, based on a set of chosen center points. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f}{kmeans\+\_\+update}} (const \mbox{\hyperlink{structimage__block}{image\+\_\+block}} \&blk, unsigned int texel\+\_\+count, unsigned int partition\+\_\+count, \mbox{\hyperlink{structvfloat4}{vfloat4}} cluster\+\_\+centers\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONS}}\mbox{]}, const uint8\+\_\+t partition\+\_\+of\+\_\+texel\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_ad694a8ff82a68a50b11bac439531241e}{BLOCK\+\_\+\+MAX\+\_\+\+TEXELS}}\mbox{]})
\begin{DoxyCompactList}\small\item\em Compute new cluster centers based on their center of gravity. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550}{partition\+\_\+mismatch2}} (const uint64\+\_\+t a\mbox{[}2\mbox{]}, const uint64\+\_\+t b\mbox{[}2\mbox{]})
\begin{DoxyCompactList}\small\item\em Compute bit-\/mismatch for partitioning in 2-\/partition mode. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37}{partition\+\_\+mismatch3}} (const uint64\+\_\+t a\mbox{[}3\mbox{]}, const uint64\+\_\+t b\mbox{[}3\mbox{]})
\begin{DoxyCompactList}\small\item\em Compute bit-\/mismatch for partitioning in 3-\/partition mode. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb}{partition\+\_\+mismatch4}} (const uint64\+\_\+t a\mbox{[}4\mbox{]}, const uint64\+\_\+t b\mbox{[}4\mbox{]})
\begin{DoxyCompactList}\small\item\em Compute bit-\/mismatch for partitioning in 4-\/partition mode. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260}{count\+\_\+partition\+\_\+mismatch\+\_\+bits}} (const \mbox{\hyperlink{structblock__size__descriptor}{block\+\_\+size\+\_\+descriptor}} \&bsd, unsigned int partition\+\_\+count, const uint64\+\_\+t bitmaps\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONS}}\mbox{]}, uint8\+\_\+t mismatch\+\_\+counts\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_adf3049fd85d49f282c72b012b87a267d}{BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONINGS}}\mbox{]})
\begin{DoxyCompactList}\small\item\em Count the partition table mismatches vs the data clustering. \end{DoxyCompactList}\item 
static unsigned int \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_ad1670adef9a30320320aeb3fa51bb7dc}{get\+\_\+partition\+\_\+ordering\+\_\+by\+\_\+mismatch\+\_\+bits}} (unsigned int texel\+\_\+count, unsigned int partitioning\+\_\+count, const uint8\+\_\+t mismatch\+\_\+count\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_adf3049fd85d49f282c72b012b87a267d}{BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONINGS}}\mbox{]}, uint16\+\_\+t partition\+\_\+ordering\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_adf3049fd85d49f282c72b012b87a267d}{BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONINGS}}\mbox{]})
\begin{DoxyCompactList}\small\item\em Use counting sort on the mismatch array to sort partition candidates. \end{DoxyCompactList}\item 
static unsigned int \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118}{compute\+\_\+kmeans\+\_\+partition\+\_\+ordering}} (const \mbox{\hyperlink{structblock__size__descriptor}{block\+\_\+size\+\_\+descriptor}} \&bsd, const \mbox{\hyperlink{structimage__block}{image\+\_\+block}} \&blk, unsigned int partition\+\_\+count, uint16\+\_\+t partition\+\_\+ordering\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_adf3049fd85d49f282c72b012b87a267d}{BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONINGS}}\mbox{]})
\begin{DoxyCompactList}\small\item\em Use k-\/means clustering to compute a partition ordering for a block.. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac}{insert\+\_\+result}} (unsigned int max\+\_\+values, float this\+\_\+error, unsigned int this\+\_\+partition, float \texorpdfstring{$\ast$}{*}best\+\_\+errors, unsigned int \texorpdfstring{$\ast$}{*}best\+\_\+partitions)
\begin{DoxyCompactList}\small\item\em Insert a partitioning into an order list of results, sorted by error. \end{DoxyCompactList}\item 
unsigned int \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630}{find\+\_\+best\+\_\+partition\+\_\+candidates}} (const \mbox{\hyperlink{structblock__size__descriptor}{block\+\_\+size\+\_\+descriptor}} \&bsd, const \mbox{\hyperlink{structimage__block}{image\+\_\+block}} \&blk, unsigned int partition\+\_\+count, unsigned int partition\+\_\+search\+\_\+limit, unsigned int best\+\_\+partitions\mbox{[}\mbox{\hyperlink{astcenc__internal_8h_a5ac3c00190d37f2011afffd4fe1f95b2}{TUNE\+\_\+\+MAX\+\_\+\+PARTITIONING\+\_\+\+CANDIDATES}}\mbox{]}, unsigned int requested\+\_\+candidates)
\begin{DoxyCompactList}\small\item\em Find the best set of partitions to trial for a given block. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{타입정의 문서화}
\Hypertarget{astcenc__find__best__partitioning_8cpp_a046ffcca4b17ecd136a86a06bde0b674}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!mismatch\_dispatch@{mismatch\_dispatch}}
\index{mismatch\_dispatch@{mismatch\_dispatch}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{mismatch\_dispatch}{mismatch\_dispatch}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_a046ffcca4b17ecd136a86a06bde0b674} 
using \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a046ffcca4b17ecd136a86a06bde0b674}{mismatch\+\_\+dispatch}} = unsigned int (\texorpdfstring{$\ast$}{*})(const uint64\+\_\+t\texorpdfstring{$\ast$}{*}, const uint64\+\_\+t\texorpdfstring{$\ast$}{*})}



\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00355}{355}} 번째 라인에서 정의되었습니다.



\doxysubsection{함수 문서화}
\Hypertarget{astcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!compute\_kmeans\_partition\_ordering@{compute\_kmeans\_partition\_ordering}}
\index{compute\_kmeans\_partition\_ordering@{compute\_kmeans\_partition\_ordering}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{compute\_kmeans\_partition\_ordering()}{compute\_kmeans\_partition\_ordering()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118} 
static unsigned int compute\+\_\+kmeans\+\_\+partition\+\_\+ordering (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structblock__size__descriptor}{block\+\_\+size\+\_\+descriptor}} \&}]{bsd}{, }\item[{const \mbox{\hyperlink{structimage__block}{image\+\_\+block}} \&}]{blk}{, }\item[{unsigned int}]{partition\+\_\+count}{, }\item[{uint16\+\_\+t}]{partition\+\_\+ordering}{\mbox{[}\+BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONINGS\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Use k-\/means clustering to compute a partition ordering for a block.. 


\begin{DoxyParams}[1]{매개변수}
 & {\em bsd} & The block size information. \\
\hline
 & {\em blk} & The image block color data to compress. \\
\hline
 & {\em partition\+\_\+count} & The desired number of partitions in the block. \\
\hline
\mbox{\texttt{ out}}  & {\em partition\+\_\+ordering} & The list of recommended partition indices, in priority order.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The number of active partitionings in this selection. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00458}{458}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00463\ \ \ \{}
\DoxyCodeLine{00464\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ cluster\_centers[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}];}
\DoxyCodeLine{00465\ \ \ \ \ uint8\_t\ texel\_partitions[\mbox{\hyperlink{astcenc__internal_8h_ad694a8ff82a68a50b11bac439531241e}{BLOCK\_MAX\_TEXELS}}];}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ \ \ \textcolor{comment}{//\ Use\ three\ passes\ of\ k-\/means\ clustering\ to\ partition\ the\ block\ data}}
\DoxyCodeLine{00468\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 3;\ i++)}
\DoxyCodeLine{00469\ \ \ \ \ \{}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ 0)}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e}{kmeans\_init}}(blk,\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a0df466b2eda6958f2e5f8a4f147367e4}{texel\_count}},\ partition\_count,\ cluster\_centers);}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f}{kmeans\_update}}(blk,\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a0df466b2eda6958f2e5f8a4f147367e4}{texel\_count}},\ partition\_count,\ cluster\_centers,\ texel\_partitions);}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f}{kmeans\_assign}}(blk,\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a0df466b2eda6958f2e5f8a4f147367e4}{texel\_count}},\ partition\_count,\ cluster\_centers,\ texel\_partitions);}
\DoxyCodeLine{00480\ \ \ \ \ \}}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00482\ \ \ \ \ \textcolor{comment}{//\ Construct\ the\ block\ bitmaps\ of\ texel\ assignments\ to\ each\ partition}}
\DoxyCodeLine{00483\ \ \ \ \ uint64\_t\ bitmaps[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}]\ \{\ 0\ \};}
\DoxyCodeLine{00484\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ texels\_to\_process\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(bsd.\mbox{\hyperlink{structblock__size__descriptor_a0df466b2eda6958f2e5f8a4f147367e4}{texel\_count}},\ \mbox{\hyperlink{astcenc__internal_8h_a24bfd76e0fe1130b9741b58cc3e2b675}{BLOCK\_MAX\_KMEANS\_TEXELS}});}
\DoxyCodeLine{00485\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(texels\_to\_process\ >\ 0);}
\DoxyCodeLine{00486\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ texels\_to\_process;\ i++)}
\DoxyCodeLine{00487\ \ \ \ \ \{}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ idx\ =\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a8bc9e1751fe1a81b9ee33c0925fb8f4f}{kmeans\_texels}}[i];}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ bitmaps[texel\_partitions[idx]]\ |=\ 1ULL\ <<\ i;}
\DoxyCodeLine{00490\ \ \ \ \ \}}
\DoxyCodeLine{00491\ }
\DoxyCodeLine{00492\ \ \ \ \ \textcolor{comment}{//\ Count\ the\ mismatch\ between\ the\ block\ and\ the\ format's\ partition\ tables}}
\DoxyCodeLine{00493\ \ \ \ \ uint8\_t\ mismatch\_counts[\mbox{\hyperlink{astcenc__internal_8h_adf3049fd85d49f282c72b012b87a267d}{BLOCK\_MAX\_PARTITIONINGS}}];}
\DoxyCodeLine{00494\ \ \ \ \ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260}{count\_partition\_mismatch\_bits}}(bsd,\ partition\_count,\ bitmaps,\ mismatch\_counts);}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \ \ \ \ \textcolor{comment}{//\ Sort\ the\ partitions\ based\ on\ the\ number\ of\ mismatched\ bits}}
\DoxyCodeLine{00497\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_ad1670adef9a30320320aeb3fa51bb7dc}{get\_partition\_ordering\_by\_mismatch\_bits}}(}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ texels\_to\_process,}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ bsd.\mbox{\hyperlink{structblock__size__descriptor_aecc5b82b77caa9b3bf69294d06f84e19}{partitioning\_count\_selected}}[partition\_count\ -\/\ 1],}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ mismatch\_counts,\ partition\_ordering);}
\DoxyCodeLine{00501\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!count\_partition\_mismatch\_bits@{count\_partition\_mismatch\_bits}}
\index{count\_partition\_mismatch\_bits@{count\_partition\_mismatch\_bits}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{count\_partition\_mismatch\_bits()}{count\_partition\_mismatch\_bits()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260} 
static void count\+\_\+partition\+\_\+mismatch\+\_\+bits (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structblock__size__descriptor}{block\+\_\+size\+\_\+descriptor}} \&}]{bsd}{, }\item[{unsigned int}]{partition\+\_\+count}{, }\item[{const uint64\+\_\+t}]{bitmaps}{\mbox{[}\+BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONS\mbox{]}, }\item[{uint8\+\_\+t}]{mismatch\+\_\+counts}{\mbox{[}\+BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONINGS\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Count the partition table mismatches vs the data clustering. 


\begin{DoxyParams}[1]{매개변수}
 & {\em bsd} & The block size information. \\
\hline
 & {\em partition\+\_\+count} & The number of partitions in the block. \\
\hline
 & {\em bitmaps} & The block texel partition assignment patterns. \\
\hline
\mbox{\texttt{ out}}  & {\em mismatch\+\_\+counts} & The array storing per partitioning mismatch counts. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00365}{365}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00370\ \ \ \{}
\DoxyCodeLine{00371\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ active\_count\ =\ bsd.\mbox{\hyperlink{structblock__size__descriptor_aecc5b82b77caa9b3bf69294d06f84e19}{partitioning\_count\_selected}}[partition\_count\ -\/\ 1];}
\DoxyCodeLine{00372\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(active\_count\ >\ 0);}
\DoxyCodeLine{00373\ }
\DoxyCodeLine{00374\ \ \ \ \ \textcolor{keywordflow}{if}\ (partition\_count\ ==\ 2)}
\DoxyCodeLine{00375\ \ \ \ \ \{}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ active\_count;\ i++)}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ mismatch\_counts[i]\ =\ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550}{partition\_mismatch2}}(bitmaps,\ bsd.\mbox{\hyperlink{structblock__size__descriptor_afb199f7b25412c63ee070afc4f22d647}{coverage\_bitmaps\_2}}[i]);}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ assert(mismatch\_counts[i]\ <\ \mbox{\hyperlink{astcenc__internal_8h_a24bfd76e0fe1130b9741b58cc3e2b675}{BLOCK\_MAX\_KMEANS\_TEXELS}});}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ assert(mismatch\_counts[i]\ <\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a0df466b2eda6958f2e5f8a4f147367e4}{texel\_count}});}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00382\ \ \ \ \ \}}
\DoxyCodeLine{00383\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (partition\_count\ ==\ 3)}
\DoxyCodeLine{00384\ \ \ \ \ \{}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ active\_count;\ i++)}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ mismatch\_counts[i]\ =\ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37}{partition\_mismatch3}}(bitmaps,\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a2de235b96a8763b4d757954e66f084a3}{coverage\_bitmaps\_3}}[i]);}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ assert(mismatch\_counts[i]\ <\ \mbox{\hyperlink{astcenc__internal_8h_a24bfd76e0fe1130b9741b58cc3e2b675}{BLOCK\_MAX\_KMEANS\_TEXELS}});}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ assert(mismatch\_counts[i]\ <\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a0df466b2eda6958f2e5f8a4f147367e4}{texel\_count}});}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00391\ \ \ \ \ \}}
\DoxyCodeLine{00392\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00393\ \ \ \ \ \{}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ active\_count;\ i++)}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ mismatch\_counts[i]\ =\ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb}{partition\_mismatch4}}(bitmaps,\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a2efb4a6e89af7eb8f833c5a7c5c65ac2}{coverage\_bitmaps\_4}}[i]);}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ assert(mismatch\_counts[i]\ <\ \mbox{\hyperlink{astcenc__internal_8h_a24bfd76e0fe1130b9741b58cc3e2b675}{BLOCK\_MAX\_KMEANS\_TEXELS}});}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ assert(mismatch\_counts[i]\ <\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a0df466b2eda6958f2e5f8a4f147367e4}{texel\_count}});}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00400\ \ \ \ \ \}}
\DoxyCodeLine{00401\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!find\_best\_partition\_candidates@{find\_best\_partition\_candidates}}
\index{find\_best\_partition\_candidates@{find\_best\_partition\_candidates}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{find\_best\_partition\_candidates()}{find\_best\_partition\_candidates()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630} 
unsigned int find\+\_\+best\+\_\+partition\+\_\+candidates (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structblock__size__descriptor}{block\+\_\+size\+\_\+descriptor}} \&}]{bsd}{, }\item[{const \mbox{\hyperlink{structimage__block}{image\+\_\+block}} \&}]{blk}{, }\item[{unsigned int}]{partition\+\_\+count}{, }\item[{unsigned int}]{partition\+\_\+search\+\_\+limit}{, }\item[{unsigned int}]{best\+\_\+partitions}{\mbox{[}\+TUNE\+\_\+\+MAX\+\_\+\+PARTITIONING\+\_\+\+CANDIDATES\mbox{]}, }\item[{unsigned int}]{requested\+\_\+candidates}{}\end{DoxyParamCaption})}



Find the best set of partitions to trial for a given block. 

On return the {\ttfamily best\+\_\+partitions} list will contain the two best partition candidates; one assuming data has uncorrelated chroma and one assuming the data has correlated chroma. The best candidate is returned first in the list.


\begin{DoxyParams}[1]{매개변수}
 & {\em bsd} & The block size information. \\
\hline
 & {\em blk} & The image block color data to compress. \\
\hline
 & {\em partition\+\_\+count} & The number of partitions in the block. \\
\hline
 & {\em partition\+\_\+search\+\_\+limit} & The number of candidate partition encodings to trial. \\
\hline
\mbox{\texttt{ out}}  & {\em best\+\_\+partitions} & The best partition candidates. \\
\hline
 & {\em requested\+\_\+candidates} & The number of requested partitionings. May return fewer if candidates are not available.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The actual number of candidates returned. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00551}{551}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00558\ \ \ \{}
\DoxyCodeLine{00559\ \ \ \ \ \textcolor{comment}{//\ Constant\ used\ to\ estimate\ quantization\ error\ for\ a\ given\ partitioning;\ the\ optimal\ value\ for}}
\DoxyCodeLine{00560\ \ \ \ \ \textcolor{comment}{//\ this\ depends\ on\ bitrate.\ These\ values\ have\ been\ determined\ empirically.}}
\DoxyCodeLine{00561\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ texels\_per\_block\ =\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a0df466b2eda6958f2e5f8a4f147367e4}{texel\_count}};}
\DoxyCodeLine{00562\ \ \ \ \ \textcolor{keywordtype}{float}\ weight\_imprecision\_estim\ =\ 0.055f;}
\DoxyCodeLine{00563\ \ \ \ \ \textcolor{keywordflow}{if}\ (texels\_per\_block\ <=\ 20)}
\DoxyCodeLine{00564\ \ \ \ \ \{}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ weight\_imprecision\_estim\ =\ 0.03f;}
\DoxyCodeLine{00566\ \ \ \ \ \}}
\DoxyCodeLine{00567\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (texels\_per\_block\ <=\ 31)}
\DoxyCodeLine{00568\ \ \ \ \ \{}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ weight\_imprecision\_estim\ =\ 0.04f;}
\DoxyCodeLine{00570\ \ \ \ \ \}}
\DoxyCodeLine{00571\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (texels\_per\_block\ <=\ 41)}
\DoxyCodeLine{00572\ \ \ \ \ \{}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ weight\_imprecision\_estim\ =\ 0.05f;}
\DoxyCodeLine{00574\ \ \ \ \ \}}
\DoxyCodeLine{00575\ }
\DoxyCodeLine{00576\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(partition\_count\ >\ 0);}
\DoxyCodeLine{00577\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(partition\_search\_limit\ >\ 0);}
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00579\ \ \ \ \ weight\_imprecision\_estim\ =\ weight\_imprecision\_estim\ *\ weight\_imprecision\_estim;}
\DoxyCodeLine{00580\ }
\DoxyCodeLine{00581\ \ \ \ \ uint16\_t\ partition\_sequence[\mbox{\hyperlink{astcenc__internal_8h_adf3049fd85d49f282c72b012b87a267d}{BLOCK\_MAX\_PARTITIONINGS}}];}
\DoxyCodeLine{00582\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ sequence\_len\ =\ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118}{compute\_kmeans\_partition\_ordering}}(bsd,\ blk,\ partition\_count,\ partition\_sequence);}
\DoxyCodeLine{00583\ \ \ \ \ partition\_search\_limit\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(partition\_search\_limit,\ sequence\_len);}
\DoxyCodeLine{00584\ \ \ \ \ requested\_candidates\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(partition\_search\_limit,\ requested\_candidates);}
\DoxyCodeLine{00585\ }
\DoxyCodeLine{00586\ \ \ \ \ \textcolor{keywordtype}{bool}\ uses\_alpha\ =\ !blk.\mbox{\hyperlink{structimage__block_ae3c0735355d378591db6cb7a011e381a}{is\_constant\_channel}}(3);}
\DoxyCodeLine{00587\ }
\DoxyCodeLine{00588\ \ \ \ \ \textcolor{comment}{//\ Partitioning\ errors\ assuming\ uncorrelated-\/chrominance\ endpoints}}
\DoxyCodeLine{00589\ \ \ \ \ \textcolor{keywordtype}{float}\ uncor\_best\_errors[\mbox{\hyperlink{astcenc__internal_8h_a5ac3c00190d37f2011afffd4fe1f95b2}{TUNE\_MAX\_PARTITIONING\_CANDIDATES}}];}
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ uncor\_best\_partitions[\mbox{\hyperlink{astcenc__internal_8h_a5ac3c00190d37f2011afffd4fe1f95b2}{TUNE\_MAX\_PARTITIONING\_CANDIDATES}}];}
\DoxyCodeLine{00591\ }
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{comment}{//\ Partitioning\ errors\ assuming\ same-\/chrominance\ endpoints}}
\DoxyCodeLine{00593\ \ \ \ \ \textcolor{keywordtype}{float}\ samec\_best\_errors[\mbox{\hyperlink{astcenc__internal_8h_a5ac3c00190d37f2011afffd4fe1f95b2}{TUNE\_MAX\_PARTITIONING\_CANDIDATES}}];}
\DoxyCodeLine{00594\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ samec\_best\_partitions[\mbox{\hyperlink{astcenc__internal_8h_a5ac3c00190d37f2011afffd4fe1f95b2}{TUNE\_MAX\_PARTITIONING\_CANDIDATES}}];}
\DoxyCodeLine{00595\ }
\DoxyCodeLine{00596\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ requested\_candidates;\ i++)}
\DoxyCodeLine{00597\ \ \ \ \ \{}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ uncor\_best\_errors[i]\ =\ \mbox{\hyperlink{astcenc__internal_8h_aaa341023bf98401423daebc6795e2c83}{ERROR\_CALC\_DEFAULT}};}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ samec\_best\_errors[i]\ =\ \mbox{\hyperlink{astcenc__internal_8h_aaa341023bf98401423daebc6795e2c83}{ERROR\_CALC\_DEFAULT}};}
\DoxyCodeLine{00600\ \ \ \ \ \}}
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ \ \ \ \ \textcolor{keywordflow}{if}\ (uses\_alpha)}
\DoxyCodeLine{00603\ \ \ \ \ \{}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ partition\_search\_limit;\ i++)}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ partition\ =\ partition\_sequence[i];}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ pi\ =\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a551741bf3178a4b4617b2389c27345ec}{get\_raw\_partition\_info}}(partition\_count,\ partition);}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ weighting\ to\ give\ to\ each\ component\ in\ each\ partition}}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structpartition__metrics}{partition\_metrics}}\ pms[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}];}
\DoxyCodeLine{00611\ }
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__averages__and__directions_8cpp_a00407861c2f0e767b64b1cb1bb7a27b6}{compute\_avgs\_and\_dirs\_4\_comp}}(pi,\ blk,\ pms);}
\DoxyCodeLine{00613\ }
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structline4}{line4}}\ uncor\_lines[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}];}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structline4}{line4}}\ samec\_lines[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}];}
\DoxyCodeLine{00616\ }
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structprocessed__line4}{processed\_line4}}\ uncor\_plines[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}];}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structprocessed__line4}{processed\_line4}}\ samec\_plines[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}];}
\DoxyCodeLine{00619\ }
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ line\_lengths[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}];}
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ partition\_count;\ j++)}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structpartition__metrics}{partition\_metrics}}\&\ pm\ =\ pms[j];}
\DoxyCodeLine{00625\ }
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uncor\_lines[j].\mbox{\hyperlink{structline4_a35162a2f9eccdf19bd1bc79a9030df30}{a}}\ =\ pm.\mbox{\hyperlink{structpartition__metrics_a81851ed35dd9dc3ce09a74b8167f5846}{avg}};}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uncor\_lines[j].\mbox{\hyperlink{structline4_a6cdd2a7bcf113eb9bd2085f9a07b9084}{b}}\ =\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a3b0e8ae23a514219217b72164a7909a4}{normalize\_safe}}(pm.\mbox{\hyperlink{structpartition__metrics_a5a05f959255774e848e83001f9b7bd37}{dir}},\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a5177e2c50f2c01a5610b2844ee3a071d}{unit4}}());}
\DoxyCodeLine{00628\ }
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uncor\_plines[j].\mbox{\hyperlink{structprocessed__line4_a15d23ed62e7f387dde80641c087fa578}{amod}}\ =\ uncor\_lines[j].\mbox{\hyperlink{structline4_a35162a2f9eccdf19bd1bc79a9030df30}{a}}\ -\/\ uncor\_lines[j].\mbox{\hyperlink{structline4_a6cdd2a7bcf113eb9bd2085f9a07b9084}{b}}\ *\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a6d7561f8f0ebee752b0e217101d9d5f3}{dot}}(uncor\_lines[j].a,\ uncor\_lines[j].b);}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uncor\_plines[j].\mbox{\hyperlink{structprocessed__line4_a0e2bff0306a32a7f07e0f127ff13febc}{bs}}\ =\ uncor\_lines[j].\mbox{\hyperlink{structline4_a6cdd2a7bcf113eb9bd2085f9a07b9084}{b}};}
\DoxyCodeLine{00631\ }
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samec\_lines[j].\mbox{\hyperlink{structline4_a35162a2f9eccdf19bd1bc79a9030df30}{a}}\ =\ \mbox{\hyperlink{structvfloat4_a04b5f338012dab6be0b2bd7910fcbcae}{vfloat4::zero}}();}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samec\_lines[j].\mbox{\hyperlink{structline4_a6cdd2a7bcf113eb9bd2085f9a07b9084}{b}}\ =\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a3b0e8ae23a514219217b72164a7909a4}{normalize\_safe}}(pm.\mbox{\hyperlink{structpartition__metrics_a81851ed35dd9dc3ce09a74b8167f5846}{avg}},\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a5177e2c50f2c01a5610b2844ee3a071d}{unit4}}());}
\DoxyCodeLine{00634\ }
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samec\_plines[j].\mbox{\hyperlink{structprocessed__line4_a15d23ed62e7f387dde80641c087fa578}{amod}}\ =\ \mbox{\hyperlink{structvfloat4_a04b5f338012dab6be0b2bd7910fcbcae}{vfloat4::zero}}();}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samec\_plines[j].\mbox{\hyperlink{structprocessed__line4_a0e2bff0306a32a7f07e0f127ff13febc}{bs}}\ =\ samec\_lines[j].\mbox{\hyperlink{structline4_a6cdd2a7bcf113eb9bd2085f9a07b9084}{b}};}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ uncor\_error\ =\ 0.0f;}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ samec\_error\ =\ 0.0f;}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__averages__and__directions_8cpp_a2dec702033b002eaf4090eb47ce4ad21}{compute\_error\_squared\_rgba}}(pi,}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ blk,}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uncor\_plines,}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samec\_plines,}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ line\_lengths,}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uncor\_error,}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samec\_error);}
\DoxyCodeLine{00649\ }
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ an\ estimate\ of\ error\ introduced\ by\ weight\ quantization\ imprecision.}}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ error\ is\ computed\ as\ follows,\ for\ each\ partition}}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 1:\ compute\ the\ principal-\/axis\ vector\ (full\ length)\ in\ error-\/space}}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 2:\ convert\ the\ principal-\/axis\ vector\ to\ regular\ RGB-\/space}}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 3:\ scale\ the\ vector\ by\ a\ constant\ that\ estimates\ average\ quantization\ error}}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 4:\ for\ each\ texel,\ square\ the\ vector,\ then\ do\ a\ dot-\/product\ with\ the\ texel's}}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ error\ weight;\ sum\ up\ the\ results\ across\ all\ texels.}}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 4(optimized):\ square\ the\ vector\ once,\ then\ do\ a\ dot-\/product\ with\ the\ average}}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ texel\ error,\ then\ multiply\ by\ the\ number\ of\ texels.}}
\DoxyCodeLine{00659\ }
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ partition\_count;\ j++)}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ tpp\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(pi.partition\_texel\_count[j]);}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ error\_weights(tpp\ *\ weight\_imprecision\_estim);}
\DoxyCodeLine{00664\ }
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ uncor\_vector\ =\ uncor\_lines[j].\mbox{\hyperlink{structline4_a6cdd2a7bcf113eb9bd2085f9a07b9084}{b}}\ *\ line\_lengths[j];}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ samec\_vector\ =\ samec\_lines[j].\mbox{\hyperlink{structline4_a6cdd2a7bcf113eb9bd2085f9a07b9084}{b}}\ *\ line\_lengths[j];}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uncor\_error\ +=\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a53a7d8285fd42b50cf3600a004db34ac}{dot\_s}}(uncor\_vector\ *\ uncor\_vector,\ error\_weights);}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samec\_error\ +=\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a53a7d8285fd42b50cf3600a004db34ac}{dot\_s}}(samec\_vector\ *\ samec\_vector,\ error\_weights);}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00671\ }
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac}{insert\_result}}(requested\_candidates,\ uncor\_error,\ partition,\ uncor\_best\_errors,\ uncor\_best\_partitions);}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac}{insert\_result}}(requested\_candidates,\ samec\_error,\ partition,\ samec\_best\_errors,\ samec\_best\_partitions);}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00675\ \ \ \ \ \}}
\DoxyCodeLine{00676\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00677\ \ \ \ \ \{}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ partition\_search\_limit;\ i++)}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ partition\ =\ partition\_sequence[i];}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ pi\ =\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a551741bf3178a4b4617b2389c27345ec}{get\_raw\_partition\_info}}(partition\_count,\ partition);}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ weighting\ to\ give\ to\ each\ component\ in\ each\ partition}}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structpartition__metrics}{partition\_metrics}}\ pms[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}];}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__averages__and__directions_8cpp_a73936e5cf41b74f2b8d9b137a9d64253}{compute\_avgs\_and\_dirs\_3\_comp\_rgb}}(pi,\ blk,\ pms);}
\DoxyCodeLine{00686\ }
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structpartition__lines3}{partition\_lines3}}\ plines[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}];}
\DoxyCodeLine{00688\ }
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ partition\_count;\ j++)}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structpartition__metrics}{partition\_metrics}}\&\ pm\ =\ pms[j];}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structpartition__lines3}{partition\_lines3}}\&\ pl\ =\ plines[j];}
\DoxyCodeLine{00693\ }
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pl.\mbox{\hyperlink{structpartition__lines3_aec409761ea4c0f5da2661f3e9b6858cc}{uncor\_line}}.\mbox{\hyperlink{structline3_a9f31b902a534755efedc7f07672353c3}{a}}\ =\ pm.\mbox{\hyperlink{structpartition__metrics_a81851ed35dd9dc3ce09a74b8167f5846}{avg}};}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pl.\mbox{\hyperlink{structpartition__lines3_aec409761ea4c0f5da2661f3e9b6858cc}{uncor\_line}}.\mbox{\hyperlink{structline3_a38cf244ed3886bcb8bbee41ce48a8758}{b}}\ =\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a3b0e8ae23a514219217b72164a7909a4}{normalize\_safe}}(pm.\mbox{\hyperlink{structpartition__metrics_a5a05f959255774e848e83001f9b7bd37}{dir}},\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a3cf3e0218d808e69f31668dbc458dc08}{unit3}}());}
\DoxyCodeLine{00696\ }
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pl.\mbox{\hyperlink{structpartition__lines3_aa068c809940350df0486a8e4f4b108ad}{samec\_line}}.\mbox{\hyperlink{structline3_a9f31b902a534755efedc7f07672353c3}{a}}\ =\ \mbox{\hyperlink{structvfloat4_a04b5f338012dab6be0b2bd7910fcbcae}{vfloat4::zero}}();}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pl.\mbox{\hyperlink{structpartition__lines3_aa068c809940350df0486a8e4f4b108ad}{samec\_line}}.\mbox{\hyperlink{structline3_a38cf244ed3886bcb8bbee41ce48a8758}{b}}\ =\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a3b0e8ae23a514219217b72164a7909a4}{normalize\_safe}}(pm.\mbox{\hyperlink{structpartition__metrics_a81851ed35dd9dc3ce09a74b8167f5846}{avg}},\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a3cf3e0218d808e69f31668dbc458dc08}{unit3}}());}
\DoxyCodeLine{00699\ }
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pl.\mbox{\hyperlink{structpartition__lines3_a859723c79cd27cb1428b2e87d00f21fe}{uncor\_pline}}.\mbox{\hyperlink{structprocessed__line3_ab2637ed29af1632d3181cd1bc7d7cef0}{amod}}\ =\ pl.\mbox{\hyperlink{structpartition__lines3_aec409761ea4c0f5da2661f3e9b6858cc}{uncor\_line}}.\mbox{\hyperlink{structline3_a9f31b902a534755efedc7f07672353c3}{a}}\ -\/\ pl.\mbox{\hyperlink{structpartition__lines3_aec409761ea4c0f5da2661f3e9b6858cc}{uncor\_line}}.\mbox{\hyperlink{structline3_a38cf244ed3886bcb8bbee41ce48a8758}{b}}\ *\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_ae36c7167bc89ff2bf984c1a912526dcb}{dot3}}(pl.\mbox{\hyperlink{structpartition__lines3_aec409761ea4c0f5da2661f3e9b6858cc}{uncor\_line}}.\mbox{\hyperlink{structline3_a9f31b902a534755efedc7f07672353c3}{a}},\ pl.\mbox{\hyperlink{structpartition__lines3_aec409761ea4c0f5da2661f3e9b6858cc}{uncor\_line}}.\mbox{\hyperlink{structline3_a38cf244ed3886bcb8bbee41ce48a8758}{b}});}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pl.\mbox{\hyperlink{structpartition__lines3_a859723c79cd27cb1428b2e87d00f21fe}{uncor\_pline}}.\mbox{\hyperlink{structprocessed__line3_aa87031817df0c101f16e5e0a7687f10d}{bs}}\ \ \ =\ pl.\mbox{\hyperlink{structpartition__lines3_aec409761ea4c0f5da2661f3e9b6858cc}{uncor\_line}}.\mbox{\hyperlink{structline3_a38cf244ed3886bcb8bbee41ce48a8758}{b}};}
\DoxyCodeLine{00702\ }
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pl.\mbox{\hyperlink{structpartition__lines3_a3d911509177415a3401db5040aea3fae}{samec\_pline}}.\mbox{\hyperlink{structprocessed__line3_ab2637ed29af1632d3181cd1bc7d7cef0}{amod}}\ =\ \mbox{\hyperlink{structvfloat4_a04b5f338012dab6be0b2bd7910fcbcae}{vfloat4::zero}}();}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pl.\mbox{\hyperlink{structpartition__lines3_a3d911509177415a3401db5040aea3fae}{samec\_pline}}.\mbox{\hyperlink{structprocessed__line3_aa87031817df0c101f16e5e0a7687f10d}{bs}}\ \ \ =\ pl.\mbox{\hyperlink{structpartition__lines3_aa068c809940350df0486a8e4f4b108ad}{samec\_line}}.\mbox{\hyperlink{structline3_a38cf244ed3886bcb8bbee41ce48a8758}{b}};}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ uncor\_error\ =\ 0.0f;}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ samec\_error\ =\ 0.0f;}
\DoxyCodeLine{00709\ }
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__averages__and__directions_8cpp_ac4a96475fb0074ef3fd0f08ea66de75e}{compute\_error\_squared\_rgb}}(pi,}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ blk,}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ plines,}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uncor\_error,}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samec\_error);}
\DoxyCodeLine{00715\ }
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ an\ estimate\ of\ error\ introduced\ by\ weight\ quantization\ imprecision.}}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ error\ is\ computed\ as\ follows,\ for\ each\ partition}}
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 1:\ compute\ the\ principal-\/axis\ vector\ (full\ length)\ in\ error-\/space}}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 2:\ convert\ the\ principal-\/axis\ vector\ to\ regular\ RGB-\/space}}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 3:\ scale\ the\ vector\ by\ a\ constant\ that\ estimates\ average\ quantization\ error}}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 4:\ for\ each\ texel,\ square\ the\ vector,\ then\ do\ a\ dot-\/product\ with\ the\ texel's}}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ error\ weight;\ sum\ up\ the\ results\ across\ all\ texels.}}
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ 4(optimized):\ square\ the\ vector\ once,\ then\ do\ a\ dot-\/product\ with\ the\ average}}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ texel\ error,\ then\ multiply\ by\ the\ number\ of\ texels.}}
\DoxyCodeLine{00725\ }
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ partition\_count;\ j++)}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structpartition__lines3}{partition\_lines3}}\&\ pl\ =\ plines[j];}
\DoxyCodeLine{00729\ }
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ tpp\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(pi.partition\_texel\_count[j]);}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ error\_weights(tpp\ *\ weight\_imprecision\_estim);}
\DoxyCodeLine{00732\ }
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ uncor\_vector\ =\ pl.\mbox{\hyperlink{structpartition__lines3_aec409761ea4c0f5da2661f3e9b6858cc}{uncor\_line}}.\mbox{\hyperlink{structline3_a38cf244ed3886bcb8bbee41ce48a8758}{b}}\ *\ pl.\mbox{\hyperlink{structpartition__lines3_aab1e76d822bfde8b007da4dd65714ff2}{line\_length}};}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ samec\_vector\ =\ pl.\mbox{\hyperlink{structpartition__lines3_aa068c809940350df0486a8e4f4b108ad}{samec\_line}}.\mbox{\hyperlink{structline3_a38cf244ed3886bcb8bbee41ce48a8758}{b}}\ *\ pl.\mbox{\hyperlink{structpartition__lines3_aab1e76d822bfde8b007da4dd65714ff2}{line\_length}};}
\DoxyCodeLine{00735\ }
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uncor\_error\ +=\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a377cafdb98d3ee38a2999ed00504f477}{dot3\_s}}(uncor\_vector\ *\ uncor\_vector,\ error\_weights);}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ samec\_error\ +=\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a377cafdb98d3ee38a2999ed00504f477}{dot3\_s}}(samec\_vector\ *\ samec\_vector,\ error\_weights);}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00739\ }
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac}{insert\_result}}(requested\_candidates,\ uncor\_error,\ partition,\ uncor\_best\_errors,\ uncor\_best\_partitions);}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac}{insert\_result}}(requested\_candidates,\ samec\_error,\ partition,\ samec\_best\_errors,\ samec\_best\_partitions);}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00743\ \ \ \ \ \}}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ interleave[2\ *\ \mbox{\hyperlink{astcenc__internal_8h_a5ac3c00190d37f2011afffd4fe1f95b2}{TUNE\_MAX\_PARTITIONING\_CANDIDATES}}];}
\DoxyCodeLine{00746\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ requested\_candidates;\ i++)}
\DoxyCodeLine{00747\ \ \ \ \ \{}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ interleave[2\ *\ i]\ =\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a551741bf3178a4b4617b2389c27345ec}{get\_raw\_partition\_info}}(partition\_count,\ uncor\_best\_partitions[i]).\mbox{\hyperlink{structpartition__info_ada3e4c7f4d0078a7ae43b1951d856e38}{partition\_index}};}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ interleave[2\ *\ i\ +\ 1]\ =\ bsd.\mbox{\hyperlink{structblock__size__descriptor_a551741bf3178a4b4617b2389c27345ec}{get\_raw\_partition\_info}}(partition\_count,\ samec\_best\_partitions[i]).\mbox{\hyperlink{structpartition__info_ada3e4c7f4d0078a7ae43b1951d856e38}{partition\_index}};}
\DoxyCodeLine{00750\ \ \ \ \ \}}
\DoxyCodeLine{00751\ }
\DoxyCodeLine{00752\ \ \ \ \ uint64\_t\ bitmasks[1024/64]\ \{\ 0\ \};}
\DoxyCodeLine{00753\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ emitted\ =\ 0;}
\DoxyCodeLine{00754\ }
\DoxyCodeLine{00755\ \ \ \ \ \textcolor{comment}{//\ Deduplicate\ the\ first\ "{}requested"{}\ entries}}
\DoxyCodeLine{00756\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ requested\_candidates\ *\ 2;\ \ i++)}
\DoxyCodeLine{00757\ \ \ \ \ \{}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ partition\ =\ interleave[i];}
\DoxyCodeLine{00759\ }
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ word\ =\ partition\ /\ 64;}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bit\ =\ partition\ \%\ 64;}
\DoxyCodeLine{00762\ }
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ written\ =\ bitmasks[word]\ \&\ (1ull\ <<\ bit);}
\DoxyCodeLine{00764\ }
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!written)}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \ \ \ \ best\_partitions[emitted]\ =\ partition;}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \ \ \ \ bitmasks[word]\ |=\ 1ull\ <<\ bit;}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \ \ \ \ emitted++;}
\DoxyCodeLine{00770\ }
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (emitted\ ==\ requested\_candidates)}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00776\ \ \ \ \ \}}
\DoxyCodeLine{00777\ }
\DoxyCodeLine{00778\ \ \ \ \ \textcolor{keywordflow}{return}\ emitted;}
\DoxyCodeLine{00779\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{astcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__find__best__partitioning_8cpp_ad1670adef9a30320320aeb3fa51bb7dc}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!get\_partition\_ordering\_by\_mismatch\_bits@{get\_partition\_ordering\_by\_mismatch\_bits}}
\index{get\_partition\_ordering\_by\_mismatch\_bits@{get\_partition\_ordering\_by\_mismatch\_bits}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{get\_partition\_ordering\_by\_mismatch\_bits()}{get\_partition\_ordering\_by\_mismatch\_bits()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_ad1670adef9a30320320aeb3fa51bb7dc} 
static unsigned int get\+\_\+partition\+\_\+ordering\+\_\+by\+\_\+mismatch\+\_\+bits (\begin{DoxyParamCaption}\item[{unsigned int}]{texel\+\_\+count}{, }\item[{unsigned int}]{partitioning\+\_\+count}{, }\item[{const uint8\+\_\+t}]{mismatch\+\_\+count}{\mbox{[}\+BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONINGS\mbox{]}, }\item[{uint16\+\_\+t}]{partition\+\_\+ordering}{\mbox{[}\+BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONINGS\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Use counting sort on the mismatch array to sort partition candidates. 


\begin{DoxyParams}[1]{매개변수}
 & {\em partitioning\+\_\+count} & The number of packed partitionings. \\
\hline
 & {\em mismatch\+\_\+count} & Partitioning mismatch counts, in index order. \\
\hline
\mbox{\texttt{ out}}  & {\em partition\+\_\+ordering} & Partition index values, in mismatch order.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The number of active partitions in this selection. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00412}{412}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00417\ \ \ \{}
\DoxyCodeLine{00418\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(partitioning\_count\ >\ 0);}
\DoxyCodeLine{00419\ \ \ \ \ uint16\_t\ mscount[\mbox{\hyperlink{astcenc__internal_8h_a24bfd76e0fe1130b9741b58cc3e2b675}{BLOCK\_MAX\_KMEANS\_TEXELS}}]\ \{\ 0\ \};}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{comment}{//\ Create\ the\ histogram\ of\ mismatch\ counts}}
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ partitioning\_count;\ i++)}
\DoxyCodeLine{00423\ \ \ \ \ \{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ mscount[mismatch\_count[i]]++;}
\DoxyCodeLine{00425\ \ \ \ \ \}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{comment}{//\ Create\ a\ running\ sum\ from\ the\ histogram\ array}}
\DoxyCodeLine{00428\ \ \ \ \ \textcolor{comment}{//\ Cells\ store\ previous\ values\ only;\ i.e.\ exclude\ self\ after\ sum}}
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ sum\ =\ 0;}
\DoxyCodeLine{00430\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ texel\_count;\ i++)}
\DoxyCodeLine{00431\ \ \ \ \ \{}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ uint16\_t\ cnt\ =\ mscount[i];}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ mscount[i]\ =\ sum;}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ sum\ +=\ cnt;}
\DoxyCodeLine{00435\ \ \ \ \ \}}
\DoxyCodeLine{00436\ }
\DoxyCodeLine{00437\ \ \ \ \ \textcolor{comment}{//\ Use\ the\ running\ sum\ as\ the\ index,\ incrementing\ after\ read\ to\ allow}}
\DoxyCodeLine{00438\ \ \ \ \ \textcolor{comment}{//\ sequential\ entries\ with\ the\ same\ count}}
\DoxyCodeLine{00439\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ partitioning\_count;\ i++)}
\DoxyCodeLine{00440\ \ \ \ \ \{}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ idx\ =\ mscount[mismatch\_count[i]]++;}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ partition\_ordering[idx]\ =\ \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(i);}
\DoxyCodeLine{00443\ \ \ \ \ \}}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \ \ \ \ \textcolor{keywordflow}{return}\ partitioning\_count;}
\DoxyCodeLine{00446\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_ad1670adef9a30320320aeb3fa51bb7dc_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!insert\_result@{insert\_result}}
\index{insert\_result@{insert\_result}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{insert\_result()}{insert\_result()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac} 
static void insert\+\_\+result (\begin{DoxyParamCaption}\item[{unsigned int}]{max\+\_\+values}{, }\item[{float}]{this\+\_\+error}{, }\item[{unsigned int}]{this\+\_\+partition}{, }\item[{float \texorpdfstring{$\ast$}{*}}]{best\+\_\+errors}{, }\item[{unsigned int \texorpdfstring{$\ast$}{*}}]{best\+\_\+partitions}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Insert a partitioning into an order list of results, sorted by error. 


\begin{DoxyParams}[1]{매개변수}
 & {\em max\+\_\+values} & The max number of entries in the best result arrays. \\
\hline
 & {\em this\+\_\+error} & The error of the new entry. \\
\hline
 & {\em this\+\_\+partition} & The partition ID of the new entry. \\
\hline
\mbox{\texttt{ out}}  & {\em best\+\_\+errors} & The array of best error values. \\
\hline
\mbox{\texttt{ out}}  & {\em best\+\_\+partitions} & The array of best partition values. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00512}{512}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00518\ \{}
\DoxyCodeLine{00519\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(max\_values\ >\ 0);}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \ \ \ \ \textcolor{comment}{//\ Don't\ bother\ searching\ if\ the\ current\ worst\ error\ beats\ the\ new\ error}}
\DoxyCodeLine{00522\ \ \ \ \ \textcolor{keywordflow}{if}\ (this\_error\ >=\ best\_errors[max\_values\ -\/\ 1])}
\DoxyCodeLine{00523\ \ \ \ \ \{}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00525\ \ \ \ \ \}}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ \ \ \ \ \textcolor{comment}{//\ Else\ insert\ into\ the\ list\ in\ error-\/order}}
\DoxyCodeLine{00528\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ max\_values;\ i++)}
\DoxyCodeLine{00529\ \ \ \ \ \{}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Existing\ result\ is\ better\ -\/\ move\ on\ ...}}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this\_error\ >\ best\_errors[i])}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00535\ }
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Move\ existing\ results\ down\ one}}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ max\_values\ -\/\ 1;\ j\ >\ i;\ j-\/-\/)}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ best\_errors[j]\ =\ best\_errors[j\ -\/\ 1];}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ best\_partitions[j]\ =\ best\_partitions[j\ -\/\ 1];}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00542\ }
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Insert\ new\ result}}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ best\_errors[i]\ =\ this\_error;}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ best\_partitions[i]\ =\ this\_partition;}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00547\ \ \ \ \ \}}
\DoxyCodeLine{00548\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!kmeans\_assign@{kmeans\_assign}}
\index{kmeans\_assign@{kmeans\_assign}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{kmeans\_assign()}{kmeans\_assign()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f} 
static void kmeans\+\_\+assign (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structimage__block}{image\+\_\+block}} \&}]{blk}{, }\item[{unsigned int}]{texel\+\_\+count}{, }\item[{unsigned int}]{partition\+\_\+count}{, }\item[{const \mbox{\hyperlink{structvfloat4}{vfloat4}}}]{cluster\+\_\+centers}{\mbox{[}\+BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONS\mbox{]}, }\item[{uint8\+\_\+t}]{partition\+\_\+of\+\_\+texel}{\mbox{[}\+BLOCK\+\_\+\+MAX\+\_\+\+TEXELS\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Assign texels to clusters, based on a set of chosen center points. 


\begin{DoxyParams}[1]{매개변수}
 & {\em blk} & The image block color data to compress. \\
\hline
 & {\em texel\+\_\+count} & The number of texels in the block. \\
\hline
 & {\em partition\+\_\+count} & The number of partitions in the block. \\
\hline
 & {\em cluster\+\_\+centers} & The partition cluster center colors. \\
\hline
\mbox{\texttt{ out}}  & {\em partition\+\_\+of\+\_\+texel} & The partition assigned for each texel. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00146}{146}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00152\ \ \ \{}
\DoxyCodeLine{00153\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(texel\_count\ >\ 0);}
\DoxyCodeLine{00154\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(partition\_count\ >\ 0);}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ uint8\_t\ partition\_texel\_count[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}]\ \{\ 0\ \};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ best\ partition\ for\ every\ texel}}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ texel\_count;\ i++)}
\DoxyCodeLine{00160\ \ \ \ \ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ best\_distance\ =\ std::numeric\_limits<float>::max();}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ best\_partition\ =\ 0;}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color\ =\ blk.\mbox{\hyperlink{structimage__block_af99de7d75e1e380b31d70d131509caa9}{texel}}(i);}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ partition\_count;\ j++)}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ diff\ =\ color\ -\/\ cluster\_centers[j];}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ distance\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a53a7d8285fd42b50cf3600a004db34ac}{dot\_s}}(diff\ *\ diff,\ blk.\mbox{\hyperlink{structimage__block_a6fd749c93e25e5e96748a10387c24a77}{channel\_weight}});}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (distance\ <\ best\_distance)}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ best\_distance\ =\ distance;}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ best\_partition\ =\ j;}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ partition\_of\_texel[i]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(best\_partition);}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ partition\_texel\_count[best\_partition]++;}
\DoxyCodeLine{00178\ \ \ \ \ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{comment}{//\ It\ is\ possible\ to\ get\ a\ situation\ where\ a\ partition\ ends\ up\ without\ any\ texels.\ In\ this\ case,}}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//\ assign\ texel\ N\ to\ partition\ N.\ This\ is\ silly,\ but\ ensures\ that\ every\ partition\ retains\ at}}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{comment}{//\ least\ one\ texel.\ Reassigning\ a\ texel\ in\ this\ manner\ may\ cause\ another\ partition\ to\ go\ empty,}}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{comment}{//\ so\ if\ we\ actually\ did\ a\ reassignment,\ run\ the\ whole\ loop\ over\ again.}}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordtype}{bool}\ problem\_case;}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{00186\ \ \ \ \ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ problem\_case\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ partition\_count;\ i++)}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (partition\_texel\_count[i]\ ==\ 0)}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ partition\_texel\_count[partition\_of\_texel[i]]-\/-\/;}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ partition\_texel\_count[i]++;}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ partition\_of\_texel[i]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(i);}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ problem\_case\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00198\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (problem\_case);}
\DoxyCodeLine{00199\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!kmeans\_init@{kmeans\_init}}
\index{kmeans\_init@{kmeans\_init}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{kmeans\_init()}{kmeans\_init()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e} 
static void kmeans\+\_\+init (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structimage__block}{image\+\_\+block}} \&}]{blk}{, }\item[{unsigned int}]{texel\+\_\+count}{, }\item[{unsigned int}]{partition\+\_\+count}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{cluster\+\_\+centers}{\mbox{[}\+BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONS\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Functions for finding best partition for a block. 

The partition search operates in two stages. The first pass uses kmeans clustering to group texels into an ideal partitioning for the requested partition count, and then compares that against the 1024 partitionings generated by the ASTC partition hash function. The generated partitions are then ranked by the number of texels in the wrong partition, compared to the ideal clustering. All 1024 partitions are tested for similarity and ranked, apart from duplicates and partitionings that actually generate fewer than the requested partition count, but only the top N candidates are actually put through a more detailed search. N is determined by the compressor quality preset.

For the detailed search, each candidate is checked against two possible encoding methods\+:


\begin{DoxyItemize}
\item The best partitioning assuming different chroma colors (RGB + RGB or RGB + delta endpoints).
\item The best partitioning assuming same chroma colors (RGB + scale endpoints).
\end{DoxyItemize}

This is implemented by computing the compute mean color and dominant direction for each partition. This defines two lines, both of which go through the mean color value.


\begin{DoxyItemize}
\item One line has a direction defined by the dominant direction; this is used to assess the error from using an uncorrelated color representation.
\item The other line goes through (0,0,0,1) and is used to assess the error from using a same chroma (RGB + scale) color representation.
\end{DoxyItemize}

The best candidate is selected by computing the squared-\/errors that result from using these lines for endpoint selection.

Pick some initial kmeans cluster centers.


\begin{DoxyParams}[1]{매개변수}
 & {\em blk} & The image block color data to compress. \\
\hline
 & {\em texel\+\_\+count} & The number of texels in the block. \\
\hline
 & {\em partition\+\_\+count} & The number of partitions in the block. \\
\hline
\mbox{\texttt{ out}}  & {\em cluster\+\_\+centers} & The initial partition cluster center colors. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00060}{60}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00065\ \ \ \{}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(texel\_count\ >\ 0);}
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(partition\_count\ >\ 0);}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ clusters\_selected\ =\ 0;}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordtype}{float}\ distances[\mbox{\hyperlink{astcenc__internal_8h_ad694a8ff82a68a50b11bac439531241e}{BLOCK\_MAX\_TEXELS}}];}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ Pick\ a\ random\ sample\ as\ first\ cluster\ center;\ 145897\ from\ random.org}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ sample\ =\ 145897\ \%\ texel\_count;}
\DoxyCodeLine{00074\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ center\_color\ =\ blk.\mbox{\hyperlink{structimage__block_af99de7d75e1e380b31d70d131509caa9}{texel}}(sample);}
\DoxyCodeLine{00075\ \ \ \ \ cluster\_centers[clusters\_selected]\ =\ center\_color;}
\DoxyCodeLine{00076\ \ \ \ \ clusters\_selected++;}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//\ Compute\ the\ distance\ to\ the\ first\ cluster\ center}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{float}\ distance\_sum\ =\ 0.0f;}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ texel\_count;\ i++)}
\DoxyCodeLine{00081\ \ \ \ \ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color\ =\ blk.\mbox{\hyperlink{structimage__block_af99de7d75e1e380b31d70d131509caa9}{texel}}(i);}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ diff\ =\ color\ -\/\ center\_color;}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ distance\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a53a7d8285fd42b50cf3600a004db34ac}{dot\_s}}(diff\ *\ diff,\ blk.\mbox{\hyperlink{structimage__block_a6fd749c93e25e5e96748a10387c24a77}{channel\_weight}});}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ distance\_sum\ +=\ distance;}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ distances[i]\ =\ distance;}
\DoxyCodeLine{00087\ \ \ \ \ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{//\ More\ numbers\ from\ random.org\ for\ weighted-\/random\ center\ selection}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ cluster\_cutoffs[9]\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ 0.626220f,\ 0.932770f,\ 0.275454f,}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ 0.318558f,\ 0.240113f,\ 0.009190f,}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ 0.347661f,\ 0.731960f,\ 0.156391f}
\DoxyCodeLine{00094\ \ \ \ \ \};}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ cutoff\ =\ (clusters\_selected\ -\/\ 1)\ +\ 3\ *\ (partition\_count\ -\/\ 2);}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{comment}{//\ Pick\ the\ remaining\ samples\ as\ needed}}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true})}
\DoxyCodeLine{00100\ \ \ \ \ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Pick\ the\ next\ center\ in\ a\ weighted-\/random\ fashion.}}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ summa\ =\ 0.0f;}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ distance\_cutoff\ =\ distance\_sum\ *\ cluster\_cutoffs[cutoff++];}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (sample\ =\ 0;\ sample\ <\ texel\_count;\ sample++)}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ summa\ +=\ distances[sample];}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (summa\ >=\ distance\_cutoff)}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clamp\ to\ a\ valid\ range\ and\ store\ the\ selected\ cluster\ center}}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ sample\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(sample,\ texel\_count\ -\/\ 1);}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ center\_color\ =\ blk.\mbox{\hyperlink{structimage__block_af99de7d75e1e380b31d70d131509caa9}{texel}}(sample);}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ cluster\_centers[clusters\_selected++]\ =\ center\_color;}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (clusters\_selected\ >=\ partition\_count)}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Compute\ the\ distance\ to\ the\ new\ cluster\ center,\ keep\ the\ min\ dist}}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ distance\_sum\ =\ 0.0f;}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ texel\_count;\ i++)}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color\ =\ blk.\mbox{\hyperlink{structimage__block_af99de7d75e1e380b31d70d131509caa9}{texel}}(i);}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ diff\ =\ color\ -\/\ center\_color;}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ distance\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a53a7d8285fd42b50cf3600a004db34ac}{dot\_s}}(diff\ *\ diff,\ blk.\mbox{\hyperlink{structimage__block_a6fd749c93e25e5e96748a10387c24a77}{channel\_weight}});}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ distance\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(distance,\ distances[i]);}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ distance\_sum\ +=\ distance;}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ distances[i]\ =\ distance;}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00134\ \ \ \ \ \}}
\DoxyCodeLine{00135\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!kmeans\_update@{kmeans\_update}}
\index{kmeans\_update@{kmeans\_update}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{kmeans\_update()}{kmeans\_update()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f} 
static void kmeans\+\_\+update (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structimage__block}{image\+\_\+block}} \&}]{blk}{, }\item[{unsigned int}]{texel\+\_\+count}{, }\item[{unsigned int}]{partition\+\_\+count}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{cluster\+\_\+centers}{\mbox{[}\+BLOCK\+\_\+\+MAX\+\_\+\+PARTITIONS\mbox{]}, }\item[{const uint8\+\_\+t}]{partition\+\_\+of\+\_\+texel}{\mbox{[}\+BLOCK\+\_\+\+MAX\+\_\+\+TEXELS\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Compute new cluster centers based on their center of gravity. 


\begin{DoxyParams}[1]{매개변수}
 & {\em blk} & The image block color data to compress. \\
\hline
 & {\em texel\+\_\+count} & The number of texels in the block. \\
\hline
 & {\em partition\+\_\+count} & The number of partitions in the block. \\
\hline
\mbox{\texttt{ out}}  & {\em cluster\+\_\+centers} & The new cluster center colors. \\
\hline
 & {\em partition\+\_\+of\+\_\+texel} & The partition assigned for each texel. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00210}{210}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00216\ \ \ \{}
\DoxyCodeLine{00217\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(texel\_count\ >\ 0);}
\DoxyCodeLine{00218\ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_a2cce51c3362aa0b5040437ac0e7f8969}{promise}}(partition\_count\ >\ 0);}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color\_sum[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}]\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4_a04b5f338012dab6be0b2bd7910fcbcae}{vfloat4::zero}}(),}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4_a04b5f338012dab6be0b2bd7910fcbcae}{vfloat4::zero}}(),}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4_a04b5f338012dab6be0b2bd7910fcbcae}{vfloat4::zero}}(),}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4_a04b5f338012dab6be0b2bd7910fcbcae}{vfloat4::zero}}()}
\DoxyCodeLine{00225\ \ \ \ \ \};}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ uint8\_t\ partition\_texel\_count[\mbox{\hyperlink{astcenc__internal_8h_a31f42bb3da7abe95be4b6960feead130}{BLOCK\_MAX\_PARTITIONS}}]\ \{\ 0\ \};}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ center-\/of-\/gravity\ in\ each\ cluster}}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ texel\_count;\ i++)}
\DoxyCodeLine{00231\ \ \ \ \ \{}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ uint8\_t\ partition\ =\ partition\_of\_texel[i];}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ color\_sum[partition]\ +=\ blk.\mbox{\hyperlink{structimage__block_af99de7d75e1e380b31d70d131509caa9}{texel}}(i);}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ partition\_texel\_count[partition]++;}
\DoxyCodeLine{00235\ \ \ \ \ \}}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ center\ of\ gravity\ to\ be\ the\ new\ cluster\ center}}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ partition\_count;\ i++)}
\DoxyCodeLine{00239\ \ \ \ \ \{}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ scale\ =\ 1.0f\ /\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(partition\_texel\_count[i]);}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ cluster\_centers[i]\ =\ color\_sum[i]\ *\ scale;}
\DoxyCodeLine{00242\ \ \ \ \ \}}
\DoxyCodeLine{00243\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!partition\_mismatch2@{partition\_mismatch2}}
\index{partition\_mismatch2@{partition\_mismatch2}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{partition\_mismatch2()}{partition\_mismatch2()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550} 
static uint8\+\_\+t partition\+\_\+mismatch2 (\begin{DoxyParamCaption}\item[{const uint64\+\_\+t}]{a}{\mbox{[}2\mbox{]}, }\item[{const uint64\+\_\+t}]{b}{\mbox{[}2\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Compute bit-\/mismatch for partitioning in 2-\/partition mode. 


\begin{DoxyParams}{매개변수}
{\em a} & The texel assignment bitvector for the block. \\
\hline
{\em b} & The texel assignment bitvector for the partition table.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The number of bit mismatches. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00253}{253}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00256\ \ \ \{}
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{keywordtype}{int}\ v1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[0]\ \string^\ b[0])\ +\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[1]\ \string^\ b[1]);}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keywordtype}{int}\ v2\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[0]\ \string^\ b[1])\ +\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[1]\ \string^\ b[0]);}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{comment}{//\ Divide\ by\ 2\ because\ XOR\ always\ counts\ errors\ twice,\ once\ when\ missing}}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{comment}{//\ in\ the\ expected\ position,\ and\ again\ when\ present\ in\ the\ wrong\ partition}}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(v1,\ v2)\ /\ 2);}
\DoxyCodeLine{00263\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=277pt]{astcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!partition\_mismatch3@{partition\_mismatch3}}
\index{partition\_mismatch3@{partition\_mismatch3}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{partition\_mismatch3()}{partition\_mismatch3()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37} 
static uint8\+\_\+t partition\+\_\+mismatch3 (\begin{DoxyParamCaption}\item[{const uint64\+\_\+t}]{a}{\mbox{[}3\mbox{]}, }\item[{const uint64\+\_\+t}]{b}{\mbox{[}3\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Compute bit-\/mismatch for partitioning in 3-\/partition mode. 


\begin{DoxyParams}{매개변수}
{\em a} & The texel assignment bitvector for the block. \\
\hline
{\em b} & The texel assignment bitvector for the partition table.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The number of bit mismatches. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00273}{273}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00276\ \ \ \{}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordtype}{int}\ p00\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[0]\ \string^\ b[0]);}
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{keywordtype}{int}\ p01\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[0]\ \string^\ b[1]);}
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keywordtype}{int}\ p02\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[0]\ \string^\ b[2]);}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keywordtype}{int}\ p10\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[1]\ \string^\ b[0]);}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keywordtype}{int}\ p11\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[1]\ \string^\ b[1]);}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{keywordtype}{int}\ p12\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[1]\ \string^\ b[2]);}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keywordtype}{int}\ p20\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[2]\ \string^\ b[0]);}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordtype}{int}\ p21\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[2]\ \string^\ b[1]);}
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keywordtype}{int}\ p22\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[2]\ \string^\ b[2]);}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keywordtype}{int}\ s0\ =\ p11\ +\ p22;}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keywordtype}{int}\ s1\ =\ p12\ +\ p21;}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keywordtype}{int}\ v0\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(s0,\ s1)\ +\ p00;}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keywordtype}{int}\ s2\ =\ p10\ +\ p22;}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordtype}{int}\ s3\ =\ p12\ +\ p20;}
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keywordtype}{int}\ v1\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(s2,\ s3)\ +\ p01;}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordtype}{int}\ s4\ =\ p10\ +\ p21;}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordtype}{int}\ s5\ =\ p11\ +\ p20;}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keywordtype}{int}\ v2\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(s4,\ s5)\ +\ p02;}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{comment}{//\ Divide\ by\ 2\ because\ XOR\ always\ counts\ errors\ twice,\ once\ when\ missing}}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{comment}{//\ in\ the\ expected\ position,\ and\ again\ when\ present\ in\ the\ wrong\ partition}}
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(v0,\ v1,\ v2)\ /\ 2);}
\DoxyCodeLine{00304\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=277pt]{astcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb}\index{astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}!partition\_mismatch4@{partition\_mismatch4}}
\index{partition\_mismatch4@{partition\_mismatch4}!astcenc\_find\_best\_partitioning.cpp@{astcenc\_find\_best\_partitioning.cpp}}
\doxysubsubsection{\texorpdfstring{partition\_mismatch4()}{partition\_mismatch4()}}
{\footnotesize\ttfamily \label{astcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb} 
static uint8\+\_\+t partition\+\_\+mismatch4 (\begin{DoxyParamCaption}\item[{const uint64\+\_\+t}]{a}{\mbox{[}4\mbox{]}, }\item[{const uint64\+\_\+t}]{b}{\mbox{[}4\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Compute bit-\/mismatch for partitioning in 4-\/partition mode. 


\begin{DoxyParams}{매개변수}
{\em a} & The texel assignment bitvector for the block. \\
\hline
{\em b} & The texel assignment bitvector for the partition table.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The number of bit mismatches. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source}{astcenc\+\_\+find\+\_\+best\+\_\+partitioning.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__find__best__partitioning_8cpp_source_l00314}{314}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00317\ \ \ \{}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keywordtype}{int}\ p00\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[0]\ \string^\ b[0]);}
\DoxyCodeLine{00319\ \ \ \ \ \textcolor{keywordtype}{int}\ p01\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[0]\ \string^\ b[1]);}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keywordtype}{int}\ p02\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[0]\ \string^\ b[2]);}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keywordtype}{int}\ p03\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[0]\ \string^\ b[3]);}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordtype}{int}\ p10\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[1]\ \string^\ b[0]);}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{keywordtype}{int}\ p11\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[1]\ \string^\ b[1]);}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keywordtype}{int}\ p12\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[1]\ \string^\ b[2]);}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keywordtype}{int}\ p13\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[1]\ \string^\ b[3]);}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keywordtype}{int}\ p20\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[2]\ \string^\ b[0]);}
\DoxyCodeLine{00329\ \ \ \ \ \textcolor{keywordtype}{int}\ p21\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[2]\ \string^\ b[1]);}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keywordtype}{int}\ p22\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[2]\ \string^\ b[2]);}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordtype}{int}\ p23\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[2]\ \string^\ b[3]);}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{keywordtype}{int}\ p30\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[3]\ \string^\ b[0]);}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordtype}{int}\ p31\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[3]\ \string^\ b[1]);}
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keywordtype}{int}\ p32\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[3]\ \string^\ b[2]);}
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordtype}{int}\ p33\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a652a0112f173bddee3a84a27eb679fda}{popcount}}(a[3]\ \string^\ b[3]);}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{keywordtype}{int}\ mx23\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(p22\ +\ p33,\ p23\ +\ p32);}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{keywordtype}{int}\ mx13\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(p21\ +\ p33,\ p23\ +\ p31);}
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{keywordtype}{int}\ mx12\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(p21\ +\ p32,\ p22\ +\ p31);}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{keywordtype}{int}\ mx03\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(p20\ +\ p33,\ p23\ +\ p30);}
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keywordtype}{int}\ mx02\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(p20\ +\ p32,\ p22\ +\ p30);}
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordtype}{int}\ mx01\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(p21\ +\ p30,\ p20\ +\ p31);}
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keywordtype}{int}\ v0\ =\ p00\ +\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(p11\ +\ mx23,\ p12\ +\ mx13,\ p13\ +\ mx12);}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{keywordtype}{int}\ v1\ =\ p01\ +\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(p10\ +\ mx23,\ p12\ +\ mx03,\ p13\ +\ mx02);}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{keywordtype}{int}\ v2\ =\ p02\ +\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(p11\ +\ mx03,\ p10\ +\ mx13,\ p13\ +\ mx01);}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keywordtype}{int}\ v3\ =\ p03\ +\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(p11\ +\ mx02,\ p12\ +\ mx01,\ p10\ +\ mx12);}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{comment}{//\ Divide\ by\ 2\ because\ XOR\ always\ counts\ errors\ twice,\ once\ when\ missing}}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{comment}{//\ in\ the\ expected\ position,\ and\ again\ when\ present\ in\ the\ wrong\ partition}}
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(v0,\ v1,\ v2,\ v3)\ /\ 2);}
\DoxyCodeLine{00353\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=277pt]{astcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb_icgraph}
\end{center}
\end{figure}
