\doxysection{C\+:/\+Users/inhyu/\+One\+Drive/바탕 화면/랩실 내용/astc-\/encoder-\/main/\+Source/astcenc\+\_\+color\+\_\+quantize.cpp 파일 참조}
\hypertarget{astcenc__color__quantize_8cpp}{}\label{astcenc__color__quantize_8cpp}\index{C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-\/encoder-\/main/Source/astcenc\_color\_quantize.cpp@{C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-\/encoder-\/main/Source/astcenc\_color\_quantize.cpp}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include "{}astcenc\+\_\+internal.\+h"{}}\newline
astcenc\+\_\+color\+\_\+quantize.\+cpp에 대한 include 의존 그래프
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp__incl}
\end{center}
\end{figure}
\doxysubsubsection*{함수}
\begin{DoxyCompactItemize}
\item 
static float \mbox{\hyperlink{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec}{get\+\_\+rgba\+\_\+encoding\+\_\+error}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} uquant0, \mbox{\hyperlink{structvfloat4}{vfloat4}} uquant1, \mbox{\hyperlink{structvint4}{vint4}} quant0, \mbox{\hyperlink{structvint4}{vint4}} quant1)
\begin{DoxyCompactList}\small\item\em Functions for color quantization. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\+\_\+color}} (\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level, int value)
\begin{DoxyCompactList}\small\item\em Determine the quantized value given a quantization level. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{structvint4}{vint4}} \mbox{\hyperlink{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092}{quant\+\_\+color3}} (\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level, \mbox{\hyperlink{structvint4}{vint4}} value)
\begin{DoxyCompactList}\small\item\em Determine the quantized value given a quantization level. \end{DoxyCompactList}\item 
static uint8\+\_\+t \mbox{\hyperlink{astcenc__color__quantize_8cpp_a8e45e8a7813a6573d619b6fc79dc0cbe}{quant\+\_\+color}} (\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level, int value, float valuef)
\begin{DoxyCompactList}\small\item\em Determine the quantized value given a quantization level and residual. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{structvint4}{vint4}} \mbox{\hyperlink{astcenc__color__quantize_8cpp_affbf6defc49c5c213d7a7409c219a557}{quant\+\_\+color3}} (\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level, \mbox{\hyperlink{structvint4}{vint4}} value, \mbox{\hyperlink{structvfloat4}{vfloat4}} valuef)
\begin{DoxyCompactList}\small\item\em Determine the quantized value given a quantization level and residual. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_aad6197b2a3f7eb3048a81f24e5f9c7b3}{quantize\+\_\+rgb}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvint4}{vint4}} \&color0\+\_\+out, \mbox{\hyperlink{structvint4}{vint4}} \&color1\+\_\+out, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize an LDR RGB color. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_aa1eba2920aec0d82d8b1f66ccd3a1044}{quantize\+\_\+rgba}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvint4}{vint4}} \&color0\+\_\+out, \mbox{\hyperlink{structvint4}{vint4}} \&color1\+\_\+out, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize an LDR RGBA color. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{astcenc__color__quantize_8cpp_a1a4ffac105268d9e7ac1058b1b2ad542}{try\+\_\+quantize\+\_\+rgb\+\_\+blue\+\_\+contract}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvint4}{vint4}} \&color0\+\_\+out, \mbox{\hyperlink{structvint4}{vint4}} \&color1\+\_\+out, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Try to quantize an LDR RGB color using blue-\/contraction. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{astcenc__color__quantize_8cpp_ab09b68ff45a1b287f05fd2428805bbc9}{try\+\_\+quantize\+\_\+rgba\+\_\+blue\+\_\+contract}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvint4}{vint4}} \&color0\+\_\+out, \mbox{\hyperlink{structvint4}{vint4}} \&color1\+\_\+out, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Try to quantize an LDR RGBA color using blue-\/contraction. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{astcenc__color__quantize_8cpp_a6b7ee442b1e9da4ac693000c4f805c7b}{try\+\_\+quantize\+\_\+rgb\+\_\+delta}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvint4}{vint4}} \&color0\+\_\+out, \mbox{\hyperlink{structvint4}{vint4}} \&color1\+\_\+out, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Try to quantize an LDR RGB color using delta encoding. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{astcenc__color__quantize_8cpp_aedceeace1416ce23b9a934ce87f96c3c}{try\+\_\+quantize\+\_\+rgb\+\_\+delta\+\_\+blue\+\_\+contract}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvint4}{vint4}} \&color0\+\_\+out, \mbox{\hyperlink{structvint4}{vint4}} \&color1\+\_\+out, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Try to quantize an LDR RGB color using delta encoding and blue-\/contraction. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{astcenc__color__quantize_8cpp_a4390447f4e4f3f2355c2381228d2e5c2}{try\+\_\+quantize\+\_\+alpha\+\_\+delta}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvint4}{vint4}} \&color0\+\_\+out, \mbox{\hyperlink{structvint4}{vint4}} \&color1\+\_\+out, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Try to quantize an LDR A color using delta encoding. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{astcenc__color__quantize_8cpp_a54914cb063a3e14eaef9d6432ed792d6}{try\+\_\+quantize\+\_\+luminance\+\_\+alpha\+\_\+delta}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, uint8\+\_\+t output\mbox{[}4\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Try to quantize an LDR LA color using delta encoding. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{astcenc__color__quantize_8cpp_af4d400b2fd9235d069b8e71966cb1246}{try\+\_\+quantize\+\_\+rgba\+\_\+delta}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvint4}{vint4}} \&color0\+\_\+out, \mbox{\hyperlink{structvint4}{vint4}} \&color1\+\_\+out, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Try to quantize an LDR RGBA color using delta encoding. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{astcenc__color__quantize_8cpp_a6e41c12d083ec9f3d9028ea35f13f18f}{try\+\_\+quantize\+\_\+rgba\+\_\+delta\+\_\+blue\+\_\+contract}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvint4}{vint4}} \&color0\+\_\+out, \mbox{\hyperlink{structvint4}{vint4}} \&color1\+\_\+out, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Try to quantize an LDR RGBA color using delta and blue contract encoding. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_a9a0a7e003d1ea68f9b48c28e406ad1ad}{quantize\+\_\+rgbs}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color, uint8\+\_\+t output\mbox{[}4\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize an LDR RGB color using scale encoding. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_a2d4a8db93c0ebf03b3b6dc23b292428f}{quantize\+\_\+rgbs\+\_\+alpha}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvfloat4}{vfloat4}} color, uint8\+\_\+t output\mbox{[}6\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize an LDR RGBA color using scale encoding. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_ae9901a3923b424bef4509df064efd91e}{quantize\+\_\+luminance}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, uint8\+\_\+t output\mbox{[}2\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize a LDR L color. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_a847eef8e87233ecad7a553dfa1dcd4d5}{quantize\+\_\+luminance\+\_\+alpha}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, uint8\+\_\+t output\mbox{[}4\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize a LDR LA color. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_ae0e7daa2cc696baa52756e0c35d63138}{quantize\+\_\+and\+\_\+unquantize\+\_\+retain\+\_\+top\+\_\+two\+\_\+bits}} (\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level, uint8\+\_\+t value, uint8\+\_\+t \&quant\+\_\+value)
\begin{DoxyCompactList}\small\item\em Quantize and unquantize a value ensuring top two bits are the same. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857}{quantize\+\_\+and\+\_\+unquantize\+\_\+retain\+\_\+top\+\_\+four\+\_\+bits}} (\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level, uint8\+\_\+t value, uint8\+\_\+t \&quant\+\_\+value)
\begin{DoxyCompactList}\small\item\em Quantize and unquantize a value ensuring top four bits are the same. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_a8c60d84b27b5bf6a95eafa1b86497235}{quantize\+\_\+hdr\+\_\+rgbo}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color, uint8\+\_\+t output\mbox{[}4\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize a HDR RGB color using RGB + offset. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_a018b17fdce9e0fb576249da80bfc90a2}{quantize\+\_\+hdr\+\_\+rgb}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, uint8\+\_\+t output\mbox{[}6\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize a HDR RGB color using direct RGB encoding. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_acc5fc16efff8422faf77e47bc55ab0ad}{quantize\+\_\+hdr\+\_\+rgb\+\_\+ldr\+\_\+alpha}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, uint8\+\_\+t output\mbox{[}8\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize a HDR RGB + LDR A color using direct RGBA encoding. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_ad5fb9a4bf5ae21916bc6c634c7f789f8}{quantize\+\_\+hdr\+\_\+luminance\+\_\+large\+\_\+range}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, uint8\+\_\+t output\mbox{[}2\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize a HDR L color using the large range encoding. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{astcenc__color__quantize_8cpp_a105c509260a154870ee3d34d1a336c60}{try\+\_\+quantize\+\_\+hdr\+\_\+luminance\+\_\+small\+\_\+range}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, uint8\+\_\+t output\mbox{[}2\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize a HDR L color using the small range encoding. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_a4c475fce8f14e7437cc348b0319a1365}{quantize\+\_\+hdr\+\_\+alpha}} (float alpha0, float alpha1, uint8\+\_\+t output\mbox{[}2\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize a HDR A color using either delta or direct RGBA encoding. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{astcenc__color__quantize_8cpp_a968dafc89b796ea5218a690b22c39911}{quantize\+\_\+hdr\+\_\+rgb\+\_\+alpha}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, uint8\+\_\+t output\mbox{[}8\mbox{]}, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Quantize a HDR RGBA color using either delta or direct RGBA encoding. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{astcenc__color__quantize_8cpp_ab9f9b564c57688af1f8fc1d9e000af81}{pack\+\_\+color\+\_\+endpoints}} (\mbox{\hyperlink{structvfloat4}{vfloat4}} color0, \mbox{\hyperlink{structvfloat4}{vfloat4}} color1, \mbox{\hyperlink{structvfloat4}{vfloat4}} rgbs\+\_\+color, \mbox{\hyperlink{structvfloat4}{vfloat4}} rgbo\+\_\+color, int format, uint8\+\_\+t \texorpdfstring{$\ast$}{*}output, \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}} quant\+\_\+level)
\begin{DoxyCompactList}\small\item\em Pack a single pair of color endpoints as effectively as possible. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{함수 문서화}
\Hypertarget{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!get\_rgba\_encoding\_error@{get\_rgba\_encoding\_error}}
\index{get\_rgba\_encoding\_error@{get\_rgba\_encoding\_error}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{get\_rgba\_encoding\_error()}{get\_rgba\_encoding\_error()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec} 
static float get\+\_\+rgba\+\_\+encoding\+\_\+error (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{uquant0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{uquant1}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}}}]{quant0}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}}}]{quant1}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Functions for color quantization. 

The design of the color quantization functionality requires the caller to use higher level error analysis to determine the base encoding that should be used. This earlier analysis will select the basic type of the endpoint that should be used\+: \begin{DoxyVerb}* Mode: LDR or HDR
* Quantization level
* Channel count: L, LA, RGB, or RGBA
* Endpoint 2 type: Direct color endcode, or scaled from endpoint 1.
\end{DoxyVerb}
 However, this leaves a number of decisions about exactly how to pack the endpoints open. In particular we need to determine if blue contraction can be used, or/and if delta encoding can be used. If they can be applied these will allow us to maintain higher precision in the endpoints without needing additional storage.

Compute the error of an LDR RGB or RGBA encoding.


\begin{DoxyParams}{매개변수}
{\em uquant0} & The original endpoint 0 color. \\
\hline
{\em uquant1} & The original endpoint 1 color. \\
\hline
{\em quant0} & The unpacked quantized endpoint 0 color. \\
\hline
{\em quant1} & The unpacked quantized endpoint 1 color.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The MSE of the encoding. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00053}{53}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00058\ \ \ \{}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ error0\ =\ uquant0\ -\/\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a3a2ce0fb403294db7fe126a6b3e87ab7}{int\_to\_float}}(quant0);}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ error1\ =\ uquant1\ -\/\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a3a2ce0fb403294db7fe126a6b3e87ab7}{int\_to\_float}}(quant1);}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_aacd26478e4fe1f97a5d47e8adaacc898}{hadd\_s}}(error0\ *\ error0\ +\ error1\ *\ error1);}
\DoxyCodeLine{00062\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=303pt]{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_ab9f9b564c57688af1f8fc1d9e000af81}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!pack\_color\_endpoints@{pack\_color\_endpoints}}
\index{pack\_color\_endpoints@{pack\_color\_endpoints}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{pack\_color\_endpoints()}{pack\_color\_endpoints()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_ab9f9b564c57688af1f8fc1d9e000af81} 
uint8\+\_\+t pack\+\_\+color\+\_\+endpoints (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{rgbs\+\_\+color}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{rgbo\+\_\+color}{, }\item[{int}]{format}{, }\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{output}{, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})}



Pack a single pair of color endpoints as effectively as possible. 

The user requests a base color endpoint mode in {\ttfamily format}, but the quantizer may choose a delta-\/based representation. It will report back the format variant it actually used.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint for absolute endpoint pairs. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint for absolute endpoint pairs. \\
\hline
 & {\em rgbs\+\_\+color} & The input unquantized RGBS variant endpoint for same chroma endpoints. \\
\hline
 & {\em rgbo\+\_\+color} & The input unquantized RGBS variant endpoint for HDR endpoints. \\
\hline
 & {\em format} & The desired base format. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output storage for the quantized colors/ \\
\hline
 & {\em quant\+\_\+level} & The quantization level requested.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The actual endpoint mode used. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l01909}{1909}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{01917\ \ \ \{}
\DoxyCodeLine{01918\ \ \ \ \ assert(\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a}{QUANT\_6}}\ <=\ quant\_level\ \&\&\ quant\_level\ <=\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f}{QUANT\_256}});}
\DoxyCodeLine{01919\ }
\DoxyCodeLine{01920\ \ \ \ \ \textcolor{comment}{//\ Clamp\ colors\ to\ a\ valid\ LDR\ range}}
\DoxyCodeLine{01921\ \ \ \ \ \textcolor{comment}{//\ Note\ that\ HDR\ has\ a\ lower\ max,\ handled\ in\ the\ conversion\ functions}}
\DoxyCodeLine{01922\ \ \ \ \ color0\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(0.0f,\ 65535.0f,\ color0);}
\DoxyCodeLine{01923\ \ \ \ \ color1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(0.0f,\ 65535.0f,\ color1);}
\DoxyCodeLine{01924\ }
\DoxyCodeLine{01925\ \ \ \ \ \textcolor{comment}{//\ Pre-\/scale\ the\ LDR\ value\ we\ need\ to\ the\ 0-\/255\ quantizable\ range}}
\DoxyCodeLine{01926\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color0\_ldr\ =\ color0\ *\ (1.0f\ \ /\ 257.0f);}
\DoxyCodeLine{01927\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color1\_ldr\ =\ color1\ *\ (1.0f\ \ /\ 257.0f);}
\DoxyCodeLine{01928\ }
\DoxyCodeLine{01929\ \ \ \ \ uint8\_t\ retval\ =\ 0;}
\DoxyCodeLine{01930\ \ \ \ \ \textcolor{keywordtype}{float}\ best\_error\ =\ \mbox{\hyperlink{astcenc__internal_8h_aaa341023bf98401423daebc6795e2c83}{ERROR\_CALC\_DEFAULT}};}
\DoxyCodeLine{01931\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0\_out,\ color1\_out;}
\DoxyCodeLine{01932\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0\_out2,\ color1\_out2;}
\DoxyCodeLine{01933\ }
\DoxyCodeLine{01934\ \ \ \ \ \textcolor{keywordflow}{switch}\ (format)}
\DoxyCodeLine{01935\ \ \ \ \ \{}
\DoxyCodeLine{01936\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba13dd2b80554659b29a91a1749a1d90a9}{FMT\_RGB}}:}
\DoxyCodeLine{01937\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (quant\_level\ <=\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a0bd8f295a3d4296650a21f4952ba1c47}{QUANT\_160}})}
\DoxyCodeLine{01938\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01939\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__color__quantize_8cpp_aedceeace1416ce23b9a934ce87f96c3c}{try\_quantize\_rgb\_delta\_blue\_contract}}(color0\_ldr,\ color1\_ldr,\ color0\_out,\ color1\_out,\ quant\_level))}
\DoxyCodeLine{01940\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01941\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0\_unpack;}
\DoxyCodeLine{01942\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1\_unpack;}
\DoxyCodeLine{01943\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__unquantize_8cpp_abb9e5b31fe822e7e3ab0757f1989a321}{rgba\_delta\_unpack}}(color0\_out,\ color1\_out,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{01944\ }
\DoxyCodeLine{01945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba6e77da482802834c87ae3065effbcef5}{FMT\_RGB\_DELTA}};}
\DoxyCodeLine{01946\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ best\_error\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec}{get\_rgba\_encoding\_error}}(color0\_ldr,\ color1\_ldr,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{01947\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01948\ }
\DoxyCodeLine{01949\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__color__quantize_8cpp_a6b7ee442b1e9da4ac693000c4f805c7b}{try\_quantize\_rgb\_delta}}(color0\_ldr,\ color1\_ldr,\ color0\_out2,\ color1\_out2,\ quant\_level))}
\DoxyCodeLine{01950\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01951\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0\_unpack;}
\DoxyCodeLine{01952\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1\_unpack;}
\DoxyCodeLine{01953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__unquantize_8cpp_abb9e5b31fe822e7e3ab0757f1989a321}{rgba\_delta\_unpack}}(color0\_out2,\ color1\_out2,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{01954\ }
\DoxyCodeLine{01955\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ error\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec}{get\_rgba\_encoding\_error}}(color0\_ldr,\ color1\_ldr,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{01956\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error\ <\ best\_error)}
\DoxyCodeLine{01957\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01958\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba6e77da482802834c87ae3065effbcef5}{FMT\_RGB\_DELTA}};}
\DoxyCodeLine{01959\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ best\_error\ =\ error;}
\DoxyCodeLine{01960\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color0\_out\ =\ color0\_out2;}
\DoxyCodeLine{01961\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\_out\ =\ color1\_out2;}
\DoxyCodeLine{01962\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01963\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01964\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01965\ }
\DoxyCodeLine{01966\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (quant\_level\ <\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f}{QUANT\_256}})}
\DoxyCodeLine{01967\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01968\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__color__quantize_8cpp_a1a4ffac105268d9e7ac1058b1b2ad542}{try\_quantize\_rgb\_blue\_contract}}(color0\_ldr,\ color1\_ldr,\ color0\_out2,\ color1\_out2,\ quant\_level))}
\DoxyCodeLine{01969\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01970\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0\_unpack;}
\DoxyCodeLine{01971\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1\_unpack;}
\DoxyCodeLine{01972\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__unquantize_8cpp_aa8f902332b94b93405c7496b1b3838ba}{rgba\_unpack}}(color0\_out2,\ color1\_out2,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{01973\ }
\DoxyCodeLine{01974\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ error\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec}{get\_rgba\_encoding\_error}}(color0\_ldr,\ color1\_ldr,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{01975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error\ <\ best\_error)}
\DoxyCodeLine{01976\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01977\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba13dd2b80554659b29a91a1749a1d90a9}{FMT\_RGB}};}
\DoxyCodeLine{01978\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ best\_error\ =\ error;}
\DoxyCodeLine{01979\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color0\_out\ =\ color0\_out2;}
\DoxyCodeLine{01980\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\_out\ =\ color1\_out2;}
\DoxyCodeLine{01981\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01982\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01983\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01984\ }
\DoxyCodeLine{01985\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01986\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_aad6197b2a3f7eb3048a81f24e5f9c7b3}{quantize\_rgb}}(color0\_ldr,\ color1\_ldr,\ color0\_out2,\ color1\_out2,\ quant\_level);}
\DoxyCodeLine{01987\ }
\DoxyCodeLine{01988\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0\_unpack;}
\DoxyCodeLine{01989\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1\_unpack;}
\DoxyCodeLine{01990\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__unquantize_8cpp_aa8f902332b94b93405c7496b1b3838ba}{rgba\_unpack}}(color0\_out2,\ color1\_out2,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{01991\ }
\DoxyCodeLine{01992\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ error\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec}{get\_rgba\_encoding\_error}}(color0\_ldr,\ color1\_ldr,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{01993\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error\ <\ best\_error)}
\DoxyCodeLine{01994\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01995\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ retval\ =\ \ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba13dd2b80554659b29a91a1749a1d90a9}{FMT\_RGB}};}
\DoxyCodeLine{01996\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color0\_out\ =\ color0\_out2;}
\DoxyCodeLine{01997\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\_out\ =\ color1\_out2;}
\DoxyCodeLine{01998\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01999\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02000\ }
\DoxyCodeLine{02001\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ Can\ we\ vectorize\ this?}}
\DoxyCodeLine{02002\ \ \ \ \ \ \ \ \ output[0]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color0\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<0>());}
\DoxyCodeLine{02003\ \ \ \ \ \ \ \ \ output[1]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color1\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<0>());}
\DoxyCodeLine{02004\ \ \ \ \ \ \ \ \ output[2]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color0\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<1>());}
\DoxyCodeLine{02005\ \ \ \ \ \ \ \ \ output[3]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color1\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<1>());}
\DoxyCodeLine{02006\ \ \ \ \ \ \ \ \ output[4]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color0\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<2>());}
\DoxyCodeLine{02007\ \ \ \ \ \ \ \ \ output[5]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color1\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<2>());}
\DoxyCodeLine{02008\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02009\ }
\DoxyCodeLine{02010\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4baeba2a33f74db0bf71dccc86a6f50b509}{FMT\_RGBA}}:}
\DoxyCodeLine{02011\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (quant\_level\ <=\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a0bd8f295a3d4296650a21f4952ba1c47}{QUANT\_160}})}
\DoxyCodeLine{02012\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02013\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__color__quantize_8cpp_a6e41c12d083ec9f3d9028ea35f13f18f}{try\_quantize\_rgba\_delta\_blue\_contract}}(color0\_ldr,\ color1\_ldr,\ color0\_out,\ color1\_out,\ quant\_level))}
\DoxyCodeLine{02014\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02015\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0\_unpack;}
\DoxyCodeLine{02016\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1\_unpack;}
\DoxyCodeLine{02017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__unquantize_8cpp_abb9e5b31fe822e7e3ab0757f1989a321}{rgba\_delta\_unpack}}(color0\_out,\ color1\_out,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{02018\ }
\DoxyCodeLine{02019\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba8ecdccead56ce7613bf5b7993c7fa23f}{FMT\_RGBA\_DELTA}};}
\DoxyCodeLine{02020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ best\_error\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec}{get\_rgba\_encoding\_error}}(color0\_ldr,\ color1\_ldr,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{02021\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02022\ }
\DoxyCodeLine{02023\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__color__quantize_8cpp_af4d400b2fd9235d069b8e71966cb1246}{try\_quantize\_rgba\_delta}}(color0\_ldr,\ color1\_ldr,\ color0\_out2,\ color1\_out2,\ quant\_level))}
\DoxyCodeLine{02024\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0\_unpack;}
\DoxyCodeLine{02026\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1\_unpack;}
\DoxyCodeLine{02027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__unquantize_8cpp_abb9e5b31fe822e7e3ab0757f1989a321}{rgba\_delta\_unpack}}(color0\_out2,\ color1\_out2,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{02028\ }
\DoxyCodeLine{02029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ error\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec}{get\_rgba\_encoding\_error}}(color0\_ldr,\ color1\_ldr,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{02030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error\ <\ best\_error)}
\DoxyCodeLine{02031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba8ecdccead56ce7613bf5b7993c7fa23f}{FMT\_RGBA\_DELTA}};}
\DoxyCodeLine{02033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ best\_error\ =\ error;}
\DoxyCodeLine{02034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color0\_out\ =\ color0\_out2;}
\DoxyCodeLine{02035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\_out\ =\ color1\_out2;}
\DoxyCodeLine{02036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02037\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02038\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02039\ }
\DoxyCodeLine{02040\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (quant\_level\ <\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f}{QUANT\_256}})}
\DoxyCodeLine{02041\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02042\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__color__quantize_8cpp_ab09b68ff45a1b287f05fd2428805bbc9}{try\_quantize\_rgba\_blue\_contract}}(color0\_ldr,\ color1\_ldr,\ color0\_out2,\ color1\_out2,\ quant\_level))}
\DoxyCodeLine{02043\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0\_unpack;}
\DoxyCodeLine{02045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1\_unpack;}
\DoxyCodeLine{02046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__unquantize_8cpp_aa8f902332b94b93405c7496b1b3838ba}{rgba\_unpack}}(color0\_out2,\ color1\_out2,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{02047\ }
\DoxyCodeLine{02048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ error\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec}{get\_rgba\_encoding\_error}}(color0\_ldr,\ color1\_ldr,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{02049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error\ <\ best\_error)}
\DoxyCodeLine{02050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4baeba2a33f74db0bf71dccc86a6f50b509}{FMT\_RGBA}};}
\DoxyCodeLine{02052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ best\_error\ =\ error;}
\DoxyCodeLine{02053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color0\_out\ =\ color0\_out2;}
\DoxyCodeLine{02054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\_out\ =\ color1\_out2;}
\DoxyCodeLine{02055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02056\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02057\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02058\ }
\DoxyCodeLine{02059\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02060\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_aa1eba2920aec0d82d8b1f66ccd3a1044}{quantize\_rgba}}(color0\_ldr,\ color1\_ldr,\ color0\_out2,\ color1\_out2,\ quant\_level);}
\DoxyCodeLine{02061\ }
\DoxyCodeLine{02062\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0\_unpack;}
\DoxyCodeLine{02063\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1\_unpack;}
\DoxyCodeLine{02064\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__unquantize_8cpp_aa8f902332b94b93405c7496b1b3838ba}{rgba\_unpack}}(color0\_out2,\ color1\_out2,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{02065\ }
\DoxyCodeLine{02066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ error\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a7175b796b451809bf4d85bb291cb7bec}{get\_rgba\_encoding\_error}}(color0\_ldr,\ color1\_ldr,\ color0\_unpack,\ color1\_unpack);}
\DoxyCodeLine{02067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error\ <\ best\_error)}
\DoxyCodeLine{02068\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ retval\ =\ \ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4baeba2a33f74db0bf71dccc86a6f50b509}{FMT\_RGBA}};}
\DoxyCodeLine{02070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color0\_out\ =\ color0\_out2;}
\DoxyCodeLine{02071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\_out\ =\ color1\_out2;}
\DoxyCodeLine{02072\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02073\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02074\ }
\DoxyCodeLine{02075\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO:\ Can\ we\ vectorize\ this?}}
\DoxyCodeLine{02076\ \ \ \ \ \ \ \ \ output[0]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color0\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<0>());}
\DoxyCodeLine{02077\ \ \ \ \ \ \ \ \ output[1]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color1\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<0>());}
\DoxyCodeLine{02078\ \ \ \ \ \ \ \ \ output[2]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color0\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<1>());}
\DoxyCodeLine{02079\ \ \ \ \ \ \ \ \ output[3]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color1\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<1>());}
\DoxyCodeLine{02080\ \ \ \ \ \ \ \ \ output[4]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color0\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<2>());}
\DoxyCodeLine{02081\ \ \ \ \ \ \ \ \ output[5]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color1\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<2>());}
\DoxyCodeLine{02082\ \ \ \ \ \ \ \ \ output[6]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color0\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<3>());}
\DoxyCodeLine{02083\ \ \ \ \ \ \ \ \ output[7]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(color1\_out.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<3>());}
\DoxyCodeLine{02084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02085\ }
\DoxyCodeLine{02086\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba878884827236165e75e7989a8e6f7757}{FMT\_RGB\_SCALE}}:}
\DoxyCodeLine{02087\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a9a0a7e003d1ea68f9b48c28e406ad1ad}{quantize\_rgbs}}(rgbs\_color,\ output,\ quant\_level);}
\DoxyCodeLine{02088\ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba878884827236165e75e7989a8e6f7757}{FMT\_RGB\_SCALE}};}
\DoxyCodeLine{02089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02090\ }
\DoxyCodeLine{02091\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba39d39129318d58a44698af7789887045}{FMT\_HDR\_RGB\_SCALE}}:}
\DoxyCodeLine{02092\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a8c60d84b27b5bf6a95eafa1b86497235}{quantize\_hdr\_rgbo}}(rgbo\_color,\ output,\ quant\_level);}
\DoxyCodeLine{02093\ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba39d39129318d58a44698af7789887045}{FMT\_HDR\_RGB\_SCALE}};}
\DoxyCodeLine{02094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02095\ }
\DoxyCodeLine{02096\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4baf476d1d6ba5e210a3565182063c3d5a7}{FMT\_HDR\_RGB}}:}
\DoxyCodeLine{02097\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a018b17fdce9e0fb576249da80bfc90a2}{quantize\_hdr\_rgb}}(color0,\ color1,\ output,\ quant\_level);}
\DoxyCodeLine{02098\ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4baf476d1d6ba5e210a3565182063c3d5a7}{FMT\_HDR\_RGB}};}
\DoxyCodeLine{02099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02100\ }
\DoxyCodeLine{02101\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba0fad0c63bb0dafc3f4146915dcff64ba}{FMT\_RGB\_SCALE\_ALPHA}}:}
\DoxyCodeLine{02102\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a2d4a8db93c0ebf03b3b6dc23b292428f}{quantize\_rgbs\_alpha}}(color0\_ldr,\ color1\_ldr,\ rgbs\_color,\ output,\ quant\_level);}
\DoxyCodeLine{02103\ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba0fad0c63bb0dafc3f4146915dcff64ba}{FMT\_RGB\_SCALE\_ALPHA}};}
\DoxyCodeLine{02104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02105\ }
\DoxyCodeLine{02106\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba8ea21ac0ef8d1804ef851a8d990480e5}{FMT\_HDR\_LUMINANCE\_SMALL\_RANGE}}:}
\DoxyCodeLine{02107\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba47ede19ba8704c3c0494b1c8143d8db0}{FMT\_HDR\_LUMINANCE\_LARGE\_RANGE}}:}
\DoxyCodeLine{02108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__color__quantize_8cpp_a105c509260a154870ee3d34d1a336c60}{try\_quantize\_hdr\_luminance\_small\_range}}(color0,\ color1,\ output,\ quant\_level))}
\DoxyCodeLine{02109\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02110\ \ \ \ \ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba8ea21ac0ef8d1804ef851a8d990480e5}{FMT\_HDR\_LUMINANCE\_SMALL\_RANGE}};}
\DoxyCodeLine{02111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02112\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02113\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ad5fb9a4bf5ae21916bc6c634c7f789f8}{quantize\_hdr\_luminance\_large\_range}}(color0,\ color1,\ output,\ quant\_level);}
\DoxyCodeLine{02114\ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba47ede19ba8704c3c0494b1c8143d8db0}{FMT\_HDR\_LUMINANCE\_LARGE\_RANGE}};}
\DoxyCodeLine{02115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02116\ }
\DoxyCodeLine{02117\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4baf29afed4fcc815780d85789b8a095a22}{FMT\_LUMINANCE}}:}
\DoxyCodeLine{02118\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ae9901a3923b424bef4509df064efd91e}{quantize\_luminance}}(color0\_ldr,\ color1\_ldr,\ output,\ quant\_level);}
\DoxyCodeLine{02119\ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4baf29afed4fcc815780d85789b8a095a22}{FMT\_LUMINANCE}};}
\DoxyCodeLine{02120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02121\ }
\DoxyCodeLine{02122\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba6aa2cddee1e7329a888c3fa729cb66f1}{FMT\_LUMINANCE\_ALPHA}}:}
\DoxyCodeLine{02123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (quant\_level\ <=\ 18)}
\DoxyCodeLine{02124\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02125\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__color__quantize_8cpp_a54914cb063a3e14eaef9d6432ed792d6}{try\_quantize\_luminance\_alpha\_delta}}(color0\_ldr,\ color1\_ldr,\ output,\ quant\_level))}
\DoxyCodeLine{02126\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba395fe8fada5b5ade35ef4b6e36b7f7f6}{FMT\_LUMINANCE\_ALPHA\_DELTA}};}
\DoxyCodeLine{02128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02129\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02130\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02131\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a847eef8e87233ecad7a553dfa1dcd4d5}{quantize\_luminance\_alpha}}(color0\_ldr,\ color1\_ldr,\ output,\ quant\_level);}
\DoxyCodeLine{02132\ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba6aa2cddee1e7329a888c3fa729cb66f1}{FMT\_LUMINANCE\_ALPHA}};}
\DoxyCodeLine{02133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02134\ }
\DoxyCodeLine{02135\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4bab4f3b7d71ebdba2ff3cf00ddde4f40b2}{FMT\_HDR\_RGB\_LDR\_ALPHA}}:}
\DoxyCodeLine{02136\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_acc5fc16efff8422faf77e47bc55ab0ad}{quantize\_hdr\_rgb\_ldr\_alpha}}(color0,\ color1,\ output,\ quant\_level);}
\DoxyCodeLine{02137\ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4bab4f3b7d71ebdba2ff3cf00ddde4f40b2}{FMT\_HDR\_RGB\_LDR\_ALPHA}};}
\DoxyCodeLine{02138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02139\ }
\DoxyCodeLine{02140\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba2eedd102b26e73b95994d07cb26d9602}{FMT\_HDR\_RGBA}}:}
\DoxyCodeLine{02141\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a968dafc89b796ea5218a690b22c39911}{quantize\_hdr\_rgb\_alpha}}(color0,\ color1,\ output,\ quant\_level);}
\DoxyCodeLine{02142\ \ \ \ \ \ \ \ \ retval\ =\ \mbox{\hyperlink{astcenc__internal_8h_a961094c83b018837fe95bef26926cb4ba2eedd102b26e73b95994d07cb26d9602}{FMT\_HDR\_RGBA}};}
\DoxyCodeLine{02143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02144\ \ \ \ \ \}}
\DoxyCodeLine{02145\ }
\DoxyCodeLine{02146\ \ \ \ \ \textcolor{keywordflow}{return}\ retval;}
\DoxyCodeLine{02147\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{astcenc__color__quantize_8cpp_ab9f9b564c57688af1f8fc1d9e000af81_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_ab9f9b564c57688af1f8fc1d9e000af81_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quant\_color@{quant\_color}}
\index{quant\_color@{quant\_color}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quant\_color()}{quant\_color()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e} 
static uint8\+\_\+t quant\+\_\+color (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{, }\item[{int}]{value}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Determine the quantized value given a quantization level. 


\begin{DoxyParams}{매개변수}
{\em quant\+\_\+level} & The quantization level to use. \\
\hline
{\em value} & The value to convert. This must be in the 0-\/255 range.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The unpacked quantized value, returned in 0-\/255 range. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00072}{72}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00075\ \ \ \{}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ value\ *\ 2\ +\ 1;}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{astcenc__internal_8h_afa0c1b0c21a8a2f803fe662cefa3f21a}{color\_unquant\_to\_uquant\_tables}}[quant\_level\ -\/\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a}{QUANT\_6}}][index];}
\DoxyCodeLine{00078\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a8e45e8a7813a6573d619b6fc79dc0cbe}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quant\_color@{quant\_color}}
\index{quant\_color@{quant\_color}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quant\_color()}{quant\_color()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a8e45e8a7813a6573d619b6fc79dc0cbe} 
static uint8\+\_\+t quant\+\_\+color (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{, }\item[{int}]{value}{, }\item[{float}]{valuef}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Determine the quantized value given a quantization level and residual. 


\begin{DoxyParams}{매개변수}
{\em quant\+\_\+level} & The quantization level to use. \\
\hline
{\em value} & The value to convert. This must be in the 0-\/255 range. \\
\hline
{\em valuef} & The original value before rounding, used to compute a residual.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The unpacked quantized value, returned in 0-\/255 range. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00109}{109}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00113\ \ \ \{}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ value\ *\ 2;}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{comment}{//\ Compute\ the\ residual\ to\ determine\ if\ we\ should\ round\ down\ or\ up\ ties.}}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{comment}{//\ Test\ should\ be\ residual\ >=\ 0,\ but\ empirical\ testing\ shows\ small\ bias\ helps.}}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{float}\ residual\ =\ valuef\ -\/\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(value);}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{if}\ (residual\ >=\ -\/0.1f)}
\DoxyCodeLine{00120\ \ \ \ \ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ index++;}
\DoxyCodeLine{00122\ \ \ \ \ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{astcenc__internal_8h_afa0c1b0c21a8a2f803fe662cefa3f21a}{color\_unquant\_to\_uquant\_tables}}[quant\_level\ -\/\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a}{QUANT\_6}}][index];}
\DoxyCodeLine{00125\ \}}

\end{DoxyCode}
\Hypertarget{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quant\_color3@{quant\_color3}}
\index{quant\_color3@{quant\_color3}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quant\_color3()}{quant\_color3()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092} 
static \mbox{\hyperlink{structvint4}{vint4}} quant\+\_\+color3 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}}}]{value}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Determine the quantized value given a quantization level. 


\begin{DoxyParams}{매개변수}
{\em quant\+\_\+level} & The quantization level to use. \\
\hline
{\em value} & The value to convert. This must be in the 0-\/255 range.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The unpacked quantized value, returned in 0-\/255 range. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00088}{88}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00091\ \ \ \{}
\DoxyCodeLine{00092\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ index\ =\ value\ *\ 2\ +\ 1;}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structvint4}{vint4}}(}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_afa0c1b0c21a8a2f803fe662cefa3f21a}{color\_unquant\_to\_uquant\_tables}}[quant\_level\ -\/\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a}{QUANT\_6}}][index.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<0>()],}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_afa0c1b0c21a8a2f803fe662cefa3f21a}{color\_unquant\_to\_uquant\_tables}}[quant\_level\ -\/\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a}{QUANT\_6}}][index.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<1>()],}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_afa0c1b0c21a8a2f803fe662cefa3f21a}{color\_unquant\_to\_uquant\_tables}}[quant\_level\ -\/\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a}{QUANT\_6}}][index.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<2>()],}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ 0);}
\DoxyCodeLine{00098\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=248pt]{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_affbf6defc49c5c213d7a7409c219a557}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quant\_color3@{quant\_color3}}
\index{quant\_color3@{quant\_color3}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quant\_color3()}{quant\_color3()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_affbf6defc49c5c213d7a7409c219a557} 
static \mbox{\hyperlink{structvint4}{vint4}} quant\+\_\+color3 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}}}]{value}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{valuef}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Determine the quantized value given a quantization level and residual. 


\begin{DoxyParams}{매개변수}
{\em quant\+\_\+level} & The quantization level to use. \\
\hline
{\em value} & The value to convert. This must be in the 0-\/255 range. \\
\hline
{\em valuef} & The original value before rounding, used to compute a residual.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The unpacked quantized value, returned in 0-\/255 range. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00136}{136}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00140\ \ \ \{}
\DoxyCodeLine{00141\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ index\ =\ value\ *\ 2;}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{comment}{//\ Compute\ the\ residual\ to\ determine\ if\ we\ should\ round\ down\ or\ up\ ties.}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{comment}{//\ Test\ should\ be\ residual\ >=\ 0,\ but\ empirical\ testing\ shows\ small\ bias\ helps.}}
\DoxyCodeLine{00145\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ residual\ =\ valuef\ -\/\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a3a2ce0fb403294db7fe126a6b3e87ab7}{int\_to\_float}}(value);}
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{structvmask4}{vmask4}}\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ad922a3ed6098767968916265154b6f82}{mask}}\ =\ residual\ >=\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(-\/0.1f);}
\DoxyCodeLine{00147\ \ \ \ \ index\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a844ab5b69b84569f033be33bf5fb9fbc}{select}}(index,\ index\ +\ 1,\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ad922a3ed6098767968916265154b6f82}{mask}});}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structvint4}{vint4}}(}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_afa0c1b0c21a8a2f803fe662cefa3f21a}{color\_unquant\_to\_uquant\_tables}}[quant\_level\ -\/\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a}{QUANT\_6}}][index.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<0>()],}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_afa0c1b0c21a8a2f803fe662cefa3f21a}{color\_unquant\_to\_uquant\_tables}}[quant\_level\ -\/\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a}{QUANT\_6}}][index.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<1>()],}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__internal_8h_afa0c1b0c21a8a2f803fe662cefa3f21a}{color\_unquant\_to\_uquant\_tables}}[quant\_level\ -\/\ \mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a}{QUANT\_6}}][index.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<2>()],}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ 0);}
\DoxyCodeLine{00154\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=252pt]{astcenc__color__quantize_8cpp_affbf6defc49c5c213d7a7409c219a557_cgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_and\_unquantize\_retain\_top\_four\_bits@{quantize\_and\_unquantize\_retain\_top\_four\_bits}}
\index{quantize\_and\_unquantize\_retain\_top\_four\_bits@{quantize\_and\_unquantize\_retain\_top\_four\_bits}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_and\_unquantize\_retain\_top\_four\_bits()}{quantize\_and\_unquantize\_retain\_top\_four\_bits()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857} 
static void quantize\+\_\+and\+\_\+unquantize\+\_\+retain\+\_\+top\+\_\+four\+\_\+bits (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{, }\item[{uint8\+\_\+t}]{value}{, }\item[{uint8\+\_\+t \&}]{quant\+\_\+value}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Quantize and unquantize a value ensuring top four bits are the same. 


\begin{DoxyParams}[1]{매개변수}
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
 & {\em value} & The input unquantized value. \\
\hline
\mbox{\texttt{ out}}  & {\em quant\+\_\+value} & The quantized value in 0-\/255 range. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00887}{887}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00891\ \ \ \{}
\DoxyCodeLine{00892\ \ \ \ \ uint8\_t\ perform\_loop;}
\DoxyCodeLine{00893\ \ \ \ \ uint8\_t\ quantval;}
\DoxyCodeLine{00894\ }
\DoxyCodeLine{00895\ \ \ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{00896\ \ \ \ \ \{}
\DoxyCodeLine{00897\ \ \ \ \ \ \ \ \ quantval\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ value);}
\DoxyCodeLine{00898\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Perform\ looping\ if\ the\ top\ four\ bits\ were\ modified\ by\ quant/unquant}}
\DoxyCodeLine{00899\ \ \ \ \ \ \ \ \ perform\_loop\ =\ (value\ \&\ 0xF0)\ !=\ (quantval\ \&\ 0xF0);}
\DoxyCodeLine{00900\ }
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((quantval\ \&\ 0xF0)\ >\ (value\ \&\ 0xF0))}
\DoxyCodeLine{00902\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Quant/unquant\ rounded\ UP\ so\ that\ the\ top\ four\ bits\ changed;}}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ decrement\ the\ input\ value\ in\ hopes\ that\ this\ will\ avoid\ rounding\ up.}}
\DoxyCodeLine{00905\ \ \ \ \ \ \ \ \ \ \ \ \ value-\/-\/;}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((quantval\ \&\ 0xF0)\ <\ (value\ \&\ 0xF0))}
\DoxyCodeLine{00908\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00909\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Quant/unquant\ rounded\ DOWN\ so\ that\ the\ top\ four\ bits\ changed;}}
\DoxyCodeLine{00910\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ decrement\ the\ input\ value\ in\ hopes\ that\ this\ will\ avoid\ rounding\ down.}}
\DoxyCodeLine{00911\ \ \ \ \ \ \ \ \ \ \ \ \ value-\/-\/;}
\DoxyCodeLine{00912\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00913\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (perform\_loop);}
\DoxyCodeLine{00914\ }
\DoxyCodeLine{00915\ \ \ \ \ quant\_value\ =\ quantval;}
\DoxyCodeLine{00916\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_ae0e7daa2cc696baa52756e0c35d63138}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_and\_unquantize\_retain\_top\_two\_bits@{quantize\_and\_unquantize\_retain\_top\_two\_bits}}
\index{quantize\_and\_unquantize\_retain\_top\_two\_bits@{quantize\_and\_unquantize\_retain\_top\_two\_bits}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_and\_unquantize\_retain\_top\_two\_bits()}{quantize\_and\_unquantize\_retain\_top\_two\_bits()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_ae0e7daa2cc696baa52756e0c35d63138} 
static void quantize\+\_\+and\+\_\+unquantize\+\_\+retain\+\_\+top\+\_\+two\+\_\+bits (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{, }\item[{uint8\+\_\+t}]{value}{, }\item[{uint8\+\_\+t \&}]{quant\+\_\+value}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Quantize and unquantize a value ensuring top two bits are the same. 


\begin{DoxyParams}[1]{매개변수}
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
 & {\em value} & The input unquantized value. \\
\hline
\mbox{\texttt{ out}}  & {\em quant\+\_\+value} & The quantized value. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00848}{848}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00852\ \ \ \{}
\DoxyCodeLine{00853\ \ \ \ \ \textcolor{keywordtype}{int}\ perform\_loop;}
\DoxyCodeLine{00854\ \ \ \ \ uint8\_t\ quantval;}
\DoxyCodeLine{00855\ }
\DoxyCodeLine{00856\ \ \ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{00857\ \ \ \ \ \{}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ quantval\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ value);}
\DoxyCodeLine{00859\ }
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Perform\ looping\ if\ the\ top\ two\ bits\ were\ modified\ by\ quant/unquant}}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ perform\_loop\ =\ (value\ \&\ 0xC0)\ !=\ (quantval\ \&\ 0xC0);}
\DoxyCodeLine{00862\ }
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((quantval\ \&\ 0xC0)\ >\ (value\ \&\ 0xC0))}
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Quant/unquant\ rounded\ UP\ so\ that\ the\ top\ two\ bits\ changed;}}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ decrement\ the\ input\ in\ hopes\ that\ this\ will\ avoid\ rounding\ up.}}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ \ \ \ \ value-\/-\/;}
\DoxyCodeLine{00868\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00869\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((quantval\ \&\ 0xC0)\ <\ (value\ \&\ 0xC0))}
\DoxyCodeLine{00870\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Quant/unquant\ rounded\ DOWN\ so\ that\ the\ top\ two\ bits\ changed;}}
\DoxyCodeLine{00872\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ decrement\ the\ input\ in\ hopes\ that\ this\ will\ avoid\ rounding\ down.}}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \ \ \ \ \ \ value-\/-\/;}
\DoxyCodeLine{00874\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00875\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (perform\_loop);}
\DoxyCodeLine{00876\ }
\DoxyCodeLine{00877\ \ \ \ \ quant\_value\ =\ quantval;}
\DoxyCodeLine{00878\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{astcenc__color__quantize_8cpp_ae0e7daa2cc696baa52756e0c35d63138_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_ae0e7daa2cc696baa52756e0c35d63138_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a4c475fce8f14e7437cc348b0319a1365}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_hdr\_alpha@{quantize\_hdr\_alpha}}
\index{quantize\_hdr\_alpha@{quantize\_hdr\_alpha}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_hdr\_alpha()}{quantize\_hdr\_alpha()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a4c475fce8f14e7437cc348b0319a1365} 
static void quantize\+\_\+hdr\+\_\+alpha (\begin{DoxyParamCaption}\item[{float}]{alpha0}{, }\item[{float}]{alpha1}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}2\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize a HDR A color using either delta or direct RGBA encoding. 


\begin{DoxyParams}[1]{매개변수}
 & {\em alpha0} & The input unquantized color0 endpoint. \\
\hline
 & {\em alpha1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as packed RGBA+\+RGBA pairs with mode bits. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l01820}{1820}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{01825\ \ \ \{}
\DoxyCodeLine{01826\ \ \ \ \ alpha0\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(alpha0,\ 0.0f,\ 65280.0f);}
\DoxyCodeLine{01827\ \ \ \ \ alpha1\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(alpha1,\ 0.0f,\ 65280.0f);}
\DoxyCodeLine{01828\ }
\DoxyCodeLine{01829\ \ \ \ \ \textcolor{keywordtype}{int}\ ialpha0\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(alpha0);}
\DoxyCodeLine{01830\ \ \ \ \ \textcolor{keywordtype}{int}\ ialpha1\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(alpha1);}
\DoxyCodeLine{01831\ }
\DoxyCodeLine{01832\ \ \ \ \ \textcolor{keywordtype}{int}\ val0,\ val1,\ diffval;}
\DoxyCodeLine{01833\ \ \ \ \ \textcolor{keywordtype}{int}\ v6,\ v7;}
\DoxyCodeLine{01834\ \ \ \ \ \textcolor{keywordtype}{int}\ v6e,\ v7e;}
\DoxyCodeLine{01835\ \ \ \ \ \textcolor{keywordtype}{int}\ v6d,\ v7d;}
\DoxyCodeLine{01836\ }
\DoxyCodeLine{01837\ \ \ \ \ \textcolor{comment}{//\ Try\ to\ encode\ one\ of\ the\ delta\ submodes,\ in\ decreasing-\/precision\ order}}
\DoxyCodeLine{01838\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 2;\ i\ >=\ 0;\ i-\/-\/)}
\DoxyCodeLine{01839\ \ \ \ \ \{}
\DoxyCodeLine{01840\ \ \ \ \ \ \ \ \ val0\ =\ (ialpha0\ +\ (128\ >>\ i))\ >>\ (8\ -\/\ i);}
\DoxyCodeLine{01841\ \ \ \ \ \ \ \ \ val1\ =\ (ialpha1\ +\ (128\ >>\ i))\ >>\ (8\ -\/\ i);}
\DoxyCodeLine{01842\ }
\DoxyCodeLine{01843\ \ \ \ \ \ \ \ \ v6\ =\ (val0\ \&\ 0x7F)\ |\ ((i\ \&\ 1)\ <<\ 7);}
\DoxyCodeLine{01844\ \ \ \ \ \ \ \ \ v6e\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ v6);}
\DoxyCodeLine{01845\ \ \ \ \ \ \ \ \ v6d\ =\ v6e;}
\DoxyCodeLine{01846\ }
\DoxyCodeLine{01847\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((v6\ \string^\ v6d)\ \&\ 0x80)}
\DoxyCodeLine{01848\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01849\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01850\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01851\ }
\DoxyCodeLine{01852\ \ \ \ \ \ \ \ \ val0\ =\ (val0\ \&\ \string~0x7f)\ |\ (v6d\ \&\ 0x7f);}
\DoxyCodeLine{01853\ \ \ \ \ \ \ \ \ diffval\ =\ val1\ -\/\ val0;}
\DoxyCodeLine{01854\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ cutoff\ =\ 32\ >>\ i;}
\DoxyCodeLine{01855\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ad922a3ed6098767968916265154b6f82}{mask}}\ =\ 2\ *\ cutoff\ -\/\ 1;}
\DoxyCodeLine{01856\ }
\DoxyCodeLine{01857\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (diffval\ <\ -\/cutoff\ ||\ diffval\ >=\ cutoff)}
\DoxyCodeLine{01858\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01859\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01860\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01861\ }
\DoxyCodeLine{01862\ \ \ \ \ \ \ \ \ v7\ =\ ((i\ \&\ 2)\ <<\ 6)\ |\ ((val0\ >>\ 7)\ <<\ (6\ -\/\ i))\ |\ (diffval\ \&\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ad922a3ed6098767968916265154b6f82}{mask}});}
\DoxyCodeLine{01863\ \ \ \ \ \ \ \ \ v7e\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ v7);}
\DoxyCodeLine{01864\ \ \ \ \ \ \ \ \ v7d\ =\ v7e;}
\DoxyCodeLine{01865\ }
\DoxyCodeLine{01866\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ testbits[3]\ \{\ 0xE0,\ 0xF0,\ 0xF8\ \};}
\DoxyCodeLine{01867\ }
\DoxyCodeLine{01868\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((v7\ \string^\ v7d)\ \&\ testbits[i])}
\DoxyCodeLine{01869\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01870\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01871\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01872\ }
\DoxyCodeLine{01873\ \ \ \ \ \ \ \ \ output[0]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(v6e);}
\DoxyCodeLine{01874\ \ \ \ \ \ \ \ \ output[1]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(v7e);}
\DoxyCodeLine{01875\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01876\ \ \ \ \ \}}
\DoxyCodeLine{01877\ }
\DoxyCodeLine{01878\ \ \ \ \ \textcolor{comment}{//\ Could\ not\ encode\ any\ of\ the\ delta\ modes;\ instead\ encode\ a\ flat\ value}}
\DoxyCodeLine{01879\ \ \ \ \ val0\ =\ (ialpha0\ +\ 256)\ >>\ 9;}
\DoxyCodeLine{01880\ \ \ \ \ val1\ =\ (ialpha1\ +\ 256)\ >>\ 9;}
\DoxyCodeLine{01881\ \ \ \ \ v6\ =\ val0\ |\ 0x80;}
\DoxyCodeLine{01882\ \ \ \ \ v7\ =\ val1\ |\ 0x80;}
\DoxyCodeLine{01883\ }
\DoxyCodeLine{01884\ \ \ \ \ output[0]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ v6);}
\DoxyCodeLine{01885\ \ \ \ \ output[1]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ v7);}
\DoxyCodeLine{01886\ }
\DoxyCodeLine{01887\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01888\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=298pt]{astcenc__color__quantize_8cpp_a4c475fce8f14e7437cc348b0319a1365_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a4c475fce8f14e7437cc348b0319a1365_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_ad5fb9a4bf5ae21916bc6c634c7f789f8}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_hdr\_luminance\_large\_range@{quantize\_hdr\_luminance\_large\_range}}
\index{quantize\_hdr\_luminance\_large\_range@{quantize\_hdr\_luminance\_large\_range}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_hdr\_luminance\_large\_range()}{quantize\_hdr\_luminance\_large\_range()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_ad5fb9a4bf5ae21916bc6c634c7f789f8} 
static void quantize\+\_\+hdr\+\_\+luminance\+\_\+large\+\_\+range (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}2\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize a HDR L color using the large range encoding. 


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as packed (l0, l1). \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l01644}{1644}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{01649\ \ \ \{}
\DoxyCodeLine{01650\ \ \ \ \ \textcolor{keywordtype}{float}\ lum0\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color0)\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{01651\ \ \ \ \ \textcolor{keywordtype}{float}\ lum1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color1)\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{01652\ }
\DoxyCodeLine{01653\ \ \ \ \ \textcolor{keywordflow}{if}\ (lum1\ <\ lum0)}
\DoxyCodeLine{01654\ \ \ \ \ \{}
\DoxyCodeLine{01655\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ avg\ =\ (lum0\ +\ lum1)\ *\ 0.5f;}
\DoxyCodeLine{01656\ \ \ \ \ \ \ \ \ lum0\ =\ avg;}
\DoxyCodeLine{01657\ \ \ \ \ \ \ \ \ lum1\ =\ avg;}
\DoxyCodeLine{01658\ \ \ \ \ \}}
\DoxyCodeLine{01659\ }
\DoxyCodeLine{01660\ \ \ \ \ \textcolor{keywordtype}{int}\ ilum1\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(lum1);}
\DoxyCodeLine{01661\ \ \ \ \ \textcolor{keywordtype}{int}\ ilum0\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(lum0);}
\DoxyCodeLine{01662\ }
\DoxyCodeLine{01663\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ closest\ encodable\ point\ in\ the\ upper\ half\ of\ the\ code-\/point\ space}}
\DoxyCodeLine{01664\ \ \ \ \ \textcolor{keywordtype}{int}\ upper\_v0\ =\ (ilum0\ +\ 128)\ >>\ 8;}
\DoxyCodeLine{01665\ \ \ \ \ \textcolor{keywordtype}{int}\ upper\_v1\ =\ (ilum1\ +\ 128)\ >>\ 8;}
\DoxyCodeLine{01666\ }
\DoxyCodeLine{01667\ \ \ \ \ upper\_v0\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(upper\_v0,\ 0,\ 255);}
\DoxyCodeLine{01668\ \ \ \ \ upper\_v1\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(upper\_v1,\ 0,\ 255);}
\DoxyCodeLine{01669\ }
\DoxyCodeLine{01670\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ closest\ encodable\ point\ in\ the\ lower\ half\ of\ the\ code-\/point\ space}}
\DoxyCodeLine{01671\ \ \ \ \ \textcolor{keywordtype}{int}\ lower\_v0\ =\ (ilum1\ +\ 256)\ >>\ 8;}
\DoxyCodeLine{01672\ \ \ \ \ \textcolor{keywordtype}{int}\ lower\_v1\ =\ ilum0\ >>\ 8;}
\DoxyCodeLine{01673\ }
\DoxyCodeLine{01674\ \ \ \ \ lower\_v0\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(lower\_v0,\ 0,\ 255);}
\DoxyCodeLine{01675\ \ \ \ \ lower\_v1\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(lower\_v1,\ 0,\ 255);}
\DoxyCodeLine{01676\ }
\DoxyCodeLine{01677\ \ \ \ \ \textcolor{comment}{//\ Determine\ the\ distance\ between\ the\ point\ in\ code-\/point\ space\ and\ the\ input\ value}}
\DoxyCodeLine{01678\ \ \ \ \ \textcolor{keywordtype}{int}\ upper0\_dec\ =\ upper\_v0\ <<\ 8;}
\DoxyCodeLine{01679\ \ \ \ \ \textcolor{keywordtype}{int}\ upper1\_dec\ =\ upper\_v1\ <<\ 8;}
\DoxyCodeLine{01680\ \ \ \ \ \textcolor{keywordtype}{int}\ lower0\_dec\ =\ (lower\_v1\ <<\ 8)\ +\ 128;}
\DoxyCodeLine{01681\ \ \ \ \ \textcolor{keywordtype}{int}\ lower1\_dec\ =\ (lower\_v0\ <<\ 8)\ -\/\ 128;}
\DoxyCodeLine{01682\ }
\DoxyCodeLine{01683\ \ \ \ \ \textcolor{keywordtype}{int}\ upper0\_diff\ =\ upper0\_dec\ -\/\ ilum0;}
\DoxyCodeLine{01684\ \ \ \ \ \textcolor{keywordtype}{int}\ upper1\_diff\ =\ upper1\_dec\ -\/\ ilum1;}
\DoxyCodeLine{01685\ \ \ \ \ \textcolor{keywordtype}{int}\ lower0\_diff\ =\ lower0\_dec\ -\/\ ilum0;}
\DoxyCodeLine{01686\ \ \ \ \ \textcolor{keywordtype}{int}\ lower1\_diff\ =\ lower1\_dec\ -\/\ ilum1;}
\DoxyCodeLine{01687\ }
\DoxyCodeLine{01688\ \ \ \ \ \textcolor{keywordtype}{int}\ upper\_error\ =\ (upper0\_diff\ *\ upper0\_diff)\ +\ (upper1\_diff\ *\ upper1\_diff);}
\DoxyCodeLine{01689\ \ \ \ \ \textcolor{keywordtype}{int}\ lower\_error\ =\ (lower0\_diff\ *\ lower0\_diff)\ +\ (lower1\_diff\ *\ lower1\_diff);}
\DoxyCodeLine{01690\ }
\DoxyCodeLine{01691\ \ \ \ \ \textcolor{keywordtype}{int}\ v0,\ v1;}
\DoxyCodeLine{01692\ \ \ \ \ \textcolor{keywordflow}{if}\ (upper\_error\ <\ lower\_error)}
\DoxyCodeLine{01693\ \ \ \ \ \{}
\DoxyCodeLine{01694\ \ \ \ \ \ \ \ \ v0\ =\ upper\_v0;}
\DoxyCodeLine{01695\ \ \ \ \ \ \ \ \ v1\ =\ upper\_v1;}
\DoxyCodeLine{01696\ \ \ \ \ \}}
\DoxyCodeLine{01697\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01698\ \ \ \ \ \{}
\DoxyCodeLine{01699\ \ \ \ \ \ \ \ \ v0\ =\ lower\_v0;}
\DoxyCodeLine{01700\ \ \ \ \ \ \ \ \ v1\ =\ lower\_v1;}
\DoxyCodeLine{01701\ \ \ \ \ \}}
\DoxyCodeLine{01702\ }
\DoxyCodeLine{01703\ \ \ \ \ \textcolor{comment}{//\ OK;\ encode}}
\DoxyCodeLine{01704\ \ \ \ \ output[0]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ v0);}
\DoxyCodeLine{01705\ \ \ \ \ output[1]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ v1);}
\DoxyCodeLine{01706\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_ad5fb9a4bf5ae21916bc6c634c7f789f8_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_ad5fb9a4bf5ae21916bc6c634c7f789f8_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a018b17fdce9e0fb576249da80bfc90a2}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_hdr\_rgb@{quantize\_hdr\_rgb}}
\index{quantize\_hdr\_rgb@{quantize\_hdr\_rgb}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_hdr\_rgb()}{quantize\_hdr\_rgb()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a018b17fdce9e0fb576249da80bfc90a2} 
static void quantize\+\_\+hdr\+\_\+rgb (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}6\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize a HDR RGB color using direct RGB encoding. 


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as packed RGB+\+RGB pairs with mode bits. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l01253}{1253}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{01258\ \ \ \{}
\DoxyCodeLine{01259\ \ \ \ \ \textcolor{comment}{//\ Note:\ color*.lane<3>\ is\ not\ used\ so\ we\ can\ ignore\ it}}
\DoxyCodeLine{01260\ \ \ \ \ color0\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(0.0f,\ 65535.0f,\ color0);}
\DoxyCodeLine{01261\ \ \ \ \ color1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(0.0f,\ 65535.0f,\ color1);}
\DoxyCodeLine{01262\ }
\DoxyCodeLine{01263\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color0\_bak\ =\ color0;}
\DoxyCodeLine{01264\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color1\_bak\ =\ color1;}
\DoxyCodeLine{01265\ }
\DoxyCodeLine{01266\ \ \ \ \ \textcolor{keywordtype}{int}\ majcomp;}
\DoxyCodeLine{01267\ \ \ \ \ \textcolor{keywordflow}{if}\ (color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()\ >\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()\ \&\&\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()\ >\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>())}
\DoxyCodeLine{01268\ \ \ \ \ \{}
\DoxyCodeLine{01269\ \ \ \ \ \ \ \ \ majcomp\ =\ 0;}
\DoxyCodeLine{01270\ \ \ \ \ \}}
\DoxyCodeLine{01271\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()\ >\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>())}
\DoxyCodeLine{01272\ \ \ \ \ \{}
\DoxyCodeLine{01273\ \ \ \ \ \ \ \ \ majcomp\ =\ 1;}
\DoxyCodeLine{01274\ \ \ \ \ \}}
\DoxyCodeLine{01275\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01276\ \ \ \ \ \{}
\DoxyCodeLine{01277\ \ \ \ \ \ \ \ \ majcomp\ =\ 2;}
\DoxyCodeLine{01278\ \ \ \ \ \}}
\DoxyCodeLine{01279\ }
\DoxyCodeLine{01280\ \ \ \ \ \textcolor{comment}{//\ Swizzle\ the\ components}}
\DoxyCodeLine{01281\ \ \ \ \ \textcolor{keywordflow}{switch}\ (majcomp)}
\DoxyCodeLine{01282\ \ \ \ \ \{}
\DoxyCodeLine{01283\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:\ \ \textcolor{comment}{//\ red-\/green\ swap}}
\DoxyCodeLine{01284\ \ \ \ \ \ \ \ \ color0\ =\ color0.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<1,\ 0,\ 2,\ 3>();}
\DoxyCodeLine{01285\ \ \ \ \ \ \ \ \ color1\ =\ color1.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<1,\ 0,\ 2,\ 3>();}
\DoxyCodeLine{01286\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01287\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:\ \ \textcolor{comment}{//\ red-\/blue\ swap}}
\DoxyCodeLine{01288\ \ \ \ \ \ \ \ \ color0\ =\ color0.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<2,\ 1,\ 0,\ 3>();}
\DoxyCodeLine{01289\ \ \ \ \ \ \ \ \ color1\ =\ color1.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<2,\ 1,\ 0,\ 3>();}
\DoxyCodeLine{01290\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01291\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01292\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01293\ \ \ \ \ \}}
\DoxyCodeLine{01294\ }
\DoxyCodeLine{01295\ \ \ \ \ \textcolor{keywordtype}{float}\ a\_base\ =\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>();}
\DoxyCodeLine{01296\ \ \ \ \ a\_base\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(a\_base,\ 0.0f,\ 65535.0f);}
\DoxyCodeLine{01297\ }
\DoxyCodeLine{01298\ \ \ \ \ \textcolor{keywordtype}{float}\ b0\_base\ =\ a\_base\ -\/\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>();}
\DoxyCodeLine{01299\ \ \ \ \ \textcolor{keywordtype}{float}\ b1\_base\ =\ a\_base\ -\/\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>();}
\DoxyCodeLine{01300\ \ \ \ \ \textcolor{keywordtype}{float}\ c\_base\ =\ a\_base\ -\/\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>();}
\DoxyCodeLine{01301\ \ \ \ \ \textcolor{keywordtype}{float}\ d0\_base\ =\ a\_base\ -\/\ b0\_base\ -\/\ c\_base\ -\/\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>();}
\DoxyCodeLine{01302\ \ \ \ \ \textcolor{keywordtype}{float}\ d1\_base\ =\ a\_base\ -\/\ b1\_base\ -\/\ c\_base\ -\/\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>();}
\DoxyCodeLine{01303\ }
\DoxyCodeLine{01304\ \ \ \ \ \textcolor{comment}{//\ Number\ of\ bits\ in\ the\ various\ fields\ in\ the\ various\ modes}}
\DoxyCodeLine{01305\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ mode\_bits[8][4]\ \{}
\DoxyCodeLine{01306\ \ \ \ \ \ \ \ \ \{9,\ 7,\ 6,\ 7\},}
\DoxyCodeLine{01307\ \ \ \ \ \ \ \ \ \{9,\ 8,\ 6,\ 6\},}
\DoxyCodeLine{01308\ \ \ \ \ \ \ \ \ \{10,\ 6,\ 7,\ 7\},}
\DoxyCodeLine{01309\ \ \ \ \ \ \ \ \ \{10,\ 7,\ 7,\ 6\},}
\DoxyCodeLine{01310\ \ \ \ \ \ \ \ \ \{11,\ 8,\ 6,\ 5\},}
\DoxyCodeLine{01311\ \ \ \ \ \ \ \ \ \{11,\ 6,\ 8,\ 6\},}
\DoxyCodeLine{01312\ \ \ \ \ \ \ \ \ \{12,\ 7,\ 7,\ 5\},}
\DoxyCodeLine{01313\ \ \ \ \ \ \ \ \ \{12,\ 6,\ 7,\ 6\}}
\DoxyCodeLine{01314\ \ \ \ \ \};}
\DoxyCodeLine{01315\ }
\DoxyCodeLine{01316\ \ \ \ \ \textcolor{comment}{//\ Cutoffs\ to\ use\ for\ the\ computed\ values\ of\ a,b,c,d,\ assuming\ the}}
\DoxyCodeLine{01317\ \ \ \ \ \textcolor{comment}{//\ range\ 0..65535\ are\ LNS\ values\ corresponding\ to\ fp16.}}
\DoxyCodeLine{01318\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ mode\_cutoffs[8][4]\ \{}
\DoxyCodeLine{01319\ \ \ \ \ \ \ \ \ \{16384,\ 8192,\ 8192,\ 8\},\ \textcolor{comment}{//\ mode\ 0:\ 9,7,6,7}}
\DoxyCodeLine{01320\ \ \ \ \ \ \ \ \ \{32768,\ 8192,\ 4096,\ 8\},\ \textcolor{comment}{//\ mode\ 1:\ 9,8,6,6}}
\DoxyCodeLine{01321\ \ \ \ \ \ \ \ \ \{4096,\ 8192,\ 4096,\ 4\},\ \ \textcolor{comment}{//\ mode\ 2:\ 10,6,7,7}}
\DoxyCodeLine{01322\ \ \ \ \ \ \ \ \ \{8192,\ 8192,\ 2048,\ 4\},\ \ \textcolor{comment}{//\ mode\ 3:\ 10,7,7,6}}
\DoxyCodeLine{01323\ \ \ \ \ \ \ \ \ \{8192,\ 2048,\ 512,\ 2\},\ \ \ \textcolor{comment}{//\ mode\ 4:\ 11,8,6,5}}
\DoxyCodeLine{01324\ \ \ \ \ \ \ \ \ \{2048,\ 8192,\ 1024,\ 2\},\ \ \textcolor{comment}{//\ mode\ 5:\ 11,6,8,6}}
\DoxyCodeLine{01325\ \ \ \ \ \ \ \ \ \{2048,\ 2048,\ 256,\ 1\},\ \ \ \textcolor{comment}{//\ mode\ 6:\ 12,7,7,5}}
\DoxyCodeLine{01326\ \ \ \ \ \ \ \ \ \{1024,\ 2048,\ 512,\ 1\},\ \ \ \textcolor{comment}{//\ mode\ 7:\ 12,6,7,6}}
\DoxyCodeLine{01327\ \ \ \ \ \};}
\DoxyCodeLine{01328\ }
\DoxyCodeLine{01329\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ mode\_scales[8]\ \{}
\DoxyCodeLine{01330\ \ \ \ \ \ \ \ \ 1.0f\ /\ 128.0f,}
\DoxyCodeLine{01331\ \ \ \ \ \ \ \ \ 1.0f\ /\ 128.0f,}
\DoxyCodeLine{01332\ \ \ \ \ \ \ \ \ 1.0f\ /\ 64.0f,}
\DoxyCodeLine{01333\ \ \ \ \ \ \ \ \ 1.0f\ /\ 64.0f,}
\DoxyCodeLine{01334\ \ \ \ \ \ \ \ \ 1.0f\ /\ 32.0f,}
\DoxyCodeLine{01335\ \ \ \ \ \ \ \ \ 1.0f\ /\ 32.0f,}
\DoxyCodeLine{01336\ \ \ \ \ \ \ \ \ 1.0f\ /\ 16.0f,}
\DoxyCodeLine{01337\ \ \ \ \ \ \ \ \ 1.0f\ /\ 16.0f,}
\DoxyCodeLine{01338\ \ \ \ \ \};}
\DoxyCodeLine{01339\ }
\DoxyCodeLine{01340\ \ \ \ \ \textcolor{comment}{//\ Scaling\ factors\ when\ going\ from\ what\ was\ encoded\ in\ the\ mode\ to\ 16\ bits.}}
\DoxyCodeLine{01341\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ mode\_rscales[8]\ \{}
\DoxyCodeLine{01342\ \ \ \ \ \ \ \ \ 128.0f,}
\DoxyCodeLine{01343\ \ \ \ \ \ \ \ \ 128.0f,}
\DoxyCodeLine{01344\ \ \ \ \ \ \ \ \ 64.0f,}
\DoxyCodeLine{01345\ \ \ \ \ \ \ \ \ 64.0f,}
\DoxyCodeLine{01346\ \ \ \ \ \ \ \ \ 32.0f,}
\DoxyCodeLine{01347\ \ \ \ \ \ \ \ \ 32.0f,}
\DoxyCodeLine{01348\ \ \ \ \ \ \ \ \ 16.0f,}
\DoxyCodeLine{01349\ \ \ \ \ \ \ \ \ 16.0f}
\DoxyCodeLine{01350\ \ \ \ \ \};}
\DoxyCodeLine{01351\ }
\DoxyCodeLine{01352\ \ \ \ \ \textcolor{comment}{//\ Try\ modes\ one\ by\ one,\ with\ the\ highest-\/precision\ mode\ first.}}
\DoxyCodeLine{01353\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ mode\ =\ 7;\ mode\ >=\ 0;\ mode-\/-\/)}
\DoxyCodeLine{01354\ \ \ \ \ \{}
\DoxyCodeLine{01355\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ each\ mode,\ test\ if\ we\ can\ in\ fact\ accommodate\ the\ computed\ b,\ c,\ and\ d\ values.}}
\DoxyCodeLine{01356\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ clearly\ can't,\ then\ we\ skip\ to\ the\ next\ mode.}}
\DoxyCodeLine{01357\ }
\DoxyCodeLine{01358\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ b\_cutoff\ =\ mode\_cutoffs[mode][0];}
\DoxyCodeLine{01359\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ c\_cutoff\ =\ mode\_cutoffs[mode][1];}
\DoxyCodeLine{01360\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ d\_cutoff\ =\ mode\_cutoffs[mode][2];}
\DoxyCodeLine{01361\ }
\DoxyCodeLine{01362\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (b0\_base\ >\ b\_cutoff\ ||\ b1\_base\ >\ b\_cutoff\ ||\ c\_base\ >\ c\_cutoff\ ||\ fabsf(d0\_base)\ >\ d\_cutoff\ ||\ fabsf(d1\_base)\ >\ d\_cutoff)}
\DoxyCodeLine{01363\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01364\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01365\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01366\ }
\DoxyCodeLine{01367\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ mode\_scale\ =\ mode\_scales[mode];}
\DoxyCodeLine{01368\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ mode\_rscale\ =\ mode\_rscales[mode];}
\DoxyCodeLine{01369\ }
\DoxyCodeLine{01370\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ b\_intcutoff\ =\ 1\ <<\ mode\_bits[mode][1];}
\DoxyCodeLine{01371\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ c\_intcutoff\ =\ 1\ <<\ mode\_bits[mode][2];}
\DoxyCodeLine{01372\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ d\_intcutoff\ =\ 1\ <<\ (mode\_bits[mode][3]\ -\/\ 1);}
\DoxyCodeLine{01373\ }
\DoxyCodeLine{01374\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Quantize\ and\ unquantize\ A,\ with\ the\ assumption\ that\ its\ high\ bits\ can\ be\ handled\ safely.}}
\DoxyCodeLine{01375\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ a\_intval\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a\_base\ *\ mode\_scale);}
\DoxyCodeLine{01376\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ a\_lowbits\ =\ a\_intval\ \&\ 0xFF;}
\DoxyCodeLine{01377\ }
\DoxyCodeLine{01378\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ a\_quantval\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ a\_lowbits);}
\DoxyCodeLine{01379\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ a\_uquantval\ =\ a\_quantval;}
\DoxyCodeLine{01380\ \ \ \ \ \ \ \ \ a\_intval\ =\ (a\_intval\ \&\ \string~0xFF)\ |\ a\_uquantval;}
\DoxyCodeLine{01381\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ a\_fval\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(a\_intval)\ *\ mode\_rscale;}
\DoxyCodeLine{01382\ }
\DoxyCodeLine{01383\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Recompute\ C,\ then\ quantize\ and\ unquantize\ it}}
\DoxyCodeLine{01384\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ c\_fval\ =\ a\_fval\ -\/\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>();}
\DoxyCodeLine{01385\ \ \ \ \ \ \ \ \ c\_fval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(c\_fval,\ 0.0f,\ 65535.0f);}
\DoxyCodeLine{01386\ }
\DoxyCodeLine{01387\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ c\_intval\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(c\_fval\ *\ mode\_scale);}
\DoxyCodeLine{01388\ }
\DoxyCodeLine{01389\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c\_intval\ >=\ c\_intcutoff)}
\DoxyCodeLine{01390\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01391\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01392\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01393\ }
\DoxyCodeLine{01394\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ c\_lowbits\ =\ c\_intval\ \&\ 0x3f;}
\DoxyCodeLine{01395\ }
\DoxyCodeLine{01396\ \ \ \ \ \ \ \ \ c\_lowbits\ |=\ (mode\ \&\ 1)\ <<\ 7;}
\DoxyCodeLine{01397\ \ \ \ \ \ \ \ \ c\_lowbits\ |=\ (a\_intval\ \&\ 0x100)\ >>\ 2;}
\DoxyCodeLine{01398\ }
\DoxyCodeLine{01399\ \ \ \ \ \ \ \ \ uint8\_t\ c\_quantval;}
\DoxyCodeLine{01400\ }
\DoxyCodeLine{01401\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ae0e7daa2cc696baa52756e0c35d63138}{quantize\_and\_unquantize\_retain\_top\_two\_bits}}(}
\DoxyCodeLine{01402\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(c\_lowbits),\ c\_quantval);}
\DoxyCodeLine{01403\ }
\DoxyCodeLine{01404\ \ \ \ \ \ \ \ \ c\_intval\ =\ (c\_intval\ \&\ \string~0x3F)\ |\ (c\_quantval\ \&\ 0x3F);}
\DoxyCodeLine{01405\ \ \ \ \ \ \ \ \ c\_fval\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(c\_intval)\ *\ mode\_rscale;}
\DoxyCodeLine{01406\ }
\DoxyCodeLine{01407\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Recompute\ B0\ and\ B1,\ then\ quantize\ and\ unquantize\ them}}
\DoxyCodeLine{01408\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ b0\_fval\ =\ a\_fval\ -\/\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>();}
\DoxyCodeLine{01409\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ b1\_fval\ =\ a\_fval\ -\/\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>();}
\DoxyCodeLine{01410\ }
\DoxyCodeLine{01411\ \ \ \ \ \ \ \ \ b0\_fval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(b0\_fval,\ 0.0f,\ 65535.0f);}
\DoxyCodeLine{01412\ \ \ \ \ \ \ \ \ b1\_fval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(b1\_fval,\ 0.0f,\ 65535.0f);}
\DoxyCodeLine{01413\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ b0\_intval\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(b0\_fval\ *\ mode\_scale);}
\DoxyCodeLine{01414\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ b1\_intval\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(b1\_fval\ *\ mode\_scale);}
\DoxyCodeLine{01415\ }
\DoxyCodeLine{01416\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (b0\_intval\ >=\ b\_intcutoff\ ||\ b1\_intval\ >=\ b\_intcutoff)}
\DoxyCodeLine{01417\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01418\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01419\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01420\ }
\DoxyCodeLine{01421\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ b0\_lowbits\ =\ b0\_intval\ \&\ 0x3f;}
\DoxyCodeLine{01422\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ b1\_lowbits\ =\ b1\_intval\ \&\ 0x3f;}
\DoxyCodeLine{01423\ }
\DoxyCodeLine{01424\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit0\ =\ 0;}
\DoxyCodeLine{01425\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit1\ =\ 0;}
\DoxyCodeLine{01426\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01427\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01428\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{01429\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01430\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01431\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01432\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 6:}
\DoxyCodeLine{01433\ \ \ \ \ \ \ \ \ \ \ \ \ bit0\ =\ (b0\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01434\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01435\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01436\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{01437\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 7:}
\DoxyCodeLine{01438\ \ \ \ \ \ \ \ \ \ \ \ \ bit0\ =\ (a\_intval\ >>\ 9)\ \&\ 1;}
\DoxyCodeLine{01439\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01440\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01441\ }
\DoxyCodeLine{01442\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01443\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01444\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{01445\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01446\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01447\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01448\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 6:}
\DoxyCodeLine{01449\ \ \ \ \ \ \ \ \ \ \ \ \ bit1\ =\ (b1\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01450\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01451\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01452\ \ \ \ \ \ \ \ \ \ \ \ \ bit1\ =\ (c\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01453\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01454\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{01455\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 7:}
\DoxyCodeLine{01456\ \ \ \ \ \ \ \ \ \ \ \ \ bit1\ =\ (a\_intval\ >>\ 10)\ \&\ 1;}
\DoxyCodeLine{01457\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01458\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01459\ }
\DoxyCodeLine{01460\ \ \ \ \ \ \ \ \ b0\_lowbits\ |=\ bit0\ <<\ 6;}
\DoxyCodeLine{01461\ \ \ \ \ \ \ \ \ b1\_lowbits\ |=\ bit1\ <<\ 6;}
\DoxyCodeLine{01462\ }
\DoxyCodeLine{01463\ \ \ \ \ \ \ \ \ b0\_lowbits\ |=\ ((mode\ >>\ 1)\ \&\ 1)\ <<\ 7;}
\DoxyCodeLine{01464\ \ \ \ \ \ \ \ \ b1\_lowbits\ |=\ ((mode\ >>\ 2)\ \&\ 1)\ <<\ 7;}
\DoxyCodeLine{01465\ }
\DoxyCodeLine{01466\ \ \ \ \ \ \ \ \ uint8\_t\ b0\_quantval;}
\DoxyCodeLine{01467\ \ \ \ \ \ \ \ \ uint8\_t\ b1\_quantval;}
\DoxyCodeLine{01468\ }
\DoxyCodeLine{01469\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ae0e7daa2cc696baa52756e0c35d63138}{quantize\_and\_unquantize\_retain\_top\_two\_bits}}(}
\DoxyCodeLine{01470\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(b0\_lowbits),\ b0\_quantval);}
\DoxyCodeLine{01471\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ae0e7daa2cc696baa52756e0c35d63138}{quantize\_and\_unquantize\_retain\_top\_two\_bits}}(}
\DoxyCodeLine{01472\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(b1\_lowbits),\ b1\_quantval);}
\DoxyCodeLine{01473\ }
\DoxyCodeLine{01474\ \ \ \ \ \ \ \ \ b0\_intval\ =\ (b0\_intval\ \&\ \string~0x3f)\ |\ (b0\_quantval\ \&\ 0x3f);}
\DoxyCodeLine{01475\ \ \ \ \ \ \ \ \ b1\_intval\ =\ (b1\_intval\ \&\ \string~0x3f)\ |\ (b1\_quantval\ \&\ 0x3f);}
\DoxyCodeLine{01476\ \ \ \ \ \ \ \ \ b0\_fval\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(b0\_intval)\ *\ mode\_rscale;}
\DoxyCodeLine{01477\ \ \ \ \ \ \ \ \ b1\_fval\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(b1\_intval)\ *\ mode\_rscale;}
\DoxyCodeLine{01478\ }
\DoxyCodeLine{01479\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Recompute\ D0\ and\ D1,\ then\ quantize\ and\ unquantize\ them}}
\DoxyCodeLine{01480\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ d0\_fval\ =\ a\_fval\ -\/\ b0\_fval\ -\/\ c\_fval\ -\/\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>();}
\DoxyCodeLine{01481\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ d1\_fval\ =\ a\_fval\ -\/\ b1\_fval\ -\/\ c\_fval\ -\/\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>();}
\DoxyCodeLine{01482\ }
\DoxyCodeLine{01483\ \ \ \ \ \ \ \ \ d0\_fval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(d0\_fval,\ -\/65535.0f,\ 65535.0f);}
\DoxyCodeLine{01484\ \ \ \ \ \ \ \ \ d1\_fval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(d1\_fval,\ -\/65535.0f,\ 65535.0f);}
\DoxyCodeLine{01485\ }
\DoxyCodeLine{01486\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ d0\_intval\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(d0\_fval\ *\ mode\_scale);}
\DoxyCodeLine{01487\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ d1\_intval\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(d1\_fval\ *\ mode\_scale);}
\DoxyCodeLine{01488\ }
\DoxyCodeLine{01489\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_aeac50750508168aeab5115733d3ee63c}{abs}}(d0\_intval)\ >=\ d\_intcutoff\ ||\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_aeac50750508168aeab5115733d3ee63c}{abs}}(d1\_intval)\ >=\ d\_intcutoff)}
\DoxyCodeLine{01490\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01491\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01492\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01493\ }
\DoxyCodeLine{01494\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ d0\_lowbits\ =\ d0\_intval\ \&\ 0x1f;}
\DoxyCodeLine{01495\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ d1\_lowbits\ =\ d1\_intval\ \&\ 0x1f;}
\DoxyCodeLine{01496\ }
\DoxyCodeLine{01497\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit2\ =\ 0;}
\DoxyCodeLine{01498\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit3\ =\ 0;}
\DoxyCodeLine{01499\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit4;}
\DoxyCodeLine{01500\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit5;}
\DoxyCodeLine{01501\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01502\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01503\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{01504\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01505\ \ \ \ \ \ \ \ \ \ \ \ \ bit2\ =\ (d0\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01506\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01507\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01508\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01509\ \ \ \ \ \ \ \ \ \ \ \ \ bit2\ =\ (b0\_intval\ >>\ 7)\ \&\ 1;}
\DoxyCodeLine{01510\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01511\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01512\ \ \ \ \ \ \ \ \ \ \ \ \ bit2\ =\ (a\_intval\ >>\ 9)\ \&\ 1;}
\DoxyCodeLine{01513\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01514\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{01515\ \ \ \ \ \ \ \ \ \ \ \ \ bit2\ =\ (c\_intval\ >>\ 7)\ \&\ 1;}
\DoxyCodeLine{01516\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01517\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 6:}
\DoxyCodeLine{01518\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 7:}
\DoxyCodeLine{01519\ \ \ \ \ \ \ \ \ \ \ \ \ bit2\ =\ (a\_intval\ >>\ 11)\ \&\ 1;}
\DoxyCodeLine{01520\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01521\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01522\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01523\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01524\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{01525\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01526\ \ \ \ \ \ \ \ \ \ \ \ \ bit3\ =\ (d1\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01527\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01528\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01529\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01530\ \ \ \ \ \ \ \ \ \ \ \ \ bit3\ =\ (b1\_intval\ >>\ 7)\ \&\ 1;}
\DoxyCodeLine{01531\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01532\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01533\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{01534\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 6:}
\DoxyCodeLine{01535\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 7:}
\DoxyCodeLine{01536\ \ \ \ \ \ \ \ \ \ \ \ \ bit3\ =\ (c\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01537\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01538\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01539\ }
\DoxyCodeLine{01540\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01541\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01542\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01543\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 6:}
\DoxyCodeLine{01544\ \ \ \ \ \ \ \ \ \ \ \ \ bit4\ =\ (a\_intval\ >>\ 9)\ \&\ 1;}
\DoxyCodeLine{01545\ \ \ \ \ \ \ \ \ \ \ \ \ bit5\ =\ (a\_intval\ >>\ 10)\ \&\ 1;}
\DoxyCodeLine{01546\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01547\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01548\ \ \ \ \ \ \ \ \ \ \ \ \ bit4\ =\ (d0\_intval\ >>\ 5)\ \&\ 1;}
\DoxyCodeLine{01549\ \ \ \ \ \ \ \ \ \ \ \ \ bit5\ =\ (d1\_intval\ >>\ 5)\ \&\ 1;}
\DoxyCodeLine{01550\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01551\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01552\ }
\DoxyCodeLine{01553\ \ \ \ \ \ \ \ \ d0\_lowbits\ |=\ bit2\ <<\ 6;}
\DoxyCodeLine{01554\ \ \ \ \ \ \ \ \ d1\_lowbits\ |=\ bit3\ <<\ 6;}
\DoxyCodeLine{01555\ \ \ \ \ \ \ \ \ d0\_lowbits\ |=\ bit4\ <<\ 5;}
\DoxyCodeLine{01556\ \ \ \ \ \ \ \ \ d1\_lowbits\ |=\ bit5\ <<\ 5;}
\DoxyCodeLine{01557\ }
\DoxyCodeLine{01558\ \ \ \ \ \ \ \ \ d0\_lowbits\ |=\ (majcomp\ \&\ 1)\ <<\ 7;}
\DoxyCodeLine{01559\ \ \ \ \ \ \ \ \ d1\_lowbits\ |=\ ((majcomp\ >>\ 1)\ \&\ 1)\ <<\ 7;}
\DoxyCodeLine{01560\ }
\DoxyCodeLine{01561\ \ \ \ \ \ \ \ \ uint8\_t\ d0\_quantval;}
\DoxyCodeLine{01562\ \ \ \ \ \ \ \ \ uint8\_t\ d1\_quantval;}
\DoxyCodeLine{01563\ }
\DoxyCodeLine{01564\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857}{quantize\_and\_unquantize\_retain\_top\_four\_bits}}(}
\DoxyCodeLine{01565\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(d0\_lowbits),\ d0\_quantval);}
\DoxyCodeLine{01566\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857}{quantize\_and\_unquantize\_retain\_top\_four\_bits}}(}
\DoxyCodeLine{01567\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(d1\_lowbits),\ d1\_quantval);}
\DoxyCodeLine{01568\ }
\DoxyCodeLine{01569\ \ \ \ \ \ \ \ \ output[0]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(a\_quantval);}
\DoxyCodeLine{01570\ \ \ \ \ \ \ \ \ output[1]\ =\ c\_quantval;}
\DoxyCodeLine{01571\ \ \ \ \ \ \ \ \ output[2]\ =\ b0\_quantval;}
\DoxyCodeLine{01572\ \ \ \ \ \ \ \ \ output[3]\ =\ b1\_quantval;}
\DoxyCodeLine{01573\ \ \ \ \ \ \ \ \ output[4]\ =\ d0\_quantval;}
\DoxyCodeLine{01574\ \ \ \ \ \ \ \ \ output[5]\ =\ d1\_quantval;}
\DoxyCodeLine{01575\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01576\ \ \ \ \ \}}
\DoxyCodeLine{01577\ }
\DoxyCodeLine{01578\ \ \ \ \ \textcolor{comment}{//\ If\ neither\ of\ the\ modes\ fit\ we\ will\ use\ a\ flat\ representation\ for\ storing\ data,\ using\ 8\ bits}}
\DoxyCodeLine{01579\ \ \ \ \ \textcolor{comment}{//\ for\ red\ and\ green,\ and\ 7\ bits\ for\ blue.\ This\ gives\ color\ accuracy\ roughly\ similar\ to\ LDR}}
\DoxyCodeLine{01580\ \ \ \ \ \textcolor{comment}{//\ 4:4:3\ which\ is\ not\ at\ all\ great\ but\ usable.\ This\ representation\ is\ used\ if\ the\ light\ color\ is}}
\DoxyCodeLine{01581\ \ \ \ \ \textcolor{comment}{//\ more\ than\ 4x\ the\ color\ value\ of\ the\ dark\ color.}}
\DoxyCodeLine{01582\ \ \ \ \ \textcolor{keywordtype}{float}\ vals[6];}
\DoxyCodeLine{01583\ \ \ \ \ vals[0]\ =\ color0\_bak.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>();}
\DoxyCodeLine{01584\ \ \ \ \ vals[1]\ =\ color1\_bak.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>();}
\DoxyCodeLine{01585\ \ \ \ \ vals[2]\ =\ color0\_bak.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>();}
\DoxyCodeLine{01586\ \ \ \ \ vals[3]\ =\ color1\_bak.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>();}
\DoxyCodeLine{01587\ \ \ \ \ vals[4]\ =\ color0\_bak.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>();}
\DoxyCodeLine{01588\ \ \ \ \ vals[5]\ =\ color1\_bak.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>();}
\DoxyCodeLine{01589\ }
\DoxyCodeLine{01590\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 6;\ i++)}
\DoxyCodeLine{01591\ \ \ \ \ \{}
\DoxyCodeLine{01592\ \ \ \ \ \ \ \ \ vals[i]\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(vals[i],\ 0.0f,\ 65020.0f);}
\DoxyCodeLine{01593\ \ \ \ \ \}}
\DoxyCodeLine{01594\ }
\DoxyCodeLine{01595\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 4;\ i++)}
\DoxyCodeLine{01596\ \ \ \ \ \{}
\DoxyCodeLine{01597\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ idx\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(vals[i]\ *\ 1.0f\ /\ 256.0f);}
\DoxyCodeLine{01598\ \ \ \ \ \ \ \ \ output[i]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ idx);}
\DoxyCodeLine{01599\ \ \ \ \ \}}
\DoxyCodeLine{01600\ }
\DoxyCodeLine{01601\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 4;\ i\ <\ 6;\ i++)}
\DoxyCodeLine{01602\ \ \ \ \ \{}
\DoxyCodeLine{01603\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ idx\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(vals[i]\ *\ 1.0f\ /\ 512.0f)\ +\ 128;}
\DoxyCodeLine{01604\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ae0e7daa2cc696baa52756e0c35d63138}{quantize\_and\_unquantize\_retain\_top\_two\_bits}}(}
\DoxyCodeLine{01605\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(idx),\ output[i]);}
\DoxyCodeLine{01606\ \ \ \ \ \}}
\DoxyCodeLine{01607\ }
\DoxyCodeLine{01608\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01609\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a018b17fdce9e0fb576249da80bfc90a2_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a018b17fdce9e0fb576249da80bfc90a2_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a968dafc89b796ea5218a690b22c39911}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_hdr\_rgb\_alpha@{quantize\_hdr\_rgb\_alpha}}
\index{quantize\_hdr\_rgb\_alpha@{quantize\_hdr\_rgb\_alpha}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_hdr\_rgb\_alpha()}{quantize\_hdr\_rgb\_alpha()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a968dafc89b796ea5218a690b22c39911} 
static void quantize\+\_\+hdr\+\_\+rgb\+\_\+alpha (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}8\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize a HDR RGBA color using either delta or direct RGBA encoding. 


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as packed RGBA+\+RGBA pairs with mode bits. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l01898}{1898}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{01903\ \ \ \{}
\DoxyCodeLine{01904\ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a018b17fdce9e0fb576249da80bfc90a2}{quantize\_hdr\_rgb}}(color0,\ color1,\ output,\ quant\_level);}
\DoxyCodeLine{01905\ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a4c475fce8f14e7437cc348b0319a1365}{quantize\_hdr\_alpha}}(color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>(),\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>(),\ output\ +\ 6,\ quant\_level);}
\DoxyCodeLine{01906\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a968dafc89b796ea5218a690b22c39911_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a968dafc89b796ea5218a690b22c39911_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_acc5fc16efff8422faf77e47bc55ab0ad}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_hdr\_rgb\_ldr\_alpha@{quantize\_hdr\_rgb\_ldr\_alpha}}
\index{quantize\_hdr\_rgb\_ldr\_alpha@{quantize\_hdr\_rgb\_ldr\_alpha}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_hdr\_rgb\_ldr\_alpha()}{quantize\_hdr\_rgb\_ldr\_alpha()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_acc5fc16efff8422faf77e47bc55ab0ad} 
static void quantize\+\_\+hdr\+\_\+rgb\+\_\+ldr\+\_\+alpha (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}8\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize a HDR RGB + LDR A color using direct RGBA encoding. 


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as packed RGBA+\+RGBA pairs with mode bits. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l01619}{1619}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{01624\ \ \ \{}
\DoxyCodeLine{01625\ \ \ \ \ \textcolor{keywordtype}{float}\ scale\ =\ 1.0f\ /\ 257.0f;}
\DoxyCodeLine{01626\ }
\DoxyCodeLine{01627\ \ \ \ \ \textcolor{keywordtype}{float}\ a0\ =\ \mbox{\hyperlink{namespaceastc_a1861708487807ec08c172e2f7ff58978}{astc::clamp255f}}(color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>()\ *\ scale);}
\DoxyCodeLine{01628\ \ \ \ \ \textcolor{keywordtype}{float}\ a1\ =\ \mbox{\hyperlink{namespaceastc_a1861708487807ec08c172e2f7ff58978}{astc::clamp255f}}(color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>()\ *\ scale);}
\DoxyCodeLine{01629\ }
\DoxyCodeLine{01630\ \ \ \ \ output[6]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a0),\ a0);}
\DoxyCodeLine{01631\ \ \ \ \ output[7]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a1),\ a1);}
\DoxyCodeLine{01632\ }
\DoxyCodeLine{01633\ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a018b17fdce9e0fb576249da80bfc90a2}{quantize\_hdr\_rgb}}(color0,\ color1,\ output,\ quant\_level);}
\DoxyCodeLine{01634\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_acc5fc16efff8422faf77e47bc55ab0ad_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_acc5fc16efff8422faf77e47bc55ab0ad_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a8c60d84b27b5bf6a95eafa1b86497235}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_hdr\_rgbo@{quantize\_hdr\_rgbo}}
\index{quantize\_hdr\_rgbo@{quantize\_hdr\_rgbo}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_hdr\_rgbo()}{quantize\_hdr\_rgbo()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a8c60d84b27b5bf6a95eafa1b86497235} 
static void quantize\+\_\+hdr\+\_\+rgbo (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}4\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize a HDR RGB color using RGB + offset. 


\begin{DoxyParams}[1]{매개변수}
 & {\em color} & The input unquantized color endpoint and offset. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as packed RGBS with some mode bits. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00925}{925}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00929\ \ \ \{}
\DoxyCodeLine{00930\ \ \ \ \ color.\mbox{\hyperlink{structvfloat4_a2168231efa1e514fd41b3603e57be297}{set\_lane}}<0>(color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()\ +\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>());}
\DoxyCodeLine{00931\ \ \ \ \ color.\mbox{\hyperlink{structvfloat4_a2168231efa1e514fd41b3603e57be297}{set\_lane}}<1>(color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()\ +\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>());}
\DoxyCodeLine{00932\ \ \ \ \ color.\mbox{\hyperlink{structvfloat4_a2168231efa1e514fd41b3603e57be297}{set\_lane}}<2>(color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>()\ +\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>());}
\DoxyCodeLine{00933\ }
\DoxyCodeLine{00934\ \ \ \ \ color\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(0.0f,\ 65535.0f,\ color);}
\DoxyCodeLine{00935\ }
\DoxyCodeLine{00936\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color\_bak\ =\ color;}
\DoxyCodeLine{00937\ }
\DoxyCodeLine{00938\ \ \ \ \ \textcolor{keywordtype}{int}\ majcomp;}
\DoxyCodeLine{00939\ \ \ \ \ \textcolor{keywordflow}{if}\ (color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()\ >\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()\ \&\&\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()\ >\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>())}
\DoxyCodeLine{00940\ \ \ \ \ \{}
\DoxyCodeLine{00941\ \ \ \ \ \ \ \ \ majcomp\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ red\ is\ largest\ component}}
\DoxyCodeLine{00942\ \ \ \ \ \}}
\DoxyCodeLine{00943\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()\ >\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>())}
\DoxyCodeLine{00944\ \ \ \ \ \{}
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ majcomp\ =\ 1;\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ green\ is\ largest\ component}}
\DoxyCodeLine{00946\ \ \ \ \ \}}
\DoxyCodeLine{00947\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00948\ \ \ \ \ \{}
\DoxyCodeLine{00949\ \ \ \ \ \ \ \ \ majcomp\ =\ 2;\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ blue\ is\ largest\ component}}
\DoxyCodeLine{00950\ \ \ \ \ \}}
\DoxyCodeLine{00951\ }
\DoxyCodeLine{00952\ \ \ \ \ \textcolor{comment}{//\ swap\ around\ the\ red\ component\ and\ the\ largest\ component.}}
\DoxyCodeLine{00953\ \ \ \ \ \textcolor{keywordflow}{switch}\ (majcomp)}
\DoxyCodeLine{00954\ \ \ \ \ \{}
\DoxyCodeLine{00955\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00956\ \ \ \ \ \ \ \ \ color\ =\ color.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<1,\ 0,\ 2,\ 3>();}
\DoxyCodeLine{00957\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00958\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00959\ \ \ \ \ \ \ \ \ color\ =\ color.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<2,\ 1,\ 0,\ 3>();}
\DoxyCodeLine{00960\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00961\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00962\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00963\ \ \ \ \ \}}
\DoxyCodeLine{00964\ }
\DoxyCodeLine{00965\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ mode\_bits[5][3]\ \{}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ \{11,\ 5,\ 7\},}
\DoxyCodeLine{00967\ \ \ \ \ \ \ \ \ \{11,\ 6,\ 5\},}
\DoxyCodeLine{00968\ \ \ \ \ \ \ \ \ \{10,\ 5,\ 8\},}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \{9,\ 6,\ 7\},}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \{8,\ 7,\ 6\}}
\DoxyCodeLine{00971\ \ \ \ \ \};}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ mode\_cutoffs[5][2]\ \{}
\DoxyCodeLine{00974\ \ \ \ \ \ \ \ \ \{1024,\ 4096\},}
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \{2048,\ 1024\},}
\DoxyCodeLine{00976\ \ \ \ \ \ \ \ \ \{2048,\ 16384\},}
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \{8192,\ 16384\},}
\DoxyCodeLine{00978\ \ \ \ \ \ \ \ \ \{32768,\ 16384\}}
\DoxyCodeLine{00979\ \ \ \ \ \};}
\DoxyCodeLine{00980\ }
\DoxyCodeLine{00981\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ mode\_rscales[5]\ \{}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \ \ 32.0f,}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ 32.0f,}
\DoxyCodeLine{00984\ \ \ \ \ \ \ \ \ 64.0f,}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \ \ 128.0f,}
\DoxyCodeLine{00986\ \ \ \ \ \ \ \ \ 256.0f,}
\DoxyCodeLine{00987\ \ \ \ \ \};}
\DoxyCodeLine{00988\ }
\DoxyCodeLine{00989\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ mode\_scales[5]\ \{}
\DoxyCodeLine{00990\ \ \ \ \ \ \ \ \ 1.0f\ /\ 32.0f,}
\DoxyCodeLine{00991\ \ \ \ \ \ \ \ \ 1.0f\ /\ 32.0f,}
\DoxyCodeLine{00992\ \ \ \ \ \ \ \ \ 1.0f\ /\ 64.0f,}
\DoxyCodeLine{00993\ \ \ \ \ \ \ \ \ 1.0f\ /\ 128.0f,}
\DoxyCodeLine{00994\ \ \ \ \ \ \ \ \ 1.0f\ /\ 256.0f,}
\DoxyCodeLine{00995\ \ \ \ \ \};}
\DoxyCodeLine{00996\ }
\DoxyCodeLine{00997\ \ \ \ \ \textcolor{keywordtype}{float}\ r\_base\ =\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>();}
\DoxyCodeLine{00998\ \ \ \ \ \textcolor{keywordtype}{float}\ g\_base\ =\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()\ -\/\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()\ ;}
\DoxyCodeLine{00999\ \ \ \ \ \textcolor{keywordtype}{float}\ b\_base\ =\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()\ -\/\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>()\ ;}
\DoxyCodeLine{01000\ \ \ \ \ \textcolor{keywordtype}{float}\ s\_base\ =\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>()\ ;}
\DoxyCodeLine{01001\ }
\DoxyCodeLine{01002\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ mode\ =\ 0;\ mode\ <\ 5;\ mode++)}
\DoxyCodeLine{01003\ \ \ \ \ \{}
\DoxyCodeLine{01004\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (g\_base\ >\ mode\_cutoffs[mode][0]\ ||\ b\_base\ >\ mode\_cutoffs[mode][0]\ ||\ s\_base\ >\ mode\_cutoffs[mode][1])}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01006\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01008\ }
\DoxyCodeLine{01009\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Encode\ the\ mode\ into\ a\ 4-\/bit\ vector}}
\DoxyCodeLine{01010\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ mode\_enc\ =\ mode\ <\ 4\ ?\ (mode\ |\ (majcomp\ <<\ 2))\ :\ (majcomp\ |\ 0xC);}
\DoxyCodeLine{01011\ }
\DoxyCodeLine{01012\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ mode\_scale\ =\ mode\_scales[mode];}
\DoxyCodeLine{01013\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ mode\_rscale\ =\ mode\_rscales[mode];}
\DoxyCodeLine{01014\ }
\DoxyCodeLine{01015\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ gb\_intcutoff\ =\ 1\ <<\ mode\_bits[mode][1];}
\DoxyCodeLine{01016\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ s\_intcutoff\ =\ 1\ <<\ mode\_bits[mode][2];}
\DoxyCodeLine{01017\ }
\DoxyCodeLine{01018\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Quantize\ and\ unquantize\ R}}
\DoxyCodeLine{01019\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ r\_intval\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(r\_base\ *\ mode\_scale);}
\DoxyCodeLine{01020\ }
\DoxyCodeLine{01021\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ r\_lowbits\ =\ r\_intval\ \&\ 0x3f;}
\DoxyCodeLine{01022\ }
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ r\_lowbits\ |=\ (mode\_enc\ \&\ 3)\ <<\ 6;}
\DoxyCodeLine{01024\ }
\DoxyCodeLine{01025\ \ \ \ \ \ \ \ \ uint8\_t\ r\_quantval;}
\DoxyCodeLine{01026\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ae0e7daa2cc696baa52756e0c35d63138}{quantize\_and\_unquantize\_retain\_top\_two\_bits}}(}
\DoxyCodeLine{01027\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(r\_lowbits),\ r\_quantval);}
\DoxyCodeLine{01028\ }
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ r\_intval\ =\ (r\_intval\ \&\ \string~0x3f)\ |\ (r\_quantval\ \&\ 0x3f);}
\DoxyCodeLine{01030\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ r\_fval\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(r\_intval)\ *\ mode\_rscale;}
\DoxyCodeLine{01031\ }
\DoxyCodeLine{01032\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Recompute\ G\ and\ B,\ then\ quantize\ and\ unquantize\ them}}
\DoxyCodeLine{01033\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ g\_fval\ =\ r\_fval\ -\/\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()\ ;}
\DoxyCodeLine{01034\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ b\_fval\ =\ r\_fval\ -\/\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>()\ ;}
\DoxyCodeLine{01035\ }
\DoxyCodeLine{01036\ \ \ \ \ \ \ \ \ g\_fval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(g\_fval,\ 0.0f,\ 65535.0f);}
\DoxyCodeLine{01037\ \ \ \ \ \ \ \ \ b\_fval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(b\_fval,\ 0.0f,\ 65535.0f);}
\DoxyCodeLine{01038\ }
\DoxyCodeLine{01039\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ g\_intval\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(g\_fval\ *\ mode\_scale);}
\DoxyCodeLine{01040\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ b\_intval\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(b\_fval\ *\ mode\_scale);}
\DoxyCodeLine{01041\ }
\DoxyCodeLine{01042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (g\_intval\ >=\ gb\_intcutoff\ ||\ b\_intval\ >=\ gb\_intcutoff)}
\DoxyCodeLine{01043\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01044\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01045\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01046\ }
\DoxyCodeLine{01047\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ g\_lowbits\ =\ g\_intval\ \&\ 0x1f;}
\DoxyCodeLine{01048\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ b\_lowbits\ =\ b\_intval\ \&\ 0x1f;}
\DoxyCodeLine{01049\ }
\DoxyCodeLine{01050\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit0\ =\ 0;}
\DoxyCodeLine{01051\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit1\ =\ 0;}
\DoxyCodeLine{01052\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit2\ =\ 0;}
\DoxyCodeLine{01053\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit3\ =\ 0;}
\DoxyCodeLine{01054\ }
\DoxyCodeLine{01055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01056\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{01058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01059\ \ \ \ \ \ \ \ \ \ \ \ \ bit0\ =\ (r\_intval\ >>\ 9)\ \&\ 1;}
\DoxyCodeLine{01060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01063\ \ \ \ \ \ \ \ \ \ \ \ \ bit0\ =\ (r\_intval\ >>\ 8)\ \&\ 1;}
\DoxyCodeLine{01064\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{01067\ \ \ \ \ \ \ \ \ \ \ \ \ bit0\ =\ (g\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01069\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01070\ }
\DoxyCodeLine{01071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01072\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{01074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01077\ \ \ \ \ \ \ \ \ \ \ \ \ bit2\ =\ (r\_intval\ >>\ 7)\ \&\ 1;}
\DoxyCodeLine{01078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{01081\ \ \ \ \ \ \ \ \ \ \ \ \ bit2\ =\ (b\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01082\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01083\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01084\ }
\DoxyCodeLine{01085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01086\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{01088\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01089\ \ \ \ \ \ \ \ \ \ \ \ \ bit1\ =\ (r\_intval\ >>\ 8)\ \&\ 1;}
\DoxyCodeLine{01090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01091\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01093\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{01095\ \ \ \ \ \ \ \ \ \ \ \ \ bit1\ =\ (g\_intval\ >>\ 5)\ \&\ 1;}
\DoxyCodeLine{01096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01097\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01098\ }
\DoxyCodeLine{01099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01100\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{01102\ \ \ \ \ \ \ \ \ \ \ \ \ bit3\ =\ (r\_intval\ >>\ 10)\ \&\ 1;}
\DoxyCodeLine{01103\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01105\ \ \ \ \ \ \ \ \ \ \ \ \ bit3\ =\ (r\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{01111\ \ \ \ \ \ \ \ \ \ \ \ \ bit3\ =\ (b\_intval\ >>\ 5)\ \&\ 1;}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01113\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01114\ }
\DoxyCodeLine{01115\ \ \ \ \ \ \ \ \ g\_lowbits\ |=\ (mode\_enc\ \&\ 0x4)\ <<\ 5;}
\DoxyCodeLine{01116\ \ \ \ \ \ \ \ \ b\_lowbits\ |=\ (mode\_enc\ \&\ 0x8)\ <<\ 4;}
\DoxyCodeLine{01117\ }
\DoxyCodeLine{01118\ \ \ \ \ \ \ \ \ g\_lowbits\ |=\ bit0\ <<\ 6;}
\DoxyCodeLine{01119\ \ \ \ \ \ \ \ \ g\_lowbits\ |=\ bit1\ <<\ 5;}
\DoxyCodeLine{01120\ \ \ \ \ \ \ \ \ b\_lowbits\ |=\ bit2\ <<\ 6;}
\DoxyCodeLine{01121\ \ \ \ \ \ \ \ \ b\_lowbits\ |=\ bit3\ <<\ 5;}
\DoxyCodeLine{01122\ }
\DoxyCodeLine{01123\ \ \ \ \ \ \ \ \ uint8\_t\ g\_quantval;}
\DoxyCodeLine{01124\ \ \ \ \ \ \ \ \ uint8\_t\ b\_quantval;}
\DoxyCodeLine{01125\ }
\DoxyCodeLine{01126\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857}{quantize\_and\_unquantize\_retain\_top\_four\_bits}}(}
\DoxyCodeLine{01127\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(g\_lowbits),\ g\_quantval);}
\DoxyCodeLine{01128\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857}{quantize\_and\_unquantize\_retain\_top\_four\_bits}}(}
\DoxyCodeLine{01129\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(b\_lowbits),\ b\_quantval);}
\DoxyCodeLine{01130\ }
\DoxyCodeLine{01131\ \ \ \ \ \ \ \ \ g\_intval\ =\ (g\_intval\ \&\ \string~0x1f)\ |\ (g\_quantval\ \&\ 0x1f);}
\DoxyCodeLine{01132\ \ \ \ \ \ \ \ \ b\_intval\ =\ (b\_intval\ \&\ \string~0x1f)\ |\ (b\_quantval\ \&\ 0x1f);}
\DoxyCodeLine{01133\ }
\DoxyCodeLine{01134\ \ \ \ \ \ \ \ \ g\_fval\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(g\_intval)\ *\ mode\_rscale;}
\DoxyCodeLine{01135\ \ \ \ \ \ \ \ \ b\_fval\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(b\_intval)\ *\ mode\_rscale;}
\DoxyCodeLine{01136\ }
\DoxyCodeLine{01137\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Recompute\ the\ scale\ value,\ based\ on\ the\ errors\ introduced\ to\ red,\ green\ and\ blue}}
\DoxyCodeLine{01138\ }
\DoxyCodeLine{01139\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ error\ is\ positive,\ then\ the\ R,G,B\ errors\ combined\ have\ raised\ the\ color}}
\DoxyCodeLine{01140\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ value\ overall;\ as\ such,\ the\ scale\ value\ needs\ to\ be\ increased.}}
\DoxyCodeLine{01141\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ rgb\_errorsum\ =\ (r\_fval\ -\/\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()\ )\ +\ (r\_fval\ -\/\ g\_fval\ -\/\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()\ )\ +\ (r\_fval\ -\/\ b\_fval\ -\/\ color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>()\ );}
\DoxyCodeLine{01142\ }
\DoxyCodeLine{01143\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ s\_fval\ =\ s\_base\ +\ rgb\_errorsum\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{01144\ \ \ \ \ \ \ \ \ s\_fval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(s\_fval,\ 0.0f,\ 1e9f);}
\DoxyCodeLine{01145\ }
\DoxyCodeLine{01146\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ s\_intval\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(s\_fval\ *\ mode\_scale);}
\DoxyCodeLine{01147\ }
\DoxyCodeLine{01148\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (s\_intval\ >=\ s\_intcutoff)}
\DoxyCodeLine{01149\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01151\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01152\ }
\DoxyCodeLine{01153\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ s\_lowbits\ =\ s\_intval\ \&\ 0x1f;}
\DoxyCodeLine{01154\ }
\DoxyCodeLine{01155\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit4;}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit5;}
\DoxyCodeLine{01157\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit6;}
\DoxyCodeLine{01158\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01159\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01160\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01161\ \ \ \ \ \ \ \ \ \ \ \ \ bit6\ =\ (r\_intval\ >>\ 9)\ \&\ 1;}
\DoxyCodeLine{01162\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01163\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01164\ \ \ \ \ \ \ \ \ \ \ \ \ bit6\ =\ (s\_intval\ >>\ 5)\ \&\ 1;}
\DoxyCodeLine{01165\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01166\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01167\ }
\DoxyCodeLine{01168\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01169\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01171\ \ \ \ \ \ \ \ \ \ \ \ \ bit5\ =\ (r\_intval\ >>\ 7)\ \&\ 1;}
\DoxyCodeLine{01172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01174\ \ \ \ \ \ \ \ \ \ \ \ \ bit5\ =\ (r\_intval\ >>\ 10)\ \&\ 1;}
\DoxyCodeLine{01175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01177\ \ \ \ \ \ \ \ \ \ \ \ \ bit5\ =\ (s\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01179\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01180\ }
\DoxyCodeLine{01181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mode)}
\DoxyCodeLine{01182\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01183\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01184\ \ \ \ \ \ \ \ \ \ \ \ \ bit4\ =\ (s\_intval\ >>\ 7)\ \&\ 1;}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01187\ \ \ \ \ \ \ \ \ \ \ \ \ bit4\ =\ (r\_intval\ >>\ 6)\ \&\ 1;}
\DoxyCodeLine{01188\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01189\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01190\ }
\DoxyCodeLine{01191\ \ \ \ \ \ \ \ \ s\_lowbits\ |=\ bit6\ <<\ 5;}
\DoxyCodeLine{01192\ \ \ \ \ \ \ \ \ s\_lowbits\ |=\ bit5\ <<\ 6;}
\DoxyCodeLine{01193\ \ \ \ \ \ \ \ \ s\_lowbits\ |=\ bit4\ <<\ 7;}
\DoxyCodeLine{01194\ }
\DoxyCodeLine{01195\ \ \ \ \ \ \ \ \ uint8\_t\ s\_quantval;}
\DoxyCodeLine{01196\ }
\DoxyCodeLine{01197\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857}{quantize\_and\_unquantize\_retain\_top\_four\_bits}}(}
\DoxyCodeLine{01198\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(s\_lowbits),\ s\_quantval);}
\DoxyCodeLine{01199\ }
\DoxyCodeLine{01200\ \ \ \ \ \ \ \ \ output[0]\ =\ r\_quantval;}
\DoxyCodeLine{01201\ \ \ \ \ \ \ \ \ output[1]\ =\ g\_quantval;}
\DoxyCodeLine{01202\ \ \ \ \ \ \ \ \ output[2]\ =\ b\_quantval;}
\DoxyCodeLine{01203\ \ \ \ \ \ \ \ \ output[3]\ =\ s\_quantval;}
\DoxyCodeLine{01204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01205\ \ \ \ \ \}}
\DoxyCodeLine{01206\ }
\DoxyCodeLine{01207\ \ \ \ \ \textcolor{comment}{//\ Failed\ to\ encode\ any\ of\ the\ modes\ above?\ In\ that\ case\ encode\ using\ mode\ \#5}}
\DoxyCodeLine{01208\ \ \ \ \ \textcolor{keywordtype}{float}\ vals[4];}
\DoxyCodeLine{01209\ \ \ \ \ vals[0]\ =\ color\_bak.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>();}
\DoxyCodeLine{01210\ \ \ \ \ vals[1]\ =\ color\_bak.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>();}
\DoxyCodeLine{01211\ \ \ \ \ vals[2]\ =\ color\_bak.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>();}
\DoxyCodeLine{01212\ \ \ \ \ vals[3]\ =\ color\_bak.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{01213\ }
\DoxyCodeLine{01214\ \ \ \ \ \textcolor{keywordtype}{int}\ ivals[4];}
\DoxyCodeLine{01215\ \ \ \ \ \textcolor{keywordtype}{float}\ cvals[3];}
\DoxyCodeLine{01216\ }
\DoxyCodeLine{01217\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 3;\ i++)}
\DoxyCodeLine{01218\ \ \ \ \ \{}
\DoxyCodeLine{01219\ \ \ \ \ \ \ \ \ vals[i]\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(vals[i],\ 0.0f,\ 65020.0f);}
\DoxyCodeLine{01220\ \ \ \ \ \ \ \ \ ivals[i]\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(vals[i]\ *\ (1.0f\ /\ 512.0f));}
\DoxyCodeLine{01221\ \ \ \ \ \ \ \ \ cvals[i]\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(ivals[i])\ *\ 512.0f;}
\DoxyCodeLine{01222\ \ \ \ \ \}}
\DoxyCodeLine{01223\ }
\DoxyCodeLine{01224\ \ \ \ \ \textcolor{keywordtype}{float}\ rgb\_errorsum\ =\ (cvals[0]\ -\/\ vals[0])\ +\ (cvals[1]\ -\/\ vals[1])\ +\ (cvals[2]\ -\/\ vals[2]);}
\DoxyCodeLine{01225\ \ \ \ \ vals[3]\ +=\ rgb\_errorsum\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{01226\ }
\DoxyCodeLine{01227\ \ \ \ \ vals[3]\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(vals[3],\ 0.0f,\ 65020.0f);}
\DoxyCodeLine{01228\ \ \ \ \ ivals[3]\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(vals[3]\ *\ (1.0f\ /\ 512.0f));}
\DoxyCodeLine{01229\ }
\DoxyCodeLine{01230\ \ \ \ \ \textcolor{keywordtype}{int}\ encvals[4];}
\DoxyCodeLine{01231\ \ \ \ \ encvals[0]\ =\ (ivals[0]\ \&\ 0x3f)\ |\ 0xC0;}
\DoxyCodeLine{01232\ \ \ \ \ encvals[1]\ =\ (ivals[1]\ \&\ 0x7f)\ |\ 0x80;}
\DoxyCodeLine{01233\ \ \ \ \ encvals[2]\ =\ (ivals[2]\ \&\ 0x7f)\ |\ 0x80;}
\DoxyCodeLine{01234\ \ \ \ \ encvals[3]\ =\ (ivals[3]\ \&\ 0x7f)\ |\ ((ivals[0]\ \&\ 0x40)\ <<\ 1);}
\DoxyCodeLine{01235\ }
\DoxyCodeLine{01236\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ i\ =\ 0;\ i\ <\ 4;\ i++)}
\DoxyCodeLine{01237\ \ \ \ \ \{}
\DoxyCodeLine{01238\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_ab9e83c316e8b6c63580e0a17a9ddc857}{quantize\_and\_unquantize\_retain\_top\_four\_bits}}(}
\DoxyCodeLine{01239\ \ \ \ \ \ \ \ \ \ \ \ \ quant\_level,\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(encvals[i]),\ output[i]);}
\DoxyCodeLine{01240\ \ \ \ \ \}}
\DoxyCodeLine{01241\ }
\DoxyCodeLine{01242\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01243\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a8c60d84b27b5bf6a95eafa1b86497235_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a8c60d84b27b5bf6a95eafa1b86497235_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_ae9901a3923b424bef4509df064efd91e}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_luminance@{quantize\_luminance}}
\index{quantize\_luminance@{quantize\_luminance}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_luminance()}{quantize\_luminance()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_ae9901a3923b424bef4509df064efd91e} 
static void quantize\+\_\+luminance (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}2\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize a LDR L color. 


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as (l0, l1). \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00795}{795}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00800\ \ \ \{}
\DoxyCodeLine{00801\ \ \ \ \ \textcolor{keywordtype}{float}\ lum0\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color0)\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{00802\ \ \ \ \ \textcolor{keywordtype}{float}\ lum1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color1)\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{00803\ }
\DoxyCodeLine{00804\ \ \ \ \ \textcolor{keywordflow}{if}\ (lum0\ >\ lum1)}
\DoxyCodeLine{00805\ \ \ \ \ \{}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ avg\ =\ (lum0\ +\ lum1)\ *\ 0.5f;}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ lum0\ =\ avg;}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ lum1\ =\ avg;}
\DoxyCodeLine{00809\ \ \ \ \ \}}
\DoxyCodeLine{00810\ }
\DoxyCodeLine{00811\ \ \ \ \ output[0]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(lum0),\ lum0);}
\DoxyCodeLine{00812\ \ \ \ \ output[1]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(lum1),\ lum1);}
\DoxyCodeLine{00813\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_ae9901a3923b424bef4509df064efd91e_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_ae9901a3923b424bef4509df064efd91e_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a847eef8e87233ecad7a553dfa1dcd4d5}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_luminance\_alpha@{quantize\_luminance\_alpha}}
\index{quantize\_luminance\_alpha@{quantize\_luminance\_alpha}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_luminance\_alpha()}{quantize\_luminance\_alpha()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a847eef8e87233ecad7a553dfa1dcd4d5} 
static void quantize\+\_\+luminance\+\_\+alpha (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}4\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize a LDR LA color. 


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as (l0, l1, a0, a1). \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00823}{823}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00828\ \ \ \{}
\DoxyCodeLine{00829\ \ \ \ \ \textcolor{keywordtype}{float}\ lum0\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color0)\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{00830\ \ \ \ \ \textcolor{keywordtype}{float}\ lum1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color1)\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{00831\ }
\DoxyCodeLine{00832\ \ \ \ \ \textcolor{keywordtype}{float}\ a0\ =\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00833\ \ \ \ \ \textcolor{keywordtype}{float}\ a1\ =\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00834\ }
\DoxyCodeLine{00835\ \ \ \ \ output[0]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(lum0),\ lum0);}
\DoxyCodeLine{00836\ \ \ \ \ output[1]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(lum1),\ lum1);}
\DoxyCodeLine{00837\ \ \ \ \ output[2]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a0),\ a0);}
\DoxyCodeLine{00838\ \ \ \ \ output[3]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a1),\ a1);}
\DoxyCodeLine{00839\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a847eef8e87233ecad7a553dfa1dcd4d5_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a847eef8e87233ecad7a553dfa1dcd4d5_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_aad6197b2a3f7eb3048a81f24e5f9c7b3}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_rgb@{quantize\_rgb}}
\index{quantize\_rgb@{quantize\_rgb}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_rgb()}{quantize\_rgb()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_aad6197b2a3f7eb3048a81f24e5f9c7b3} 
static void quantize\+\_\+rgb (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color0\+\_\+out}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color1\+\_\+out}{, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize an LDR RGB color. 

Since this is a fall-\/back encoding, we cannot actually fail but must produce a sensible result. For this encoding {\ttfamily color0} cannot be larger than {\ttfamily color1}. If {\ttfamily color0} is actually larger than {\ttfamily color1}, {\ttfamily color0} is reduced and {\ttfamily color1} is increased until the constraint is met.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color0\+\_\+out} & The output quantized color0 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color1\+\_\+out} & The output quantized color1 endpoint. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00169}{169}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00175\ \ \ \{}
\DoxyCodeLine{00176\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0i,\ color1i;}
\DoxyCodeLine{00177\ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ nudge(0.2f);}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{00180\ \ \ \ \ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0q\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_aa162915c044e97cc1f6d630338761fd3}{max}}(\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a598d6ea3ba27a788b12341a5263c7881}{float\_to\_int\_rtn}}(color0),\ \mbox{\hyperlink{structvint4}{vint4}}(0));}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ color0i\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092}{quant\_color3}}(quant\_level,\ color0q,\ color0);}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ color0\ =\ color0\ -\/\ nudge;}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1q\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a165b3db4e7ced1551e1880a01a01150b}{min}}(\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a598d6ea3ba27a788b12341a5263c7881}{float\_to\_int\_rtn}}(color1),\ \mbox{\hyperlink{structvint4}{vint4}}(255));}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ color1i\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092}{quant\_color3}}(quant\_level,\ color1q,\ color1);}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ color1\ =\ color1\ +\ nudge;}
\DoxyCodeLine{00188\ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color0i)\ >\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color1i));}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ color0\_out\ =\ color0i;}
\DoxyCodeLine{00191\ \ \ \ \ color1\_out\ =\ color1i;}
\DoxyCodeLine{00192\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_aad6197b2a3f7eb3048a81f24e5f9c7b3_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_aad6197b2a3f7eb3048a81f24e5f9c7b3_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_aa1eba2920aec0d82d8b1f66ccd3a1044}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_rgba@{quantize\_rgba}}
\index{quantize\_rgba@{quantize\_rgba}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_rgba()}{quantize\_rgba()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_aa1eba2920aec0d82d8b1f66ccd3a1044} 
static void quantize\+\_\+rgba (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color0\+\_\+out}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color1\+\_\+out}{, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize an LDR RGBA color. 

Since this is a fall-\/back encoding, we cannot actually fail but must produce a sensible result. For this encoding {\ttfamily color0.\+rgb} cannot be larger than {\ttfamily color1.\+rgb} (this indicates blue contraction). If {\ttfamily color0.\+rgb} is actually larger than {\ttfamily color1.\+rgb}, {\ttfamily color0.\+rgb} is reduced and {\ttfamily color1.\+rgb} is increased until the constraint is met.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color0\+\_\+out} & The output quantized color0 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color1\+\_\+out} & The output quantized color1 endpoint. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00208}{208}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00214\ \ \ \{}
\DoxyCodeLine{00215\ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_aad6197b2a3f7eb3048a81f24e5f9c7b3}{quantize\_rgb}}(color0,\ color1,\ color0\_out,\ color1\_out,\ quant\_level);}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordtype}{float}\ a0\ =\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordtype}{float}\ a1\ =\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ color0\_out.\mbox{\hyperlink{structvint4_a1e438bb142ad09e372b0834acd0c0b68}{set\_lane}}<3>(\mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a0),\ a0));}
\DoxyCodeLine{00221\ \ \ \ \ color1\_out.\mbox{\hyperlink{structvint4_a1e438bb142ad09e372b0834acd0c0b68}{set\_lane}}<3>(\mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a1),\ a1));}
\DoxyCodeLine{00222\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_aa1eba2920aec0d82d8b1f66ccd3a1044_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_aa1eba2920aec0d82d8b1f66ccd3a1044_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a9a0a7e003d1ea68f9b48c28e406ad1ad}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_rgbs@{quantize\_rgbs}}
\index{quantize\_rgbs@{quantize\_rgbs}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_rgbs()}{quantize\_rgbs()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a9a0a7e003d1ea68f9b48c28e406ad1ad} 
static void quantize\+\_\+rgbs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}4\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize an LDR RGB color using scale encoding. 


\begin{DoxyParams}[1]{매개변수}
 & {\em color} & The input unquantized color endpoint and scale factor. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as (r0, g0, b0, s). \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00734}{734}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00738\ \ \ \{}
\DoxyCodeLine{00739\ \ \ \ \ \textcolor{keywordtype}{float}\ scale\ =\ 1.0f\ /\ 257.0f;}
\DoxyCodeLine{00740\ }
\DoxyCodeLine{00741\ \ \ \ \ \textcolor{keywordtype}{float}\ r\ =\ \mbox{\hyperlink{namespaceastc_a1861708487807ec08c172e2f7ff58978}{astc::clamp255f}}(color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()\ *\ scale);}
\DoxyCodeLine{00742\ \ \ \ \ \textcolor{keywordtype}{float}\ g\ =\ \mbox{\hyperlink{namespaceastc_a1861708487807ec08c172e2f7ff58978}{astc::clamp255f}}(color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()\ *\ scale);}
\DoxyCodeLine{00743\ \ \ \ \ \textcolor{keywordtype}{float}\ b\ =\ \mbox{\hyperlink{namespaceastc_a1861708487807ec08c172e2f7ff58978}{astc::clamp255f}}(color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>()\ *\ scale);}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ \ \ \ \ \textcolor{keywordtype}{int}\ ri\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(r),\ r);}
\DoxyCodeLine{00746\ \ \ \ \ \textcolor{keywordtype}{int}\ gi\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(g),\ g);}
\DoxyCodeLine{00747\ \ \ \ \ \textcolor{keywordtype}{int}\ bi\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(b),\ b);}
\DoxyCodeLine{00748\ }
\DoxyCodeLine{00749\ \ \ \ \ \textcolor{keywordtype}{float}\ oldcolorsum\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color)\ *\ scale;}
\DoxyCodeLine{00750\ \ \ \ \ \textcolor{keywordtype}{float}\ newcolorsum\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(ri\ +\ gi\ +\ bi);}
\DoxyCodeLine{00751\ }
\DoxyCodeLine{00752\ \ \ \ \ \textcolor{keywordtype}{float}\ scalea\ =\ \mbox{\hyperlink{namespaceastc_ac60307af42a98d70a956170894e29e9e}{astc::clamp1f}}(color.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>()\ *\ (oldcolorsum\ +\ 1e-\/10f)\ /\ (newcolorsum\ +\ 1e-\/10f));}
\DoxyCodeLine{00753\ \ \ \ \ \textcolor{keywordtype}{int}\ scale\_idx\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(scalea\ *\ 256.0f);}
\DoxyCodeLine{00754\ \ \ \ \ scale\_idx\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(scale\_idx,\ 0,\ 255);}
\DoxyCodeLine{00755\ }
\DoxyCodeLine{00756\ \ \ \ \ output[0]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(ri);}
\DoxyCodeLine{00757\ \ \ \ \ output[1]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(gi);}
\DoxyCodeLine{00758\ \ \ \ \ output[2]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(bi);}
\DoxyCodeLine{00759\ \ \ \ \ output[3]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ scale\_idx);}
\DoxyCodeLine{00760\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a9a0a7e003d1ea68f9b48c28e406ad1ad_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a9a0a7e003d1ea68f9b48c28e406ad1ad_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a2d4a8db93c0ebf03b3b6dc23b292428f}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!quantize\_rgbs\_alpha@{quantize\_rgbs\_alpha}}
\index{quantize\_rgbs\_alpha@{quantize\_rgbs\_alpha}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{quantize\_rgbs\_alpha()}{quantize\_rgbs\_alpha()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a2d4a8db93c0ebf03b3b6dc23b292428f} 
static void quantize\+\_\+rgbs\+\_\+alpha (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}6\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize an LDR RGBA color using scale encoding. 


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 alpha endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 alpha endpoint. \\
\hline
 & {\em color} & The input unquantized color endpoint and scale factor. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as (r0, g0, b0, s, a0, a1). \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00771}{771}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00777\ \ \ \{}
\DoxyCodeLine{00778\ \ \ \ \ \textcolor{keywordtype}{float}\ a0\ =\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00779\ \ \ \ \ \textcolor{keywordtype}{float}\ a1\ =\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00780\ }
\DoxyCodeLine{00781\ \ \ \ \ output[4]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a0),\ a0);}
\DoxyCodeLine{00782\ \ \ \ \ output[5]\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a1),\ a1);}
\DoxyCodeLine{00783\ }
\DoxyCodeLine{00784\ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a9a0a7e003d1ea68f9b48c28e406ad1ad}{quantize\_rgbs}}(color,\ output,\ quant\_level);}
\DoxyCodeLine{00785\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a2d4a8db93c0ebf03b3b6dc23b292428f_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a2d4a8db93c0ebf03b3b6dc23b292428f_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a4390447f4e4f3f2355c2381228d2e5c2}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!try\_quantize\_alpha\_delta@{try\_quantize\_alpha\_delta}}
\index{try\_quantize\_alpha\_delta@{try\_quantize\_alpha\_delta}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{try\_quantize\_alpha\_delta()}{try\_quantize\_alpha\_delta()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a4390447f4e4f3f2355c2381228d2e5c2} 
static bool try\+\_\+quantize\+\_\+alpha\+\_\+delta (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color0\+\_\+out}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color1\+\_\+out}{, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Try to quantize an LDR A color using delta encoding. 

At decode time we move one bit from the offset to the base and seize another bit as a sign bit; we then unquantize both values as if they contain one extra bit. If the sum of the offsets is non-\/negative, then we encode a regular delta.

This function only compressed the alpha -\/ the other elements in the output array are not touched.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color0\+\_\+out} & The output quantized color0 endpoint; must preserve lane 0/1/2. \\
\hline
\mbox{\texttt{ out}}  & {\em color1\+\_\+out} & The output quantized color1 endpoint; must preserve lane 0/1/2. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Returns {\ttfamily false} on failure, {\ttfamily true} on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00504}{504}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00510\ \ \ \{}
\DoxyCodeLine{00511\ \ \ \ \ \textcolor{keywordtype}{float}\ a0\ =\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00512\ \ \ \ \ \textcolor{keywordtype}{float}\ a1\ =\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00514\ \ \ \ \ \textcolor{keywordtype}{int}\ a0a\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a0);}
\DoxyCodeLine{00515\ \ \ \ \ a0a\ <<=\ 1;}
\DoxyCodeLine{00516\ \ \ \ \ \textcolor{keywordtype}{int}\ a0b\ =\ a0a\ \&\ 0xFF;}
\DoxyCodeLine{00517\ \ \ \ \ \textcolor{keywordtype}{int}\ a0be\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ a0b);}
\DoxyCodeLine{00518\ \ \ \ \ a0b\ =\ a0be;}
\DoxyCodeLine{00519\ \ \ \ \ a0b\ |=\ a0a\ \&\ 0x100;}
\DoxyCodeLine{00520\ \ \ \ \ \textcolor{keywordtype}{int}\ a1d\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a1);}
\DoxyCodeLine{00521\ \ \ \ \ a1d\ <<=\ 1;}
\DoxyCodeLine{00522\ \ \ \ \ a1d\ -\/=\ a0b;}
\DoxyCodeLine{00523\ }
\DoxyCodeLine{00524\ \ \ \ \ \textcolor{keywordflow}{if}\ (a1d\ >\ 63\ ||\ a1d\ <\ -\/64)}
\DoxyCodeLine{00525\ \ \ \ \ \{}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00527\ \ \ \ \ \}}
\DoxyCodeLine{00528\ }
\DoxyCodeLine{00529\ \ \ \ \ a1d\ \&=\ 0x7F;}
\DoxyCodeLine{00530\ \ \ \ \ a1d\ |=\ (a0b\ \&\ 0x100)\ >>\ 1;}
\DoxyCodeLine{00531\ }
\DoxyCodeLine{00532\ \ \ \ \ \textcolor{keywordtype}{int}\ a1de\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ a1d);}
\DoxyCodeLine{00533\ \ \ \ \ \textcolor{keywordtype}{int}\ a1du\ =\ a1de;}
\DoxyCodeLine{00534\ \ \ \ \ \textcolor{keywordflow}{if}\ ((a1d\ \string^\ a1du)\ \&\ 0xC0)}
\DoxyCodeLine{00535\ \ \ \ \ \{}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00537\ \ \ \ \ \}}
\DoxyCodeLine{00538\ }
\DoxyCodeLine{00539\ \ \ \ \ a1du\ \&=\ 0x7F;}
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keywordflow}{if}\ (a1du\ \&\ 0x40)}
\DoxyCodeLine{00541\ \ \ \ \ \{}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ a1du\ -\/=\ 0x80;}
\DoxyCodeLine{00543\ \ \ \ \ \}}
\DoxyCodeLine{00544\ }
\DoxyCodeLine{00545\ \ \ \ \ a1du\ +=\ a0b;}
\DoxyCodeLine{00546\ \ \ \ \ \textcolor{keywordflow}{if}\ (a1du\ <\ 0\ ||\ a1du\ >\ 0x1FF)}
\DoxyCodeLine{00547\ \ \ \ \ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00549\ \ \ \ \ \}}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \ \ \ \ color0\_out.\mbox{\hyperlink{structvint4_a1e438bb142ad09e372b0834acd0c0b68}{set\_lane}}<3>(a0be);}
\DoxyCodeLine{00552\ \ \ \ \ color1\_out.\mbox{\hyperlink{structvint4_a1e438bb142ad09e372b0834acd0c0b68}{set\_lane}}<3>(a1de);}
\DoxyCodeLine{00553\ }
\DoxyCodeLine{00554\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00555\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=295pt]{astcenc__color__quantize_8cpp_a4390447f4e4f3f2355c2381228d2e5c2_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a4390447f4e4f3f2355c2381228d2e5c2_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a105c509260a154870ee3d34d1a336c60}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!try\_quantize\_hdr\_luminance\_small\_range@{try\_quantize\_hdr\_luminance\_small\_range}}
\index{try\_quantize\_hdr\_luminance\_small\_range@{try\_quantize\_hdr\_luminance\_small\_range}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{try\_quantize\_hdr\_luminance\_small\_range()}{try\_quantize\_hdr\_luminance\_small\_range()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a105c509260a154870ee3d34d1a336c60} 
static bool try\+\_\+quantize\+\_\+hdr\+\_\+luminance\+\_\+small\+\_\+range (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}2\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Quantize a HDR L color using the small range encoding. 


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as packed (l0, l1) with mode bits. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Returns {\ttfamily false} on failure, {\ttfamily true} on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l01718}{1718}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{01723\ \ \ \{}
\DoxyCodeLine{01724\ \ \ \ \ \textcolor{keywordtype}{float}\ lum0\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color0)\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{01725\ \ \ \ \ \textcolor{keywordtype}{float}\ lum1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color1)\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{01726\ }
\DoxyCodeLine{01727\ \ \ \ \ \textcolor{keywordflow}{if}\ (lum1\ <\ lum0)}
\DoxyCodeLine{01728\ \ \ \ \ \{}
\DoxyCodeLine{01729\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ avg\ =\ (lum0\ +\ lum1)\ *\ 0.5f;}
\DoxyCodeLine{01730\ \ \ \ \ \ \ \ \ lum0\ =\ avg;}
\DoxyCodeLine{01731\ \ \ \ \ \ \ \ \ lum1\ =\ avg;}
\DoxyCodeLine{01732\ \ \ \ \ \}}
\DoxyCodeLine{01733\ }
\DoxyCodeLine{01734\ \ \ \ \ \textcolor{keywordtype}{int}\ ilum1\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(lum1);}
\DoxyCodeLine{01735\ \ \ \ \ \textcolor{keywordtype}{int}\ ilum0\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(lum0);}
\DoxyCodeLine{01736\ }
\DoxyCodeLine{01737\ \ \ \ \ \textcolor{comment}{//\ Difference\ of\ more\ than\ a\ factor-\/of-\/2\ results\ in\ immediate\ failure}}
\DoxyCodeLine{01738\ \ \ \ \ \textcolor{keywordflow}{if}\ (ilum1\ -\/\ ilum0\ >\ 2048)}
\DoxyCodeLine{01739\ \ \ \ \ \{}
\DoxyCodeLine{01740\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01741\ \ \ \ \ \}}
\DoxyCodeLine{01742\ }
\DoxyCodeLine{01743\ \ \ \ \ \textcolor{keywordtype}{int}\ lowval,\ highval,\ diffval;}
\DoxyCodeLine{01744\ \ \ \ \ \textcolor{keywordtype}{int}\ v0,\ v1;}
\DoxyCodeLine{01745\ \ \ \ \ \textcolor{keywordtype}{int}\ v0e,\ v1e;}
\DoxyCodeLine{01746\ \ \ \ \ \textcolor{keywordtype}{int}\ v0d,\ v1d;}
\DoxyCodeLine{01747\ }
\DoxyCodeLine{01748\ \ \ \ \ \textcolor{comment}{//\ Try\ to\ encode\ the\ high-\/precision\ submode}}
\DoxyCodeLine{01749\ \ \ \ \ lowval\ =\ (ilum0\ +\ 16)\ >>\ 5;}
\DoxyCodeLine{01750\ \ \ \ \ highval\ =\ (ilum1\ +\ 16)\ >>\ 5;}
\DoxyCodeLine{01751\ }
\DoxyCodeLine{01752\ \ \ \ \ lowval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(lowval,\ 0,\ 2047);}
\DoxyCodeLine{01753\ \ \ \ \ highval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(highval,\ 0,\ 2047);}
\DoxyCodeLine{01754\ }
\DoxyCodeLine{01755\ \ \ \ \ v0\ =\ lowval\ \&\ 0x7F;}
\DoxyCodeLine{01756\ \ \ \ \ v0e\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ v0);}
\DoxyCodeLine{01757\ \ \ \ \ v0d\ =\ v0e;}
\DoxyCodeLine{01758\ }
\DoxyCodeLine{01759\ \ \ \ \ \textcolor{keywordflow}{if}\ (v0d\ <\ 0x80)}
\DoxyCodeLine{01760\ \ \ \ \ \{}
\DoxyCodeLine{01761\ \ \ \ \ \ \ \ \ lowval\ =\ (lowval\ \&\ \string~0x7F)\ |\ v0d;}
\DoxyCodeLine{01762\ \ \ \ \ \ \ \ \ diffval\ =\ highval\ -\/\ lowval;}
\DoxyCodeLine{01763\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (diffval\ >=\ 0\ \&\&\ diffval\ <=\ 15)}
\DoxyCodeLine{01764\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01765\ \ \ \ \ \ \ \ \ \ \ \ \ v1\ =\ ((lowval\ >>\ 3)\ \&\ 0xF0)\ |\ diffval;}
\DoxyCodeLine{01766\ \ \ \ \ \ \ \ \ \ \ \ \ v1e\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ v1);}
\DoxyCodeLine{01767\ \ \ \ \ \ \ \ \ \ \ \ \ v1d\ =\ v1e;}
\DoxyCodeLine{01768\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((v1d\ \&\ 0xF0)\ ==\ (v1\ \&\ 0xF0))}
\DoxyCodeLine{01769\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01770\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output[0]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(v0e);}
\DoxyCodeLine{01771\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output[1]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(v1e);}
\DoxyCodeLine{01772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01773\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01774\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01775\ \ \ \ \ \}}
\DoxyCodeLine{01776\ }
\DoxyCodeLine{01777\ \ \ \ \ \textcolor{comment}{//\ Try\ to\ encode\ the\ low-\/precision\ submode}}
\DoxyCodeLine{01778\ \ \ \ \ lowval\ =\ (ilum0\ +\ 32)\ >>\ 6;}
\DoxyCodeLine{01779\ \ \ \ \ highval\ =\ (ilum1\ +\ 32)\ >>\ 6;}
\DoxyCodeLine{01780\ }
\DoxyCodeLine{01781\ \ \ \ \ lowval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(lowval,\ 0,\ 1023);}
\DoxyCodeLine{01782\ \ \ \ \ highval\ =\ \mbox{\hyperlink{namespaceastc_a8f8b2ad23b04a389f6785bc80b61349b}{astc::clamp}}(highval,\ 0,\ 1023);}
\DoxyCodeLine{01783\ }
\DoxyCodeLine{01784\ \ \ \ \ v0\ =\ (lowval\ \&\ 0x7F)\ |\ 0x80;}
\DoxyCodeLine{01785\ \ \ \ \ v0e\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ v0);}
\DoxyCodeLine{01786\ \ \ \ \ v0d\ =\ v0e;}
\DoxyCodeLine{01787\ \ \ \ \ \textcolor{keywordflow}{if}\ ((v0d\ \&\ 0x80)\ ==\ 0)}
\DoxyCodeLine{01788\ \ \ \ \ \{}
\DoxyCodeLine{01789\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01790\ \ \ \ \ \}}
\DoxyCodeLine{01791\ }
\DoxyCodeLine{01792\ \ \ \ \ lowval\ =\ (lowval\ \&\ \string~0x7F)\ |\ (v0d\ \&\ 0x7F);}
\DoxyCodeLine{01793\ \ \ \ \ diffval\ =\ highval\ -\/\ lowval;}
\DoxyCodeLine{01794\ \ \ \ \ \textcolor{keywordflow}{if}\ (diffval\ <\ 0\ ||\ diffval\ >\ 31)}
\DoxyCodeLine{01795\ \ \ \ \ \{}
\DoxyCodeLine{01796\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01797\ \ \ \ \ \}}
\DoxyCodeLine{01798\ }
\DoxyCodeLine{01799\ \ \ \ \ v1\ =\ ((lowval\ >>\ 2)\ \&\ 0xE0)\ |\ diffval;}
\DoxyCodeLine{01800\ \ \ \ \ v1e\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ v1);}
\DoxyCodeLine{01801\ \ \ \ \ v1d\ =\ v1e;}
\DoxyCodeLine{01802\ \ \ \ \ \textcolor{keywordflow}{if}\ ((v1d\ \&\ 0xE0)\ !=\ (v1\ \&\ 0xE0))}
\DoxyCodeLine{01803\ \ \ \ \ \{}
\DoxyCodeLine{01804\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01805\ \ \ \ \ \}}
\DoxyCodeLine{01806\ }
\DoxyCodeLine{01807\ \ \ \ \ output[0]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(v0e);}
\DoxyCodeLine{01808\ \ \ \ \ output[1]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(v1e);}
\DoxyCodeLine{01809\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01810\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a105c509260a154870ee3d34d1a336c60_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a105c509260a154870ee3d34d1a336c60_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a54914cb063a3e14eaef9d6432ed792d6}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!try\_quantize\_luminance\_alpha\_delta@{try\_quantize\_luminance\_alpha\_delta}}
\index{try\_quantize\_luminance\_alpha\_delta@{try\_quantize\_luminance\_alpha\_delta}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{try\_quantize\_luminance\_alpha\_delta()}{try\_quantize\_luminance\_alpha\_delta()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a54914cb063a3e14eaef9d6432ed792d6} 
static bool try\+\_\+quantize\+\_\+luminance\+\_\+alpha\+\_\+delta (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{uint8\+\_\+t}]{output}{\mbox{[}4\mbox{]}, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Try to quantize an LDR LA color using delta encoding. 

At decode time we move one bit from the offset to the base and seize another bit as a sign bit; we then unquantize both values as if they contain one extra bit. If the sum of the offsets is non-\/negative, then we encode a regular delta.

This function only compressed the alpha -\/ the other elements in the output array are not touched.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em output} & The output endpoints, returned as (l0, l1, a0, a1). \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Returns {\ttfamily false} on failure, {\ttfamily true} on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00573}{573}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00578\ \ \ \{}
\DoxyCodeLine{00579\ \ \ \ \ \textcolor{keywordtype}{float}\ l0\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color0)\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{00580\ \ \ \ \ \textcolor{keywordtype}{float}\ l1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color1)\ *\ (1.0f\ /\ 3.0f);}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ \ \ \ \ \textcolor{keywordtype}{float}\ a0\ =\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00583\ \ \ \ \ \textcolor{keywordtype}{float}\ a1\ =\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \ \ \ \ \textcolor{keywordtype}{int}\ l0a\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(l0);}
\DoxyCodeLine{00586\ \ \ \ \ \textcolor{keywordtype}{int}\ a0a\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a0);}
\DoxyCodeLine{00587\ \ \ \ \ l0a\ <<=\ 1;}
\DoxyCodeLine{00588\ \ \ \ \ a0a\ <<=\ 1;}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{keywordtype}{int}\ l0b\ =\ l0a\ \&\ 0xFF;}
\DoxyCodeLine{00591\ \ \ \ \ \textcolor{keywordtype}{int}\ a0b\ =\ a0a\ \&\ 0xFF;}
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{keywordtype}{int}\ l0be\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ l0b);}
\DoxyCodeLine{00593\ \ \ \ \ \textcolor{keywordtype}{int}\ a0be\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ a0b);}
\DoxyCodeLine{00594\ \ \ \ \ l0b\ =\ l0be;}
\DoxyCodeLine{00595\ \ \ \ \ a0b\ =\ a0be;}
\DoxyCodeLine{00596\ \ \ \ \ l0b\ |=\ l0a\ \&\ 0x100;}
\DoxyCodeLine{00597\ \ \ \ \ a0b\ |=\ a0a\ \&\ 0x100;}
\DoxyCodeLine{00598\ }
\DoxyCodeLine{00599\ \ \ \ \ \textcolor{keywordtype}{int}\ l1d\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(l1);}
\DoxyCodeLine{00600\ \ \ \ \ \textcolor{keywordtype}{int}\ a1d\ =\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a1);}
\DoxyCodeLine{00601\ \ \ \ \ l1d\ <<=\ 1;}
\DoxyCodeLine{00602\ \ \ \ \ a1d\ <<=\ 1;}
\DoxyCodeLine{00603\ \ \ \ \ l1d\ -\/=\ l0b;}
\DoxyCodeLine{00604\ \ \ \ \ a1d\ -\/=\ a0b;}
\DoxyCodeLine{00605\ }
\DoxyCodeLine{00606\ \ \ \ \ \textcolor{keywordflow}{if}\ (l1d\ >\ 63\ ||\ l1d\ <\ -\/64)}
\DoxyCodeLine{00607\ \ \ \ \ \{}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00609\ \ \ \ \ \}}
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00611\ \ \ \ \ \textcolor{keywordflow}{if}\ (a1d\ >\ 63\ ||\ a1d\ <\ -\/64)}
\DoxyCodeLine{00612\ \ \ \ \ \{}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00614\ \ \ \ \ \}}
\DoxyCodeLine{00615\ }
\DoxyCodeLine{00616\ \ \ \ \ l1d\ \&=\ 0x7F;}
\DoxyCodeLine{00617\ \ \ \ \ a1d\ \&=\ 0x7F;}
\DoxyCodeLine{00618\ \ \ \ \ l1d\ |=\ (l0b\ \&\ 0x100)\ >>\ 1;}
\DoxyCodeLine{00619\ \ \ \ \ a1d\ |=\ (a0b\ \&\ 0x100)\ >>\ 1;}
\DoxyCodeLine{00620\ }
\DoxyCodeLine{00621\ \ \ \ \ \textcolor{keywordtype}{int}\ l1de\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ l1d);}
\DoxyCodeLine{00622\ \ \ \ \ \textcolor{keywordtype}{int}\ a1de\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ a1d);}
\DoxyCodeLine{00623\ \ \ \ \ \textcolor{keywordtype}{int}\ l1du\ =\ l1de;}
\DoxyCodeLine{00624\ \ \ \ \ \textcolor{keywordtype}{int}\ a1du\ =\ a1de;}
\DoxyCodeLine{00625\ }
\DoxyCodeLine{00626\ \ \ \ \ \textcolor{keywordflow}{if}\ ((l1d\ \string^\ l1du)\ \&\ 0xC0)}
\DoxyCodeLine{00627\ \ \ \ \ \{}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00629\ \ \ \ \ \}}
\DoxyCodeLine{00630\ }
\DoxyCodeLine{00631\ \ \ \ \ \textcolor{keywordflow}{if}\ ((a1d\ \string^\ a1du)\ \&\ 0xC0)}
\DoxyCodeLine{00632\ \ \ \ \ \{}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00634\ \ \ \ \ \}}
\DoxyCodeLine{00635\ }
\DoxyCodeLine{00636\ \ \ \ \ l1du\ \&=\ 0x7F;}
\DoxyCodeLine{00637\ \ \ \ \ a1du\ \&=\ 0x7F;}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \ \ \textcolor{keywordflow}{if}\ (l1du\ \&\ 0x40)}
\DoxyCodeLine{00640\ \ \ \ \ \{}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ l1du\ -\/=\ 0x80;}
\DoxyCodeLine{00642\ \ \ \ \ \}}
\DoxyCodeLine{00643\ }
\DoxyCodeLine{00644\ \ \ \ \ \textcolor{keywordflow}{if}\ (a1du\ \&\ 0x40)}
\DoxyCodeLine{00645\ \ \ \ \ \{}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ a1du\ -\/=\ 0x80;}
\DoxyCodeLine{00647\ \ \ \ \ \}}
\DoxyCodeLine{00648\ }
\DoxyCodeLine{00649\ \ \ \ \ l1du\ +=\ l0b;}
\DoxyCodeLine{00650\ \ \ \ \ a1du\ +=\ a0b;}
\DoxyCodeLine{00651\ }
\DoxyCodeLine{00652\ \ \ \ \ \textcolor{keywordflow}{if}\ (l1du\ <\ 0\ ||\ l1du\ >\ 0x1FF)}
\DoxyCodeLine{00653\ \ \ \ \ \{}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00655\ \ \ \ \ \}}
\DoxyCodeLine{00656\ }
\DoxyCodeLine{00657\ \ \ \ \ \textcolor{keywordflow}{if}\ (a1du\ <\ 0\ ||\ a1du\ >\ 0x1FF)}
\DoxyCodeLine{00658\ \ \ \ \ \{}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00660\ \ \ \ \ \}}
\DoxyCodeLine{00661\ }
\DoxyCodeLine{00662\ \ \ \ \ output[0]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(l0be);}
\DoxyCodeLine{00663\ \ \ \ \ output[1]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(l1de);}
\DoxyCodeLine{00664\ \ \ \ \ output[2]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(a0be);}
\DoxyCodeLine{00665\ \ \ \ \ output[3]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(a1de);}
\DoxyCodeLine{00666\ }
\DoxyCodeLine{00667\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00668\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a54914cb063a3e14eaef9d6432ed792d6_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a54914cb063a3e14eaef9d6432ed792d6_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a1a4ffac105268d9e7ac1058b1b2ad542}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!try\_quantize\_rgb\_blue\_contract@{try\_quantize\_rgb\_blue\_contract}}
\index{try\_quantize\_rgb\_blue\_contract@{try\_quantize\_rgb\_blue\_contract}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{try\_quantize\_rgb\_blue\_contract()}{try\_quantize\_rgb\_blue\_contract()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a1a4ffac105268d9e7ac1058b1b2ad542} 
static bool try\+\_\+quantize\+\_\+rgb\+\_\+blue\+\_\+contract (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color0\+\_\+out}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color1\+\_\+out}{, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Try to quantize an LDR RGB color using blue-\/contraction. 

Blue-\/contraction is only usable if encoded color 1 is larger than color 0.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color0\+\_\+out} & The output quantized color0 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color1\+\_\+out} & The output quantized color1 endpoint. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Returns {\ttfamily false} on failure, {\ttfamily true} on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00237}{237}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00243\ \ \ \{}
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{comment}{//\ Apply\ inverse\ blue-\/contraction}}
\DoxyCodeLine{00245\ \ \ \ \ color0\ +=\ color0\ -\/\ color0.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<2,\ 2,\ 2,\ 3>();}
\DoxyCodeLine{00246\ \ \ \ \ color1\ +=\ color1\ -\/\ color1.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<2,\ 2,\ 2,\ 3>();}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{comment}{//\ If\ anything\ overflows\ BC\ cannot\ be\ used}}
\DoxyCodeLine{00249\ \ \ \ \ \mbox{\hyperlink{structvmask4}{vmask4}}\ color0\_error\ =\ (color0\ <\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(0.0f))\ |\ (color0\ >\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(255.0f));}
\DoxyCodeLine{00250\ \ \ \ \ \mbox{\hyperlink{structvmask4}{vmask4}}\ color1\_error\ =\ (color1\ <\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(0.0f))\ |\ (color1\ >\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(255.0f));}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a1fcb81537a701f246e75fa622c2dd8ee}{any}}(color0\_error\ |\ color1\_error))}
\DoxyCodeLine{00252\ \ \ \ \ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00254\ \ \ \ \ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{comment}{//\ Quantize\ the\ inverse\ blue-\/contracted\ color}}
\DoxyCodeLine{00257\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0i\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092}{quant\_color3}}(quant\_level,\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a598d6ea3ba27a788b12341a5263c7881}{float\_to\_int\_rtn}}(color0),\ color0);}
\DoxyCodeLine{00258\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1i\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092}{quant\_color3}}(quant\_level,\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a598d6ea3ba27a788b12341a5263c7881}{float\_to\_int\_rtn}}(color1),\ color1);}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{comment}{//\ If\ color\ \#1\ is\ not\ larger\ than\ color\ \#0\ then\ blue-\/contraction\ cannot\ be\ used}}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{comment}{//\ We\ must\ test\ afterwards\ because\ quantization\ can\ change\ the\ order}}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color1i)\ <=\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(color0i))}
\DoxyCodeLine{00263\ \ \ \ \ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00265\ \ \ \ \ \}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \ \ color0\_out\ =\ color1i;}
\DoxyCodeLine{00268\ \ \ \ \ color1\_out\ =\ color0i;}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00270\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a1a4ffac105268d9e7ac1058b1b2ad542_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a1a4ffac105268d9e7ac1058b1b2ad542_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a6b7ee442b1e9da4ac693000c4f805c7b}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!try\_quantize\_rgb\_delta@{try\_quantize\_rgb\_delta}}
\index{try\_quantize\_rgb\_delta@{try\_quantize\_rgb\_delta}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{try\_quantize\_rgb\_delta()}{try\_quantize\_rgb\_delta()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a6b7ee442b1e9da4ac693000c4f805c7b} 
static bool try\+\_\+quantize\+\_\+rgb\+\_\+delta (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color0\+\_\+out}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color1\+\_\+out}{, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Try to quantize an LDR RGB color using delta encoding. 

At decode time we move one bit from the offset to the base and seize another bit as a sign bit; we then unquantize both values as if they contain one extra bit. If the sum of the offsets is non-\/negative, then we encode a regular delta.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color0\+\_\+out} & The output quantized color0 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color1\+\_\+out} & The output quantized color1 endpoint. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Returns {\ttfamily false} on failure, {\ttfamily true} on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00321}{321}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00327\ \ \ \{}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{comment}{//\ Transform\ color0\ to\ unorm9}}
\DoxyCodeLine{00329\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0a\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a598d6ea3ba27a788b12341a5263c7881}{float\_to\_int\_rtn}}(color0);}
\DoxyCodeLine{00330\ \ \ \ \ color0.\mbox{\hyperlink{structvfloat4_a2168231efa1e514fd41b3603e57be297}{set\_lane}}<3>(0.0f);}
\DoxyCodeLine{00331\ \ \ \ \ color0a\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a86240f0fb5745ded88afe10d524c960f}{lsl<1>}}(color0a);}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \ \ \textcolor{comment}{//\ Mask\ off\ the\ top\ bit}}
\DoxyCodeLine{00334\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0b\ =\ color0a\ \&\ 0xFF;}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{comment}{//\ Quantize\ then\ unquantize\ in\ order\ to\ get\ a\ value\ that\ we\ take\ differences\ against}}
\DoxyCodeLine{00337\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0be\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092}{quant\_color3}}(quant\_level,\ color0b);}
\DoxyCodeLine{00338\ \ \ \ \ color0b\ =\ color0be\ |\ (color0a\ \&\ 0x100);}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{comment}{//\ Get\ hold\ of\ the\ second\ value}}
\DoxyCodeLine{00341\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1d\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a598d6ea3ba27a788b12341a5263c7881}{float\_to\_int\_rtn}}(color1);}
\DoxyCodeLine{00342\ \ \ \ \ color1d\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a86240f0fb5745ded88afe10d524c960f}{lsl<1>}}(color1d);}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{comment}{//\ ...\ and\ take\ differences}}
\DoxyCodeLine{00345\ \ \ \ \ color1d\ =\ color1d\ -\/\ color0b;}
\DoxyCodeLine{00346\ \ \ \ \ color1d.\mbox{\hyperlink{structvint4_a1e438bb142ad09e372b0834acd0c0b68}{set\_lane}}<3>(0);}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ difference\ is\ too\ large\ to\ be\ encodable}}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a1fcb81537a701f246e75fa622c2dd8ee}{any}}((color1d\ >\ \mbox{\hyperlink{structvint4}{vint4}}(63))\ |\ (color1d\ <\ \mbox{\hyperlink{structvint4}{vint4}}(-\/64))))}
\DoxyCodeLine{00350\ \ \ \ \ \{}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00352\ \ \ \ \ \}}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{comment}{//\ Insert\ top\ bit\ of\ the\ base\ into\ the\ offset}}
\DoxyCodeLine{00355\ \ \ \ \ color1d\ =\ color1d\ \&\ 0x7F;}
\DoxyCodeLine{00356\ \ \ \ \ color1d\ =\ color1d\ |\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a0a3a7d755cec1c73d0ce9c50b33bc207}{lsr<1>}}(color0b\ \&\ 0x100);}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{comment}{//\ Then\ quantize\ and\ unquantize;\ if\ this\ causes\ either\ top\ two\ bits\ to\ flip,\ then\ encoding\ fails}}
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{comment}{//\ since\ we\ have\ then\ corrupted\ either\ the\ top\ bit\ of\ the\ base\ or\ the\ sign\ bit\ of\ the\ offset}}
\DoxyCodeLine{00360\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1de\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092}{quant\_color3}}(quant\_level,\ color1d);}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color\_flips\ =\ (color1d\ \string^\ color1de)\ \&\ 0xC0;}
\DoxyCodeLine{00363\ \ \ \ \ color\_flips.\mbox{\hyperlink{structvint4_a1e438bb142ad09e372b0834acd0c0b68}{set\_lane}}<3>(0);}
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a1fcb81537a701f246e75fa622c2dd8ee}{any}}(color\_flips\ !=\ \mbox{\hyperlink{structvint4_a9dfa1c40a3c4dbc0858567dc629a80b8}{vint4::zero}}()))}
\DoxyCodeLine{00365\ \ \ \ \ \{}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00367\ \ \ \ \ \}}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{comment}{//\ If\ the\ sum\ of\ offsets\ triggers\ blue-\/contraction\ then\ encoding\ fails}}
\DoxyCodeLine{00370\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ ep0\ =\ color0be;}
\DoxyCodeLine{00371\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ ep1\ =\ color1de;}
\DoxyCodeLine{00372\ \ \ \ \ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_acaab0374259bd298c1282e6a0b84bc8f}{bit\_transfer\_signed}}(ep1,\ ep0);}
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(ep1)\ <\ 0)}
\DoxyCodeLine{00374\ \ \ \ \ \{}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00376\ \ \ \ \ \}}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \ \ \ \ \textcolor{comment}{//\ Check\ that\ the\ offsets\ produce\ legitimate\ sums\ as\ well}}
\DoxyCodeLine{00379\ \ \ \ \ ep0\ =\ ep0\ +\ ep1;}
\DoxyCodeLine{00380\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a1fcb81537a701f246e75fa622c2dd8ee}{any}}((ep0\ <\ \mbox{\hyperlink{structvint4}{vint4}}(0))\ |\ (ep0\ >\ \mbox{\hyperlink{structvint4}{vint4}}(0xFF))))}
\DoxyCodeLine{00381\ \ \ \ \ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00383\ \ \ \ \ \}}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \ \ \ \ color0\_out\ =\ color0be;}
\DoxyCodeLine{00386\ \ \ \ \ color1\_out\ =\ color1de;}
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00388\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a6b7ee442b1e9da4ac693000c4f805c7b_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a6b7ee442b1e9da4ac693000c4f805c7b_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_aedceeace1416ce23b9a934ce87f96c3c}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!try\_quantize\_rgb\_delta\_blue\_contract@{try\_quantize\_rgb\_delta\_blue\_contract}}
\index{try\_quantize\_rgb\_delta\_blue\_contract@{try\_quantize\_rgb\_delta\_blue\_contract}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{try\_quantize\_rgb\_delta\_blue\_contract()}{try\_quantize\_rgb\_delta\_blue\_contract()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_aedceeace1416ce23b9a934ce87f96c3c} 
static bool try\+\_\+quantize\+\_\+rgb\+\_\+delta\+\_\+blue\+\_\+contract (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color0\+\_\+out}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color1\+\_\+out}{, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Try to quantize an LDR RGB color using delta encoding and blue-\/contraction. 

Blue-\/contraction is only usable if encoded color 1 RGB is larger than color 0 RGB.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color0\+\_\+out} & The output quantized color0 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color1\+\_\+out} & The output quantized color1 endpoint. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Returns {\ttfamily false} on failure, {\ttfamily true} on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00403}{403}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00409\ \ \ \{}
\DoxyCodeLine{00410\ \ \ \ \ \textcolor{comment}{//\ Note:\ Switch\ around\ endpoint\ colors\ already\ at\ start}}
\DoxyCodeLine{00411\ \ \ \ \ std::swap(color0,\ color1);}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{comment}{//\ Apply\ inverse\ blue-\/contraction}}
\DoxyCodeLine{00414\ \ \ \ \ color0\ +=\ color0\ -\/\ color0.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<2,\ 2,\ 2,\ 3>();}
\DoxyCodeLine{00415\ \ \ \ \ color1\ +=\ color1\ -\/\ color1.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<2,\ 2,\ 2,\ 3>();}
\DoxyCodeLine{00416\ }
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{comment}{//\ If\ anything\ overflows\ BC\ cannot\ be\ used}}
\DoxyCodeLine{00418\ \ \ \ \ \mbox{\hyperlink{structvmask4}{vmask4}}\ color0\_error\ =\ (color0\ <\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(0.0f))\ |\ (color0\ >\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(255.0f));}
\DoxyCodeLine{00419\ \ \ \ \ \mbox{\hyperlink{structvmask4}{vmask4}}\ color1\_error\ =\ (color1\ <\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(0.0f))\ |\ (color1\ >\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(255.0f));}
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a1fcb81537a701f246e75fa622c2dd8ee}{any}}(color0\_error\ |\ color1\_error))}
\DoxyCodeLine{00421\ \ \ \ \ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00423\ \ \ \ \ \}}
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00425\ \ \ \ \ \textcolor{comment}{//\ Transform\ color0\ to\ unorm9}}
\DoxyCodeLine{00426\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0a\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a598d6ea3ba27a788b12341a5263c7881}{float\_to\_int\_rtn}}(color0);}
\DoxyCodeLine{00427\ \ \ \ \ color0.\mbox{\hyperlink{structvfloat4_a2168231efa1e514fd41b3603e57be297}{set\_lane}}<3>(0.0f);}
\DoxyCodeLine{00428\ \ \ \ \ color0a\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a86240f0fb5745ded88afe10d524c960f}{lsl<1>}}(color0a);}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00430\ \ \ \ \ \textcolor{comment}{//\ Mask\ off\ the\ top\ bit}}
\DoxyCodeLine{00431\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0b\ =\ color0a\ \&\ 0xFF;}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{comment}{//\ Quantize\ then\ unquantize\ in\ order\ to\ get\ a\ value\ that\ we\ take\ differences\ against}}
\DoxyCodeLine{00434\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color0be\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092}{quant\_color3}}(quant\_level,\ color0b);}
\DoxyCodeLine{00435\ \ \ \ \ color0b\ =\ color0be\ |\ (color0a\ \&\ 0x100);}
\DoxyCodeLine{00436\ }
\DoxyCodeLine{00437\ \ \ \ \ \textcolor{comment}{//\ Get\ hold\ of\ the\ second\ value}}
\DoxyCodeLine{00438\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1d\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a598d6ea3ba27a788b12341a5263c7881}{float\_to\_int\_rtn}}(color1);}
\DoxyCodeLine{00439\ \ \ \ \ color1d\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a86240f0fb5745ded88afe10d524c960f}{lsl<1>}}(color1d);}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \ \ \ \ \textcolor{comment}{//\ ...\ and\ take\ differences}}
\DoxyCodeLine{00442\ \ \ \ \ color1d\ =\ color1d\ -\/\ color0b;}
\DoxyCodeLine{00443\ \ \ \ \ color1d.\mbox{\hyperlink{structvint4_a1e438bb142ad09e372b0834acd0c0b68}{set\_lane}}<3>(0);}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ difference\ is\ too\ large\ to\ be\ encodable}}
\DoxyCodeLine{00446\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a1fcb81537a701f246e75fa622c2dd8ee}{any}}((color1d\ >\ \mbox{\hyperlink{structvint4}{vint4}}(63))\ |\ (color1d\ <\ \mbox{\hyperlink{structvint4}{vint4}}(-\/64))))}
\DoxyCodeLine{00447\ \ \ \ \ \{}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00449\ \ \ \ \ \}}
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00451\ \ \ \ \ \textcolor{comment}{//\ Insert\ top\ bit\ of\ the\ base\ into\ the\ offset}}
\DoxyCodeLine{00452\ \ \ \ \ color1d\ =\ color1d\ \&\ 0x7F;}
\DoxyCodeLine{00453\ \ \ \ \ color1d\ =\ color1d\ |\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a0a3a7d755cec1c73d0ce9c50b33bc207}{lsr<1>}}(color0b\ \&\ 0x100);}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00455\ \ \ \ \ \textcolor{comment}{//\ Then\ quantize\ and\ unquantize;\ if\ this\ causes\ either\ top\ two\ bits\ to\ flip,\ then\ encoding\ fails}}
\DoxyCodeLine{00456\ \ \ \ \ \textcolor{comment}{//\ since\ we\ have\ then\ corrupted\ either\ the\ top\ bit\ of\ the\ base\ or\ the\ sign\ bit\ of\ the\ offset}}
\DoxyCodeLine{00457\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1de\ =\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_adae1b4db9a1942106e86b3f5ff358092}{quant\_color3}}(quant\_level,\ color1d);}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color\_flips\ =\ (color1d\ \string^\ color1de)\ \&\ 0xC0;}
\DoxyCodeLine{00460\ \ \ \ \ color\_flips.\mbox{\hyperlink{structvint4_a1e438bb142ad09e372b0834acd0c0b68}{set\_lane}}<3>(0);}
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a1fcb81537a701f246e75fa622c2dd8ee}{any}}(color\_flips\ !=\ \mbox{\hyperlink{structvint4_a9dfa1c40a3c4dbc0858567dc629a80b8}{vint4::zero}}()))}
\DoxyCodeLine{00462\ \ \ \ \ \{}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00464\ \ \ \ \ \}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \ \ \ \ \textcolor{comment}{//\ If\ the\ sum\ of\ offsets\ does\ not\ trigger\ blue-\/contraction\ then\ encoding\ fails}}
\DoxyCodeLine{00467\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ ep0\ =\ color0be;}
\DoxyCodeLine{00468\ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ ep1\ =\ color1de;}
\DoxyCodeLine{00469\ \ \ \ \ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_acaab0374259bd298c1282e6a0b84bc8f}{bit\_transfer\_signed}}(ep1,\ ep0);}
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_a48e833d0cfdf950b6bc3431fce00507e}{hadd\_rgb\_s}}(ep1)\ >=\ 0)}
\DoxyCodeLine{00471\ \ \ \ \ \{}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00473\ \ \ \ \ \}}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ \ \ \ \ \textcolor{comment}{//\ Check\ that\ the\ offsets\ produce\ legitimate\ sums\ as\ well}}
\DoxyCodeLine{00476\ \ \ \ \ ep0\ =\ ep0\ +\ ep1;}
\DoxyCodeLine{00477\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a1fcb81537a701f246e75fa622c2dd8ee}{any}}((ep0\ <\ \mbox{\hyperlink{structvint4}{vint4}}(0))\ |\ (ep0\ >\ \mbox{\hyperlink{structvint4}{vint4}}(0xFF))))}
\DoxyCodeLine{00478\ \ \ \ \ \{}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00480\ \ \ \ \ \}}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00482\ \ \ \ \ color0\_out\ =\ color0be;}
\DoxyCodeLine{00483\ \ \ \ \ color1\_out\ =\ color1de;}
\DoxyCodeLine{00484\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00485\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_aedceeace1416ce23b9a934ce87f96c3c_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_aedceeace1416ce23b9a934ce87f96c3c_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_ab09b68ff45a1b287f05fd2428805bbc9}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!try\_quantize\_rgba\_blue\_contract@{try\_quantize\_rgba\_blue\_contract}}
\index{try\_quantize\_rgba\_blue\_contract@{try\_quantize\_rgba\_blue\_contract}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{try\_quantize\_rgba\_blue\_contract()}{try\_quantize\_rgba\_blue\_contract()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_ab09b68ff45a1b287f05fd2428805bbc9} 
static bool try\+\_\+quantize\+\_\+rgba\+\_\+blue\+\_\+contract (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color0\+\_\+out}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color1\+\_\+out}{, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Try to quantize an LDR RGBA color using blue-\/contraction. 

Blue-\/contraction is only usable if encoded color 1 RGB is larger than color 0 RGB.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color0\+\_\+out} & The output quantized color0 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color1\+\_\+out} & The output quantized color1 endpoint. \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Returns {\ttfamily false} on failure, {\ttfamily true} on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00285}{285}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00291\ \ \ \{}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenc__color__quantize_8cpp_a1a4ffac105268d9e7ac1058b1b2ad542}{try\_quantize\_rgb\_blue\_contract}}(color0,\ color1,\ color0\_out,\ color1\_out,\ quant\_level))}
\DoxyCodeLine{00293\ \ \ \ \ \{}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ a0\ =\ color0.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ a1\ =\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>();}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ color0\_out.\mbox{\hyperlink{structvint4_a1e438bb142ad09e372b0834acd0c0b68}{set\_lane}}<3>(\mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a1),\ a1));}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ color1\_out.\mbox{\hyperlink{structvint4_a1e438bb142ad09e372b0834acd0c0b68}{set\_lane}}<3>(\mbox{\hyperlink{astcenc__color__quantize_8cpp_a0af2fba0ed6cbe9e279c808e540eb74e}{quant\_color}}(quant\_level,\ \mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(a0),\ a0));}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00301\ \ \ \ \ \}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00304\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_ab09b68ff45a1b287f05fd2428805bbc9_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_ab09b68ff45a1b287f05fd2428805bbc9_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_af4d400b2fd9235d069b8e71966cb1246}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!try\_quantize\_rgba\_delta@{try\_quantize\_rgba\_delta}}
\index{try\_quantize\_rgba\_delta@{try\_quantize\_rgba\_delta}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{try\_quantize\_rgba\_delta()}{try\_quantize\_rgba\_delta()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_af4d400b2fd9235d069b8e71966cb1246} 
static bool try\+\_\+quantize\+\_\+rgba\+\_\+delta (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color0\+\_\+out}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color1\+\_\+out}{, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Try to quantize an LDR RGBA color using delta encoding. 

At decode time we move one bit from the offset to the base and seize another bit as a sign bit; we then unquantize both values as if they contain one extra bit. If the sum of the offsets is non-\/negative, then we encode a regular delta.

This function only compressed the alpha -\/ the other elements in the output array are not touched.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color0\+\_\+out} & The output quantized color0 endpoint \\
\hline
\mbox{\texttt{ out}}  & {\em color1\+\_\+out} & The output quantized color1 endpoint \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Returns {\ttfamily false} on failure, {\ttfamily true} on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00687}{687}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00693\ \ \ \{}
\DoxyCodeLine{00694\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a6b7ee442b1e9da4ac693000c4f805c7b}{try\_quantize\_rgb\_delta}}(color0,\ color1,\ color0\_out,\ color1\_out,\ quant\_level)\ \&\&}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a4390447f4e4f3f2355c2381228d2e5c2}{try\_quantize\_alpha\_delta}}(color0,\ color1,\ color0\_out,\ color1\_out,\ quant\_level);}
\DoxyCodeLine{00696\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_af4d400b2fd9235d069b8e71966cb1246_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_af4d400b2fd9235d069b8e71966cb1246_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenc__color__quantize_8cpp_a6e41c12d083ec9f3d9028ea35f13f18f}\index{astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}!try\_quantize\_rgba\_delta\_blue\_contract@{try\_quantize\_rgba\_delta\_blue\_contract}}
\index{try\_quantize\_rgba\_delta\_blue\_contract@{try\_quantize\_rgba\_delta\_blue\_contract}!astcenc\_color\_quantize.cpp@{astcenc\_color\_quantize.cpp}}
\doxysubsubsection{\texorpdfstring{try\_quantize\_rgba\_delta\_blue\_contract()}{try\_quantize\_rgba\_delta\_blue\_contract()}}
{\footnotesize\ttfamily \label{astcenc__color__quantize_8cpp_a6e41c12d083ec9f3d9028ea35f13f18f} 
static bool try\+\_\+quantize\+\_\+rgba\+\_\+delta\+\_\+blue\+\_\+contract (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color0}{, }\item[{\mbox{\hyperlink{structvfloat4}{vfloat4}}}]{color1}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color0\+\_\+out}{, }\item[{\mbox{\hyperlink{structvint4}{vint4}} \&}]{color1\+\_\+out}{, }\item[{\mbox{\hyperlink{astcenc__internal_8h_a806a5b8001942a6fa06d788ffec45a75}{quant\+\_\+method}}}]{quant\+\_\+level}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Try to quantize an LDR RGBA color using delta and blue contract encoding. 

At decode time we move one bit from the offset to the base and seize another bit as a sign bit; we then unquantize both values as if they contain one extra bit. If the sum of the offsets is non-\/negative, then we encode a regular delta.

This function only compressed the alpha -\/ the other elements in the output array are not touched.


\begin{DoxyParams}[1]{매개변수}
 & {\em color0} & The input unquantized color0 endpoint. \\
\hline
 & {\em color1} & The input unquantized color1 endpoint. \\
\hline
\mbox{\texttt{ out}}  & {\em color0\+\_\+out} & The output quantized color0 endpoint \\
\hline
\mbox{\texttt{ out}}  & {\em color1\+\_\+out} & The output quantized color1 endpoint \\
\hline
 & {\em quant\+\_\+level} & The quantization level to use.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Returns {\ttfamily false} on failure, {\ttfamily true} on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenc__color__quantize_8cpp_source}{astcenc\+\_\+color\+\_\+quantize.\+cpp}} 파일의 \mbox{\hyperlink{astcenc__color__quantize_8cpp_source_l00715}{715}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00721\ \ \ \{}
\DoxyCodeLine{00722\ \ \ \ \ \textcolor{comment}{//\ Note\ that\ we\ swap\ the\ color0\ and\ color1\ ordering\ for\ alpha\ to\ match\ RGB\ blue-\/contract}}
\DoxyCodeLine{00723\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{astcenc__color__quantize_8cpp_aedceeace1416ce23b9a934ce87f96c3c}{try\_quantize\_rgb\_delta\_blue\_contract}}(color0,\ color1,\ color0\_out,\ color1\_out,\ quant\_level)\ \&\&}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__color__quantize_8cpp_a4390447f4e4f3f2355c2381228d2e5c2}{try\_quantize\_alpha\_delta}}(color1,\ color0,\ color0\_out,\ color1\_out,\ quant\_level);}
\DoxyCodeLine{00725\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a6e41c12d083ec9f3d9028ea35f13f18f_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenc__color__quantize_8cpp_a6e41c12d083ec9f3d9028ea35f13f18f_icgraph}
\end{center}
\end{figure}
