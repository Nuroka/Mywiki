\doxysection{C\+:/\+Users/inhyu/\+One\+Drive/바탕 화면/랩실 내용/astc-\/encoder-\/main/\+Source/astcenccli\+\_\+internal.h 파일 참조}
\hypertarget{astcenccli__internal_8h}{}\label{astcenccli__internal_8h}\index{C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-\/encoder-\/main/Source/astcenccli\_internal.h@{C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-\/encoder-\/main/Source/astcenccli\_internal.h}}
{\ttfamily \#include $<$cstddef$>$}\newline
{\ttfamily \#include $<$cstdint$>$}\newline
{\ttfamily \#include $<$cstdio$>$}\newline
{\ttfamily \#include $<$cstdlib$>$}\newline
{\ttfamily \#include "{}astcenc.\+h"{}}\newline
{\ttfamily \#include "{}astcenc\+\_\+mathlib.\+h"{}}\newline
astcenccli\+\_\+internal.\+h에 대한 include 의존 그래프
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h__incl}
\end{center}
\end{figure}
이 그래프는 이 파일을 직/간접적으로 include 하는 파일들을 보여줍니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsubsection*{클래스}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structastc__compressed__image}{astc\+\_\+compressed\+\_\+image}}
\begin{DoxyCompactList}\small\item\em Functions and data declarations. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structcli__config__options}{cli\+\_\+config\+\_\+options}}
\begin{DoxyCompactList}\small\item\em Config options that have been read from command line. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{함수}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\+\_\+error}} (const char \texorpdfstring{$\ast$}{*}format)
\begin{DoxyCompactList}\small\item\em Print a string to stderr. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename ... \+\_\+\+Args$>$ }\\static void \mbox{\hyperlink{astcenccli__internal_8h_a4a3f02fce6a0f57b6a1166483b5dffe4}{print\+\_\+error}} (const char \texorpdfstring{$\ast$}{*}format, \+\_\+\+Args...\+args)
\begin{DoxyCompactList}\small\item\em Print a formatted string to stderr. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{astcenccli__internal_8h_aff0de9c0d50e5630b61f0d6e597fcd65}{load\+\_\+ncimage}} (const char \texorpdfstring{$\ast$}{*}filename, bool y\+\_\+flip, bool \&is\+\_\+hdr, unsigned int \&component\+\_\+count)
\begin{DoxyCompactList}\small\item\em Load uncompressed image. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{astcenccli__internal_8h_a9920dcae3265967744c9b31e9ac8a999}{load\+\_\+png\+\_\+with\+\_\+wuffs}} (const char \texorpdfstring{$\ast$}{*}filename, bool y\+\_\+flip, bool \&is\+\_\+hdr, unsigned int \&component\+\_\+count)
\begin{DoxyCompactList}\small\item\em Load uncompressed PNG image. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{astcenccli__internal_8h_a263b2ab9e4335fc13f801ba569eed939}{store\+\_\+ncimage}} (const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}img, const char \texorpdfstring{$\ast$}{*}filename, int y\+\_\+flip)
\begin{DoxyCompactList}\small\item\em Save an uncompressed image. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{astcenccli__internal_8h_a36fb7c666f502f49e4d18cf130a7958d}{get\+\_\+output\+\_\+filename\+\_\+enforced\+\_\+bitness}} (const char \texorpdfstring{$\ast$}{*}filename)
\begin{DoxyCompactList}\small\item\em Check if the output file type requires a specific bitness. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{astcenccli__internal_8h_a860f8be85c860429c0df12b581015b68}{alloc\+\_\+image}} (unsigned int bitness, unsigned int dim\+\_\+x, unsigned int dim\+\_\+y, unsigned int dim\+\_\+z)
\begin{DoxyCompactList}\small\item\em Allocate a new image in a canonical format. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{astcenccli__internal_8h_aeb0cd9b24656f2c4dac144e89217057c}{free\+\_\+image}} (\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}img)
\begin{DoxyCompactList}\small\item\em Free an image. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{astcenccli__internal_8h_add1dea8ff2bad1b823a131776f37ee83}{determine\+\_\+image\+\_\+components}} (const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}img)
\begin{DoxyCompactList}\small\item\em Determine the number of active components in an image. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{astcenccli__internal_8h_a6ef0eed7ff787726c2e16ab96196ed8b}{load\+\_\+cimage}} (const char \texorpdfstring{$\ast$}{*}filename, \mbox{\hyperlink{structastc__compressed__image}{astc\+\_\+compressed\+\_\+image}} \&img)
\begin{DoxyCompactList}\small\item\em Load a compressed .astc image. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{astcenccli__internal_8h_a9ba4a67ed1a59e71c22282996d48390b}{store\+\_\+cimage}} (const \mbox{\hyperlink{structastc__compressed__image}{astc\+\_\+compressed\+\_\+image}} \&img, const char \texorpdfstring{$\ast$}{*}filename)
\begin{DoxyCompactList}\small\item\em Store a compressed .astc image. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{astcenccli__internal_8h_a10761592472e9cc4d632946459d00bee}{load\+\_\+ktx\+\_\+compressed\+\_\+image}} (const char \texorpdfstring{$\ast$}{*}filename, bool \&is\+\_\+srgb, \mbox{\hyperlink{structastc__compressed__image}{astc\+\_\+compressed\+\_\+image}} \&img)
\begin{DoxyCompactList}\small\item\em Load a compressed .ktx image. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{astcenccli__internal_8h_a3e674d4952496a98a942815392b1a3a5}{store\+\_\+ktx\+\_\+compressed\+\_\+image}} (const \mbox{\hyperlink{structastc__compressed__image}{astc\+\_\+compressed\+\_\+image}} \&img, const char \texorpdfstring{$\ast$}{*}filename, bool is\+\_\+srgb)
\begin{DoxyCompactList}\small\item\em Store a compressed .ktx image. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{astcenccli__internal_8h_a6ee147f7602455b96f9ec14ae0d31dca}{astc\+\_\+img\+\_\+from\+\_\+floatx4\+\_\+array}} (const float \texorpdfstring{$\ast$}{*}data, unsigned int dim\+\_\+x, unsigned int dim\+\_\+y, bool y\+\_\+flip)
\begin{DoxyCompactList}\small\item\em Create an image from a 2D float data array. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{astcenccli__internal_8h_a9ecc1dac86584f7e086e9962fb6c0509}{astc\+\_\+img\+\_\+from\+\_\+unorm8x4\+\_\+array}} (const uint8\+\_\+t \texorpdfstring{$\ast$}{*}data, unsigned int dim\+\_\+x, unsigned int dim\+\_\+y, bool y\+\_\+flip)
\begin{DoxyCompactList}\small\item\em Create an image from a 2D byte data array. \end{DoxyCompactList}\item 
float \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{astcenccli__internal_8h_ad7c980fed3ad50dec28ebfa941f4a7b7}{floatx4\+\_\+array\+\_\+from\+\_\+astc\+\_\+img}} (const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}img, bool y\+\_\+flip, unsigned int z\+\_\+index)
\begin{DoxyCompactList}\small\item\em Create a flattened RGBA FLOAT32 data array for a single slice from an image structure. \end{DoxyCompactList}\item 
uint8\+\_\+t \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{astcenccli__internal_8h_a9706acc840e996830702a831d846559c}{unorm8x4\+\_\+array\+\_\+from\+\_\+astc\+\_\+img}} (const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}img, bool y\+\_\+flip)
\begin{DoxyCompactList}\small\item\em Create a flattened RGBA UNORM8 data array from an image structure. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{astcenccli__internal_8h_a3cf209b603114ef9a2c2c9e28697bbe7}{astcenc\+\_\+print\+\_\+header}} ()
\begin{DoxyCompactList}\small\item\em Print the tool copyright and version header to stdout. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{astcenccli__internal_8h_af5bf7c6ac05f0f401cfde7d73ed2b852}{astcenc\+\_\+print\+\_\+shorthelp}} ()
\begin{DoxyCompactList}\small\item\em Print the tool copyright, version, and short-\/form help to stdout. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{astcenccli__internal_8h_a7377ad0be8285dd96c932d2744fc4641}{astcenc\+\_\+print\+\_\+longhelp}} ()
\begin{DoxyCompactList}\small\item\em Print the tool copyright, version, and long-\/form help to stdout. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{astcenccli__internal_8h_a478be461420681d7c83aa89569ea92c4}{compute\+\_\+error\+\_\+metrics}} (bool compute\+\_\+hdr\+\_\+metrics, bool compute\+\_\+normal\+\_\+metrics, int input\+\_\+components, const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}img1, const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}img2, int fstop\+\_\+lo, int fstop\+\_\+hi)
\begin{DoxyCompactList}\small\item\em Compute error metrics comparing two images. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\+\_\+time}} ()
\begin{DoxyCompactList}\small\item\em Get the current time. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{astcenccli__internal_8h_a17e6f066d58e29a143787fe2f78d19d6}{get\+\_\+cpu\+\_\+count}} ()
\begin{DoxyCompactList}\small\item\em Get the number of CPU cores. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{astcenccli__internal_8h_aaa9dcd56cd7089c481e7ef8355ae5c2f}{launch\+\_\+threads}} (const char \texorpdfstring{$\ast$}{*}operation, int thread\+\_\+count, void(\texorpdfstring{$\ast$}{*}func)(int, int, void \texorpdfstring{$\ast$}{*}), void \texorpdfstring{$\ast$}{*}payload)
\begin{DoxyCompactList}\small\item\em Launch N worker threads and wait for them to complete. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{astcenccli__internal_8h_a073d18880f24fd648661b01d2e20340e}{astcenc\+\_\+main}} (int argc, char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}argv)
\begin{DoxyCompactList}\small\item\em The main entry point. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{함수 문서화}
\Hypertarget{astcenccli__internal_8h_a860f8be85c860429c0df12b581015b68}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!alloc\_image@{alloc\_image}}
\index{alloc\_image@{alloc\_image}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{alloc\_image()}{alloc\_image()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a860f8be85c860429c0df12b581015b68} 
\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*} alloc\+\_\+image (\begin{DoxyParamCaption}\item[{unsigned int}]{bitness}{, }\item[{unsigned int}]{dim\+\_\+x}{, }\item[{unsigned int}]{dim\+\_\+y}{, }\item[{unsigned int}]{dim\+\_\+z}{}\end{DoxyParamCaption})}



Allocate a new image in a canonical format. 

Allocated images must be freed with a {\ttfamily \doxylink{astcenccli__internal_8h_aeb0cd9b24656f2c4dac144e89217057c}{free\+\_\+image()}} call.


\begin{DoxyParams}{매개변수}
{\em bitness} & The number of bits per component (8, 16, or 32). \\
\hline
{\em dim\+\_\+x} & The width of the image, in texels. \\
\hline
{\em dim\+\_\+y} & The height of the image, in texels. \\
\hline
{\em dim\+\_\+z} & The depth of the image, in texels.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The allocated image, or {\ttfamily nullptr} on error.
\end{DoxyReturn}
Allocate a new image in a canonical format. 

\mbox{\hyperlink{astcenccli__image_8cpp_source}{astcenccli\+\_\+image.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image_8cpp_source_l00028}{28}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00033\ \ \ \{}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{structastcenc__image}{astcenc\_image}}\ *img\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{structastcenc__image}{astcenc\_image}};}
\DoxyCodeLine{00035\ \ \ \ \ img-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}}\ =\ dim\_x;}
\DoxyCodeLine{00036\ \ \ \ \ img-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}}\ =\ dim\_y;}
\DoxyCodeLine{00037\ \ \ \ \ img-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}}\ =\ dim\_z;}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordtype}{void}**\ data\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{void}*[dim\_z];}
\DoxyCodeLine{00040\ \ \ \ \ img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}\ =\ data;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordflow}{if}\ (bitness\ ==\ 8)}
\DoxyCodeLine{00043\ \ \ \ \ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ =\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aa91ac7b6329d0a39c879dff7a1bcdf759}{ASTCENC\_TYPE\_U8}};}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ z\ =\ 0;\ z\ <\ dim\_z;\ z++)}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ data[z]\ =\ \textcolor{keyword}{new}\ uint8\_t[dim\_x\ *\ dim\_y\ *\ 4];}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00049\ \ \ \ \ \}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (bitness\ ==\ 16)}
\DoxyCodeLine{00051\ \ \ \ \ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ =\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aad39e16b7f2e55ed676ce400619f0759d}{ASTCENC\_TYPE\_F16}};}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ z\ =\ 0;\ z\ <\ dim\_z;\ z++)}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ data[z]\ =\ \textcolor{keyword}{new}\ uint16\_t[dim\_x\ *\ dim\_y\ *\ 4];}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00057\ \ \ \ \ \}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{comment}{//\ if\ (bitness\ ==\ 32)}}
\DoxyCodeLine{00059\ \ \ \ \ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ assert(bitness\ ==\ 32);}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ =\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aaf996e38de0e0ac57175c09da275c6062}{ASTCENC\_TYPE\_F32}};}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ z\ =\ 0;\ z\ <\ dim\_z;\ z++)}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ data[z]\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{float}[dim\_x\ *\ dim\_y\ *\ 4];}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00066\ \ \ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{return}\ img;}
\DoxyCodeLine{00069\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a860f8be85c860429c0df12b581015b68_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a6ee147f7602455b96f9ec14ae0d31dca}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!astc\_img\_from\_floatx4\_array@{astc\_img\_from\_floatx4\_array}}
\index{astc\_img\_from\_floatx4\_array@{astc\_img\_from\_floatx4\_array}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{astc\_img\_from\_floatx4\_array()}{astc\_img\_from\_floatx4\_array()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a6ee147f7602455b96f9ec14ae0d31dca} 
\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*} astc\+\_\+img\+\_\+from\+\_\+floatx4\+\_\+array (\begin{DoxyParamCaption}\item[{const float \texorpdfstring{$\ast$}{*}}]{data}{, }\item[{unsigned int}]{dim\+\_\+x}{, }\item[{unsigned int}]{dim\+\_\+y}{, }\item[{bool}]{y\+\_\+flip}{}\end{DoxyParamCaption})}



Create an image from a 2D float data array. 


\begin{DoxyParams}{매개변수}
{\em data} & The raw input data. \\
\hline
{\em dim\+\_\+x} & The width of the image, in texels. \\
\hline
{\em dim\+\_\+y} & The height of the image, in texels. \\
\hline
{\em y\+\_\+flip} & Should this image be vertically flipped?\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The populated image. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image_8cpp_source}{astcenccli\+\_\+image.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image_8cpp_source_l00171}{171}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00176\ \ \ \{}
\DoxyCodeLine{00177\ \ \ \ \ \mbox{\hyperlink{structastcenc__image}{astcenc\_image}}*\ img\ =\ \mbox{\hyperlink{astcenccli__image_8cpp_a860f8be85c860429c0df12b581015b68}{alloc\_image}}(16,\ dim\_x,\ dim\_y,\ 1);}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00180\ \ \ \ \ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ uint16\_t*\ data16\ =\ \textcolor{keyword}{static\_cast<}uint16\_t*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[0]);}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\_src\ =\ y\_flip\ ?\ (dim\_y\ -\/\ y\ -\/\ 1)\ :\ y;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ src\ =\ data\ +\ 4\ *\ dim\_x\ *\ y\_src;}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ colorf16\ =\ \mbox{\hyperlink{astcenc__vecmathlib__neon__4_8h_ae8701a3f44d7b99016d54c3d6ee27581}{float\_to\_float16}}(\mbox{\hyperlink{structvfloat4}{vfloat4}}(}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src[4\ *\ x\ \ \ \ ],}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src[4\ *\ x\ +\ 1],}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src[4\ *\ x\ +\ 2],}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ src[4\ *\ x\ +\ 3]}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ ));}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ \ \ \ )]\ =\ \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(colorf16.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<0>());}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 1)]\ =\ \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(colorf16.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<1>());}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 2)]\ =\ \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(colorf16.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<2>());}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 3)]\ =\ \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(colorf16.\mbox{\hyperlink{structvint4_a01e3f7debf73dc6c757fa36d585c9d17}{lane}}<3>());}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00199\ \ \ \ \ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{return}\ img;}
\DoxyCodeLine{00202\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=312pt]{astcenccli__internal_8h_a6ee147f7602455b96f9ec14ae0d31dca_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a6ee147f7602455b96f9ec14ae0d31dca_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a9ecc1dac86584f7e086e9962fb6c0509}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!astc\_img\_from\_unorm8x4\_array@{astc\_img\_from\_unorm8x4\_array}}
\index{astc\_img\_from\_unorm8x4\_array@{astc\_img\_from\_unorm8x4\_array}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{astc\_img\_from\_unorm8x4\_array()}{astc\_img\_from\_unorm8x4\_array()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a9ecc1dac86584f7e086e9962fb6c0509} 
\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*} astc\+\_\+img\+\_\+from\+\_\+unorm8x4\+\_\+array (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{data}{, }\item[{unsigned int}]{dim\+\_\+x}{, }\item[{unsigned int}]{dim\+\_\+y}{, }\item[{bool}]{y\+\_\+flip}{}\end{DoxyParamCaption})}



Create an image from a 2D byte data array. 


\begin{DoxyParams}{매개변수}
{\em data} & The raw input data. \\
\hline
{\em dim\+\_\+x} & The width of the image, in texels. \\
\hline
{\em dim\+\_\+y} & The height of the image, in texels. \\
\hline
{\em y\+\_\+flip} & Should this image be vertically flipped?\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The populated image. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image_8cpp_source}{astcenccli\+\_\+image.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image_8cpp_source_l00205}{205}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00210\ \ \ \{}
\DoxyCodeLine{00211\ \ \ \ \ \mbox{\hyperlink{structastcenc__image}{astcenc\_image}}*\ img\ =\ \mbox{\hyperlink{astcenccli__image_8cpp_a860f8be85c860429c0df12b581015b68}{alloc\_image}}(8,\ dim\_x,\ dim\_y,\ 1);}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00214\ \ \ \ \ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ uint8\_t*\ data8\ =\ \textcolor{keyword}{static\_cast<}uint8\_t*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[0]);}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\_src\ =\ y\_flip\ ?\ (dim\_y\ -\/\ y\ -\/\ 1)\ :\ y;}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ uint8\_t*\ src\ =\ data\ +\ 4\ *\ dim\_x\ *\ y\_src;}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ \ \ \ )]\ =\ src[4\ *\ x\ \ \ \ ];}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 1)]\ =\ src[4\ *\ x\ +\ 1];}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 2)]\ =\ src[4\ *\ x\ +\ 2];}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 3)]\ =\ src[4\ *\ x\ +\ 3];}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00226\ \ \ \ \ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordflow}{return}\ img;}
\DoxyCodeLine{00229\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=312pt]{astcenccli__internal_8h_a9ecc1dac86584f7e086e9962fb6c0509_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a9ecc1dac86584f7e086e9962fb6c0509_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a073d18880f24fd648661b01d2e20340e}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!astcenc\_main@{astcenc\_main}}
\index{astcenc\_main@{astcenc\_main}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{astcenc\_main()}{astcenc\_main()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a073d18880f24fd648661b01d2e20340e} 
int astcenc\+\_\+main (\begin{DoxyParamCaption}\item[{int}]{argc}{, }\item[{char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{argv}{}\end{DoxyParamCaption})}



The main entry point. 


\begin{DoxyParams}{매개변수}
{\em argc} & The number of arguments. \\
\hline
{\em argv} & The vector of arguments.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
0 on success, non-\/zero otherwise.
\end{DoxyReturn}
Application entry point.


\begin{DoxyParams}{매개변수}
{\em argc} & The number of arguments. \\
\hline
{\em argv} & The vector of arguments.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
0 on success, non-\/zero otherwise. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__toplevel_8cpp_source}{astcenccli\+\_\+toplevel.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__toplevel_8cpp_source_l01885}{1885}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{01888\ \ \ \{}
\DoxyCodeLine{01889\ \ \ \ \ \textcolor{keywordtype}{double}\ start\_time\ =\ \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\_time}}();}
\DoxyCodeLine{01890\ }
\DoxyCodeLine{01891\ \ \ \ \ \textcolor{keywordflow}{if}\ (argc\ <\ 2)}
\DoxyCodeLine{01892\ \ \ \ \ \{}
\DoxyCodeLine{01893\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_af5bf7c6ac05f0f401cfde7d73ed2b852}{astcenc\_print\_shorthelp}}();}
\DoxyCodeLine{01894\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01895\ \ \ \ \ \}}
\DoxyCodeLine{01896\ }
\DoxyCodeLine{01897\ \ \ \ \ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a5a62378b79317b2824cf4dc51e3b5c86}{astcenc\_operation}}\ operation;}
\DoxyCodeLine{01898\ \ \ \ \ \mbox{\hyperlink{astcenc_8h_adf71df2e9f79916ccc02886ba1bdeb29}{astcenc\_profile}}\ profile;}
\DoxyCodeLine{01899\ \ \ \ \ \textcolor{keywordtype}{int}\ error\ =\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_aedf9353399b1d889e93faaefb272e410}{parse\_commandline\_options}}(argc,\ argv,\ operation,\ profile);}
\DoxyCodeLine{01900\ \ \ \ \ \textcolor{keywordflow}{if}\ (error)}
\DoxyCodeLine{01901\ \ \ \ \ \{}
\DoxyCodeLine{01902\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{01903\ \ \ \ \ \}}
\DoxyCodeLine{01904\ }
\DoxyCodeLine{01905\ \ \ \ \ \textcolor{keywordflow}{switch}\ (operation)}
\DoxyCodeLine{01906\ \ \ \ \ \{}
\DoxyCodeLine{01907\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_aad5e33ec176f3a9af9f3bd5b4938c60a}{ASTCENC\_OP\_HELP}}:}
\DoxyCodeLine{01908\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a7377ad0be8285dd96c932d2744fc4641}{astcenc\_print\_longhelp}}();}
\DoxyCodeLine{01909\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01910\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a547fe35ad8a650afceb2267d2aa8fb1a}{ASTCENC\_OP\_VERSION}}:}
\DoxyCodeLine{01911\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a3cf209b603114ef9a2c2c9e28697bbe7}{astcenc\_print\_header}}();}
\DoxyCodeLine{01912\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01913\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01914\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01915\ \ \ \ \ \}}
\DoxyCodeLine{01916\ }
\DoxyCodeLine{01917\ \ \ \ \ std::string\ input\_filename\ =\ argc\ >=\ 3\ ?\ argv[2]\ :\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01918\ \ \ \ \ std::string\ output\_filename\ =\ argc\ >=\ 4\ ?\ argv[3]\ :\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01919\ }
\DoxyCodeLine{01920\ \ \ \ \ \textcolor{keywordflow}{if}\ (input\_filename.empty())}
\DoxyCodeLine{01921\ \ \ \ \ \{}
\DoxyCodeLine{01922\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Input\ file\ not\ specified\(\backslash\)n"{}});}
\DoxyCodeLine{01923\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{01924\ \ \ \ \ \}}
\DoxyCodeLine{01925\ }
\DoxyCodeLine{01926\ \ \ \ \ \textcolor{keywordflow}{if}\ (output\_filename.empty())}
\DoxyCodeLine{01927\ \ \ \ \ \{}
\DoxyCodeLine{01928\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Output\ file\ not\ specified\(\backslash\)n"{}});}
\DoxyCodeLine{01929\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{01930\ \ \ \ \ \}}
\DoxyCodeLine{01931\ }
\DoxyCodeLine{01932\ \ \ \ \ \textcolor{comment}{//\ TODO:\ Handle\ RAII\ resources\ so\ they\ get\ freed\ when\ out\ of\ scope}}
\DoxyCodeLine{01933\ \ \ \ \ \textcolor{comment}{//\ Load\ the\ compressed\ input\ file\ if\ needed}}
\DoxyCodeLine{01934\ }
\DoxyCodeLine{01935\ \ \ \ \ \textcolor{comment}{//\ This\ has\ to\ come\ first,\ as\ the\ block\ size\ is\ in\ the\ file\ header}}
\DoxyCodeLine{01936\ \ \ \ \ \mbox{\hyperlink{structastc__compressed__image}{astc\_compressed\_image}}\ image\_comp\ \{\};}
\DoxyCodeLine{01937\ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a2434507fb1c572973603bb6672008eac}{ASTCENC\_STAGE\_LD\_COMP}})}
\DoxyCodeLine{01938\ \ \ \ \ \{}
\DoxyCodeLine{01939\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenccli__toplevel_8cpp_a799eec117691caf296bb26711f44c60f}{ends\_with}}(input\_filename,\ \textcolor{stringliteral}{"{}.astc"{}}))}
\DoxyCodeLine{01940\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01941\ \ \ \ \ \ \ \ \ \ \ \ \ error\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a6ef0eed7ff787726c2e16ab96196ed8b}{load\_cimage}}(input\_filename.c\_str(),\ image\_comp);}
\DoxyCodeLine{01942\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error)}
\DoxyCodeLine{01943\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{01945\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01946\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01947\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenccli__toplevel_8cpp_a799eec117691caf296bb26711f44c60f}{ends\_with}}(input\_filename,\ \textcolor{stringliteral}{"{}.ktx"{}}))}
\DoxyCodeLine{01948\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01949\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_srgb;}
\DoxyCodeLine{01950\ \ \ \ \ \ \ \ \ \ \ \ \ error\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a10761592472e9cc4d632946459d00bee}{load\_ktx\_compressed\_image}}(input\_filename.c\_str(),\ is\_srgb,\ image\_comp);}
\DoxyCodeLine{01951\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error)}
\DoxyCodeLine{01952\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{01954\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01955\ }
\DoxyCodeLine{01956\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_srgb\ \&\&\ (profile\ !=\ \mbox{\hyperlink{astcenc_8h_adf71df2e9f79916ccc02886ba1bdeb29a331abc1d96b4fa991757e6ef8199f298}{ASTCENC\_PRF\_LDR\_SRGB}}))}
\DoxyCodeLine{01957\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01958\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}WARNING:\ Input\ file\ is\ sRGB,\ but\ decompressing\ as\ linear\(\backslash\)n"{}});}
\DoxyCodeLine{01959\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01960\ }
\DoxyCodeLine{01961\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_srgb\ \&\&\ (profile\ ==\ \mbox{\hyperlink{astcenc_8h_adf71df2e9f79916ccc02886ba1bdeb29a331abc1d96b4fa991757e6ef8199f298}{ASTCENC\_PRF\_LDR\_SRGB}}))}
\DoxyCodeLine{01962\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}WARNING:\ Input\ file\ is\ linear,\ but\ decompressing\ as\ sRGB\(\backslash\)n"{}});}
\DoxyCodeLine{01964\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01965\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01966\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01967\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01968\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Unknown\ compressed\ input\ file\ type\(\backslash\)n"{}});}
\DoxyCodeLine{01969\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{01970\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01971\ \ \ \ \ \}}
\DoxyCodeLine{01972\ }
\DoxyCodeLine{01973\ \ \ \ \ \mbox{\hyperlink{structastcenc__config}{astcenc\_config}}\ config\ \{\};}
\DoxyCodeLine{01974\ \ \ \ \ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a1b2281816750f3c6d13790a322dc3092}{astcenc\_preprocess}}\ preprocess;}
\DoxyCodeLine{01975\ \ \ \ \ error\ =\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_aaf7c065e8caf5efb3235ae521742312a}{init\_astcenc\_config}}(argc,\ argv,\ profile,\ operation,\ image\_comp,\ preprocess,\ config);}
\DoxyCodeLine{01976\ \ \ \ \ \textcolor{keywordflow}{if}\ (error)}
\DoxyCodeLine{01977\ \ \ \ \ \{}
\DoxyCodeLine{01978\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{01979\ \ \ \ \ \}}
\DoxyCodeLine{01980\ }
\DoxyCodeLine{01981\ \ \ \ \ \textcolor{comment}{//\ Initialize\ cli\_config\_options\ with\ default\ values}}
\DoxyCodeLine{01982\ \ \ \ \ \mbox{\hyperlink{structcli__config__options}{cli\_config\_options}}\ cli\_config\ \{\ 0,\ 1,\ 1,\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ \textcolor{keyword}{false},\ -\/10,\ 10,}
\DoxyCodeLine{01983\ \ \ \ \ \ \ \ \ \{\ \mbox{\hyperlink{astcenc_8h_ade8fdcd2d40237f88e4bfe1230b9b687a2766a38ed1e99377723a4efb3510acd3}{ASTCENC\_SWZ\_R}},\ \mbox{\hyperlink{astcenc_8h_ade8fdcd2d40237f88e4bfe1230b9b687ad07f821ba0081fbbfcc5b59ebb744b3d}{ASTCENC\_SWZ\_G}},\ \mbox{\hyperlink{astcenc_8h_ade8fdcd2d40237f88e4bfe1230b9b687aa90469ed153f096e4db49d557b5ed3f0}{ASTCENC\_SWZ\_B}},\ \mbox{\hyperlink{astcenc_8h_ade8fdcd2d40237f88e4bfe1230b9b687a0fa7695144b4779ee0270c590765c713}{ASTCENC\_SWZ\_A}}\ \},}
\DoxyCodeLine{01984\ \ \ \ \ \ \ \ \ \{\ \mbox{\hyperlink{astcenc_8h_ade8fdcd2d40237f88e4bfe1230b9b687a2766a38ed1e99377723a4efb3510acd3}{ASTCENC\_SWZ\_R}},\ \mbox{\hyperlink{astcenc_8h_ade8fdcd2d40237f88e4bfe1230b9b687ad07f821ba0081fbbfcc5b59ebb744b3d}{ASTCENC\_SWZ\_G}},\ \mbox{\hyperlink{astcenc_8h_ade8fdcd2d40237f88e4bfe1230b9b687aa90469ed153f096e4db49d557b5ed3f0}{ASTCENC\_SWZ\_B}},\ \mbox{\hyperlink{astcenc_8h_ade8fdcd2d40237f88e4bfe1230b9b687a0fa7695144b4779ee0270c590765c713}{ASTCENC\_SWZ\_A}}\ \}\ \};}
\DoxyCodeLine{01985\ }
\DoxyCodeLine{01986\ \ \ \ \ error\ =\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_affe76bf8f1701e275934901541d19089}{edit\_astcenc\_config}}(argc,\ argv,\ operation,\ cli\_config,\ config);}
\DoxyCodeLine{01987\ \ \ \ \ \textcolor{keywordflow}{if}\ (error)}
\DoxyCodeLine{01988\ \ \ \ \ \{}
\DoxyCodeLine{01989\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{01990\ \ \ \ \ \}}
\DoxyCodeLine{01991\ }
\DoxyCodeLine{01992\ \ \ \ \ \textcolor{comment}{//\ Enable\ progress\ callback\ if\ not\ in\ silent\ mode\ and\ using\ a\ terminal}}
\DoxyCodeLine{01993\ \textcolor{preprocessor}{\ \ \ \ \#if\ defined(\_WIN32)}}
\DoxyCodeLine{01994\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ stdoutfno\ =\ \_fileno(stdout);}
\DoxyCodeLine{01995\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01996\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ stdoutfno\ =\ STDOUT\_FILENO;}
\DoxyCodeLine{01997\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01998\ }
\DoxyCodeLine{01999\ \ \ \ \ \textcolor{keywordflow}{if}\ ((!cli\_config.silentmode)\ \&\&\ isatty(stdoutfno))}
\DoxyCodeLine{02000\ \ \ \ \ \{}
\DoxyCodeLine{02001\ \ \ \ \ \ \ \ \ config.progress\_callback\ =\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a54bae4167b7197c4da5ecac977489513}{progress\_emitter}};}
\DoxyCodeLine{02002\ \ \ \ \ \}}
\DoxyCodeLine{02003\ }
\DoxyCodeLine{02004\ \ \ \ \ \mbox{\hyperlink{structastcenc__image}{astcenc\_image}}*\ image\_uncomp\_in\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_ae925e44fad22a8f657ff572ca6b7f948}{nullptr}}\ ;}
\DoxyCodeLine{02005\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ image\_uncomp\_in\_component\_count\ =\ 0;}
\DoxyCodeLine{02006\ \ \ \ \ \textcolor{keywordtype}{bool}\ image\_uncomp\_in\_is\_hdr\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{02007\ \ \ \ \ \mbox{\hyperlink{structastcenc__image}{astcenc\_image}}*\ image\_decomp\_out\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{02008\ }
\DoxyCodeLine{02009\ \ \ \ \ \textcolor{comment}{//\ Determine\ decompression\ output\ bitness,\ if\ limited\ by\ file\ type}}
\DoxyCodeLine{02010\ \ \ \ \ \textcolor{keywordtype}{int}\ out\_bitness\ =\ 0;}
\DoxyCodeLine{02011\ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a5d0adaabca9b56e5c6e0e89e309ad1bc}{ASTCENC\_STAGE\_DECOMPRESS}})}
\DoxyCodeLine{02012\ \ \ \ \ \{}
\DoxyCodeLine{02013\ \ \ \ \ \ \ \ \ out\_bitness\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a36fb7c666f502f49e4d18cf130a7958d}{get\_output\_filename\_enforced\_bitness}}(output\_filename.c\_str());}
\DoxyCodeLine{02014\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (out\_bitness\ ==\ 0)}
\DoxyCodeLine{02015\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02016\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_hdr\ =\ (config.profile\ ==\ \mbox{\hyperlink{astcenc_8h_adf71df2e9f79916ccc02886ba1bdeb29a4493639842d745d4bccd6a94836d2ca9}{ASTCENC\_PRF\_HDR}})\ ||}
\DoxyCodeLine{02017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (config.profile\ ==\ \mbox{\hyperlink{astcenc_8h_adf71df2e9f79916ccc02886ba1bdeb29a9043bc19a890aeff156f664ccbef677f}{ASTCENC\_PRF\_HDR\_RGB\_LDR\_A}});}
\DoxyCodeLine{02018\ \ \ \ \ \ \ \ \ \ \ \ \ out\_bitness\ =\ is\_hdr\ ?\ 16\ :\ 8;}
\DoxyCodeLine{02019\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02020\ }
\DoxyCodeLine{02021\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ decompressed\ output\ is\ unorm8\ then\ force\ the\ decode\_unorm8\ heuristics\ for\ compression}}
\DoxyCodeLine{02022\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (out\_bitness\ ==\ 8)}
\DoxyCodeLine{02023\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02024\ \ \ \ \ \ \ \ \ \ \ \ \ config.flags\ |=\ \mbox{\hyperlink{astcenc_8h_a915298ea1a81ba542b20535c0f19a090}{ASTCENC\_FLG\_USE\_DECODE\_UNORM8}};}
\DoxyCodeLine{02025\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02026\ \ \ \ \ \}}
\DoxyCodeLine{02027\ }
\DoxyCodeLine{02028\ \ \ \ \ \textcolor{comment}{//\ TODO:\ Handle\ RAII\ resources\ so\ they\ get\ freed\ when\ out\ of\ scope}}
\DoxyCodeLine{02029\ \ \ \ \ \mbox{\hyperlink{astcenc_8h_a6fc8b28b40fd67ba67e33624089aa4d2}{astcenc\_error}}\ \ \ \ codec\_status;}
\DoxyCodeLine{02030\ \ \ \ \ \mbox{\hyperlink{structastcenc__context}{astcenc\_context}}*\ codec\_context;}
\DoxyCodeLine{02031\ }
\DoxyCodeLine{02032\ \ \ \ \ \textcolor{comment}{//\ Preflight\ -\/\ check\ we\ have\ valid\ extensions\ for\ storing\ a\ file}}
\DoxyCodeLine{02033\ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a203421aa2822307b22609af15a913713}{ASTCENC\_STAGE\_ST\_NCOMP}})}
\DoxyCodeLine{02034\ \ \ \ \ \{}
\DoxyCodeLine{02035\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bitness\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a36fb7c666f502f49e4d18cf130a7958d}{get\_output\_filename\_enforced\_bitness}}(output\_filename.c\_str());}
\DoxyCodeLine{02036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bitness\ <\ 0)}
\DoxyCodeLine{02037\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *eptr\ =\ strrchr(output\_filename.c\_str(),\ \textcolor{charliteral}{'.'});}
\DoxyCodeLine{02039\ \ \ \ \ \ \ \ \ \ \ \ \ eptr\ =\ eptr\ ?\ eptr\ :\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{02040\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Unknown\ uncompressed\ output\ file\ type\ '\%s'\(\backslash\)n"{}},\ eptr);}
\DoxyCodeLine{02041\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02042\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02043\ \ \ \ \ \}}
\DoxyCodeLine{02044\ }
\DoxyCodeLine{02045\ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a590f914acb84482fef2496a7f773da55}{ASTCENC\_STAGE\_ST\_COMP}})}
\DoxyCodeLine{02046\ \ \ \ \ \{}
\DoxyCodeLine{02047\ \textcolor{preprocessor}{\#if\ defined(\_WIN32)}}
\DoxyCodeLine{02048\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_null\ =\ output\_filename\ ==\ \textcolor{stringliteral}{"{}NUL"{}}\ ||\ output\_filename\ ==\ \textcolor{stringliteral}{"{}nul"{}};}
\DoxyCodeLine{02049\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02050\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_null\ =\ output\_filename\ ==\ \textcolor{stringliteral}{"{}/dev/null"{}};}
\DoxyCodeLine{02051\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02052\ }
\DoxyCodeLine{02053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(is\_null\ ||\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a799eec117691caf296bb26711f44c60f}{ends\_with}}(output\_filename,\ \textcolor{stringliteral}{"{}.astc"{}})\ ||\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a799eec117691caf296bb26711f44c60f}{ends\_with}}(output\_filename,\ \textcolor{stringliteral}{"{}.ktx"{}})))}
\DoxyCodeLine{02054\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *eptr\ =\ strrchr(output\_filename.c\_str(),\ \textcolor{charliteral}{'.'});}
\DoxyCodeLine{02056\ \ \ \ \ \ \ \ \ \ \ \ \ eptr\ =\ eptr\ ?\ eptr\ :\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{02057\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Unknown\ compressed\ output\ file\ type\ '\%s'\(\backslash\)n"{}},\ eptr);}
\DoxyCodeLine{02058\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02059\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02060\ \ \ \ \ \}}
\DoxyCodeLine{02061\ }
\DoxyCodeLine{02062\ \ \ \ \ codec\_status\ =\ \mbox{\hyperlink{astcenc_8h_a53428ef5ae3cc106c40f19a50cd5fc5d}{astcenc\_context\_alloc}}(\&config,\ cli\_config.thread\_count,\ \&codec\_context);}
\DoxyCodeLine{02063\ \ \ \ \ \textcolor{keywordflow}{if}\ (codec\_status\ !=\ \mbox{\hyperlink{astcenc_8h_a6fc8b28b40fd67ba67e33624089aa4d2a4870ce2b25146ebfb91a1c2021ed95e1}{ASTCENC\_SUCCESS}})}
\DoxyCodeLine{02064\ \ \ \ \ \{}
\DoxyCodeLine{02065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Codec\ context\ alloc\ failed:\ \%s\(\backslash\)n"{}},\ \mbox{\hyperlink{astcenc_8h_a5768699cf6bc52f54a21968bb480a1d2}{astcenc\_get\_error\_string}}(codec\_status));}
\DoxyCodeLine{02066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02067\ \ \ \ \ \}}
\DoxyCodeLine{02068\ }
\DoxyCodeLine{02069\ \ \ \ \ \textcolor{comment}{//\ Load\ the\ uncompressed\ input\ file\ if\ needed}}
\DoxyCodeLine{02070\ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_abb90c29f909a0fbfb7bd0d4d657ed0fd}{ASTCENC\_STAGE\_LD\_NCOMP}})}
\DoxyCodeLine{02071\ \ \ \ \ \{}
\DoxyCodeLine{02072\ \ \ \ \ \ \ \ \ image\_uncomp\_in\ =\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a3dd5258961a3c289c1e448b7807cf1fa}{load\_uncomp\_file}}(}
\DoxyCodeLine{02073\ \ \ \ \ \ \ \ \ \ \ \ \ input\_filename.c\_str(),\ cli\_config.array\_size,\ cli\_config.y\_flip,}
\DoxyCodeLine{02074\ \ \ \ \ \ \ \ \ \ \ \ \ image\_uncomp\_in\_is\_hdr,\ image\_uncomp\_in\_component\_count);}
\DoxyCodeLine{02075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!image\_uncomp\_in)}
\DoxyCodeLine{02076\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02077\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Failed\ to\ load\ uncompressed\ image\ file\(\backslash\)n"{}});}
\DoxyCodeLine{02078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02079\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02080\ }
\DoxyCodeLine{02081\ }
\DoxyCodeLine{02082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (preprocess\ !=\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a1b2281816750f3c6d13790a322dc3092afad1e4ffeef01780caa68ff6eb564940}{ASTCENC\_PP\_NONE}})}
\DoxyCodeLine{02083\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Allocate\ a\ float\ image\ so\ we\ can\ avoid\ additional\ quantization,}}
\DoxyCodeLine{02085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ as\ e.g.\ premultiplication\ can\ result\ in\ fractional\ color\ values}}
\DoxyCodeLine{02086\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structastcenc__image}{astcenc\_image}}*\ image\_pp\ =\ \mbox{\hyperlink{astcenccli__image_8cpp_a860f8be85c860429c0df12b581015b68}{alloc\_image}}(32,}
\DoxyCodeLine{02087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}},}
\DoxyCodeLine{02088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}},}
\DoxyCodeLine{02089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}});}
\DoxyCodeLine{02090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!image\_pp)}
\DoxyCodeLine{02091\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Failed\ to\ allocate\ preprocessed\ image\(\backslash\)n"{}});}
\DoxyCodeLine{02093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02094\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02095\ }
\DoxyCodeLine{02096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (preprocess\ ==\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a1b2281816750f3c6d13790a322dc3092ad6b62093fd8756b30fa203f43ef45fc7}{ASTCENC\_PP\_NORMALIZE}})}
\DoxyCodeLine{02097\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__toplevel_8cpp_aeadb22c3ae0c54b3d9777e8e0779729c}{image\_preprocess\_normalize}}(*image\_uncomp\_in,\ *image\_pp);}
\DoxyCodeLine{02099\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02100\ }
\DoxyCodeLine{02101\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (preprocess\ ==\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a1b2281816750f3c6d13790a322dc3092a468bd37375a9a449acd27b370943212c}{ASTCENC\_PP\_PREMULTIPLY}})}
\DoxyCodeLine{02102\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__toplevel_8cpp_ae4200e4d2196e8fc39ae933c758c8d79}{image\_preprocess\_premultiply}}(*image\_uncomp\_in,\ *image\_pp,}
\DoxyCodeLine{02104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ config.profile);}
\DoxyCodeLine{02105\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02106\ }
\DoxyCodeLine{02107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Delete\ the\ original\ as\ we\ no\ longer\ need\ it}}
\DoxyCodeLine{02108\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__image_8cpp_aeb0cd9b24656f2c4dac144e89217057c}{free\_image}}(image\_uncomp\_in);}
\DoxyCodeLine{02109\ \ \ \ \ \ \ \ \ \ \ \ \ image\_uncomp\_in\ =\ image\_pp;}
\DoxyCodeLine{02110\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02111\ }
\DoxyCodeLine{02112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!cli\_config.silentmode)}
\DoxyCodeLine{02113\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02114\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Source\ image\(\backslash\)n"{}});}
\DoxyCodeLine{02115\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}============\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{02116\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Source:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \%s\(\backslash\)n"{}},\ input\_filename.c\_str());}
\DoxyCodeLine{02117\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Color\ profile:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \%s\(\backslash\)n"{}},\ image\_uncomp\_in\_is\_hdr\ ?\ \textcolor{stringliteral}{"{}HDR"{}}\ :\ \textcolor{stringliteral}{"{}LDR"{}});}
\DoxyCodeLine{02118\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}}\ >\ 1)}
\DoxyCodeLine{02119\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Dimensions:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 3D,\ \%ux\%ux\%u\(\backslash\)n"{}},}
\DoxyCodeLine{02121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}},\ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}},\ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}});}
\DoxyCodeLine{02122\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02124\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Dimensions:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 2D,\ \%ux\%u\(\backslash\)n"{}},}
\DoxyCodeLine{02126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}},\ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}});}
\DoxyCodeLine{02127\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02128\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Components:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \%d\(\backslash\)n\(\backslash\)n"{}},\ image\_uncomp\_in\_component\_count);}
\DoxyCodeLine{02129\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02130\ \ \ \ \ \}}
\DoxyCodeLine{02131\ }
\DoxyCodeLine{02132\ \ \ \ \ \textcolor{keywordtype}{double}\ image\_size\ =\ 0.0;}
\DoxyCodeLine{02133\ \ \ \ \ \textcolor{keywordflow}{if}\ (image\_uncomp\_in)}
\DoxyCodeLine{02134\ \ \ \ \ \{}
\DoxyCodeLine{02135\ \ \ \ \ \ \ \ \ image\_size\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}})\ *}
\DoxyCodeLine{02136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}})\ *}
\DoxyCodeLine{02137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}});}
\DoxyCodeLine{02138\ \ \ \ \ \}}
\DoxyCodeLine{02139\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02140\ \ \ \ \ \{}
\DoxyCodeLine{02141\ \ \ \ \ \ \ \ \ image\_size\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(image\_comp.dim\_x)\ *}
\DoxyCodeLine{02142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(image\_comp.dim\_y)\ *}
\DoxyCodeLine{02143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(image\_comp.dim\_z);}
\DoxyCodeLine{02144\ \ \ \ \ \}}
\DoxyCodeLine{02145\ }
\DoxyCodeLine{02146\ \ \ \ \ \textcolor{comment}{//\ Compress\ an\ image}}
\DoxyCodeLine{02147\ \ \ \ \ \textcolor{keywordtype}{double}\ best\_compression\_time\ =\ 100000.0;}
\DoxyCodeLine{02148\ \ \ \ \ \textcolor{keywordtype}{double}\ total\_compression\_time\ =\ 0.0;}
\DoxyCodeLine{02149\ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a9872916c69f6d2c38167b744ede4e7d5}{ASTCENC\_STAGE\_COMPRESS}})}
\DoxyCodeLine{02150\ \ \ \ \ \{}
\DoxyCodeLine{02151\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__toplevel_8cpp_af7e1714f9fd2ea869dc60aa6cc67398c}{print\_astcenc\_config}}(cli\_config,\ config);}
\DoxyCodeLine{02152\ }
\DoxyCodeLine{02153\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ blocks\_x\ =\ (image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}}\ +\ config.block\_x\ -\/\ 1)\ /\ config.block\_x;}
\DoxyCodeLine{02154\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ blocks\_y\ =\ (image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}}\ +\ config.block\_y\ -\/\ 1)\ /\ config.block\_y;}
\DoxyCodeLine{02155\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ blocks\_z\ =\ (image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}}\ +\ config.block\_z\ -\/\ 1)\ /\ config.block\_z;}
\DoxyCodeLine{02156\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ buffer\_size\ =\ blocks\_x\ *\ blocks\_y\ *\ blocks\_z\ *\ 16;}
\DoxyCodeLine{02157\ \ \ \ \ \ \ \ \ uint8\_t*\ buffer\ =\ \textcolor{keyword}{new}\ uint8\_t[buffer\_size];}
\DoxyCodeLine{02158\ }
\DoxyCodeLine{02159\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcompression__workload}{compression\_workload}}\ work;}
\DoxyCodeLine{02160\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structcompression__workload_ae9d654721f6b7f3a4c3633ea3f6fd44d}{context}}\ =\ codec\_context;}
\DoxyCodeLine{02161\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structcompression__workload_a3b9e0060a67dd9683baf335501583de8}{image}}\ =\ image\_uncomp\_in;}
\DoxyCodeLine{02162\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structcompression__workload_a6a1f873b56e701cced67a1a79085d9b7}{swizzle}}\ =\ cli\_config.swz\_encode;}
\DoxyCodeLine{02163\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structcompression__workload_a63fdd5139699d1a5b8d1461c89b9ad8b}{data\_out}}\ =\ buffer;}
\DoxyCodeLine{02164\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structcompression__workload_ae103e8195d79632f8b743507b9ac214d}{data\_len}}\ =\ buffer\_size;}
\DoxyCodeLine{02165\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structcompression__workload_a3742c4719a0c372c27e719939d9730e5}{error}}\ =\ \mbox{\hyperlink{astcenc_8h_a6fc8b28b40fd67ba67e33624089aa4d2a4870ce2b25146ebfb91a1c2021ed95e1}{ASTCENC\_SUCCESS}};}
\DoxyCodeLine{02166\ }
\DoxyCodeLine{02167\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Only\ launch\ worker\ threads\ for\ multi-\/threaded\ use\ -\/\ it\ makes\ basic}}
\DoxyCodeLine{02168\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ single-\/threaded\ profiling\ and\ debugging\ a\ little\ less\ convoluted}}
\DoxyCodeLine{02169\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ start\_compression\_time\ =\ \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\_time}}();}
\DoxyCodeLine{02170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ cli\_config.repeat\_count;\ i++)}
\DoxyCodeLine{02171\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (config.progress\_callback)}
\DoxyCodeLine{02173\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Compression\(\backslash\)n"{}});}
\DoxyCodeLine{02175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}===========\(\backslash\)n"{}});}
\DoxyCodeLine{02176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{02177\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02178\ }
\DoxyCodeLine{02179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ start\_iter\_time\ =\ \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\_time}}();}
\DoxyCodeLine{02180\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cli\_config.thread\_count\ >\ 1)}
\DoxyCodeLine{02181\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_aaa9dcd56cd7089c481e7ef8355ae5c2f}{launch\_threads}}(\textcolor{stringliteral}{"{}Compression"{}},\ cli\_config.thread\_count,\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a57bafe66bbd689a53aad2d190fe7a3fa}{compression\_workload\_runner}},\ \&work);}
\DoxyCodeLine{02183\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02185\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structcompression__workload_a3742c4719a0c372c27e719939d9730e5}{error}}\ =\ \mbox{\hyperlink{astcenc_8h_a3d9bc940f578f9d66c5339d7f7b4b069}{astcenc\_compress\_image}}(}
\DoxyCodeLine{02187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structcompression__workload_ae9d654721f6b7f3a4c3633ea3f6fd44d}{context}},\ work.\mbox{\hyperlink{structcompression__workload_a3b9e0060a67dd9683baf335501583de8}{image}},\ \&work.\mbox{\hyperlink{structcompression__workload_a6a1f873b56e701cced67a1a79085d9b7}{swizzle}},}
\DoxyCodeLine{02188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structcompression__workload_a63fdd5139699d1a5b8d1461c89b9ad8b}{data\_out}},\ work.\mbox{\hyperlink{structcompression__workload_ae103e8195d79632f8b743507b9ac214d}{data\_len}},\ 0);}
\DoxyCodeLine{02189\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02190\ }
\DoxyCodeLine{02191\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc_8h_a93d80ab0fdd1546df397476d773df545}{astcenc\_compress\_reset}}(codec\_context);}
\DoxyCodeLine{02192\ }
\DoxyCodeLine{02193\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (config.progress\_callback)}
\DoxyCodeLine{02194\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{02196\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02197\ }
\DoxyCodeLine{02198\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ iter\_time\ =\ \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\_time}}()\ -\/\ start\_iter\_time;}
\DoxyCodeLine{02199\ \ \ \ \ \ \ \ \ \ \ \ \ best\_compression\_time\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(iter\_time,\ best\_compression\_time);}
\DoxyCodeLine{02200\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02201\ \ \ \ \ \ \ \ \ total\_compression\_time\ =\ \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\_time}}()\ -\/\ start\_compression\_time;}
\DoxyCodeLine{02202\ }
\DoxyCodeLine{02203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (work.\mbox{\hyperlink{structcompression__workload_a3742c4719a0c372c27e719939d9730e5}{error}}\ !=\ \mbox{\hyperlink{astcenc_8h_a6fc8b28b40fd67ba67e33624089aa4d2a4870ce2b25146ebfb91a1c2021ed95e1}{ASTCENC\_SUCCESS}})}
\DoxyCodeLine{02204\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02205\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Codec\ compress\ failed:\ \%s\(\backslash\)n"{}},\ \mbox{\hyperlink{astcenc_8h_a5768699cf6bc52f54a21968bb480a1d2}{astcenc\_get\_error\_string}}(work.\mbox{\hyperlink{structcompression__workload_a3742c4719a0c372c27e719939d9730e5}{error}}));}
\DoxyCodeLine{02206\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02207\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02208\ }
\DoxyCodeLine{02209\ \ \ \ \ \ \ \ \ image\_comp.block\_x\ =\ config.block\_x;}
\DoxyCodeLine{02210\ \ \ \ \ \ \ \ \ image\_comp.block\_y\ =\ config.block\_y;}
\DoxyCodeLine{02211\ \ \ \ \ \ \ \ \ image\_comp.block\_z\ =\ config.block\_z;}
\DoxyCodeLine{02212\ \ \ \ \ \ \ \ \ image\_comp.dim\_x\ =\ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}};}
\DoxyCodeLine{02213\ \ \ \ \ \ \ \ \ image\_comp.dim\_y\ =\ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}};}
\DoxyCodeLine{02214\ \ \ \ \ \ \ \ \ image\_comp.dim\_z\ =\ image\_uncomp\_in-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}};}
\DoxyCodeLine{02215\ \ \ \ \ \ \ \ \ image\_comp.data\ =\ buffer;}
\DoxyCodeLine{02216\ \ \ \ \ \ \ \ \ image\_comp.data\_len\ =\ buffer\_size;}
\DoxyCodeLine{02217\ \ \ \ \ \}}
\DoxyCodeLine{02218\ }
\DoxyCodeLine{02219\ \ \ \ \ \textcolor{comment}{//\ Decompress\ an\ image}}
\DoxyCodeLine{02220\ \ \ \ \ \textcolor{keywordtype}{double}\ best\_decompression\_time\ =\ 100000.0;}
\DoxyCodeLine{02221\ \ \ \ \ \textcolor{keywordtype}{double}\ total\_decompression\_time\ =\ 0.0;}
\DoxyCodeLine{02222\ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a5d0adaabca9b56e5c6e0e89e309ad1bc}{ASTCENC\_STAGE\_DECOMPRESS}})}
\DoxyCodeLine{02223\ \ \ \ \ \{}
\DoxyCodeLine{02224\ \ \ \ \ \ \ \ \ image\_decomp\_out\ =\ \mbox{\hyperlink{astcenccli__image_8cpp_a860f8be85c860429c0df12b581015b68}{alloc\_image}}(}
\DoxyCodeLine{02225\ \ \ \ \ \ \ \ \ \ \ \ \ out\_bitness,\ image\_comp.dim\_x,\ image\_comp.dim\_y,\ image\_comp.dim\_z);}
\DoxyCodeLine{02226\ }
\DoxyCodeLine{02227\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdecompression__workload}{decompression\_workload}}\ work;}
\DoxyCodeLine{02228\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structdecompression__workload_a5f3dda2b3608b2fcf8ca8df56b903eaa}{context}}\ =\ codec\_context;}
\DoxyCodeLine{02229\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structdecompression__workload_af25f9c5e5f267f364dcfc56e65afa6bf}{data}}\ =\ image\_comp.data;}
\DoxyCodeLine{02230\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structdecompression__workload_a1b7213e06f1ba43c8b9cfd3261ef1db4}{data\_len}}\ =\ image\_comp.data\_len;}
\DoxyCodeLine{02231\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structdecompression__workload_ab689a3629431892c34eb2c043ccd0b3b}{image\_out}}\ =\ image\_decomp\_out;}
\DoxyCodeLine{02232\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structdecompression__workload_ae1910445ee0d84040bcb599e2caaade0}{swizzle}}\ =\ cli\_config.swz\_decode;}
\DoxyCodeLine{02233\ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structdecompression__workload_ae17bf8433d2744e4047d15aca49e2b28}{error}}\ =\ \mbox{\hyperlink{astcenc_8h_a6fc8b28b40fd67ba67e33624089aa4d2a4870ce2b25146ebfb91a1c2021ed95e1}{ASTCENC\_SUCCESS}};}
\DoxyCodeLine{02234\ }
\DoxyCodeLine{02235\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Only\ launch\ worker\ threads\ for\ multi-\/threaded\ use\ -\/\ it\ makes\ basic}}
\DoxyCodeLine{02236\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ single-\/threaded\ profiling\ and\ debugging\ a\ little\ less\ convoluted}}
\DoxyCodeLine{02237\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ start\_decompression\_time\ =\ \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\_time}}();}
\DoxyCodeLine{02238\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ cli\_config.repeat\_count;\ i++)}
\DoxyCodeLine{02239\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02240\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ start\_iter\_time\ =\ \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\_time}}();}
\DoxyCodeLine{02241\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cli\_config.thread\_count\ >\ 1)}
\DoxyCodeLine{02242\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_aaa9dcd56cd7089c481e7ef8355ae5c2f}{launch\_threads}}(\textcolor{stringliteral}{"{}Decompression"{}},\ cli\_config.thread\_count,\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a02c55a799cc33b39f9d733b1a7e91281}{decompression\_workload\_runner}},\ \&work);}
\DoxyCodeLine{02244\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02245\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02246\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structdecompression__workload_ae17bf8433d2744e4047d15aca49e2b28}{error}}\ =\ \mbox{\hyperlink{astcenc_8h_aabf20ebf7bc4f75c2ae12070a60f23c0}{astcenc\_decompress\_image}}(}
\DoxyCodeLine{02248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structdecompression__workload_a5f3dda2b3608b2fcf8ca8df56b903eaa}{context}},\ work.\mbox{\hyperlink{structdecompression__workload_af25f9c5e5f267f364dcfc56e65afa6bf}{data}},\ work.\mbox{\hyperlink{structdecompression__workload_a1b7213e06f1ba43c8b9cfd3261ef1db4}{data\_len}},}
\DoxyCodeLine{02249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ work.\mbox{\hyperlink{structdecompression__workload_ab689a3629431892c34eb2c043ccd0b3b}{image\_out}},\ \&work.\mbox{\hyperlink{structdecompression__workload_ae1910445ee0d84040bcb599e2caaade0}{swizzle}},\ 0);}
\DoxyCodeLine{02250\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02251\ }
\DoxyCodeLine{02252\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc_8h_a0a92db919a1334c1d5844fdc081cba30}{astcenc\_decompress\_reset}}(codec\_context);}
\DoxyCodeLine{02253\ }
\DoxyCodeLine{02254\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ iter\_time\ =\ \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\_time}}()\ -\/\ start\_iter\_time;}
\DoxyCodeLine{02255\ \ \ \ \ \ \ \ \ \ \ \ \ best\_decompression\_time\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(iter\_time,\ best\_decompression\_time);}
\DoxyCodeLine{02256\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02257\ \ \ \ \ \ \ \ \ total\_decompression\_time\ =\ \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\_time}}()\ -\/\ start\_decompression\_time;}
\DoxyCodeLine{02258\ }
\DoxyCodeLine{02259\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (work.\mbox{\hyperlink{structdecompression__workload_ae17bf8433d2744e4047d15aca49e2b28}{error}}\ !=\ \mbox{\hyperlink{astcenc_8h_a6fc8b28b40fd67ba67e33624089aa4d2a4870ce2b25146ebfb91a1c2021ed95e1}{ASTCENC\_SUCCESS}})}
\DoxyCodeLine{02260\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02261\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Codec\ decompress\ failed:\ \%s\(\backslash\)n"{}},\ \mbox{\hyperlink{astcenc_8h_a5768699cf6bc52f54a21968bb480a1d2}{astcenc\_get\_error\_string}}(codec\_status));}
\DoxyCodeLine{02262\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02263\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02264\ \ \ \ \ \}}
\DoxyCodeLine{02265\ }
\DoxyCodeLine{02266\ \textcolor{preprocessor}{\#if\ defined(\_WIN32)}}
\DoxyCodeLine{02267\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_null\ =\ output\_filename\ ==\ \textcolor{stringliteral}{"{}NUL"{}}\ ||\ output\_filename\ ==\ \textcolor{stringliteral}{"{}nul"{}};}
\DoxyCodeLine{02268\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{02269\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_null\ =\ output\_filename\ ==\ \textcolor{stringliteral}{"{}/dev/null"{}};}
\DoxyCodeLine{02270\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02271\ }
\DoxyCodeLine{02272\ \ \ \ \textcolor{comment}{//\ Print\ metrics\ in\ comparison\ mode}}
\DoxyCodeLine{02273\ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a33515e5ea70644038745e5d15654dbd8}{ASTCENC\_STAGE\_COMPARE}})}
\DoxyCodeLine{02274\ \ \ \ \ \{}
\DoxyCodeLine{02275\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_normal\_map\ =\ config.flags\ \&\ \mbox{\hyperlink{astcenc_8h_a4010dadc54cded4b9d1abdb6c62f5c03}{ASTCENC\_FLG\_MAP\_NORMAL}};}
\DoxyCodeLine{02276\ }
\DoxyCodeLine{02277\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__error__metrics_8cpp_a478be461420681d7c83aa89569ea92c4}{compute\_error\_metrics}}(}
\DoxyCodeLine{02278\ \ \ \ \ \ \ \ \ \ \ \ \ image\_uncomp\_in\_is\_hdr,\ is\_normal\_map,\ image\_uncomp\_in\_component\_count,}
\DoxyCodeLine{02279\ \ \ \ \ \ \ \ \ \ \ \ \ image\_uncomp\_in,\ image\_decomp\_out,\ cli\_config.low\_fstop,\ cli\_config.high\_fstop);}
\DoxyCodeLine{02280\ \ \ \ \ \}}
\DoxyCodeLine{02281\ }
\DoxyCodeLine{02282\ \ \ \ \ \textcolor{comment}{//\ Store\ compressed\ image}}
\DoxyCodeLine{02283\ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a590f914acb84482fef2496a7f773da55}{ASTCENC\_STAGE\_ST\_COMP}})}
\DoxyCodeLine{02284\ \ \ \ \ \{}
\DoxyCodeLine{02285\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenccli__toplevel_8cpp_a799eec117691caf296bb26711f44c60f}{ends\_with}}(output\_filename,\ \textcolor{stringliteral}{"{}.astc"{}}))}
\DoxyCodeLine{02286\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02287\ \ \ \ \ \ \ \ \ \ \ \ \ error\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a9ba4a67ed1a59e71c22282996d48390b}{store\_cimage}}(image\_comp,\ output\_filename.c\_str());}
\DoxyCodeLine{02288\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error)}
\DoxyCodeLine{02289\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Failed\ to\ store\ compressed\ image\(\backslash\)n"{}});}
\DoxyCodeLine{02291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02292\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02293\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02294\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenccli__toplevel_8cpp_a799eec117691caf296bb26711f44c60f}{ends\_with}}(output\_filename,\ \textcolor{stringliteral}{"{}.ktx"{}}))}
\DoxyCodeLine{02295\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ srgb\ =\ profile\ ==\ \mbox{\hyperlink{astcenc_8h_adf71df2e9f79916ccc02886ba1bdeb29a331abc1d96b4fa991757e6ef8199f298}{ASTCENC\_PRF\_LDR\_SRGB}};}
\DoxyCodeLine{02297\ \ \ \ \ \ \ \ \ \ \ \ \ error\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a3e674d4952496a98a942815392b1a3a5}{store\_ktx\_compressed\_image}}(image\_comp,\ output\_filename.c\_str(),\ srgb);}
\DoxyCodeLine{02298\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error)}
\DoxyCodeLine{02299\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Failed\ to\ store\ compressed\ image\(\backslash\)n"{}});}
\DoxyCodeLine{02301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02302\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02303\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02304\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02305\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02306\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_null)}
\DoxyCodeLine{02307\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Unknown\ compressed\ output\ file\ type\(\backslash\)n"{}});}
\DoxyCodeLine{02309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02310\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02311\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02312\ \ \ \ \ \}}
\DoxyCodeLine{02313\ }
\DoxyCodeLine{02314\ \ \ \ \ \textcolor{comment}{//\ Store\ decompressed\ image}}
\DoxyCodeLine{02315\ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a203421aa2822307b22609af15a913713}{ASTCENC\_STAGE\_ST\_NCOMP}})}
\DoxyCodeLine{02316\ \ \ \ \ \{}
\DoxyCodeLine{02317\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_null)}
\DoxyCodeLine{02318\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02319\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ store\_result\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_aad38fd842cc30c7c2d49594cc9c20e65}{store\_ncimage}}(image\_decomp\_out,\ output\_filename.c\_str(),}
\DoxyCodeLine{02320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cli\_config.y\_flip);}
\DoxyCodeLine{02321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!store\_result)}
\DoxyCodeLine{02322\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Failed\ to\ write\ output\ image\ \%s\(\backslash\)n"{}},\ output\_filename.c\_str());}
\DoxyCodeLine{02324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02325\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02326\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02327\ \ \ \ \ \}}
\DoxyCodeLine{02328\ }
\DoxyCodeLine{02329\ \ \ \ \ \textcolor{comment}{//\ Store\ diagnostic\ images}}
\DoxyCodeLine{02330\ \ \ \ \ \textcolor{keywordflow}{if}\ (cli\_config.diagnostic\_images\ \&\&\ !is\_null)}
\DoxyCodeLine{02331\ \ \ \ \ \{}
\DoxyCodeLine{02332\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a65c87ee1ff0ed0736cffa06692853479}{print\_diagnostic\_images}}(codec\_context,\ image\_comp,\ output\_filename);}
\DoxyCodeLine{02333\ \ \ \ \ \}}
\DoxyCodeLine{02334\ }
\DoxyCodeLine{02335\ \ \ \ \ \mbox{\hyperlink{astcenccli__image_8cpp_aeb0cd9b24656f2c4dac144e89217057c}{free\_image}}(image\_uncomp\_in);}
\DoxyCodeLine{02336\ \ \ \ \ \mbox{\hyperlink{astcenccli__image_8cpp_aeb0cd9b24656f2c4dac144e89217057c}{free\_image}}(image\_decomp\_out);}
\DoxyCodeLine{02337\ \ \ \ \ \mbox{\hyperlink{astcenc_8h_ae8bcc4e15bfd67d13c59a629bd64767a}{astcenc\_context\_free}}(codec\_context);}
\DoxyCodeLine{02338\ }
\DoxyCodeLine{02339\ \ \ \ \ \textcolor{keyword}{delete}[]\ image\_comp.data;}
\DoxyCodeLine{02340\ }
\DoxyCodeLine{02341\ \ \ \ \ \textcolor{keywordflow}{if}\ ((operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a33515e5ea70644038745e5d15654dbd8}{ASTCENC\_STAGE\_COMPARE}})\ ||\ (!cli\_config.silentmode))}
\DoxyCodeLine{02342\ \ \ \ \ \{}
\DoxyCodeLine{02343\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ end\_time\ =\ \mbox{\hyperlink{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}{get\_time}}();}
\DoxyCodeLine{02344\ }
\DoxyCodeLine{02345\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ repeats\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(cli\_config.repeat\_count);}
\DoxyCodeLine{02346\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ avg\_compression\_time\ =\ total\_compression\_time\ /\ repeats;}
\DoxyCodeLine{02347\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ avg\_decompression\_time\ =\ total\_decompression\_time\ /\ repeats;}
\DoxyCodeLine{02348\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ total\_time\ =\ (end\_time\ -\/\ start\_time)\ -\/\ ((repeats\ -\/\ 1.0)\ *\ avg\_compression\_time)\ \ -\/\ ((repeats\ -\/\ 1.0)\ *\ avg\_decompression\_time);}
\DoxyCodeLine{02349\ }
\DoxyCodeLine{02350\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Performance\ metrics\(\backslash\)n"{}});}
\DoxyCodeLine{02351\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}===================\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{02352\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Total\ time:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \%8.4f\ s\(\backslash\)n"{}},\ total\_time);}
\DoxyCodeLine{02353\ }
\DoxyCodeLine{02354\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a9872916c69f6d2c38167b744ede4e7d5}{ASTCENC\_STAGE\_COMPRESS}})}
\DoxyCodeLine{02355\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02356\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ compression\_rate\ =\ image\_size\ /\ (best\_compression\_time\ *\ 1000000.0);}
\DoxyCodeLine{02357\ }
\DoxyCodeLine{02358\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Coding\ time:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \%8.4f\ s\(\backslash\)n"{}},\ best\_compression\_time);}
\DoxyCodeLine{02359\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Coding\ rate:\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \%8.4f\ MT/s\(\backslash\)n"{}},\ compression\_rate);}
\DoxyCodeLine{02360\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02361\ }
\DoxyCodeLine{02362\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (operation\ \&\ \mbox{\hyperlink{astcenccli__toplevel_8cpp_a5d0adaabca9b56e5c6e0e89e309ad1bc}{ASTCENC\_STAGE\_DECOMPRESS}})}
\DoxyCodeLine{02363\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02364\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ decompression\_rate\ =\ image\_size\ /\ (best\_decompression\_time\ *\ 1000000.0);}
\DoxyCodeLine{02365\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Decoding\ time:\ \ \ \ \ \ \ \ \ \ \ \ \ \%8.4f\ s\(\backslash\)n"{}},\ best\_decompression\_time);}
\DoxyCodeLine{02366\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Decoding\ rate:\ \ \ \ \ \ \ \ \ \ \ \ \ \%8.4f\ MT/s\(\backslash\)n"{}},\ decompression\_rate);}
\DoxyCodeLine{02367\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02368\ \ \ \ \ \}}
\DoxyCodeLine{02369\ }
\DoxyCodeLine{02370\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02371\ \}}

\end{DoxyCode}
\Hypertarget{astcenccli__internal_8h_a3cf209b603114ef9a2c2c9e28697bbe7}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!astcenc\_print\_header@{astcenc\_print\_header}}
\index{astcenc\_print\_header@{astcenc\_print\_header}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{astcenc\_print\_header()}{astcenc\_print\_header()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a3cf209b603114ef9a2c2c9e28697bbe7} 
void astcenc\+\_\+print\+\_\+header (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Print the tool copyright and version header to stdout. 



\mbox{\hyperlink{astcenccli__toplevel__help_8cpp_source}{astcenccli\+\_\+toplevel\+\_\+help.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__toplevel__help_8cpp_source_l00555}{555}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00556\ \{}
\DoxyCodeLine{00557\ \textcolor{preprocessor}{\#if\ (ASTCENC\_AVX\ ==\ 2)}}
\DoxyCodeLine{00558\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ simdtype\ =\ \textcolor{stringliteral}{"{}avx2"{}};}
\DoxyCodeLine{00559\ \textcolor{preprocessor}{\#elif\ (ASTCENC\_SSE\ ==\ 41)}}
\DoxyCodeLine{00560\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ simdtype\ =\ \textcolor{stringliteral}{"{}sse4.1"{}};}
\DoxyCodeLine{00561\ \textcolor{preprocessor}{\#elif\ (ASTCENC\_SSE\ ==\ 20)}}
\DoxyCodeLine{00562\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ simdtype\ =\ \textcolor{stringliteral}{"{}sse2"{}};}
\DoxyCodeLine{00563\ \textcolor{preprocessor}{\#elif\ (ASTCENC\_NEON\ ==\ 1)}}
\DoxyCodeLine{00564\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ simdtype\ =\ \textcolor{stringliteral}{"{}neon"{}};}
\DoxyCodeLine{00565\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00566\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ simdtype\ =\ \textcolor{stringliteral}{"{}none"{}};}
\DoxyCodeLine{00567\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \textcolor{preprocessor}{\#if\ (ASTCENC\_POPCNT\ ==\ 1)}}
\DoxyCodeLine{00570\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pcnttype\ =\ \textcolor{stringliteral}{"{}+popcnt"{}};}
\DoxyCodeLine{00571\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00572\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pcnttype\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00573\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00575\ \textcolor{preprocessor}{\#if\ (ASTCENC\_F16C\ ==\ 1)}}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ f16ctype\ =\ \textcolor{stringliteral}{"{}+f16c"{}};}
\DoxyCodeLine{00577\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00578\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ f16ctype\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00579\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00580\ }
\DoxyCodeLine{00581\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bits\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\textcolor{keyword}{>}(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void}*)\ *\ 8);}
\DoxyCodeLine{00582\ \ \ \ \ printf(\mbox{\hyperlink{astcenccli__toplevel__help_8cpp_afb573e80aa8090f02b3424f167ff1ae1}{astcenc\_copyright\_string}},}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ VERSION\_STRING,\ bits,\ simdtype,\ pcnttype,\ f16ctype,\ YEAR\_STRING);}
\DoxyCodeLine{00584\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a3cf209b603114ef9a2c2c9e28697bbe7_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a7377ad0be8285dd96c932d2744fc4641}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!astcenc\_print\_longhelp@{astcenc\_print\_longhelp}}
\index{astcenc\_print\_longhelp@{astcenc\_print\_longhelp}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{astcenc\_print\_longhelp()}{astcenc\_print\_longhelp()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a7377ad0be8285dd96c932d2744fc4641} 
void astcenc\+\_\+print\+\_\+longhelp (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Print the tool copyright, version, and long-\/form help to stdout. 



\mbox{\hyperlink{astcenccli__toplevel__help_8cpp_source}{astcenccli\+\_\+toplevel\+\_\+help.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__toplevel__help_8cpp_source_l00594}{594}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00595\ \{}
\DoxyCodeLine{00596\ \ \ \ \ \mbox{\hyperlink{astcenccli__toplevel__help_8cpp_a3cf209b603114ef9a2c2c9e28697bbe7}{astcenc\_print\_header}}();}
\DoxyCodeLine{00597\ \ \ \ \ printf(\textcolor{stringliteral}{"{}\%s"{}},\ \mbox{\hyperlink{astcenccli__toplevel__help_8cpp_a8f1389189daa58ba75bc5fafa8742739}{astcenc\_long\_help}});}
\DoxyCodeLine{00598\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{astcenccli__internal_8h_a7377ad0be8285dd96c932d2744fc4641_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a7377ad0be8285dd96c932d2744fc4641_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_af5bf7c6ac05f0f401cfde7d73ed2b852}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!astcenc\_print\_shorthelp@{astcenc\_print\_shorthelp}}
\index{astcenc\_print\_shorthelp@{astcenc\_print\_shorthelp}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{astcenc\_print\_shorthelp()}{astcenc\_print\_shorthelp()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_af5bf7c6ac05f0f401cfde7d73ed2b852} 
void astcenc\+\_\+print\+\_\+shorthelp (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Print the tool copyright, version, and short-\/form help to stdout. 



\mbox{\hyperlink{astcenccli__toplevel__help_8cpp_source}{astcenccli\+\_\+toplevel\+\_\+help.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__toplevel__help_8cpp_source_l00587}{587}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00588\ \{}
\DoxyCodeLine{00589\ \ \ \ \ \mbox{\hyperlink{astcenccli__toplevel__help_8cpp_a3cf209b603114ef9a2c2c9e28697bbe7}{astcenc\_print\_header}}();}
\DoxyCodeLine{00590\ \ \ \ \ printf(\textcolor{stringliteral}{"{}\%s"{}},\ \mbox{\hyperlink{astcenccli__toplevel__help_8cpp_a1143e88ff4e7fd8c7b364556dd4a64f4}{astcenc\_short\_help}});}
\DoxyCodeLine{00591\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{astcenccli__internal_8h_af5bf7c6ac05f0f401cfde7d73ed2b852_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_af5bf7c6ac05f0f401cfde7d73ed2b852_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a478be461420681d7c83aa89569ea92c4}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!compute\_error\_metrics@{compute\_error\_metrics}}
\index{compute\_error\_metrics@{compute\_error\_metrics}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{compute\_error\_metrics()}{compute\_error\_metrics()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a478be461420681d7c83aa89569ea92c4} 
void compute\+\_\+error\+\_\+metrics (\begin{DoxyParamCaption}\item[{bool}]{compute\+\_\+hdr\+\_\+metrics}{, }\item[{bool}]{compute\+\_\+normal\+\_\+metrics}{, }\item[{int}]{input\+\_\+components}{, }\item[{const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}}]{img1}{, }\item[{const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}}]{img2}{, }\item[{int}]{fstop\+\_\+lo}{, }\item[{int}]{fstop\+\_\+hi}{}\end{DoxyParamCaption})}



Compute error metrics comparing two images. 


\begin{DoxyParams}{매개변수}
{\em compute\+\_\+hdr\+\_\+metrics} & True if HDR metrics should be computed. \\
\hline
{\em compute\+\_\+normal\+\_\+metrics} & True if normal map metrics should be computed. \\
\hline
{\em input\+\_\+components} & The number of input color components. \\
\hline
{\em img1} & The original image. \\
\hline
{\em img2} & The compressed image. \\
\hline
{\em fstop\+\_\+lo} & The low exposure fstop (HDR only). \\
\hline
{\em fstop\+\_\+hi} & The high exposure fstop (HDR only). \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenccli__error__metrics_8cpp_source}{astcenccli\+\_\+error\+\_\+metrics.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__error__metrics_8cpp_source_l00110}{110}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00118\ \ \ \{}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ componentmasks[5]\ \{\ 0x00,\ 0x07,\ 0x0C,\ 0x07,\ 0x0F\ \};}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordtype}{int}\ componentmask\ =\ componentmasks[input\_components];}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \mbox{\hyperlink{classerror__accum4}{error\_accum4}}\ errorsum;}
\DoxyCodeLine{00123\ \ \ \ \ \mbox{\hyperlink{classerror__accum4}{error\_accum4}}\ alpha\_scaled\_errorsum;}
\DoxyCodeLine{00124\ \ \ \ \ \mbox{\hyperlink{classerror__accum4}{error\_accum4}}\ log\_errorsum;}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{classerror__accum4}{error\_accum4}}\ mpsnr\_errorsum;}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordtype}{double}\ mean\_angular\_errorsum\ =\ 0.0;}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordtype}{double}\ worst\_angular\_errorsum\ =\ 0.0;}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_x\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(img1-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}},\ img2-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}});}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_y\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(img1-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}},\ img2-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}});}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_z\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(img1-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}},\ img2-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}});}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordflow}{if}\ (img1-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}}\ !=\ img2-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}}\ ||}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ img1-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}}\ !=\ img2-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}}\ ||}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ img1-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}}\ !=\ img2-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}})}
\DoxyCodeLine{00136\ \ \ \ \ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}WARNING:\ Only\ intersection\ of\ images\ will\ be\ compared:\(\backslash\)n"{}}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ Image\ 1:\ \%dx\%dx\%d\(\backslash\)n"{}}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ Image\ 2:\ \%dx\%dx\%d\(\backslash\)n"{}},}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ img1-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}},\ img1-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}},\ img1-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}},}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ img2-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}},\ img2-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}},\ img2-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}});}
\DoxyCodeLine{00142\ \ \ \ \ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordtype}{double}\ rgb\_peak\ =\ 0.0;}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ xsize1\ =\ img1-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}};}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ xsize2\ =\ img2-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}};}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ z\ =\ 0;\ z\ <\ dim\_z;\ z++)}
\DoxyCodeLine{00149\ \ \ \ \ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color1;}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color2;}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (img1-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aa91ac7b6329d0a39c879dff7a1bcdf759}{ASTCENC\_TYPE\_U8}})}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t*\ data8\ =\ \textcolor{keyword}{static\_cast<}uint8\_t*\textcolor{keyword}{>}(img1-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z]);}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\ =\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ \ \ \ )],}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ +\ 1)],}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ +\ 2)],}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ +\ 3)]);}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\ =\ color1\ /\ 255.0f;}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (img1-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aad39e16b7f2e55ed676ce400619f0759d}{ASTCENC\_TYPE\_F16}})}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t*\ data16\ =\ \textcolor{keyword}{static\_cast<}uint16\_t*\textcolor{keyword}{>}(img1-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z]);}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color1i\ =\ \mbox{\hyperlink{structvint4}{vint4}}(}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ \ \ \ )],}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ +\ 1)],}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ +\ 2)],}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ +\ 3)]);}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__neon__4_8h_afd7aa2069bdf377067c3abaca1256432}{float16\_to\_float}}(color1i);}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(0,\ 65504.0f,\ color1);}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{comment}{//\ if\ (img1-\/>data\_type\ ==\ ASTCENC\_TYPE\_F32)}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(img1-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aaf996e38de0e0ac57175c09da275c6062}{ASTCENC\_TYPE\_F32}});}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ data32\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(img1-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z]);}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\ =\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data32[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ \ \ \ )],}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data32[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ +\ 1)],}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data32[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ +\ 2)],}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data32[(4\ *\ xsize1\ *\ y)\ +\ (4\ *\ x\ +\ 3)]);}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color1\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(0,\ 65504.0f,\ color1);}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (img2-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aa91ac7b6329d0a39c879dff7a1bcdf759}{ASTCENC\_TYPE\_U8}})}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t*\ data8\ =\ \textcolor{keyword}{static\_cast<}uint8\_t*\textcolor{keyword}{>}(img2-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z]);}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color2\ =\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ \ \ \ )],}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ +\ 1)],}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ +\ 2)],}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data8[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ +\ 3)]);}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color2\ =\ color2\ /\ 255.0f;}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (img2-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aad39e16b7f2e55ed676ce400619f0759d}{ASTCENC\_TYPE\_F16}})}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t*\ data16\ =\ \textcolor{keyword}{static\_cast<}uint16\_t*\textcolor{keyword}{>}(img2-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z]);}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ color2i\ =\ \mbox{\hyperlink{structvint4}{vint4}}(}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ \ \ \ )],}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ +\ 1)],}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ +\ 2)],}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ +\ 3)]);}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color2\ =\ \mbox{\hyperlink{astcenc__vecmathlib__neon__4_8h_afd7aa2069bdf377067c3abaca1256432}{float16\_to\_float}}(color2i);}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color2\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(0,\ 65504.0f,\ color2);}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{comment}{//\ if\ (img2-\/>data\_type\ ==\ ASTCENC\_TYPE\_F32)}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(img2-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aaf996e38de0e0ac57175c09da275c6062}{ASTCENC\_TYPE\_F32}});}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ data32\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(img2-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z]);}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color2\ =\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data32[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ \ \ \ )],}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data32[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ +\ 1)],}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data32[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ +\ 2)],}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data32[(4\ *\ xsize2\ *\ y)\ +\ (4\ *\ x\ +\ 3)]);}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color2\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(0,\ 65504.0f,\ color2);}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rgb\_peak\ =\ \mbox{\hyperlink{namespaceastc_a83a55552d03399cdff6cf2fed8312c9f}{astc::max}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()),}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()),}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>()),}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rgb\_peak);}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ diffcolor\ =\ color1\ -\/\ color2;}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ diffcolor\_sq\ =\ diffcolor\ *\ diffcolor;}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ errorsum\ +=\ diffcolor\_sq;}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ alpha\_scaled\_diffcolor\ =\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ diffcolor.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>()\ *\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>(),}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ diffcolor.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>()\ *\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>(),}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ diffcolor.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>()\ *\ color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>(),}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ diffcolor.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>());}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ alpha\_scaled\_diffcolor\_sq\ =\ alpha\_scaled\_diffcolor\ *\ alpha\_scaled\_diffcolor;}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ alpha\_scaled\_errorsum\ +=\ alpha\_scaled\_diffcolor\_sq;}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (compute\_hdr\_metrics)}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ log\_input\_color1\ =\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a77245e9181fb31efa0a97cfbf4084e5e}{log2}}(color1);}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ log\_input\_color2\ =\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a77245e9181fb31efa0a97cfbf4084e5e}{log2}}(color2);}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ log\_diffcolor\ =\ log\_input\_color1\ -\/\ log\_input\_color2;}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ log\_errorsum\ +=\ log\_diffcolor\ *\ log\_diffcolor;}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ mpsnr\_error\ =\ \mbox{\hyperlink{structvfloat4}{vfloat4}}(}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__error__metrics_8cpp_a9e0a98a390f6b1399d67fe4005866da8}{mpsnr\_sumdiff}}(color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<0>(),\ color2.lane<0>(),\ fstop\_lo,\ fstop\_hi),}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__error__metrics_8cpp_a9e0a98a390f6b1399d67fe4005866da8}{mpsnr\_sumdiff}}(color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<1>(),\ color2.lane<1>(),\ fstop\_lo,\ fstop\_hi),}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__error__metrics_8cpp_a9e0a98a390f6b1399d67fe4005866da8}{mpsnr\_sumdiff}}(color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<2>(),\ color2.lane<2>(),\ fstop\_lo,\ fstop\_hi),}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__error__metrics_8cpp_a9e0a98a390f6b1399d67fe4005866da8}{mpsnr\_sumdiff}}(color1.\mbox{\hyperlink{structvfloat4_a04462a7815432c6bc3ce1b5e5d11e4fc}{lane}}<3>(),\ color2.lane<3>(),\ fstop\_lo,\ fstop\_hi));}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mpsnr\_errorsum\ +=\ mpsnr\_error;}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (compute\_normal\_metrics)}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Decode\ the\ normal\ vector}}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ normal1\ =\ (color1\ -\/\ 0.5f)\ *\ 2.0f;}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ normal1\ =\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a3b0e8ae23a514219217b72164a7909a4}{normalize\_safe}}(normal1.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<0,\ 1,\ 2>(),\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a3cf3e0218d808e69f31668dbc458dc08}{unit3}}());}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ normal2\ =\ (color2\ -\/\ 0.5f)\ *\ 2.0f;}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ normal2\ =\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a3b0e8ae23a514219217b72164a7909a4}{normalize\_safe}}(normal2.\mbox{\hyperlink{structvfloat4_a0a3e390831722cc8e54f29155699f3a5}{swz}}<0,\ 1,\ 2>(),\ \mbox{\hyperlink{astcenc__vecmathlib_8h_a3cf3e0218d808e69f31668dbc458dc08}{unit3}}());}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Float\ error\ can\ push\ this\ outside\ of\ valid\ range\ for\ acos,\ so\ clamp\ to\ avoid\ NaN\ issues}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ normal\_cos\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(-\/1.0f,\ 1.0f,\ \mbox{\hyperlink{astcenc__vecmathlib__common__4_8h_ae36c7167bc89ff2bf984c1a912526dcb}{dot3}}(normal1,\ normal2)).\mbox{\hyperlink{structvfloat8_a550f9d3958113f0ec64c7e52c422132d}{lane}}<0>();}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ rad\_to\_degrees\ =\ 180.0f\ /\ \mbox{\hyperlink{namespaceastc_a7b7581e8dda9382d1d6effd9c4925065}{astc::PI}};}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ error\_degrees\ =\ std::acos(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(normal\_cos))\ *\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(rad\_to\_degrees);}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mean\_angular\_errorsum\ +=\ error\_degrees\ /\ (dim\_x\ *\ dim\_y\ *\ dim\_z);}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ worst\_angular\_errorsum\ =\ \mbox{\hyperlink{namespaceastc_a83a55552d03399cdff6cf2fed8312c9f}{astc::max}}(worst\_angular\_errorsum,\ error\_degrees);}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00290\ \ \ \ \ \}}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordtype}{double}\ pixels\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(dim\_x\ *\ dim\_y\ *\ dim\_z);}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keywordtype}{double}\ samples\ =\ 0.0;}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keywordtype}{double}\ num\ =\ 0.0;}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordtype}{double}\ alpha\_num\ =\ 0.0;}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordtype}{double}\ log\_num\ =\ 0.0;}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordtype}{double}\ mpsnr\_num\ =\ 0.0;}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordflow}{if}\ (componentmask\ \&\ 1)}
\DoxyCodeLine{00301\ \ \ \ \ \{}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ num\ +=\ errorsum.\mbox{\hyperlink{classerror__accum4_adda196a39fba65e9cc8287b4d6f7756a}{sum\_r}};}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ alpha\_num\ +=\ alpha\_scaled\_errorsum.\mbox{\hyperlink{classerror__accum4_adda196a39fba65e9cc8287b4d6f7756a}{sum\_r}};}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ log\_num\ +=\ log\_errorsum.\mbox{\hyperlink{classerror__accum4_adda196a39fba65e9cc8287b4d6f7756a}{sum\_r}};}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ mpsnr\_num\ +=\ mpsnr\_errorsum.\mbox{\hyperlink{classerror__accum4_adda196a39fba65e9cc8287b4d6f7756a}{sum\_r}};}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ samples\ +=\ pixels;}
\DoxyCodeLine{00307\ \ \ \ \ \}}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{keywordflow}{if}\ (componentmask\ \&\ 2)}
\DoxyCodeLine{00310\ \ \ \ \ \{}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ num\ +=\ errorsum.\mbox{\hyperlink{classerror__accum4_a84566c5eb0b66dc66f5d4ca064de137f}{sum\_g}};}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ alpha\_num\ +=\ alpha\_scaled\_errorsum.\mbox{\hyperlink{classerror__accum4_a84566c5eb0b66dc66f5d4ca064de137f}{sum\_g}};}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ log\_num\ +=\ log\_errorsum.\mbox{\hyperlink{classerror__accum4_a84566c5eb0b66dc66f5d4ca064de137f}{sum\_g}};}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ mpsnr\_num\ +=\ mpsnr\_errorsum.\mbox{\hyperlink{classerror__accum4_a84566c5eb0b66dc66f5d4ca064de137f}{sum\_g}};}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ samples\ +=\ pixels;}
\DoxyCodeLine{00316\ \ \ \ \ \}}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keywordflow}{if}\ (componentmask\ \&\ 4)}
\DoxyCodeLine{00319\ \ \ \ \ \{}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ num\ +=\ errorsum.\mbox{\hyperlink{classerror__accum4_a74442d4adfe6a20ba9713d4d9ba81e74}{sum\_b}};}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ alpha\_num\ +=\ alpha\_scaled\_errorsum.\mbox{\hyperlink{classerror__accum4_a74442d4adfe6a20ba9713d4d9ba81e74}{sum\_b}};}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ log\_num\ +=\ log\_errorsum.\mbox{\hyperlink{classerror__accum4_a74442d4adfe6a20ba9713d4d9ba81e74}{sum\_b}};}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ mpsnr\_num\ +=\ mpsnr\_errorsum.\mbox{\hyperlink{classerror__accum4_a74442d4adfe6a20ba9713d4d9ba81e74}{sum\_b}};}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ samples\ +=\ pixels;}
\DoxyCodeLine{00325\ \ \ \ \ \}}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keywordflow}{if}\ (componentmask\ \&\ 8)}
\DoxyCodeLine{00328\ \ \ \ \ \{}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ num\ +=\ errorsum.\mbox{\hyperlink{classerror__accum4_aa8e1133f0001609343aa7a5ce3a60d61}{sum\_a}};}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ alpha\_num\ +=\ alpha\_scaled\_errorsum.\mbox{\hyperlink{classerror__accum4_aa8e1133f0001609343aa7a5ce3a60d61}{sum\_a}};}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ samples\ +=\ pixels;}
\DoxyCodeLine{00332\ \ \ \ \ \}}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordtype}{double}\ denom\ =\ samples;}
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keywordtype}{double}\ stopcount\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(fstop\_hi\ -\/\ fstop\_lo\ +\ 1);}
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordtype}{double}\ mpsnr\_denom\ =\ pixels\ *\ 3.0\ *\ stopcount\ *\ 255.0\ *\ 255.0;}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{keywordtype}{double}\ psnr;}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{keywordflow}{if}\ (num\ ==\ 0.0)}
\DoxyCodeLine{00340\ \ \ \ \ \{}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ psnr\ =\ 999.0;}
\DoxyCodeLine{00342\ \ \ \ \ \}}
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00344\ \ \ \ \ \{}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ psnr\ =\ 10.0\ *\ log10(denom\ /\ num);}
\DoxyCodeLine{00346\ \ \ \ \ \}}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keywordtype}{double}\ rgb\_psnr\ =\ psnr;}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Quality\ metrics\(\backslash\)n"{}});}
\DoxyCodeLine{00351\ \ \ \ \ printf(\textcolor{stringliteral}{"{}===============\(\backslash\)n\(\backslash\)n"{}});}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \ \ \ \ \textcolor{keywordflow}{if}\ (componentmask\ \&\ 8)}
\DoxyCodeLine{00354\ \ \ \ \ \{}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ PSNR\ (LDR-\/RGBA):\ \ \ \ \ \ \ \ \ \ \%9.4f\ dB\(\backslash\)n"{}},\ psnr);}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ alpha\_psnr;}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (alpha\_num\ ==\ 0.0)}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ alpha\_psnr\ =\ 999.0;}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ alpha\_psnr\ =\ 10.0\ *\ log10(denom\ /\ alpha\_num);}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Alpha-\/weighted\ PSNR:\ \ \ \ \ \ \%9.4f\ dB\(\backslash\)n"{}},\ alpha\_psnr);}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ rgb\_num\ =\ errorsum.\mbox{\hyperlink{classerror__accum4_adda196a39fba65e9cc8287b4d6f7756a}{sum\_r}}\ +\ errorsum.\mbox{\hyperlink{classerror__accum4_a84566c5eb0b66dc66f5d4ca064de137f}{sum\_g}}\ +\ errorsum.\mbox{\hyperlink{classerror__accum4_a74442d4adfe6a20ba9713d4d9ba81e74}{sum\_b}};}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (rgb\_num\ ==\ 0.0)}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ rgb\_psnr\ =\ 999.0;}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ rgb\_psnr\ =\ 10.0\ *\ log10(pixels\ *\ 3.0\ /\ rgb\_num);}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ PSNR\ (LDR-\/RGB):\ \ \ \ \ \ \ \ \ \ \ \%9.4f\ dB\(\backslash\)n"{}},\ rgb\_psnr);}
\DoxyCodeLine{00378\ \ \ \ \ \}}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00380\ \ \ \ \ \{}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ PSNR\ (LDR-\/RGB):\ \ \ \ \ \ \ \ \ \ \ \%9.4f\ dB\(\backslash\)n"{}},\ psnr);}
\DoxyCodeLine{00382\ \ \ \ \ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{keywordflow}{if}\ (compute\_hdr\_metrics)}
\DoxyCodeLine{00385\ \ \ \ \ \{}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ PSNR\ (RGB\ norm\ to\ peak):\ \ \%9.4f\ dB\ (peak\ \%f)\(\backslash\)n"{}},}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rgb\_psnr\ +\ 20.0\ *\ log10(rgb\_peak),\ rgb\_peak);}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ mpsnr;}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (mpsnr\_num\ ==\ 0.0)}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ mpsnr\ =\ 999.0;}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ mpsnr\ =\ 10.0\ *\ log10(mpsnr\_denom\ /\ mpsnr\_num);}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ mPSNR\ (RGB):\ \ \ \ \ \ \ \ \ \ \ \ \ \ \%9.4f\ dB\ (fstops\ \%+d\ to\ \%+d)\(\backslash\)n"{}},}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mpsnr,\ fstop\_lo,\ fstop\_hi);}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ logrmse\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a46b31b19ff13c14adb023db4b5df8e52}{sqrt}}(log\_num\ /\ pixels);}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ LogRMSE\ (RGB):\ \ \ \ \ \ \ \ \ \ \ \ \%9.4f\(\backslash\)n"{}},\ logrmse);}
\DoxyCodeLine{00404\ \ \ \ \ \}}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \ \ \ \ \textcolor{keywordflow}{if}\ (compute\_normal\_metrics)}
\DoxyCodeLine{00407\ \ \ \ \ \{}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Mean\ Angular\ Error:\ \ \ \ \ \ \ \%9.4f\ degrees\(\backslash\)n"{}},\ mean\_angular\_errorsum);}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\ \ \ \ Worst\ Angular\ Error:\ \ \ \ \ \ \%9.4f\ degrees\(\backslash\)n"{}},\ worst\_angular\_errorsum);}
\DoxyCodeLine{00410\ \ \ \ \ \}}
\DoxyCodeLine{00411\ }
\DoxyCodeLine{00412\ \ \ \ \ printf(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{00413\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a478be461420681d7c83aa89569ea92c4_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a478be461420681d7c83aa89569ea92c4_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_add1dea8ff2bad1b823a131776f37ee83}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!determine\_image\_components@{determine\_image\_components}}
\index{determine\_image\_components@{determine\_image\_components}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{determine\_image\_components()}{determine\_image\_components()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_add1dea8ff2bad1b823a131776f37ee83} 
int determine\+\_\+image\+\_\+components (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}}]{img}{}\end{DoxyParamCaption})}



Determine the number of active components in an image. 


\begin{DoxyParams}{매개변수}
{\em img} & The image to analyze.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The number of active components in the image. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image_8cpp_source}{astcenccli\+\_\+image.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image_8cpp_source_l00089}{89}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00090\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_x\ =\ img-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}};}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_y\ =\ img-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}};}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_z\ =\ img-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}};}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{comment}{//\ Scan\ through\ the\ image\ data\ to\ determine\ how\ many\ color\ components\ the\ image\ has}}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_luma\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordtype}{bool}\ has\_alpha\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{if}\ (img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aa91ac7b6329d0a39c879dff7a1bcdf759}{ASTCENC\_TYPE\_U8}})}
\DoxyCodeLine{00100\ \ \ \ \ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ z\ =\ 0;\ z\ <\ dim\_z;\ z++)}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t*\ data8\ =\ \textcolor{keyword}{static\_cast<}uint8\_t*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z]);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ r\ =\ data8[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ \ \ \ )];}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ g\ =\ data8[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 1)];}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ b\ =\ data8[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 2)];}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ a\ =\ data8[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 3)];}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ is\_luma\ =\ is\_luma\ \&\&\ (r\ ==\ g)\ \&\&\ (r\ ==\ b);}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_alpha\ =\ has\_alpha\ ||\ (a\ !=\ 0xFF);}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00119\ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aad39e16b7f2e55ed676ce400619f0759d}{ASTCENC\_TYPE\_F16}})}
\DoxyCodeLine{00121\ \ \ \ \ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ z\ =\ 0;\ z\ <\ dim\_z;\ z++)}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t*\ data16\ =\ \textcolor{keyword}{static\_cast<}uint16\_t*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z]);}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ r\ =\ data16[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ \ \ \ )];}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ g\ =\ data16[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 1)];}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ b\ =\ data16[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 2)];}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ a\ =\ data16[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 3)];}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ is\_luma\ =\ is\_luma\ \&\&\ (r\ ==\ g)\ \&\&\ (r\ ==\ b);}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_alpha\ =\ has\_alpha\ ||\ ((a\ \string^\ 0xC3FF)\ !=\ 0xFFFF);}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\ \string^\ 0xC3FF\ returns\ FFFF\ if\ and\ only\ if\ the\ input\ is\ 1.0}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00141\ \ \ \ \ \}}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{comment}{//\ if\ (img-\/>data\_type\ ==\ ASTCENC\_TYPE\_F32)}}
\DoxyCodeLine{00143\ \ \ \ \ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ assert(img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aaf996e38de0e0ac57175c09da275c6062}{ASTCENC\_TYPE\_F32}});}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ z\ =\ 0;\ z\ <\ dim\_z;\ z++)}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ data32\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z]);}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ r\ =\ data32[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ \ \ \ )];}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ g\ =\ data32[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 1)];}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ b\ =\ data32[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 2)];}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ a\ =\ data32[(4\ *\ dim\_x\ *\ y)\ +\ (4\ *\ x\ +\ 3)];}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ is\_luma\ =\ is\_luma\ \&\&\ (r\ ==\ g)\ \&\&\ (r\ ==\ b);}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_alpha\ =\ has\_alpha\ ||\ (a\ !=\ 1.0f);}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00164\ \ \ \ \ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keywordtype}{int}\ image\_components\ =\ 1\ +\ (is\_luma\ ==\ 0\ ?\ 2\ :\ 0)\ +\ (has\_alpha\ ?\ 1\ :\ 0);}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordflow}{return}\ image\_components;}
\DoxyCodeLine{00168\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_add1dea8ff2bad1b823a131776f37ee83_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_ad7c980fed3ad50dec28ebfa941f4a7b7}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!floatx4\_array\_from\_astc\_img@{floatx4\_array\_from\_astc\_img}}
\index{floatx4\_array\_from\_astc\_img@{floatx4\_array\_from\_astc\_img}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{floatx4\_array\_from\_astc\_img()}{floatx4\_array\_from\_astc\_img()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_ad7c980fed3ad50dec28ebfa941f4a7b7} 
float \texorpdfstring{$\ast$}{*} floatx4\+\_\+array\+\_\+from\+\_\+astc\+\_\+img (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}}]{img}{, }\item[{bool}]{y\+\_\+flip}{, }\item[{unsigned int}]{z\+\_\+index}{}\end{DoxyParamCaption})}



Create a flattened RGBA FLOAT32 data array for a single slice from an image structure. 

The returned data array is allocated with {\ttfamily new}\mbox{[}\mbox{]} and must be freed with a {\ttfamily delete}\mbox{[}\mbox{]} call.


\begin{DoxyParams}{매개변수}
{\em img} & The input image. \\
\hline
{\em y\+\_\+flip} & Should the data in the array be Y flipped? \\
\hline
{\em z\+\_\+index} & The slice index to convert.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The data array. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image_8cpp_source}{astcenccli\+\_\+image.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image_8cpp_source_l00234}{234}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00238\ \ \ \{}
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_x\ =\ img-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}};}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_y\ =\ img-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}};}
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordtype}{float}\ *buf\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{float}[4\ *\ dim\_x\ *\ dim\_y];}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ \ \ assert(z\_index\ <\ img-\/>dim\_z);}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordflow}{if}\ (img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aa91ac7b6329d0a39c879dff7a1bcdf759}{ASTCENC\_TYPE\_U8}})}
\DoxyCodeLine{00246\ \ \ \ \ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ uint8\_t*\ data8\ =\ \textcolor{keyword}{static\_cast<}uint8\_t*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z\_index]);}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ ymod\ =\ y\_flip\ ?\ dim\_y\ -\/\ y\ -\/\ 1\ :\ y;}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ dst\ =\ buf\ +\ y\ *\ dim\_x\ *\ 4;}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ \ \ \ ]\ =\ data8[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ \ \ \ )]\ *\ (1.0f\ /\ 255.0f);}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 1]\ =\ data8[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 1)]\ *\ (1.0f\ /\ 255.0f);}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 2]\ =\ data8[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 2)]\ *\ (1.0f\ /\ 255.0f);}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 3]\ =\ data8[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 3)]\ *\ (1.0f\ /\ 255.0f);}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00261\ \ \ \ \ \}}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aad39e16b7f2e55ed676ce400619f0759d}{ASTCENC\_TYPE\_F16}})}
\DoxyCodeLine{00263\ \ \ \ \ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ uint16\_t*\ data16\ =\ \textcolor{keyword}{static\_cast<}uint16\_t*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z\_index]);}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ ymod\ =\ y\_flip\ ?\ dim\_y\ -\/\ y\ -\/\ 1\ :\ y;}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *dst\ =\ buf\ +\ y\ *\ dim\_x\ *\ 4;}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ colori(}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ \ \ \ )],}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 1)],}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 2)],}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 3)]}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color\ =\ \mbox{\hyperlink{astcenc__vecmathlib__neon__4_8h_afd7aa2069bdf377067c3abaca1256432}{float16\_to\_float}}(colori);}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a61add2970baac5cf6b04177472ae1ed1}{store}}(color,\ dst\ +\ 4\ *\ x);}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00283\ \ \ \ \ \}}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{comment}{//\ if\ (img-\/>data\_type\ ==\ ASTCENC\_TYPE\_F32)}}
\DoxyCodeLine{00285\ \ \ \ \ \{}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ assert(img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aaf996e38de0e0ac57175c09da275c6062}{ASTCENC\_TYPE\_F32}});}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ data32\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z\_index]);}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ ymod\ =\ y\_flip\ ?\ dim\_y\ -\/\ y\ -\/\ 1\ :\ y;}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *dst\ =\ buf\ +\ y\ *\ dim\_x\ *\ 4;}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ \ \ \ ]\ =\ data32[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ \ \ \ )];}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 1]\ =\ data32[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 1)];}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 2]\ =\ data32[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 2)];}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 3]\ =\ data32[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 3)];}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00301\ \ \ \ \ \}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keywordflow}{return}\ buf;}
\DoxyCodeLine{00304\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=294pt]{astcenccli__internal_8h_ad7c980fed3ad50dec28ebfa941f4a7b7_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{astcenccli__internal_8h_ad7c980fed3ad50dec28ebfa941f4a7b7_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_aeb0cd9b24656f2c4dac144e89217057c}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!free\_image@{free\_image}}
\index{free\_image@{free\_image}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{free\_image()}{free\_image()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_aeb0cd9b24656f2c4dac144e89217057c} 
void free\+\_\+image (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}}]{img}{}\end{DoxyParamCaption})}



Free an image. 


\begin{DoxyParams}{매개변수}
{\em img} & The image to free. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenccli__image_8cpp_source}{astcenccli\+\_\+image.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image_8cpp_source_l00072}{72}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00073\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{if}\ (img\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00075\ \ \ \ \ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00077\ \ \ \ \ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ z\ =\ 0;\ z\ <\ img-\/>\mbox{\hyperlink{structastcenc__image_a9c71edbb23f1cca0de775c508b6219ee}{dim\_z}};\ z++)}
\DoxyCodeLine{00080\ \ \ \ \ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[z]);}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keyword}{delete}[]\ img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}};}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keyword}{delete}\ img;}
\DoxyCodeLine{00086\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_aeb0cd9b24656f2c4dac144e89217057c_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a17e6f066d58e29a143787fe2f78d19d6}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!get\_cpu\_count@{get\_cpu\_count}}
\index{get\_cpu\_count@{get\_cpu\_count}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{get\_cpu\_count()}{get\_cpu\_count()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a17e6f066d58e29a143787fe2f78d19d6} 
int get\+\_\+cpu\+\_\+count (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Get the number of CPU cores. 

\begin{DoxyReturn}{반환값}
The number of online or onlineable CPU cores in the system.
\end{DoxyReturn}
Get the number of CPU cores.

This module contains functions with strongly OS-\/dependent implementations\+:


\begin{DoxyItemize}
\item CPU count queries
\item Threading
\item Time
\end{DoxyItemize}

In addition to the basic thread abstraction (which is native pthreads on all platforms, except Windows where it is an emulation of pthreads), a utility function to create N threads and wait for them to complete a batch task has also been provided. 

\mbox{\hyperlink{astcenccli__platform__dependents_8cpp_source}{astcenccli\+\_\+platform\+\_\+dependents.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__platform__dependents_8cpp_source_l00155}{155}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00156\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(sysconf(\_SC\_NPROCESSORS\_ONLN));}
\DoxyCodeLine{00158\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a17e6f066d58e29a143787fe2f78d19d6_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a36fb7c666f502f49e4d18cf130a7958d}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!get\_output\_filename\_enforced\_bitness@{get\_output\_filename\_enforced\_bitness}}
\index{get\_output\_filename\_enforced\_bitness@{get\_output\_filename\_enforced\_bitness}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{get\_output\_filename\_enforced\_bitness()}{get\_output\_filename\_enforced\_bitness()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a36fb7c666f502f49e4d18cf130a7958d} 
int get\+\_\+output\+\_\+filename\+\_\+enforced\+\_\+bitness (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{filename}{}\end{DoxyParamCaption})}



Check if the output file type requires a specific bitness. 


\begin{DoxyParams}{매개변수}
{\em filename} & The file name, containing hte extension to check.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Valid values are\+:
\begin{DoxyItemize}
\item -\/1 -\/ error -\/ unknown file type.
\item 0 -\/ no enforced bitness.
\item 8 -\/ enforced 8-\/bit UNORM.
\item 16 -\/ enforced 16-\/bit FP16. 
\end{DoxyItemize}
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image__load__store_8cpp_source}{astcenccli\+\_\+image\+\_\+load\+\_\+store.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image__load__store_8cpp_source_l02354}{2354}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{02356\ \ \ \{}
\DoxyCodeLine{02357\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *eptr\ =\ strrchr(filename,\ \textcolor{charliteral}{'.'});}
\DoxyCodeLine{02358\ \ \ \ \ \textcolor{keywordflow}{if}\ (!eptr)}
\DoxyCodeLine{02359\ \ \ \ \ \{}
\DoxyCodeLine{02360\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02361\ \ \ \ \ \}}
\DoxyCodeLine{02362\ }
\DoxyCodeLine{02363\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a8923fb63f80b47dc81fc5c2d11ae1248}{storer\_descr\_count}};\ i++)}
\DoxyCodeLine{02364\ \ \ \ \ \{}
\DoxyCodeLine{02365\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (strcmp(eptr,\ storer\_descs[i].\mbox{\hyperlink{astcenccli__image__load__store_8cpp_aeb6dc6b73a14c055f8f9e8542959d57d}{ending1}})\ ==\ 0}
\DoxyCodeLine{02366\ \ \ \ \ \ \ \ \ \ ||\ strcmp(eptr,\ storer\_descs[i].\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a2cfda059378558e8eaf1877eb042c7c1}{ending2}})\ ==\ 0)}
\DoxyCodeLine{02367\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02368\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ storer\_descs[i].enforced\_bitness;}
\DoxyCodeLine{02369\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02370\ \ \ \ \ \}}
\DoxyCodeLine{02371\ }
\DoxyCodeLine{02372\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{02373\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a36fb7c666f502f49e4d18cf130a7958d_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!get\_time@{get\_time}}
\index{get\_time@{get\_time}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{get\_time()}{get\_time()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52} 
double get\+\_\+time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Get the current time. 

\begin{DoxyReturn}{반환값}
The current time in seconds since arbitrary epoch. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__platform__dependents_8cpp_source}{astcenccli\+\_\+platform\+\_\+dependents.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__platform__dependents_8cpp_source_l00161}{161}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00162\ \{}
\DoxyCodeLine{00163\ \ \ \ \ timeval\ tv;}
\DoxyCodeLine{00164\ \ \ \ \ gettimeofday(\&tv,\ 0);}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(tv.tv\_sec)\ +\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(tv.tv\_usec)\ *\ 1.0e-\/6;}
\DoxyCodeLine{00166\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=321pt]{astcenccli__internal_8h_af7ab092ab10d65db3b9051a12420fa52_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_aaa9dcd56cd7089c481e7ef8355ae5c2f}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!launch\_threads@{launch\_threads}}
\index{launch\_threads@{launch\_threads}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{launch\_threads()}{launch\_threads()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_aaa9dcd56cd7089c481e7ef8355ae5c2f} 
void launch\+\_\+threads (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{operation}{, }\item[{int}]{thread\+\_\+count}{, }\item[{void(\texorpdfstring{$\ast$}{*}}]{func~}{)(int, int, void \texorpdfstring{$\ast$}{*}), }\item[{void \texorpdfstring{$\ast$}{*}}]{payload}{}\end{DoxyParamCaption})}



Launch N worker threads and wait for them to complete. 

All threads run the same thread function, and have the same thread payload, but are given a unique thread ID (0 .. N-\/1) as a parameter to the run function to allow thread-\/specific behavior.


\begin{DoxyParams}{매개변수}
{\em operation} & The name of the operation for this async task. \\
\hline
{\em thread\+\_\+count} & The number of threads to spawn. \\
\hline
{\em func} & The function to execute. Must have the signature\+: void (int thread\+\_\+count, int thread\+\_\+id, void\texorpdfstring{$\ast$}{*} payload) \\
\hline
{\em payload} & Pointer to an opaque thread payload object. \\
\hline
\end{DoxyParams}


\mbox{\hyperlink{astcenccli__platform__dependents_8cpp_source}{astcenccli\+\_\+platform\+\_\+dependents.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__platform__dependents_8cpp_source_l00204}{204}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00209\ \ \ \{}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{comment}{//\ Directly\ execute\ single\ threaded\ workloads\ on\ this\ thread}}
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordflow}{if}\ (thread\_count\ <=\ 1)}
\DoxyCodeLine{00212\ \ \ \ \ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ func(1,\ 0,\ payload);}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00215\ \ \ \ \ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{comment}{//\ Otherwise\ spawn\ worker\ threads}}
\DoxyCodeLine{00218\ \ \ \ \ \mbox{\hyperlink{structlaunch__desc}{launch\_desc}}\ *thread\_descs\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{structlaunch__desc}{launch\_desc}}[thread\_count];\ \ \ \ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keywordtype}{int}\ actual\_thread\_count\ \{\ 0\ \};}
\DoxyCodeLine{00220\ \ \ \ \ }
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ thread\_count;\ i++)}
\DoxyCodeLine{00222\ \ \ \ \ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ thread\_descs[actual\_thread\_count].\mbox{\hyperlink{structlaunch__desc_ae5fb121d0d0e69a2d001d44e2afffec1}{thread\_count}}\ =\ thread\_count;}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ thread\_descs[actual\_thread\_count].\mbox{\hyperlink{structlaunch__desc_a18fa1b8ed8d5761f64f2a5cd13ebcf97}{thread\_id}}\ =\ actual\_thread\_count;}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ thread\_descs[actual\_thread\_count].\mbox{\hyperlink{structlaunch__desc_af301f9649123b837ecb5e6106392e7c9}{payload}}\ =\ payload;}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ thread\_descs[actual\_thread\_count].\mbox{\hyperlink{structlaunch__desc_a3290fa651bf1def33151f086e69c5291}{func}}\ =\ func;}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Handle\ pthread\_create\ failing\ by\ simply\ using\ fewer\ threads}}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ error\ =\ pthread\_create(}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \&(thread\_descs[actual\_thread\_count].thread\_handle),}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{nullptr},}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__platform__dependents_8cpp_ab71f663aee63a901f990d117faf0290d}{launch\_threads\_helper}},}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(thread\_descs\ +\ actual\_thread\_count));\ \ \ \ \ \ \ }
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Track\ how\ many\ threads\ we\ actually\ created}}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!error)}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Windows\ needs\ explicit\ thread\ assignment\ to\ handle\ large\ core\ count\ systems}}
\DoxyCodeLine{00239\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#if\ defined(\_WIN32)\ \&\&\ !defined(\_\_CYGWIN\_\_)}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_group\_affinity(}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ thread\_descs[actual\_thread\_count].thread\_handle,}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ actual\_thread\_count);}
\DoxyCodeLine{00243\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ actual\_thread\_count++;}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00247\ \ \ \ \ \}}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{comment}{//\ If\ we\ did\ not\ create\ thread\_count\ threads\ then\ emit\ a\ warning}}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keywordflow}{if}\ (actual\_thread\_count\ !=\ thread\_count)}
\DoxyCodeLine{00251\ \ \ \ \ \{\ \ \ \ \ \ \ }
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ log\_count\ =\ actual\_thread\_count\ ==\ 0\ ?\ 1\ :\ actual\_thread\_count;}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ log\_s\ =\ log\_count\ ==\ 1\ ?\ \textcolor{stringliteral}{"{}"{}}\ :\ \textcolor{stringliteral}{"{}s"{}};}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}WARNING:\ \%s\ using\ \%d\ thread\%s\ due\ to\ thread\ creation\ error\(\backslash\)n\(\backslash\)n"{}},}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ operation,\ log\_count,\ log\_s);}
\DoxyCodeLine{00256\ \ \ \ \ \}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{comment}{//\ If\ we\ managed\ to\ spawn\ any\ threads\ wait\ for\ them\ to\ complete}}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keywordflow}{if}\ (actual\_thread\_count\ !=\ 0)}
\DoxyCodeLine{00260\ \ \ \ \ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ actual\_thread\_count;\ i++)}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ pthread\_join(thread\_descs[i].thread\_handle,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00265\ \ \ \ \ \}}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{comment}{//\ Else\ fall\ back\ to\ using\ this\ thread}}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00268\ \ \ \ \ \{}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ func(1,\ 0,\ payload);}
\DoxyCodeLine{00270\ \ \ \ \ \}}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keyword}{delete}[]\ thread\_descs;}
\DoxyCodeLine{00273\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=313pt]{astcenccli__internal_8h_aaa9dcd56cd7089c481e7ef8355ae5c2f_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_aaa9dcd56cd7089c481e7ef8355ae5c2f_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a6ef0eed7ff787726c2e16ab96196ed8b}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!load\_cimage@{load\_cimage}}
\index{load\_cimage@{load\_cimage}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{load\_cimage()}{load\_cimage()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a6ef0eed7ff787726c2e16ab96196ed8b} 
int load\+\_\+cimage (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{filename}{, }\item[{\mbox{\hyperlink{structastc__compressed__image}{astc\+\_\+compressed\+\_\+image}} \&}]{img}{}\end{DoxyParamCaption})}



Load a compressed .astc image. 


\begin{DoxyParams}{매개변수}
{\em filename} & The file to load. \\
\hline
{\em img} & The image to populate with loaded data.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Non-\/zero on error, zero on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image__load__store_8cpp_source}{astcenccli\+\_\+image\+\_\+load\+\_\+store.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image__load__store_8cpp_source_l02459}{2459}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{02462\ \ \ \{}
\DoxyCodeLine{02463\ \ \ \ \ std::ifstream\ file(filename,\ std::ios::in\ |\ std::ios::binary);}
\DoxyCodeLine{02464\ \ \ \ \ \textcolor{keywordflow}{if}\ (!file)}
\DoxyCodeLine{02465\ \ \ \ \ \{}
\DoxyCodeLine{02466\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ File\ open\ failed\ '\%s'\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{02467\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02468\ \ \ \ \ \}}
\DoxyCodeLine{02469\ }
\DoxyCodeLine{02470\ \ \ \ \ \mbox{\hyperlink{structastc__header}{astc\_header}}\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}};}
\DoxyCodeLine{02471\ \ \ \ \ file.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}),\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structastc__header}{astc\_header}}));}
\DoxyCodeLine{02472\ \ \ \ \ \textcolor{keywordflow}{if}\ (file.fail())}
\DoxyCodeLine{02473\ \ \ \ \ \{}
\DoxyCodeLine{02474\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ File\ read\ failed\ '\%s'\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{02475\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02476\ \ \ \ \ \}}
\DoxyCodeLine{02477\ }
\DoxyCodeLine{02478\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ magicval\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_ab40e61c869dc467310a636beab705eb9}{unpack\_bytes}}(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.magic[0],\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.magic[1],\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.magic[2],\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.magic[3]);}
\DoxyCodeLine{02479\ \ \ \ \ \textcolor{keywordflow}{if}\ (magicval\ !=\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a6c8fb8eec7b24bc517ae0f6c21e241c8}{ASTC\_MAGIC\_ID}})}
\DoxyCodeLine{02480\ \ \ \ \ \{}
\DoxyCodeLine{02481\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ File\ not\ recognized\ '\%s'\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{02482\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02483\ \ \ \ \ \}}
\DoxyCodeLine{02484\ }
\DoxyCodeLine{02485\ \ \ \ \ \textcolor{comment}{//\ Ensure\ these\ are\ not\ zero\ to\ avoid\ div\ by\ zero}}
\DoxyCodeLine{02486\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ block\_x\ =\ \mbox{\hyperlink{namespaceastc_a83a55552d03399cdff6cf2fed8312c9f}{astc::max}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.block\_x),\ 1u);}
\DoxyCodeLine{02487\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ block\_y\ =\ \mbox{\hyperlink{namespaceastc_a83a55552d03399cdff6cf2fed8312c9f}{astc::max}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.block\_y),\ 1u);}
\DoxyCodeLine{02488\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ block\_z\ =\ \mbox{\hyperlink{namespaceastc_a83a55552d03399cdff6cf2fed8312c9f}{astc::max}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.block\_z),\ 1u);}
\DoxyCodeLine{02489\ }
\DoxyCodeLine{02490\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_x\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_ab40e61c869dc467310a636beab705eb9}{unpack\_bytes}}(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_x[0],\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_x[1],\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_x[2],\ 0);}
\DoxyCodeLine{02491\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_y\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_ab40e61c869dc467310a636beab705eb9}{unpack\_bytes}}(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_y[0],\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_y[1],\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_y[2],\ 0);}
\DoxyCodeLine{02492\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_z\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_ab40e61c869dc467310a636beab705eb9}{unpack\_bytes}}(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_z[0],\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_z[1],\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_z[2],\ 0);}
\DoxyCodeLine{02493\ }
\DoxyCodeLine{02494\ \ \ \ \ \textcolor{keywordflow}{if}\ (dim\_x\ ==\ 0\ ||\ dim\_y\ ==\ 0\ ||\ dim\_z\ ==\ 0)}
\DoxyCodeLine{02495\ \ \ \ \ \{}
\DoxyCodeLine{02496\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Image\ header\ corrupt\ '\%s'\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{02497\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02498\ \ \ \ \ \}}
\DoxyCodeLine{02499\ }
\DoxyCodeLine{02500\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ xblocks\ =\ (dim\_x\ +\ block\_x\ -\/\ 1)\ /\ block\_x;}
\DoxyCodeLine{02501\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ yblocks\ =\ (dim\_y\ +\ block\_y\ -\/\ 1)\ /\ block\_y;}
\DoxyCodeLine{02502\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ zblocks\ =\ (dim\_z\ +\ block\_z\ -\/\ 1)\ /\ block\_z;}
\DoxyCodeLine{02503\ }
\DoxyCodeLine{02504\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ data\_size\ =\ xblocks\ *\ yblocks\ *\ zblocks\ *\ 16;}
\DoxyCodeLine{02505\ \ \ \ \ uint8\_t\ *buffer\ =\ \textcolor{keyword}{new}\ uint8\_t[data\_size];}
\DoxyCodeLine{02506\ }
\DoxyCodeLine{02507\ \ \ \ \ file.read(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(buffer),\ data\_size);}
\DoxyCodeLine{02508\ \ \ \ \ \textcolor{keywordflow}{if}\ (file.fail())}
\DoxyCodeLine{02509\ \ \ \ \ \{}
\DoxyCodeLine{02510\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Image\ data\ size\ exceeded\ file\ size\ '\%s'\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{02511\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ buffer;}
\DoxyCodeLine{02512\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02513\ \ \ \ \ \}}
\DoxyCodeLine{02514\ }
\DoxyCodeLine{02515\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_a2f8dadc1beecd1f0b84e8c01078ebb75}{data}}\ =\ buffer;}
\DoxyCodeLine{02516\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_ac18330848346858e41c3f9464deacb0f}{data\_len}}\ =\ data\_size;}
\DoxyCodeLine{02517\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_aeafe1da3bf5227bcd020c62035d905fe}{block\_x}}\ =\ block\_x;}
\DoxyCodeLine{02518\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_a819085bbeed627f0e6e33d7d8efb34cb}{block\_y}}\ =\ block\_y;}
\DoxyCodeLine{02519\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_a507b65951cf307eb7481c65929cb5e67}{block\_z}}\ =\ block\_z;}
\DoxyCodeLine{02520\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_ab8b069942fbe6cc5441abfe20053abff}{dim\_x}}\ =\ dim\_x;}
\DoxyCodeLine{02521\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_a15c6ae8cb877cf74f963d1ea3d15afb3}{dim\_y}}\ =\ dim\_y;}
\DoxyCodeLine{02522\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_a09c8a9676fc4b269cff40386515120e7}{dim\_z}}\ =\ dim\_z;}
\DoxyCodeLine{02523\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02524\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=264pt]{astcenccli__internal_8h_a6ef0eed7ff787726c2e16ab96196ed8b_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=338pt]{astcenccli__internal_8h_a6ef0eed7ff787726c2e16ab96196ed8b_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a10761592472e9cc4d632946459d00bee}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!load\_ktx\_compressed\_image@{load\_ktx\_compressed\_image}}
\index{load\_ktx\_compressed\_image@{load\_ktx\_compressed\_image}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{load\_ktx\_compressed\_image()}{load\_ktx\_compressed\_image()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a10761592472e9cc4d632946459d00bee} 
bool load\+\_\+ktx\+\_\+compressed\+\_\+image (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{filename}{, }\item[{bool \&}]{is\+\_\+srgb}{, }\item[{\mbox{\hyperlink{structastc__compressed__image}{astc\+\_\+compressed\+\_\+image}} \&}]{img}{}\end{DoxyParamCaption})}



Load a compressed .ktx image. 


\begin{DoxyParams}{매개변수}
{\em filename} & The file to load. \\
\hline
{\em is\+\_\+srgb} & Is this an s\+RGB encoded file? \\
\hline
{\em img} & The image to populate with loaded data.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Non-\/zero on error, zero on success.
\end{DoxyReturn}
Load a compressed .ktx image.


\begin{DoxyParams}[1]{매개변수}
 & {\em filename} & The name of the file to load. \\
\hline
\mbox{\texttt{ out}}  & {\em is\+\_\+srgb} & {\ttfamily true} if this is an s\+RGB image, {\ttfamily false} otherwise. \\
\hline
\mbox{\texttt{ out}}  & {\em img} & The output image to populate.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
{\ttfamily true} on error, {\ttfamily false} otherwise. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image__load__store_8cpp_source}{astcenccli\+\_\+image\+\_\+load\+\_\+store.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image__load__store_8cpp_source_l01275}{1275}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{01279\ \ \ \{}
\DoxyCodeLine{01280\ \ \ \ \ FILE\ *f\ =\ fopen(filename,\ \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{01281\ \ \ \ \ \textcolor{keywordflow}{if}\ (!f)}
\DoxyCodeLine{01282\ \ \ \ \ \{}
\DoxyCodeLine{01283\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Failed\ to\ open\ file\ \%s\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{01284\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01285\ \ \ \ \ \}}
\DoxyCodeLine{01286\ }
\DoxyCodeLine{01287\ \ \ \ \ \mbox{\hyperlink{structktx__header}{ktx\_header}}\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}};}
\DoxyCodeLine{01288\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ actual\ =\ fread(\&\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}},\ 1,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}),\ f);}
\DoxyCodeLine{01289\ \ \ \ \ \textcolor{keywordflow}{if}\ (actual\ !=\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}))}
\DoxyCodeLine{01290\ \ \ \ \ \{}
\DoxyCodeLine{01291\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Failed\ to\ read\ header\ from\ \%s\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{01292\ \ \ \ \ \ \ \ \ fclose(f);}
\DoxyCodeLine{01293\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01294\ \ \ \ \ \}}
\DoxyCodeLine{01295\ }
\DoxyCodeLine{01296\ \ \ \ \ \textcolor{keywordflow}{if}\ (memcmp(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.magic,\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a0adaccef807b4af5a439916323ffb891}{ktx\_magic}},\ 12)\ !=\ 0\ ||}
\DoxyCodeLine{01297\ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.endianness\ !=\ 0x04030201\ \&\&\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.endianness\ !=\ 0x01020304))}
\DoxyCodeLine{01298\ \ \ \ \ \{}
\DoxyCodeLine{01299\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}File\ \%s\ does\ not\ have\ a\ valid\ KTX\ header\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{01300\ \ \ \ \ \ \ \ \ fclose(f);}
\DoxyCodeLine{01301\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01302\ \ \ \ \ \}}
\DoxyCodeLine{01303\ }
\DoxyCodeLine{01304\ \ \ \ \ \textcolor{keywordtype}{bool}\ switch\_endianness\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01305\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.endianness\ ==\ 0x01020304)}
\DoxyCodeLine{01306\ \ \ \ \ \{}
\DoxyCodeLine{01307\ \ \ \ \ \ \ \ \ switch\_endianness\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01308\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a7271fdd9dae7875cb69b75377840f1b6}{ktx\_header\_switch\_endianness}}(\&\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}});}
\DoxyCodeLine{01309\ \ \ \ \ \}}
\DoxyCodeLine{01310\ }
\DoxyCodeLine{01311\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.gl\_type\ !=\ 0\ ||\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.gl\_format\ !=\ 0\ ||\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.gl\_type\_size\ !=\ 1\ ||}
\DoxyCodeLine{01312\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.gl\_base\_internal\_format\ !=\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a9f2854f4a91a0d83d2d54cb8110bfca4}{GL\_RGBA}})}
\DoxyCodeLine{01313\ \ \ \ \ \{}
\DoxyCodeLine{01314\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}File\ \%s\ is\ not\ a\ compressed\ ASTC\ file\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{01315\ \ \ \ \ \ \ \ \ fclose(f);}
\DoxyCodeLine{01316\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01317\ \ \ \ \ \}}
\DoxyCodeLine{01318\ }
\DoxyCodeLine{01319\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structformat__entry}{format\_entry}}*\ fmt\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a25de668f2135ef9b77dd0c86b5d36b27}{get\_format}}(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.gl\_internal\_format);}
\DoxyCodeLine{01320\ \ \ \ \ \textcolor{keywordflow}{if}\ (!fmt)}
\DoxyCodeLine{01321\ \ \ \ \ \{}
\DoxyCodeLine{01322\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}File\ \%s\ is\ not\ a\ compressed\ ASTC\ file\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{01323\ \ \ \ \ \ \ \ \ fclose(f);}
\DoxyCodeLine{01324\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01325\ \ \ \ \ \}}
\DoxyCodeLine{01326\ }
\DoxyCodeLine{01327\ \ \ \ \ \textcolor{comment}{//\ Skip\ over\ any\ key-\/value\ pairs}}
\DoxyCodeLine{01328\ \ \ \ \ \textcolor{keywordtype}{int}\ seekerr;}
\DoxyCodeLine{01329\ \ \ \ \ seekerr\ =\ fseek(f,\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.bytes\_of\_key\_value\_data,\ SEEK\_CUR);}
\DoxyCodeLine{01330\ \ \ \ \ \textcolor{keywordflow}{if}\ (seekerr)}
\DoxyCodeLine{01331\ \ \ \ \ \{}
\DoxyCodeLine{01332\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Failed\ to\ skip\ key-\/value\ pairs\ in\ \%s\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{01333\ \ \ \ \ \ \ \ \ fclose(f);}
\DoxyCodeLine{01334\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01335\ \ \ \ \ \}}
\DoxyCodeLine{01336\ }
\DoxyCodeLine{01337\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ length\ of\ the\ data\ and\ endianess\ convert}}
\DoxyCodeLine{01338\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ data\_len;}
\DoxyCodeLine{01339\ \ \ \ \ actual\ =\ fread(\&data\_len,\ 1,\ \textcolor{keyword}{sizeof}(data\_len),\ f);}
\DoxyCodeLine{01340\ \ \ \ \ \textcolor{keywordflow}{if}\ (actual\ !=\ \textcolor{keyword}{sizeof}(data\_len))}
\DoxyCodeLine{01341\ \ \ \ \ \{}
\DoxyCodeLine{01342\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Failed\ to\ read\ mip\ 0\ size\ from\ \%s\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{01343\ \ \ \ \ \ \ \ \ fclose(f);}
\DoxyCodeLine{01344\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01345\ \ \ \ \ \}}
\DoxyCodeLine{01346\ }
\DoxyCodeLine{01347\ \ \ \ \ \textcolor{keywordflow}{if}\ (switch\_endianness)}
\DoxyCodeLine{01348\ \ \ \ \ \{}
\DoxyCodeLine{01349\ \ \ \ \ \ \ \ \ data\_len\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a834ad2434a131242dc4fa6f1856222cb}{u32\_byterev}}(data\_len);}
\DoxyCodeLine{01350\ \ \ \ \ \}}
\DoxyCodeLine{01351\ }
\DoxyCodeLine{01352\ \ \ \ \ \textcolor{comment}{//\ Read\ the\ data}}
\DoxyCodeLine{01353\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\ data\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}[data\_len];}
\DoxyCodeLine{01354\ \ \ \ \ actual\ =\ fread(data,\ 1,\ data\_len,\ f);}
\DoxyCodeLine{01355\ \ \ \ \ \textcolor{keywordflow}{if}\ (actual\ !=\ data\_len)}
\DoxyCodeLine{01356\ \ \ \ \ \{}
\DoxyCodeLine{01357\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Failed\ to\ read\ mip\ 0\ data\ from\ \%s\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{01358\ \ \ \ \ \ \ \ \ fclose(f);}
\DoxyCodeLine{01359\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ data;}
\DoxyCodeLine{01360\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01361\ \ \ \ \ \}}
\DoxyCodeLine{01362\ }
\DoxyCodeLine{01363\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_aeafe1da3bf5227bcd020c62035d905fe}{block\_x}}\ =\ fmt-\/>\mbox{\hyperlink{structformat__entry_a4514889f83a63a9b8bc921b546566d55}{x}};}
\DoxyCodeLine{01364\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_a819085bbeed627f0e6e33d7d8efb34cb}{block\_y}}\ =\ fmt-\/>\mbox{\hyperlink{structformat__entry_ad01737d5ef063dd4f1971a974d90e137}{y}};}
\DoxyCodeLine{01365\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_a507b65951cf307eb7481c65929cb5e67}{block\_z}}\ =\ fmt-\/>\mbox{\hyperlink{structformat__entry_ad676d78d5bfbccfa7e2ee05019b9422f}{z}}\ ==\ 0\ ?\ 1\ :\ fmt-\/>\mbox{\hyperlink{structformat__entry_ad676d78d5bfbccfa7e2ee05019b9422f}{z}};}
\DoxyCodeLine{01366\ }
\DoxyCodeLine{01367\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_ab8b069942fbe6cc5441abfe20053abff}{dim\_x}}\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.pixel\_width;}
\DoxyCodeLine{01368\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_a15c6ae8cb877cf74f963d1ea3d15afb3}{dim\_y}}\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.pixel\_height;}
\DoxyCodeLine{01369\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_a09c8a9676fc4b269cff40386515120e7}{dim\_z}}\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.pixel\_depth\ ==\ 0\ ?\ 1\ :\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.pixel\_depth;}
\DoxyCodeLine{01370\ }
\DoxyCodeLine{01371\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_ac18330848346858e41c3f9464deacb0f}{data\_len}}\ =\ data\_len;}
\DoxyCodeLine{01372\ \ \ \ \ img.\mbox{\hyperlink{structastc__compressed__image_a2f8dadc1beecd1f0b84e8c01078ebb75}{data}}\ =\ data;}
\DoxyCodeLine{01373\ }
\DoxyCodeLine{01374\ \ \ \ \ is\_srgb\ =\ fmt-\/>\mbox{\hyperlink{structformat__entry_a7335f3bbba22c182fe61ba40f38c58bc}{is\_srgb}};}
\DoxyCodeLine{01375\ }
\DoxyCodeLine{01376\ \ \ \ \ fclose(f);}
\DoxyCodeLine{01377\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01378\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a10761592472e9cc4d632946459d00bee_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a10761592472e9cc4d632946459d00bee_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_aff0de9c0d50e5630b61f0d6e597fcd65}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!load\_ncimage@{load\_ncimage}}
\index{load\_ncimage@{load\_ncimage}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{load\_ncimage()}{load\_ncimage()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_aff0de9c0d50e5630b61f0d6e597fcd65} 
\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*} load\+\_\+ncimage (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{filename}{, }\item[{bool}]{y\+\_\+flip}{, }\item[{bool \&}]{is\+\_\+hdr}{, }\item[{unsigned int \&}]{component\+\_\+count}{}\end{DoxyParamCaption})}



Load uncompressed image. 


\begin{DoxyParams}[1]{매개변수}
 & {\em filename} & The file path on disk. \\
\hline
 & {\em y\+\_\+flip} & Should this image be Y flipped? \\
\hline
\mbox{\texttt{ out}}  & {\em is\+\_\+hdr} & Is the loaded image HDR? \\
\hline
\mbox{\texttt{ out}}  & {\em component\+\_\+count} & The number of components in the loaded image.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The astc image file, or nullptr on error. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image__load__store_8cpp_source}{astcenccli\+\_\+image\+\_\+load\+\_\+store.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image__load__store_8cpp_source_l02376}{2376}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{02381\ \ \ \{}
\DoxyCodeLine{02382\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ file\ extension}}
\DoxyCodeLine{02383\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ eptr\ =\ strrchr(filename,\ \textcolor{charliteral}{'.'});}
\DoxyCodeLine{02384\ \ \ \ \ \textcolor{keywordflow}{if}\ (!eptr)}
\DoxyCodeLine{02385\ \ \ \ \ \{}
\DoxyCodeLine{02386\ \ \ \ \ \ \ \ \ eptr\ =\ filename;}
\DoxyCodeLine{02387\ \ \ \ \ \}}
\DoxyCodeLine{02388\ }
\DoxyCodeLine{02389\ \ \ \ \ \textcolor{comment}{//\ Scan\ through\ descriptors\ until\ a\ matching\ loader\ is\ found}}
\DoxyCodeLine{02390\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a37953adb3188b57e22b32b35e23cf111}{loader\_descr\_count}};\ i++)}
\DoxyCodeLine{02391\ \ \ \ \ \{}
\DoxyCodeLine{02392\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (loader\_descs[i].\mbox{\hyperlink{astcenccli__image__load__store_8cpp_aeb6dc6b73a14c055f8f9e8542959d57d}{ending1}}\ ==\ \textcolor{keyword}{nullptr}}
\DoxyCodeLine{02393\ \ \ \ \ \ \ \ \ \ \ \ \ ||\ strcmp(eptr,\ loader\_descs[i].\mbox{\hyperlink{astcenccli__image__load__store_8cpp_aeb6dc6b73a14c055f8f9e8542959d57d}{ending1}})\ ==\ 0}
\DoxyCodeLine{02394\ \ \ \ \ \ \ \ \ \ \ \ \ ||\ strcmp(eptr,\ loader\_descs[i].\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a2cfda059378558e8eaf1877eb042c7c1}{ending2}})\ ==\ 0)}
\DoxyCodeLine{02395\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02396\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ loader\_descs[i].loader\_func(filename,\ y\_flip,\ is\_hdr,\ component\_count);}
\DoxyCodeLine{02397\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02398\ \ \ \ \ \}}
\DoxyCodeLine{02399\ }
\DoxyCodeLine{02400\ \ \ \ \ \textcolor{comment}{//\ Should\ never\ reach\ here\ -\/\ stb\_image\ provides\ a\ generic\ handler}}
\DoxyCodeLine{02401\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{02402\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_aff0de9c0d50e5630b61f0d6e597fcd65_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a9920dcae3265967744c9b31e9ac8a999}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!load\_png\_with\_wuffs@{load\_png\_with\_wuffs}}
\index{load\_png\_with\_wuffs@{load\_png\_with\_wuffs}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{load\_png\_with\_wuffs()}{load\_png\_with\_wuffs()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a9920dcae3265967744c9b31e9ac8a999} 
\mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*} load\+\_\+png\+\_\+with\+\_\+wuffs (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{filename}{, }\item[{bool}]{y\+\_\+flip}{, }\item[{bool \&}]{is\+\_\+hdr}{, }\item[{unsigned int \&}]{component\+\_\+count}{}\end{DoxyParamCaption})}



Load uncompressed PNG image. 


\begin{DoxyParams}[1]{매개변수}
 & {\em filename} & The file path on disk. \\
\hline
 & {\em y\+\_\+flip} & Should this image be Y flipped? \\
\hline
\mbox{\texttt{ out}}  & {\em is\+\_\+hdr} & Is the loaded image HDR? \\
\hline
\mbox{\texttt{ out}}  & {\em component\+\_\+count} & The number of components in the loaded image.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The astc image file, or nullptr on error.
\end{DoxyReturn}
Load uncompressed PNG image.


\begin{DoxyParams}[1]{매개변수}
 & {\em filename} & The name of the file to load. \\
\hline
 & {\em y\+\_\+flip} & Should the image be vertically flipped? \\
\hline
\mbox{\texttt{ out}}  & {\em is\+\_\+hdr} & Is this an HDR image load? \\
\hline
\mbox{\texttt{ out}}  & {\em component\+\_\+count} & The number of components in the data.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The loaded image data in a canonical 4 channel format, or {\ttfamily nullptr} on error. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image__external_8cpp_source}{astcenccli\+\_\+image\+\_\+external.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image__external_8cpp_source_l00083}{83}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00088\ \ \ \{}
\DoxyCodeLine{00089\ \ \ \ \ is\_hdr\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00090\ \ \ \ \ component\_count\ =\ 4;}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ std::ifstream\ file(filename,\ std::ios::binary\ |\ std::ios::ate);}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordflow}{if}\ (!file)}
\DoxyCodeLine{00094\ \ \ \ \ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ Failed\ to\ load\ image\ \%s\ (can't\ fopen)\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00097\ \ \ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ std::streamsize\ size\ =\ file.tellg();}
\DoxyCodeLine{00100\ \ \ \ \ file.seekg(0,\ std::ios::beg);}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ std::vector<uint8\_t>\ buffer(size);}
\DoxyCodeLine{00103\ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)buffer.data(),\ size);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \mbox{\hyperlink{wuffs-v0_83_8c_aca1b5132af7875ae6352d8791d6beddf}{wuffs\_png\_\_decoder}}\ *dec\ =\ \mbox{\hyperlink{wuffs-v0_83_8c_a5d2bcf3dfcd583a62738e059b0d27d80}{wuffs\_png\_\_decoder\_\_alloc}}();}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordflow}{if}\ (!dec)}
\DoxyCodeLine{00107\ \ \ \ \ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00109\ \ \ \ \ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \mbox{\hyperlink{structwuffs__base____image__config____struct}{wuffs\_base\_\_image\_config}}\ ic;}
\DoxyCodeLine{00112\ \ \ \ \ \mbox{\hyperlink{structwuffs__base____io__buffer____struct}{wuffs\_base\_\_io\_buffer}}\ src\ =\ \mbox{\hyperlink{wuffs-v0_83_8c_a00677163623339195a082d5c359983d7}{wuffs\_base\_\_ptr\_u8\_\_reader}}(buffer.data(),\ size,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{structwuffs__base____status____struct}{wuffs\_base\_\_status}}\ status\ =\ \mbox{\hyperlink{wuffs-v0_83_8c_ad48f0296dc931ce5dcea8a0c30e642c0}{wuffs\_png\_\_decoder\_\_decode\_image\_config}}(dec,\ \&ic,\ \&src);}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{if}\ (status.\mbox{\hyperlink{structwuffs__base____status____struct_a41d0e1b59d019e94b7f3c030d53db6e7}{repr}})}
\DoxyCodeLine{00115\ \ \ \ \ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00117\ \ \ \ \ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ uint32\_t\ dim\_x\ =\ \mbox{\hyperlink{wuffs-v0_83_8c_a5f2035e154cd391ccf4d43a5f759f25f}{wuffs\_base\_\_pixel\_config\_\_width}}(\&ic.\mbox{\hyperlink{structwuffs__base____image__config____struct_aa5f3a74ab32427acb8f935e04dd6b2ab}{pixcfg}});}
\DoxyCodeLine{00120\ \ \ \ \ uint32\_t\ dim\_y\ =\ \mbox{\hyperlink{wuffs-v0_83_8c_adefd33c267daa0d55e11eb5f6d363625}{wuffs\_base\_\_pixel\_config\_\_height}}(\&ic.\mbox{\hyperlink{structwuffs__base____image__config____struct_aa5f3a74ab32427acb8f935e04dd6b2ab}{pixcfg}});}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ num\_pixels\ =\ dim\_x\ *\ dim\_y;}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordflow}{if}\ (num\_pixels\ >\ (SIZE\_MAX\ /\ 4))}
\DoxyCodeLine{00123\ \ \ \ \ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00125\ \ \ \ \ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{comment}{//\ Override\ the\ image's\ native\ pixel\ format\ to\ be\ RGBA\_NONPREMUL}}
\DoxyCodeLine{00128\ \ \ \ \ \mbox{\hyperlink{wuffs-v0_83_8c_a0a7abef0beaadad92348c82277311994}{wuffs\_base\_\_pixel\_config\_\_set}}(}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \&ic.\mbox{\hyperlink{structwuffs__base____image__config____struct_aa5f3a74ab32427acb8f935e04dd6b2ab}{pixcfg}},}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{wuffs-v0_83_8c_a0efba23849688a4bf2cfef718ee492e0}{WUFFS\_BASE\_\_PIXEL\_FORMAT\_\_RGBA\_NONPREMUL}},}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{wuffs-v0_83_8c_aa9cb97fbf916a4c85bfe263a57fe3b87}{WUFFS\_BASE\_\_PIXEL\_SUBSAMPLING\_\_NONE}},}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ dim\_x,\ dim\_y);}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{comment}{//\ Configure\ the\ work\ buffer}}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ workbuf\_len\ =\ \mbox{\hyperlink{wuffs-v0_83_8c_af83f3e29886ee92948f6e9c792ea018e}{wuffs\_png\_\_decoder\_\_workbuf\_len}}(dec).\mbox{\hyperlink{structwuffs__base____range__ii__u64____struct_aa643f515f792f8962152af0d6054fb51}{max\_incl}};}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{if}\ (workbuf\_len\ >\ SIZE\_MAX)}
\DoxyCodeLine{00137\ \ \ \ \ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00139\ \ \ \ \ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ wuffs\_base\_\_slice\_u8\ workbuf\_slice\ =\ wuffs\_base\_\_make\_slice\_u8((uint8\_t*)malloc(workbuf\_len),\ workbuf\_len);}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keywordflow}{if}\ (!workbuf\_slice.ptr)}
\DoxyCodeLine{00143\ \ \ \ \ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00145\ \ \ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ wuffs\_base\_\_slice\_u8\ pixbuf\_slice\ =\ wuffs\_base\_\_make\_slice\_u8((uint8\_t*)malloc(num\_pixels\ *\ 4),\ num\_pixels\ *\ 4);}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{if}\ (!pixbuf\_slice.ptr)}
\DoxyCodeLine{00149\ \ \ \ \ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00151\ \ \ \ \ \}}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ \ \ \mbox{\hyperlink{structwuffs__base____pixel__buffer____struct}{wuffs\_base\_\_pixel\_buffer}}\ pb;}
\DoxyCodeLine{00154\ \ \ \ \ status\ =\ \mbox{\hyperlink{wuffs-v0_83_8c_a6dbfe45a4cad9cea69bdcf64aec9fb8d}{wuffs\_base\_\_pixel\_buffer\_\_set\_from\_slice}}(\&pb,\ \&ic.\mbox{\hyperlink{structwuffs__base____image__config____struct_aa5f3a74ab32427acb8f935e04dd6b2ab}{pixcfg}},\ pixbuf\_slice);}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordflow}{if}\ (status.\mbox{\hyperlink{structwuffs__base____status____struct_a41d0e1b59d019e94b7f3c030d53db6e7}{repr}})}
\DoxyCodeLine{00156\ \ \ \ \ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00158\ \ \ \ \ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{comment}{//\ Decode\ the\ pixels}}
\DoxyCodeLine{00161\ \ \ \ \ status\ =\ \mbox{\hyperlink{wuffs-v0_83_8c_af57d8e43628d94b43f9443fb8303fdeb}{wuffs\_png\_\_decoder\_\_decode\_frame}}(dec,\ \&pb,\ \&src,\ \mbox{\hyperlink{wuffs-v0_83_8c_afbc54096d64714b332c602a7a5710fdc}{WUFFS\_BASE\_\_PIXEL\_BLEND\_\_SRC}},\ workbuf\_slice,\ NULL);}
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keywordflow}{if}\ (status.\mbox{\hyperlink{structwuffs__base____status____struct_a41d0e1b59d019e94b7f3c030d53db6e7}{repr}})}
\DoxyCodeLine{00163\ \ \ \ \ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00165\ \ \ \ \ \}}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \mbox{\hyperlink{structastcenc__image}{astcenc\_image}}*\ img\ =\ \mbox{\hyperlink{astcenccli__image_8cpp_a9ecc1dac86584f7e086e9962fb6c0509}{astc\_img\_from\_unorm8x4\_array}}(pixbuf\_slice.ptr,\ dim\_x,\ dim\_y,\ y\_flip);}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ free(pixbuf\_slice.ptr);}
\DoxyCodeLine{00170\ \ \ \ \ free(workbuf\_slice.ptr);}
\DoxyCodeLine{00171\ \ \ \ \ free(dec);}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordflow}{return}\ img;}
\DoxyCodeLine{00174\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a9920dcae3265967744c9b31e9ac8a999_cgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!print\_error@{print\_error}}
\index{print\_error@{print\_error}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{print\_error()}{print\_error()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56} 
static void print\+\_\+error (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{format}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Print a string to stderr. 



\mbox{\hyperlink{astcenccli__internal_8h_source}{astcenccli\+\_\+internal.\+h}} 파일의 \mbox{\hyperlink{astcenccli__internal_8h_source_l00102}{102}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00104\ \ \ \{}
\DoxyCodeLine{00105\ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}\%s"{}},\ format);}
\DoxyCodeLine{00106\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a4a3f02fce6a0f57b6a1166483b5dffe4}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!print\_error@{print\_error}}
\index{print\_error@{print\_error}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{print\_error()}{print\_error()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a4a3f02fce6a0f57b6a1166483b5dffe4} 
template$<$typename ... \+\_\+\+Args$>$ \\
static void print\+\_\+error (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{format}{, }\item[{\+\_\+\+Args...}]{args}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Print a formatted string to stderr. 



\mbox{\hyperlink{astcenccli__internal_8h_source}{astcenccli\+\_\+internal.\+h}} 파일의 \mbox{\hyperlink{astcenccli__internal_8h_source_l00112}{112}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00115\ \ \ \{}
\DoxyCodeLine{00116\ \ \ \ \ fprintf(stderr,\ format,\ args...);}
\DoxyCodeLine{00117\ \}}

\end{DoxyCode}
\Hypertarget{astcenccli__internal_8h_a9ba4a67ed1a59e71c22282996d48390b}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!store\_cimage@{store\_cimage}}
\index{store\_cimage@{store\_cimage}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{store\_cimage()}{store\_cimage()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a9ba4a67ed1a59e71c22282996d48390b} 
int store\+\_\+cimage (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structastc__compressed__image}{astc\+\_\+compressed\+\_\+image}} \&}]{img}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{filename}{}\end{DoxyParamCaption})}



Store a compressed .astc image. 


\begin{DoxyParams}{매개변수}
{\em img} & The image to store. \\
\hline
{\em filename} & The file to save.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Non-\/zero on error, zero on success. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image__load__store_8cpp_source}{astcenccli\+\_\+image\+\_\+load\+\_\+store.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image__load__store_8cpp_source_l02527}{2527}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{02530\ \ \ \{}
\DoxyCodeLine{02531\ \ \ \ \ \mbox{\hyperlink{structastc__header}{astc\_header}}\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}};}
\DoxyCodeLine{02532\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.\mbox{\hyperlink{structastc__header_a58a19db3a00c763189cafeb0dbe2a34d}{magic}}[0]\ =\ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a6c8fb8eec7b24bc517ae0f6c21e241c8}{ASTC\_MAGIC\_ID}}\ \ \ \ \ \ \ \ \&\ 0xFF;}
\DoxyCodeLine{02533\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.magic[1]\ =\ (\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a6c8fb8eec7b24bc517ae0f6c21e241c8}{ASTC\_MAGIC\_ID}}\ >>\ \ 8)\ \&\ 0xFF;}
\DoxyCodeLine{02534\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.magic[2]\ =\ (\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a6c8fb8eec7b24bc517ae0f6c21e241c8}{ASTC\_MAGIC\_ID}}\ >>\ 16)\ \&\ 0xFF;}
\DoxyCodeLine{02535\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.magic[3]\ =\ (\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a6c8fb8eec7b24bc517ae0f6c21e241c8}{ASTC\_MAGIC\_ID}}\ >>\ 24)\ \&\ 0xFF;}
\DoxyCodeLine{02536\ }
\DoxyCodeLine{02537\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.block\_x\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(img.\mbox{\hyperlink{structastc__compressed__image_aeafe1da3bf5227bcd020c62035d905fe}{block\_x}});}
\DoxyCodeLine{02538\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.block\_y\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(img.\mbox{\hyperlink{structastc__compressed__image_a819085bbeed627f0e6e33d7d8efb34cb}{block\_y}});}
\DoxyCodeLine{02539\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.block\_z\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(img.\mbox{\hyperlink{structastc__compressed__image_a507b65951cf307eb7481c65929cb5e67}{block\_z}});}
\DoxyCodeLine{02540\ }
\DoxyCodeLine{02541\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_x[0]\ =\ \ img.\mbox{\hyperlink{structastc__compressed__image_ab8b069942fbe6cc5441abfe20053abff}{dim\_x}}\ \ \ \ \ \ \ \ \&\ 0xFF;}
\DoxyCodeLine{02542\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_x[1]\ =\ (img.\mbox{\hyperlink{structastc__compressed__image_ab8b069942fbe6cc5441abfe20053abff}{dim\_x}}\ >>\ \ 8)\ \&\ 0xFF;}
\DoxyCodeLine{02543\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_x[2]\ =\ (img.\mbox{\hyperlink{structastc__compressed__image_ab8b069942fbe6cc5441abfe20053abff}{dim\_x}}\ >>\ 16)\ \&\ 0xFF;}
\DoxyCodeLine{02544\ }
\DoxyCodeLine{02545\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_y[0]\ =\ \ img.\mbox{\hyperlink{structastc__compressed__image_a15c6ae8cb877cf74f963d1ea3d15afb3}{dim\_y}}\ \ \ \ \ \ \ \&\ 0xFF;}
\DoxyCodeLine{02546\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_y[1]\ =\ (img.\mbox{\hyperlink{structastc__compressed__image_a15c6ae8cb877cf74f963d1ea3d15afb3}{dim\_y}}\ >>\ \ 8)\ \&\ 0xFF;}
\DoxyCodeLine{02547\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_y[2]\ =\ (img.\mbox{\hyperlink{structastc__compressed__image_a15c6ae8cb877cf74f963d1ea3d15afb3}{dim\_y}}\ >>\ 16)\ \&\ 0xFF;}
\DoxyCodeLine{02548\ }
\DoxyCodeLine{02549\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_z[0]\ =\ \ img.\mbox{\hyperlink{structastc__compressed__image_a09c8a9676fc4b269cff40386515120e7}{dim\_z}}\ \ \ \ \ \ \ \ \&\ 0xFF;}
\DoxyCodeLine{02550\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_z[1]\ =\ (img.\mbox{\hyperlink{structastc__compressed__image_a09c8a9676fc4b269cff40386515120e7}{dim\_z}}\ >>\ \ 8)\ \&\ 0xFF;}
\DoxyCodeLine{02551\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.dim\_z[2]\ =\ (img.\mbox{\hyperlink{structastc__compressed__image_a09c8a9676fc4b269cff40386515120e7}{dim\_z}}\ >>\ 16)\ \&\ 0xFF;}
\DoxyCodeLine{02552\ }
\DoxyCodeLine{02553\ \ \ \ \ std::ofstream\ file(filename,\ std::ios::out\ |\ std::ios::binary);}
\DoxyCodeLine{02554\ \ \ \ \ \textcolor{keywordflow}{if}\ (!file)}
\DoxyCodeLine{02555\ \ \ \ \ \{}
\DoxyCodeLine{02556\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenccli__internal_8h_a699ebbd5f0143120e8ccaa26ae386b56}{print\_error}}(\textcolor{stringliteral}{"{}ERROR:\ File\ open\ failed\ '\%s'\(\backslash\)n"{}},\ filename);}
\DoxyCodeLine{02557\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02558\ \ \ \ \ \}}
\DoxyCodeLine{02559\ }
\DoxyCodeLine{02560\ \ \ \ \ file.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}),\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structastc__header}{astc\_header}}));}
\DoxyCodeLine{02561\ \ \ \ \ file.write(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(img.\mbox{\hyperlink{structastc__compressed__image_a2f8dadc1beecd1f0b84e8c01078ebb75}{data}}),\ img.\mbox{\hyperlink{structastc__compressed__image_ac18330848346858e41c3f9464deacb0f}{data\_len}});}
\DoxyCodeLine{02562\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02563\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=251pt]{astcenccli__internal_8h_a9ba4a67ed1a59e71c22282996d48390b_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{astcenccli__internal_8h_a9ba4a67ed1a59e71c22282996d48390b_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a3e674d4952496a98a942815392b1a3a5}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!store\_ktx\_compressed\_image@{store\_ktx\_compressed\_image}}
\index{store\_ktx\_compressed\_image@{store\_ktx\_compressed\_image}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{store\_ktx\_compressed\_image()}{store\_ktx\_compressed\_image()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a3e674d4952496a98a942815392b1a3a5} 
bool store\+\_\+ktx\+\_\+compressed\+\_\+image (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structastc__compressed__image}{astc\+\_\+compressed\+\_\+image}} \&}]{img}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{filename}{, }\item[{bool}]{is\+\_\+srgb}{}\end{DoxyParamCaption})}



Store a compressed .ktx image. 


\begin{DoxyParams}{매개변수}
{\em img} & The image to store. \\
\hline
{\em filename} & The file to store. \\
\hline
{\em is\+\_\+srgb} & Is this an s\+RGB encoded file?\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
Non-\/zero on error, zero on success.
\end{DoxyReturn}
Store a compressed .ktx image.


\begin{DoxyParams}{매개변수}
{\em img} & The image data to store. \\
\hline
{\em filename} & The name of the file to save. \\
\hline
{\em is\+\_\+srgb} & {\ttfamily true} if this is an s\+RGB image, {\ttfamily false} if linear.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
{\ttfamily true} on error, {\ttfamily false} otherwise. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image__load__store_8cpp_source}{astcenccli\+\_\+image\+\_\+load\+\_\+store.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image__load__store_8cpp_source_l01389}{1389}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{01393\ \ \ \{}
\DoxyCodeLine{01394\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ fmt\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a25de668f2135ef9b77dd0c86b5d36b27}{get\_format}}(img.\mbox{\hyperlink{structastc__compressed__image_aeafe1da3bf5227bcd020c62035d905fe}{block\_x}},\ img.\mbox{\hyperlink{structastc__compressed__image_a819085bbeed627f0e6e33d7d8efb34cb}{block\_y}},\ img.\mbox{\hyperlink{structastc__compressed__image_a507b65951cf307eb7481c65929cb5e67}{block\_z}},\ is\_srgb);}
\DoxyCodeLine{01395\ }
\DoxyCodeLine{01396\ \ \ \ \ \mbox{\hyperlink{structktx__header}{ktx\_header}}\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}};}
\DoxyCodeLine{01397\ \ \ \ \ memcpy(\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.magic,\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a0adaccef807b4af5a439916323ffb891}{ktx\_magic}},\ 12);}
\DoxyCodeLine{01398\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.endianness\ =\ 0x04030201;}
\DoxyCodeLine{01399\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.gl\_type\ =\ 0;}
\DoxyCodeLine{01400\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.gl\_type\_size\ =\ 1;}
\DoxyCodeLine{01401\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.gl\_format\ =\ 0;}
\DoxyCodeLine{01402\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.gl\_internal\_format\ =\ fmt;}
\DoxyCodeLine{01403\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.gl\_base\_internal\_format\ =\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a9f2854f4a91a0d83d2d54cb8110bfca4}{GL\_RGBA}};}
\DoxyCodeLine{01404\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.pixel\_width\ =\ img.\mbox{\hyperlink{structastc__compressed__image_ab8b069942fbe6cc5441abfe20053abff}{dim\_x}};}
\DoxyCodeLine{01405\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.pixel\_height\ =\ img.\mbox{\hyperlink{structastc__compressed__image_a15c6ae8cb877cf74f963d1ea3d15afb3}{dim\_y}};}
\DoxyCodeLine{01406\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.pixel\_depth\ =\ (img.\mbox{\hyperlink{structastc__compressed__image_a09c8a9676fc4b269cff40386515120e7}{dim\_z}}\ ==\ 1)\ ?\ 0\ :\ img.dim\_z;}
\DoxyCodeLine{01407\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.number\_of\_array\_elements\ =\ 0;}
\DoxyCodeLine{01408\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.number\_of\_faces\ =\ 1;}
\DoxyCodeLine{01409\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.number\_of\_mipmap\_levels\ =\ 1;}
\DoxyCodeLine{01410\ \ \ \ \ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}}.bytes\_of\_key\_value\_data\ =\ 0;}
\DoxyCodeLine{01411\ }
\DoxyCodeLine{01412\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ expected\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structktx__header}{ktx\_header}})\ +\ 4\ +\ img.\mbox{\hyperlink{structastc__compressed__image_ac18330848346858e41c3f9464deacb0f}{data\_len}};}
\DoxyCodeLine{01413\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ actual\ =\ 0;}
\DoxyCodeLine{01414\ }
\DoxyCodeLine{01415\ \ \ \ \ FILE\ *wf\ =\ fopen(filename,\ \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{01416\ \ \ \ \ \textcolor{keywordflow}{if}\ (!wf)}
\DoxyCodeLine{01417\ \ \ \ \ \{}
\DoxyCodeLine{01418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01419\ \ \ \ \ \}}
\DoxyCodeLine{01420\ }
\DoxyCodeLine{01421\ \ \ \ \ actual\ +=\ fwrite(\&\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a78fd18ccd29d2487172eafa32c229c92}{hdr}},\ 1,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structktx__header}{ktx\_header}}),\ wf);}
\DoxyCodeLine{01422\ \ \ \ \ actual\ +=\ fwrite(\&img.\mbox{\hyperlink{structastc__compressed__image_ac18330848346858e41c3f9464deacb0f}{data\_len}},\ 1,\ 4,\ wf);}
\DoxyCodeLine{01423\ \ \ \ \ actual\ +=\ fwrite(img.\mbox{\hyperlink{structastc__compressed__image_a2f8dadc1beecd1f0b84e8c01078ebb75}{data}},\ 1,\ img.\mbox{\hyperlink{structastc__compressed__image_ac18330848346858e41c3f9464deacb0f}{data\_len}},\ wf);}
\DoxyCodeLine{01424\ \ \ \ \ fclose(wf);}
\DoxyCodeLine{01425\ }
\DoxyCodeLine{01426\ \ \ \ \ \textcolor{keywordflow}{if}\ (actual\ !=\ expected)}
\DoxyCodeLine{01427\ \ \ \ \ \{}
\DoxyCodeLine{01428\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{01429\ \ \ \ \ \}}
\DoxyCodeLine{01430\ }
\DoxyCodeLine{01431\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01432\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=294pt]{astcenccli__internal_8h_a3e674d4952496a98a942815392b1a3a5_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a3e674d4952496a98a942815392b1a3a5_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a263b2ab9e4335fc13f801ba569eed939}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!store\_ncimage@{store\_ncimage}}
\index{store\_ncimage@{store\_ncimage}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{store\_ncimage()}{store\_ncimage()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a263b2ab9e4335fc13f801ba569eed939} 
bool store\+\_\+ncimage (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}}]{img}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{filename}{, }\item[{int}]{y\+\_\+flip}{}\end{DoxyParamCaption})}



Save an uncompressed image. 


\begin{DoxyParams}{매개변수}
{\em img} & The source data for the image. \\
\hline
{\em filename} & The name of the file to save. \\
\hline
{\em y\+\_\+flip} & Should the image be vertically flipped?\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
{\ttfamily true} if the image saved OK, {\ttfamily false} on error. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image__load__store_8cpp_source}{astcenccli\+\_\+image\+\_\+load\+\_\+store.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image__load__store_8cpp_source_l02405}{2405}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{02409\ \ \ \{}
\DoxyCodeLine{02410\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ eptr\ =\ strrchr(filename,\ \textcolor{charliteral}{'.'});}
\DoxyCodeLine{02411\ \ \ \ \ \textcolor{keywordflow}{if}\ (!eptr)}
\DoxyCodeLine{02412\ \ \ \ \ \{}
\DoxyCodeLine{02413\ \ \ \ \ \ \ \ \ eptr\ =\ \textcolor{stringliteral}{"{}.ktx"{}};\ \textcolor{comment}{//\ use\ KTX\ file\ format\ if\ we\ don't\ have\ an\ ending.}}
\DoxyCodeLine{02414\ \ \ \ \ \}}
\DoxyCodeLine{02415\ }
\DoxyCodeLine{02416\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{astcenccli__image__load__store_8cpp_a8923fb63f80b47dc81fc5c2d11ae1248}{storer\_descr\_count}};\ i++)}
\DoxyCodeLine{02417\ \ \ \ \ \{}
\DoxyCodeLine{02418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (strcmp(eptr,\ storer\_descs[i].\mbox{\hyperlink{astcenccli__image__load__store_8cpp_aeb6dc6b73a14c055f8f9e8542959d57d}{ending1}})\ ==\ 0}
\DoxyCodeLine{02419\ \ \ \ \ \ \ \ \ \ ||\ strcmp(eptr,\ storer\_descs[i].\mbox{\hyperlink{astcenccli__image__load__store_8cpp_a2cfda059378558e8eaf1877eb042c7c1}{ending2}})\ ==\ 0)}
\DoxyCodeLine{02420\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02421\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ storer\_descs[i].storer\_func(output\_image,\ filename,\ y\_flip);}
\DoxyCodeLine{02422\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02423\ \ \ \ \ \}}
\DoxyCodeLine{02424\ }
\DoxyCodeLine{02425\ \ \ \ \ \textcolor{comment}{//\ Should\ never\ reach\ here\ -\/\ get\_output\_filename\_enforced\_bitness\ should}}
\DoxyCodeLine{02426\ \ \ \ \ \textcolor{comment}{//\ have\ acted\ as\ a\ preflight\ check}}
\DoxyCodeLine{02427\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{02428\ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a263b2ab9e4335fc13f801ba569eed939_icgraph}
\end{center}
\end{figure}
\Hypertarget{astcenccli__internal_8h_a9706acc840e996830702a831d846559c}\index{astcenccli\_internal.h@{astcenccli\_internal.h}!unorm8x4\_array\_from\_astc\_img@{unorm8x4\_array\_from\_astc\_img}}
\index{unorm8x4\_array\_from\_astc\_img@{unorm8x4\_array\_from\_astc\_img}!astcenccli\_internal.h@{astcenccli\_internal.h}}
\doxysubsubsection{\texorpdfstring{unorm8x4\_array\_from\_astc\_img()}{unorm8x4\_array\_from\_astc\_img()}}
{\footnotesize\ttfamily \label{astcenccli__internal_8h_a9706acc840e996830702a831d846559c} 
uint8\+\_\+t \texorpdfstring{$\ast$}{*} unorm8x4\+\_\+array\+\_\+from\+\_\+astc\+\_\+img (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structastcenc__image}{astcenc\+\_\+image}} \texorpdfstring{$\ast$}{*}}]{img}{, }\item[{bool}]{y\+\_\+flip}{}\end{DoxyParamCaption})}



Create a flattened RGBA UNORM8 data array from an image structure. 

The returned data array is allocated with {\ttfamily new}\mbox{[}\mbox{]} and must be freed with a {\ttfamily delete}\mbox{[}\mbox{]} call.


\begin{DoxyParams}{매개변수}
{\em img} & The input image. \\
\hline
{\em y\+\_\+flip} & Should the data in the array be Y flipped?\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
The data array. 
\end{DoxyReturn}


\mbox{\hyperlink{astcenccli__image_8cpp_source}{astcenccli\+\_\+image.\+cpp}} 파일의 \mbox{\hyperlink{astcenccli__image_8cpp_source_l00307}{307}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00310\ \ \ \{}
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_x\ =\ img-\/>\mbox{\hyperlink{structastcenc__image_a8bb8eebb59215778176674951c6da70a}{dim\_x}};}
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ dim\_y\ =\ img-\/>\mbox{\hyperlink{structastcenc__image_a3a62fbbc3a16a390eca3b03b6e489750}{dim\_y}};}
\DoxyCodeLine{00313\ \ \ \ \ uint8\_t*\ buf\ =\ \textcolor{keyword}{new}\ uint8\_t[4\ *\ dim\_x\ *\ dim\_y];}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{keywordflow}{if}\ (img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aa91ac7b6329d0a39c879dff7a1bcdf759}{ASTCENC\_TYPE\_U8}})}
\DoxyCodeLine{00316\ \ \ \ \ \{}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ uint8\_t*\ data8\ =\ \textcolor{keyword}{static\_cast<}uint8\_t*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[0]);}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ ymod\ =\ y\_flip\ ?\ dim\_y\ -\/\ y\ -\/\ 1\ :\ y;}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t*\ dst\ =\ buf\ +\ y\ *\ dim\_x\ *\ 4;}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ \ \ \ ]\ =\ data8[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ \ \ \ )];}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 1]\ =\ data8[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 1)];}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 2]\ =\ data8[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 2)];}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 3]\ =\ data8[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 3)];}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00331\ \ \ \ \ \}}
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aad39e16b7f2e55ed676ce400619f0759d}{ASTCENC\_TYPE\_F16}})}
\DoxyCodeLine{00333\ \ \ \ \ \{}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ uint16\_t*\ data16\ =\ \textcolor{keyword}{static\_cast<}uint16\_t*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[0]);}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ ymod\ =\ y\_flip\ ?\ dim\_y\ -\/\ y\ -\/\ 1\ :\ y;}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t*\ dst\ =\ buf\ +\ y\ *\ dim\_x\ *\ 4;}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvint4}{vint4}}\ colori(}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ \ \ \ )],}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 1)],}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 2)],}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data16[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 3)]}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structvfloat4}{vfloat4}}\ color\ =\ \mbox{\hyperlink{astcenc__vecmathlib__neon__4_8h_afd7aa2069bdf377067c3abaca1256432}{float16\_to\_float}}(colori);}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ae91c0bb0ebd82ed2a7fa7aa915f6e76e}{clamp}}(0.0f,\ 1.0f,\ color)\ *\ 255.0f;}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ colori\ =\ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a598d6ea3ba27a788b12341a5263c7881}{float\_to\_int\_rtn}}(color);}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_a98f7a50685f56b5c84d1c760fa037d6d}{pack\_low\_bytes}}(colori);}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{astcenc__vecmathlib__avx2__8_8h_ac55f9ffdc41bee5d274cb6433809fefc}{store\_nbytes}}(colori,\ dst\ +\ 4\ *\ x);}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00357\ \ \ \ \ \}}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{comment}{//\ if\ (img-\/>data\_type\ ==\ ASTCENC\_TYPE\_F32)}}
\DoxyCodeLine{00359\ \ \ \ \ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ assert(img-\/>\mbox{\hyperlink{structastcenc__image_a5ce29ab112fff72151cbffcb3c8fdb16}{data\_type}}\ ==\ \mbox{\hyperlink{astcenc_8h_a7aeb732fb3426e390fa669957d7a109aaf996e38de0e0ac57175c09da275c6062}{ASTCENC\_TYPE\_F32}});}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ data32\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}*\textcolor{keyword}{>}(img-\/>\mbox{\hyperlink{structastcenc__image_ac2487bc635b3c9eced65f2c551e759f2}{data}}[0]);}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ dim\_y;\ y++)}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ ymod\ =\ y\_flip\ ?\ dim\_y\ -\/\ y\ -\/\ 1\ :\ y;}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t*\ dst\ =\ buf\ +\ y\ *\ dim\_x\ *\ 4;}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ dim\_x;\ x++)}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ \ \ \ ]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(\mbox{\hyperlink{namespaceastc_ac60307af42a98d70a956170894e29e9e}{astc::clamp1f}}(data32[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ \ \ \ )])\ *\ 255.0f));}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 1]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(\mbox{\hyperlink{namespaceastc_ac60307af42a98d70a956170894e29e9e}{astc::clamp1f}}(data32[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 1)])\ *\ 255.0f));}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 2]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(\mbox{\hyperlink{namespaceastc_ac60307af42a98d70a956170894e29e9e}{astc::clamp1f}}(data32[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 2)])\ *\ 255.0f));}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dst[4\ *\ x\ +\ 3]\ =\ \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceastc_a455f4a304ea7dcdd8fd0de030cbdbfb4}{astc::flt2int\_rtn}}(\mbox{\hyperlink{namespaceastc_ac60307af42a98d70a956170894e29e9e}{astc::clamp1f}}(data32[(4\ *\ dim\_x\ *\ ymod)\ +\ (4\ *\ x\ +\ 3)])\ *\ 255.0f));}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00375\ \ \ \ \ \}}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{keywordflow}{return}\ buf;}
\DoxyCodeLine{00378\ \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{astcenccli__internal_8h_a9706acc840e996830702a831d846559c_cgraph}
\end{center}
\end{figure}
