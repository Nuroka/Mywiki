\doxysection{astcenc\+\_\+internal\+\_\+entry.\+h}
\hypertarget{astcenc__internal__entry_8h_source}{}\label{astcenc__internal__entry_8h_source}\index{C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-\/encoder-\/main/Source/astcenc\_internal\_entry.h@{C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-\/encoder-\/main/Source/astcenc\_internal\_entry.h}}
\mbox{\hyperlink{astcenc__internal__entry_8h}{이 파일의 문서화 페이지로 가기}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00001}00001\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ Apache-\/2.0}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00002}00002\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00003}00003\ \textcolor{comment}{//\ Copyright\ 2011-\/2024\ Arm\ Limited}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00004}00004\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00005}00005\ \textcolor{comment}{//\ Licensed\ under\ the\ Apache\ License,\ Version\ 2.0\ (the\ "{}License"{});\ you\ may\ not}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00006}00006\ \textcolor{comment}{//\ use\ this\ file\ except\ in\ compliance\ with\ the\ License.\ You\ may\ obtain\ a\ copy}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00007}00007\ \textcolor{comment}{//\ of\ the\ License\ at:}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00008}00008\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00009}00009\ \textcolor{comment}{//\ \ \ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00010}00010\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00011}00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00012}00012\ \textcolor{comment}{//\ distributed\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,\ WITHOUT}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00013}00013\ \textcolor{comment}{//\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.\ See\ the}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00014}00014\ \textcolor{comment}{//\ License\ for\ the\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00015}00015\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00016}00016\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00026}00026\ \textcolor{preprocessor}{\#ifndef\ ASTCENC\_INTERNAL\_ENTRY\_INCLUDED}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00027}00027\ \textcolor{preprocessor}{\#define\ ASTCENC\_INTERNAL\_ENTRY\_INCLUDED}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00029}00029\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00030}00030\ \textcolor{preprocessor}{\#include\ <condition\_variable>}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00031}00031\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00032}00032\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00034}00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{astcenc__internal_8h}{astcenc\_internal.h}}"{}}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00036}00036\ \textcolor{comment}{/*\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00037}00037\ \textcolor{comment}{\ \ Parallel\ execution\ control}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00038}00038\ \textcolor{comment}{============================================================================\ */}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00097}\mbox{\hyperlink{class_parallel_manager}{00097}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_parallel_manager}{ParallelManager}}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00098}00098\ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00099}00099\ \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00101}\mbox{\hyperlink{class_parallel_manager_a78c2b0d70371da3256f106fcbf0e0de8}{00101}}\ \ \ \ \ std::mutex\ \mbox{\hyperlink{class_parallel_manager_a78c2b0d70371da3256f106fcbf0e0de8}{m\_lock}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00102}00102\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00104}\mbox{\hyperlink{class_parallel_manager_a7c45a88ba849131d1f1b480d6bb5c4a0}{00104}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_parallel_manager_a7c45a88ba849131d1f1b480d6bb5c4a0}{m\_init\_done}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00107}\mbox{\hyperlink{class_parallel_manager_a7bc9946d3d066f031eac30e2946a691e}{00107}}\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_parallel_manager_a7bc9946d3d066f031eac30e2946a691e}{m\_term\_done}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00110}\mbox{\hyperlink{class_parallel_manager_aa80d8c651189bd0226bcd5191c237600}{00110}}\ \ \ \ \ std::condition\_variable\ \mbox{\hyperlink{class_parallel_manager_aa80d8c651189bd0226bcd5191c237600}{m\_complete}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00113}\mbox{\hyperlink{class_parallel_manager_a76cdf9b5d6096679945bbe0bd9b44bb2}{00113}}\ \ \ \ \ std::atomic<unsigned\ int>\ \mbox{\hyperlink{class_parallel_manager_a76cdf9b5d6096679945bbe0bd9b44bb2}{m\_start\_count}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00116}\mbox{\hyperlink{class_parallel_manager_ade2c969d0ba13af71389a2d948d9c097}{00116}}\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_parallel_manager_ade2c969d0ba13af71389a2d948d9c097}{m\_done\_count}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00119}\mbox{\hyperlink{class_parallel_manager_ac6bf316b25d3c2c70a2c8a6fb8105226}{00119}}\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_parallel_manager_ac6bf316b25d3c2c70a2c8a6fb8105226}{m\_task\_count}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00122}\mbox{\hyperlink{class_parallel_manager_aab2e7503263926e0bbd3d801471d19f4}{00122}}\ \ \ \ \ \mbox{\hyperlink{astcenc_8h_ac79f6173b76e98afecc86b24412e6427}{astcenc\_progress\_callback}}\ \mbox{\hyperlink{class_parallel_manager_aab2e7503263926e0bbd3d801471d19f4}{m\_callback}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00125}\mbox{\hyperlink{class_parallel_manager_ac5332fbb1f0efebbc94ed9e686c9f95b}{00125}}\ \ \ \ \ std::mutex\ \mbox{\hyperlink{class_parallel_manager_ac5332fbb1f0efebbc94ed9e686c9f95b}{m\_callback\_lock}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00126}00126\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00128}\mbox{\hyperlink{class_parallel_manager_a8bd79d543760c771790410d854e749e8}{00128}}\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_parallel_manager_a8bd79d543760c771790410d854e749e8}{m\_callback\_min\_diff}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00129}00129\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00131}\mbox{\hyperlink{class_parallel_manager_abbdfb2955b00fc8efa01b4fca87b4185}{00131}}\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_parallel_manager_abbdfb2955b00fc8efa01b4fca87b4185}{m\_callback\_last\_value}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00132}00132\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00133}00133\ \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00135}\mbox{\hyperlink{class_parallel_manager_a1e02cb39549d6da06d04872d6f800af1}{00135}}\ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_a1e02cb39549d6da06d04872d6f800af1}{ParallelManager}}()}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00136}00136\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00137}00137\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_a9dfbf8571d608ce0d4196ac32184eea5}{reset}}();}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00138}00138\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00139}00139\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00146}\mbox{\hyperlink{class_parallel_manager_a9dfbf8571d608ce0d4196ac32184eea5}{00146}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_parallel_manager_a9dfbf8571d608ce0d4196ac32184eea5}{reset}}()}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00147}00147\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00148}00148\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_a7c45a88ba849131d1f1b480d6bb5c4a0}{m\_init\_done}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00149}00149\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_a7bc9946d3d066f031eac30e2946a691e}{m\_term\_done}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00150}00150\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_a76cdf9b5d6096679945bbe0bd9b44bb2}{m\_start\_count}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00151}00151\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_ade2c969d0ba13af71389a2d948d9c097}{m\_done\_count}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00152}00152\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_ac6bf316b25d3c2c70a2c8a6fb8105226}{m\_task\_count}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00153}00153\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_aab2e7503263926e0bbd3d801471d19f4}{m\_callback}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00154}00154\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_abbdfb2955b00fc8efa01b4fca87b4185}{m\_callback\_last\_value}}\ =\ 0.0f;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00155}00155\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_a8bd79d543760c771790410d854e749e8}{m\_callback\_min\_diff}}\ =\ 1.0f;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00156}00156\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00157}00157\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00167}\mbox{\hyperlink{class_parallel_manager_af5c7b0a9139c6f1709ead3f135f0a861}{00167}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_parallel_manager_af5c7b0a9139c6f1709ead3f135f0a861}{init}}(std::function<\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}(\textcolor{keywordtype}{void})>\ init\_func)}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00168}00168\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00169}00169\ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lck(\mbox{\hyperlink{class_parallel_manager_a78c2b0d70371da3256f106fcbf0e0de8}{m\_lock}});}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00170}00170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_parallel_manager_a7c45a88ba849131d1f1b480d6bb5c4a0}{m\_init\_done}})}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00171}00171\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00172}00172\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_ac6bf316b25d3c2c70a2c8a6fb8105226}{m\_task\_count}}\ =\ init\_func();}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_a7c45a88ba849131d1f1b480d6bb5c4a0}{m\_init\_done}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00174}00174\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00175}00175\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00176}00176\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00186}\mbox{\hyperlink{class_parallel_manager_a262e4af2afe0b0e458cde249d653c213}{00186}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_parallel_manager_a262e4af2afe0b0e458cde249d653c213}{init}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ task\_count,\ \mbox{\hyperlink{astcenc_8h_ac79f6173b76e98afecc86b24412e6427}{astcenc\_progress\_callback}}\ callback)}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00187}00187\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00188}00188\ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lck(\mbox{\hyperlink{class_parallel_manager_a78c2b0d70371da3256f106fcbf0e0de8}{m\_lock}});}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00189}00189\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_parallel_manager_a7c45a88ba849131d1f1b480d6bb5c4a0}{m\_init\_done}})}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00190}00190\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00191}00191\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_aab2e7503263926e0bbd3d801471d19f4}{m\_callback}}\ =\ callback;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00192}00192\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_ac6bf316b25d3c2c70a2c8a6fb8105226}{m\_task\_count}}\ =\ task\_count;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00193}00193\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_a7c45a88ba849131d1f1b480d6bb5c4a0}{m\_init\_done}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00195}00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Report\ every\ 1\%\ or\ 4096\ blocks,\ whichever\ is\ larger,\ to\ avoid\ callback\ overhead}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00196}00196\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ min\_diff\ =\ (4096.0f\ /\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(task\_count))\ *\ 100.0f;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_a8bd79d543760c771790410d854e749e8}{m\_callback\_min\_diff}}\ =\ \mbox{\hyperlink{namespaceastc_a83a55552d03399cdff6cf2fed8312c9f}{astc::max}}(min\_diff,\ 1.0f);}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00198}00198\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00199}00199\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00200}00200\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00211}\mbox{\hyperlink{class_parallel_manager_ae0bb955f3fa52427590633355f0da01c}{00211}}\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_parallel_manager_ae0bb955f3fa52427590633355f0da01c}{get\_task\_assignment}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ granule,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\&\ count)}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00212}00212\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00213}00213\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ base\ =\ \mbox{\hyperlink{class_parallel_manager_a76cdf9b5d6096679945bbe0bd9b44bb2}{m\_start\_count}}.fetch\_add(granule,\ std::memory\_order\_relaxed);}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00214}00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (base\ >=\ \mbox{\hyperlink{class_parallel_manager_ac6bf316b25d3c2c70a2c8a6fb8105226}{m\_task\_count}})}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00215}00215\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ count\ =\ 0;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00217}00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00218}00218\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00219}00219\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00220}00220\ \ \ \ \ \ \ \ \ count\ =\ \mbox{\hyperlink{namespaceastc_af78c0d31374aa9923633a3a2abf8d738}{astc::min}}(\mbox{\hyperlink{class_parallel_manager_ac6bf316b25d3c2c70a2c8a6fb8105226}{m\_task\_count}}\ -\/\ base,\ granule);}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00221}00221\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ base;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00222}00222\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00223}00223\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00232}\mbox{\hyperlink{class_parallel_manager_a5236e474ddffa7f805e425f1dc660d1c}{00232}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_parallel_manager_a5236e474ddffa7f805e425f1dc660d1c}{complete\_task\_assignment}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ count)}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00233}00233\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00234}00234\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note:\ m\_done\_count\ cannot\ use\ an\ atomic\ without\ the\ mutex;\ this\ has\ a\ race\ between\ the}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00235}00235\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ update\ here\ and\ the\ wait()\ for\ other\ threads}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ local\_count;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00237}00237\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ local\_last\_value;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00238}00238\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00239}00239\ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ lck(\mbox{\hyperlink{class_parallel_manager_a78c2b0d70371da3256f106fcbf0e0de8}{m\_lock}});}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00240}00240\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_ade2c969d0ba13af71389a2d948d9c097}{m\_done\_count}}\ +=\ count;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ \ \ local\_count\ =\ \mbox{\hyperlink{class_parallel_manager_ade2c969d0ba13af71389a2d948d9c097}{m\_done\_count}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00242}00242\ \ \ \ \ \ \ \ \ \ \ \ \ local\_last\_value\ =\ \mbox{\hyperlink{class_parallel_manager_abbdfb2955b00fc8efa01b4fca87b4185}{m\_callback\_last\_value}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00243}00243\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00244}00244\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_parallel_manager_ade2c969d0ba13af71389a2d948d9c097}{m\_done\_count}}\ ==\ \mbox{\hyperlink{class_parallel_manager_ac6bf316b25d3c2c70a2c8a6fb8105226}{m\_task\_count}})}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00245}00245\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00246}00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ensure\ the\ progress\ bar\ hits\ 100\%}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00247}00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_parallel_manager_aab2e7503263926e0bbd3d801471d19f4}{m\_callback}})}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00248}00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00249}00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ cblck(\mbox{\hyperlink{class_parallel_manager_ac5332fbb1f0efebbc94ed9e686c9f95b}{m\_callback\_lock}});}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00250}00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_aab2e7503263926e0bbd3d801471d19f4}{m\_callback}}(100.0f);}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00251}00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_abbdfb2955b00fc8efa01b4fca87b4185}{m\_callback\_last\_value}}\ =\ 100.0f;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00252}00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00253}00253\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00254}00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lck.unlock();}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00255}00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_aa80d8c651189bd0226bcd5191c237600}{m\_complete}}.notify\_all();}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00256}00256\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00257}00257\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00258}00258\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00259}00259\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Process\ progress\ callback\ if\ we\ have\ one}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00260}00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_parallel_manager_aab2e7503263926e0bbd3d801471d19f4}{m\_callback}})}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00261}00261\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00262}00262\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Initial\ lockless\ test\ -\/\ have\ we\ progressed\ enough\ to\ emit?}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00263}00263\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ num\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(local\_count);}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00264}00264\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ den\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(\mbox{\hyperlink{class_parallel_manager_ac6bf316b25d3c2c70a2c8a6fb8105226}{m\_task\_count}});}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00265}00265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ this\_value\ =\ \ (num\ /\ den)\ *\ 100.0f;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00266}00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ report\_test\ =\ (this\_value\ -\/\ local\_last\_value)\ >\ \mbox{\hyperlink{class_parallel_manager_a8bd79d543760c771790410d854e749e8}{m\_callback\_min\_diff}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00267}00267\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00268}00268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Recheck\ under\ lock,\ because\ another\ thread\ might\ report\ first}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00269}00269\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (report\_test)}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00270}00270\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00271}00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ cblck(\mbox{\hyperlink{class_parallel_manager_ac5332fbb1f0efebbc94ed9e686c9f95b}{m\_callback\_lock}});}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00272}00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ report\_retest\ =\ (this\_value\ -\/\ \mbox{\hyperlink{class_parallel_manager_abbdfb2955b00fc8efa01b4fca87b4185}{m\_callback\_last\_value}})\ >\ \mbox{\hyperlink{class_parallel_manager_a8bd79d543760c771790410d854e749e8}{m\_callback\_min\_diff}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00273}00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (report\_retest)}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00274}00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00275}00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_aab2e7503263926e0bbd3d801471d19f4}{m\_callback}}(this\_value);}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00276}00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_abbdfb2955b00fc8efa01b4fca87b4185}{m\_callback\_last\_value}}\ =\ this\_value;}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00277}00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00278}00278\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00279}00279\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00280}00280\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00281}00281\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00285}\mbox{\hyperlink{class_parallel_manager_afdfb2d5fce334f335edb01c8106e784c}{00285}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_parallel_manager_afdfb2d5fce334f335edb01c8106e784c}{wait}}()}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00286}00286\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00287}00287\ \ \ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ lck(\mbox{\hyperlink{class_parallel_manager_a78c2b0d70371da3256f106fcbf0e0de8}{m\_lock}});}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00288}00288\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_aa80d8c651189bd0226bcd5191c237600}{m\_complete}}.wait(lck,\ [\textcolor{keyword}{this}]\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_parallel_manager_ade2c969d0ba13af71389a2d948d9c097}{m\_done\_count}}\ ==\ \mbox{\hyperlink{class_parallel_manager_ac6bf316b25d3c2c70a2c8a6fb8105226}{m\_task\_count}};\ \});}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00289}00289\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00290}00290\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00300}\mbox{\hyperlink{class_parallel_manager_aa4855579e8b5efa4190e1f30db498300}{00300}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_parallel_manager_aa4855579e8b5efa4190e1f30db498300}{term}}(std::function<\textcolor{keywordtype}{void}(\textcolor{keywordtype}{void})>\ term\_func)}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00301}00301\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00302}00302\ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lck(\mbox{\hyperlink{class_parallel_manager_a78c2b0d70371da3256f106fcbf0e0de8}{m\_lock}});}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00303}00303\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_parallel_manager_a7bc9946d3d066f031eac30e2946a691e}{m\_term\_done}})}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00304}00304\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00305}00305\ \ \ \ \ \ \ \ \ \ \ \ \ term\_func();}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00306}00306\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_parallel_manager_a7bc9946d3d066f031eac30e2946a691e}{m\_term\_done}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00307}00307\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00308}00308\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00309}00309\ \};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00310}00310\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00314}\mbox{\hyperlink{structastcenc__context}{00314}}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structastcenc__context}{astcenc\_context}}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00315}00315\ \{}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00317}\mbox{\hyperlink{structastcenc__context_a0663f3f5721836ebad5c00941cbc1055}{00317}}\ \ \ \ \ \mbox{\hyperlink{structastcenc__contexti}{astcenc\_contexti}}\ \mbox{\hyperlink{structastcenc__context_a0663f3f5721836ebad5c00941cbc1055}{context}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00318}00318\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00319}00319\ \textcolor{preprocessor}{\#if\ !defined(ASTCENC\_DECOMPRESS\_ONLY)}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00321}\mbox{\hyperlink{structastcenc__context_a0b6344562547979fc8f4a4fe76e7d08d}{00321}}\ \ \ \ \ \mbox{\hyperlink{class_parallel_manager}{ParallelManager}}\ \mbox{\hyperlink{structastcenc__context_a0b6344562547979fc8f4a4fe76e7d08d}{manage\_avg}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00322}00322\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00324}\mbox{\hyperlink{structastcenc__context_a4dd4ca690cccb0567a22f0d3d81b302d}{00324}}\ \ \ \ \ \mbox{\hyperlink{class_parallel_manager}{ParallelManager}}\ \mbox{\hyperlink{structastcenc__context_a4dd4ca690cccb0567a22f0d3d81b302d}{manage\_compress}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00325}00325\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00326}00326\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00328}\mbox{\hyperlink{structastcenc__context_aaef3b311610332edcbf1b0575b4c9cb2}{00328}}\ \ \ \ \ \mbox{\hyperlink{class_parallel_manager}{ParallelManager}}\ \mbox{\hyperlink{structastcenc__context_aaef3b311610332edcbf1b0575b4c9cb2}{manage\_decompress}};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00329}00329\ \};}
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00330}00330\ }
\DoxyCodeLine{\Hypertarget{astcenc__internal__entry_8h_source_l00331}00331\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
