<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project1: C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-encoder-main/Source/astcenc_find_best_partitioning.cpp 파일 참조</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Project1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('astcenc__find__best__partitioning_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">타입정의</a> &#124;
<a href="#func-members">함수</a>  </div>
  <div class="headertitle"><div class="title">astcenc_find_best_partitioning.cpp 파일 참조</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;limits&gt;</code><br />
<code>#include &quot;<a class="el" href="astcenc__internal_8h_source.html">astcenc_internal.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
astcenc_find_best_partitioning.cpp에 대한 include 의존 그래프</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp__incl.png" border="0" usemap="#a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__find__best__partitioning_8cpp" alt=""/></div>
<map name="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__find__best__partitioning_8cpp" id="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__find__best__partitioning_8cpp">
<area shape="rect" title=" " alt="" coords="95,5,271,89"/>
<area shape="rect" title=" " alt="" coords="5,211,59,236"/>
<area shape="poly" title=" " alt="" coords="149,91,53,202,49,199,145,88"/>
<area shape="rect" href="astcenc__internal_8h.html" title=" " alt="" coords="203,137,331,163"/>
<area shape="poly" title=" " alt="" coords="219,88,250,125,246,129,215,91"/>
<area shape="poly" title=" " alt="" coords="230,165,73,212,72,207,228,160"/>
<area shape="rect" title=" " alt="" coords="627,445,701,471"/>
<area shape="poly" title=" " alt="" coords="331,148,409,156,453,164,498,176,541,194,581,217,617,246,645,283,661,321,669,362,671,400,670,432,664,431,665,400,663,362,656,322,640,285,613,250,578,221,539,198,496,181,452,169,408,161,331,154"/>
<area shape="rect" title=" " alt="" coords="105,284,169,309"/>
<area shape="poly" title=" " alt="" coords="204,163,159,181,139,195,124,212,118,226,118,241,127,271,122,272,112,241,113,225,119,209,136,191,156,176,202,158"/>
<area shape="rect" title=" " alt="" coords="225,284,287,309"/>
<area shape="poly" title=" " alt="" coords="281,161,306,194,313,215,311,237,298,259,283,276,279,273,294,255,305,235,307,216,301,197,277,165"/>
<area shape="rect" title=" " alt="" coords="237,211,297,236"/>
<area shape="poly" title=" " alt="" coords="269,163,269,197,264,197,264,163"/>
<area shape="rect" href="astcenc_8h.html" title=" " alt="" coords="134,211,213,236"/>
<area shape="poly" title=" " alt="" coords="253,165,201,204,198,200,250,161"/>
<area shape="rect" href="astcenc__mathlib_8h.html" title=" " alt="" coords="372,211,500,236"/>
<area shape="poly" title=" " alt="" coords="295,160,397,203,395,208,293,165"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html" title=" " alt="" coords="484,284,631,309"/>
<area shape="poly" title=" " alt="" coords="331,150,375,155,423,166,470,183,514,209,538,238,553,269,548,271,534,240,510,213,468,188,421,171,374,160,330,155"/>
<area shape="poly" title=" " alt="" coords="170,238,152,273,147,270,165,235"/>
<area shape="poly" title=" " alt="" coords="188,234,234,273,230,277,185,238"/>
<area shape="poly" title=" " alt="" coords="408,239,299,281,297,276,406,234"/>
<area shape="rect" title=" " alt="" coords="394,284,459,309"/>
<area shape="poly" title=" " alt="" coords="437,237,433,271,427,270,432,236"/>
<area shape="rect" title=" " alt="" coords="311,284,369,309"/>
<area shape="poly" title=" " alt="" coords="422,238,368,278,365,273,419,234"/>
<area shape="poly" title=" " alt="" coords="457,234,527,275,525,279,454,238"/>
<area shape="rect" href="astcenc__vecmathlib__none__4_8h.html" title=" " alt="" coords="495,357,631,397"/>
<area shape="poly" title=" " alt="" coords="561,309,563,343,558,344,555,310"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html" title=" " alt="" coords="335,357,471,397"/>
<area shape="poly" title=" " alt="" coords="536,312,453,353,451,349,533,307"/>
<area shape="poly" title=" " alt="" coords="589,395,639,434,636,439,586,400"/>
<area shape="rect" title=" " alt="" coords="378,445,435,471"/>
<area shape="poly" title=" " alt="" coords="526,400,443,441,441,437,524,395"/>
<area shape="rect" title=" " alt="" coords="535,445,596,471"/>
<area shape="poly" title=" " alt="" coords="566,397,567,431,562,431,561,398"/>
<area shape="rect" title=" " alt="" coords="460,445,511,471"/>
<area shape="poly" title=" " alt="" coords="546,399,508,437,504,434,542,396"/>
<area shape="poly" title=" " alt="" coords="406,397,408,431,403,432,401,398"/>
</map>
</div>
</div>
<p><a href="astcenc__find__best__partitioning_8cpp_source.html">이 파일의 소스 코드 페이지로 가기</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
타입정의</h2></td></tr>
<tr class="memitem:a046ffcca4b17ecd136a86a06bde0b674" id="r_a046ffcca4b17ecd136a86a06bde0b674"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a046ffcca4b17ecd136a86a06bde0b674">mismatch_dispatch</a> = unsigned int (*)(const uint64_t*, const uint64_t*)</td></tr>
<tr class="separator:a046ffcca4b17ecd136a86a06bde0b674"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
함수</h2></td></tr>
<tr class="memitem:acfcac2ef43cb03621ea25d3f6673c19e" id="r_acfcac2ef43cb03621ea25d3f6673c19e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acfcac2ef43cb03621ea25d3f6673c19e">kmeans_init</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, unsigned int texel_count, unsigned int partition_count, <a class="el" href="structvfloat4.html">vfloat4</a> cluster_centers[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>])</td></tr>
<tr class="memdesc:acfcac2ef43cb03621ea25d3f6673c19e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions for finding best partition for a block.  <br /></td></tr>
<tr class="separator:acfcac2ef43cb03621ea25d3f6673c19e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48c3e037a653156f4c4d4643f267ba3f" id="r_a48c3e037a653156f4c4d4643f267ba3f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48c3e037a653156f4c4d4643f267ba3f">kmeans_assign</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, unsigned int texel_count, unsigned int partition_count, const <a class="el" href="structvfloat4.html">vfloat4</a> cluster_centers[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>], uint8_t partition_of_texel[<a class="el" href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a>])</td></tr>
<tr class="memdesc:a48c3e037a653156f4c4d4643f267ba3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assign texels to clusters, based on a set of chosen center points.  <br /></td></tr>
<tr class="separator:a48c3e037a653156f4c4d4643f267ba3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf130a5dab418b762b9ad6d2db920c9f" id="r_acf130a5dab418b762b9ad6d2db920c9f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acf130a5dab418b762b9ad6d2db920c9f">kmeans_update</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, unsigned int texel_count, unsigned int partition_count, <a class="el" href="structvfloat4.html">vfloat4</a> cluster_centers[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>], const uint8_t partition_of_texel[<a class="el" href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a>])</td></tr>
<tr class="memdesc:acf130a5dab418b762b9ad6d2db920c9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute new cluster centers based on their center of gravity.  <br /></td></tr>
<tr class="separator:acf130a5dab418b762b9ad6d2db920c9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c9cd07ba65d36a11ebdd0363f3a3550" id="r_a6c9cd07ba65d36a11ebdd0363f3a3550"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c9cd07ba65d36a11ebdd0363f3a3550">partition_mismatch2</a> (const uint64_t a[2], const uint64_t b[2])</td></tr>
<tr class="memdesc:a6c9cd07ba65d36a11ebdd0363f3a3550"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute bit-mismatch for partitioning in 2-partition mode.  <br /></td></tr>
<tr class="separator:a6c9cd07ba65d36a11ebdd0363f3a3550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9acad2d527657aaa0da1c424db437e37" id="r_a9acad2d527657aaa0da1c424db437e37"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9acad2d527657aaa0da1c424db437e37">partition_mismatch3</a> (const uint64_t a[3], const uint64_t b[3])</td></tr>
<tr class="memdesc:a9acad2d527657aaa0da1c424db437e37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute bit-mismatch for partitioning in 3-partition mode.  <br /></td></tr>
<tr class="separator:a9acad2d527657aaa0da1c424db437e37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3febec3fce459c429e5c4445c852d3bb" id="r_a3febec3fce459c429e5c4445c852d3bb"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3febec3fce459c429e5c4445c852d3bb">partition_mismatch4</a> (const uint64_t a[4], const uint64_t b[4])</td></tr>
<tr class="memdesc:a3febec3fce459c429e5c4445c852d3bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute bit-mismatch for partitioning in 4-partition mode.  <br /></td></tr>
<tr class="separator:a3febec3fce459c429e5c4445c852d3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4567304c86889e62a6cf2b5a391d6260" id="r_a4567304c86889e62a6cf2b5a391d6260"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4567304c86889e62a6cf2b5a391d6260">count_partition_mismatch_bits</a> (const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd, unsigned int partition_count, const uint64_t bitmaps[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>], uint8_t mismatch_counts[<a class="el" href="astcenc__internal_8h.html#adf3049fd85d49f282c72b012b87a267d">BLOCK_MAX_PARTITIONINGS</a>])</td></tr>
<tr class="memdesc:a4567304c86889e62a6cf2b5a391d6260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count the partition table mismatches vs the data clustering.  <br /></td></tr>
<tr class="separator:a4567304c86889e62a6cf2b5a391d6260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1670adef9a30320320aeb3fa51bb7dc" id="r_ad1670adef9a30320320aeb3fa51bb7dc"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1670adef9a30320320aeb3fa51bb7dc">get_partition_ordering_by_mismatch_bits</a> (unsigned int texel_count, unsigned int partitioning_count, const uint8_t mismatch_count[<a class="el" href="astcenc__internal_8h.html#adf3049fd85d49f282c72b012b87a267d">BLOCK_MAX_PARTITIONINGS</a>], uint16_t partition_ordering[<a class="el" href="astcenc__internal_8h.html#adf3049fd85d49f282c72b012b87a267d">BLOCK_MAX_PARTITIONINGS</a>])</td></tr>
<tr class="memdesc:ad1670adef9a30320320aeb3fa51bb7dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use counting sort on the mismatch array to sort partition candidates.  <br /></td></tr>
<tr class="separator:ad1670adef9a30320320aeb3fa51bb7dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e88da4b6a389046d10b859ba68a118" id="r_a89e88da4b6a389046d10b859ba68a118"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89e88da4b6a389046d10b859ba68a118">compute_kmeans_partition_ordering</a> (const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, unsigned int partition_count, uint16_t partition_ordering[<a class="el" href="astcenc__internal_8h.html#adf3049fd85d49f282c72b012b87a267d">BLOCK_MAX_PARTITIONINGS</a>])</td></tr>
<tr class="memdesc:a89e88da4b6a389046d10b859ba68a118"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use k-means clustering to compute a partition ordering for a block..  <br /></td></tr>
<tr class="separator:a89e88da4b6a389046d10b859ba68a118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d4cb4068f0c27419e45878261806cac" id="r_a8d4cb4068f0c27419e45878261806cac"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d4cb4068f0c27419e45878261806cac">insert_result</a> (unsigned int max_values, float this_error, unsigned int this_partition, float *best_errors, unsigned int *best_partitions)</td></tr>
<tr class="memdesc:a8d4cb4068f0c27419e45878261806cac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert a partitioning into an order list of results, sorted by error.  <br /></td></tr>
<tr class="separator:a8d4cb4068f0c27419e45878261806cac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7577b3047a3f9f0fe44fd579f5450630" id="r_a7577b3047a3f9f0fe44fd579f5450630"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7577b3047a3f9f0fe44fd579f5450630">find_best_partition_candidates</a> (const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, unsigned int partition_count, unsigned int partition_search_limit, unsigned int best_partitions[<a class="el" href="astcenc__internal_8h.html#a5ac3c00190d37f2011afffd4fe1f95b2">TUNE_MAX_PARTITIONING_CANDIDATES</a>], unsigned int requested_candidates)</td></tr>
<tr class="memdesc:a7577b3047a3f9f0fe44fd579f5450630"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the best set of partitions to trial for a given block.  <br /></td></tr>
<tr class="separator:a7577b3047a3f9f0fe44fd579f5450630"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">타입정의 문서화</h2>
<a id="a046ffcca4b17ecd136a86a06bde0b674" name="a046ffcca4b17ecd136a86a06bde0b674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a046ffcca4b17ecd136a86a06bde0b674">&#9670;&#160;</a></span>mismatch_dispatch</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#a046ffcca4b17ecd136a86a06bde0b674">mismatch_dispatch</a> = unsigned int (*)(const uint64_t*, const uint64_t*)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00355">355</a> 번째 라인에서 정의되었습니다.</p>

</div>
</div>
<h2 class="groupheader">함수 문서화</h2>
<a id="a89e88da4b6a389046d10b859ba68a118" name="a89e88da4b6a389046d10b859ba68a118"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89e88da4b6a389046d10b859ba68a118">&#9670;&#160;</a></span>compute_kmeans_partition_ordering()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int compute_kmeans_partition_ordering </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>partition_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>partition_ordering</em></span>[BLOCK_MAX_PARTITIONINGS]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use k-means clustering to compute a partition ordering for a block.. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">bsd</td><td>The block size information. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_count</td><td>The desired number of partitions in the block. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">partition_ordering</td><td>The list of recommended partition indices, in priority order.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The number of active partitionings in this selection. </dd></dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00458">458</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  463</span>  {</div>
<div class="line"><span class="lineno">  464</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> cluster_centers[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  465</span>    uint8_t texel_partitions[<a class="code hl_variable" href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a>];</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>    <span class="comment">// Use three passes of k-means clustering to partition the block data</span></div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 3; i++)</div>
<div class="line"><span class="lineno">  469</span>    {</div>
<div class="line"><span class="lineno">  470</span>        <span class="keywordflow">if</span> (i == 0)</div>
<div class="line"><span class="lineno">  471</span>        {</div>
<div class="line"><span class="lineno">  472</span>            <a class="code hl_function" href="#acfcac2ef43cb03621ea25d3f6673c19e">kmeans_init</a>(blk, bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>, partition_count, cluster_centers);</div>
<div class="line"><span class="lineno">  473</span>        }</div>
<div class="line"><span class="lineno">  474</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  475</span>        {</div>
<div class="line"><span class="lineno">  476</span>            <a class="code hl_function" href="#acf130a5dab418b762b9ad6d2db920c9f">kmeans_update</a>(blk, bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>, partition_count, cluster_centers, texel_partitions);</div>
<div class="line"><span class="lineno">  477</span>        }</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>        <a class="code hl_function" href="#a48c3e037a653156f4c4d4643f267ba3f">kmeans_assign</a>(blk, bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>, partition_count, cluster_centers, texel_partitions);</div>
<div class="line"><span class="lineno">  480</span>    }</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span>    <span class="comment">// Construct the block bitmaps of texel assignments to each partition</span></div>
<div class="line"><span class="lineno">  483</span>    uint64_t bitmaps[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>] { 0 };</div>
<div class="line"><span class="lineno">  484</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texels_to_process = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>, <a class="code hl_variable" href="astcenc__internal_8h.html#a24bfd76e0fe1130b9741b58cc3e2b675">BLOCK_MAX_KMEANS_TEXELS</a>);</div>
<div class="line"><span class="lineno">  485</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texels_to_process &gt; 0);</div>
<div class="line"><span class="lineno">  486</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texels_to_process; i++)</div>
<div class="line"><span class="lineno">  487</span>    {</div>
<div class="line"><span class="lineno">  488</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx = bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a8bc9e1751fe1a81b9ee33c0925fb8f4f">kmeans_texels</a>[i];</div>
<div class="line"><span class="lineno">  489</span>        bitmaps[texel_partitions[idx]] |= 1ULL &lt;&lt; i;</div>
<div class="line"><span class="lineno">  490</span>    }</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>    <span class="comment">// Count the mismatch between the block and the format&#39;s partition tables</span></div>
<div class="line"><span class="lineno">  493</span>    uint8_t mismatch_counts[<a class="code hl_variable" href="astcenc__internal_8h.html#adf3049fd85d49f282c72b012b87a267d">BLOCK_MAX_PARTITIONINGS</a>];</div>
<div class="line"><span class="lineno">  494</span>    <a class="code hl_function" href="#a4567304c86889e62a6cf2b5a391d6260">count_partition_mismatch_bits</a>(bsd, partition_count, bitmaps, mismatch_counts);</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>    <span class="comment">// Sort the partitions based on the number of mismatched bits</span></div>
<div class="line"><span class="lineno">  497</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="#ad1670adef9a30320320aeb3fa51bb7dc">get_partition_ordering_by_mismatch_bits</a>(</div>
<div class="line"><span class="lineno">  498</span>        texels_to_process,</div>
<div class="line"><span class="lineno">  499</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#aecc5b82b77caa9b3bf69294d06f84e19">partitioning_count_selected</a>[partition_count - 1],</div>
<div class="line"><span class="lineno">  500</span>        mismatch_counts, partition_ordering);</div>
<div class="line"><span class="lineno">  501</span>}</div>
<div class="ttc" id="aastcenc__find__best__partitioning_8cpp_html_a4567304c86889e62a6cf2b5a391d6260"><div class="ttname"><a href="#a4567304c86889e62a6cf2b5a391d6260">count_partition_mismatch_bits</a></div><div class="ttdeci">static void count_partition_mismatch_bits(const block_size_descriptor &amp;bsd, unsigned int partition_count, const uint64_t bitmaps[BLOCK_MAX_PARTITIONS], uint8_t mismatch_counts[BLOCK_MAX_PARTITIONINGS])</div><div class="ttdoc">Count the partition table mismatches vs the data clustering.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__find__best__partitioning_8cpp_source.html#l00365">astcenc_find_best_partitioning.cpp:365</a></div></div>
<div class="ttc" id="aastcenc__find__best__partitioning_8cpp_html_a48c3e037a653156f4c4d4643f267ba3f"><div class="ttname"><a href="#a48c3e037a653156f4c4d4643f267ba3f">kmeans_assign</a></div><div class="ttdeci">static void kmeans_assign(const image_block &amp;blk, unsigned int texel_count, unsigned int partition_count, const vfloat4 cluster_centers[BLOCK_MAX_PARTITIONS], uint8_t partition_of_texel[BLOCK_MAX_TEXELS])</div><div class="ttdoc">Assign texels to clusters, based on a set of chosen center points.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__find__best__partitioning_8cpp_source.html#l00146">astcenc_find_best_partitioning.cpp:146</a></div></div>
<div class="ttc" id="aastcenc__find__best__partitioning_8cpp_html_acf130a5dab418b762b9ad6d2db920c9f"><div class="ttname"><a href="#acf130a5dab418b762b9ad6d2db920c9f">kmeans_update</a></div><div class="ttdeci">static void kmeans_update(const image_block &amp;blk, unsigned int texel_count, unsigned int partition_count, vfloat4 cluster_centers[BLOCK_MAX_PARTITIONS], const uint8_t partition_of_texel[BLOCK_MAX_TEXELS])</div><div class="ttdoc">Compute new cluster centers based on their center of gravity.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__find__best__partitioning_8cpp_source.html#l00210">astcenc_find_best_partitioning.cpp:210</a></div></div>
<div class="ttc" id="aastcenc__find__best__partitioning_8cpp_html_acfcac2ef43cb03621ea25d3f6673c19e"><div class="ttname"><a href="#acfcac2ef43cb03621ea25d3f6673c19e">kmeans_init</a></div><div class="ttdeci">static void kmeans_init(const image_block &amp;blk, unsigned int texel_count, unsigned int partition_count, vfloat4 cluster_centers[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">Functions for finding best partition for a block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__find__best__partitioning_8cpp_source.html#l00060">astcenc_find_best_partitioning.cpp:60</a></div></div>
<div class="ttc" id="aastcenc__find__best__partitioning_8cpp_html_ad1670adef9a30320320aeb3fa51bb7dc"><div class="ttname"><a href="#ad1670adef9a30320320aeb3fa51bb7dc">get_partition_ordering_by_mismatch_bits</a></div><div class="ttdeci">static unsigned int get_partition_ordering_by_mismatch_bits(unsigned int texel_count, unsigned int partitioning_count, const uint8_t mismatch_count[BLOCK_MAX_PARTITIONINGS], uint16_t partition_ordering[BLOCK_MAX_PARTITIONINGS])</div><div class="ttdoc">Use counting sort on the mismatch array to sort partition candidates.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__find__best__partitioning_8cpp_source.html#l00412">astcenc_find_best_partitioning.cpp:412</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a24bfd76e0fe1130b9741b58cc3e2b675"><div class="ttname"><a href="astcenc__internal_8h.html#a24bfd76e0fe1130b9741b58cc3e2b675">BLOCK_MAX_KMEANS_TEXELS</a></div><div class="ttdeci">static constexpr uint8_t BLOCK_MAX_KMEANS_TEXELS</div><div class="ttdoc">The maximum number of texels used during partition selection for texel clustering.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00084">astcenc_internal.h:84</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a2cce51c3362aa0b5040437ac0e7f8969"><div class="ttname"><a href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a></div><div class="ttdeci">#define promise(cond)</div><div class="ttdoc">Functions and data declarations.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00061">astcenc_internal.h:61</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a31f42bb3da7abe95be4b6960feead130"><div class="ttname"><a href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_PARTITIONS</div><div class="ttdoc">The maximum number of partitions a block can support.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00078">astcenc_internal.h:78</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_ad694a8ff82a68a50b11bac439531241e"><div class="ttname"><a href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_TEXELS</div><div class="ttdoc">The maximum number of texels a block can support (6x6x6 block).</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00072">astcenc_internal.h:72</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_adf3049fd85d49f282c72b012b87a267d"><div class="ttname"><a href="astcenc__internal_8h.html#adf3049fd85d49f282c72b012b87a267d">BLOCK_MAX_PARTITIONINGS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_PARTITIONINGS</div><div class="ttdoc">The number of partitionings, per partition count, suported by the ASTC format.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00081">astcenc_internal.h:81</a></div></div>
<div class="ttc" id="anamespaceastc_html_af78c0d31374aa9923633a3a2abf8d738"><div class="ttname"><a href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a></div><div class="ttdeci">static T min(T p, T q)</div><div class="ttdoc">Return the minimum of two values.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00159">astcenc_mathlib.h:159</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a0df466b2eda6958f2e5f8a4f147367e4"><div class="ttname"><a href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">block_size_descriptor::texel_count</a></div><div class="ttdeci">uint8_t texel_count</div><div class="ttdoc">The block total texel count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00542">astcenc_internal.h:542</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a8bc9e1751fe1a81b9ee33c0925fb8f4f"><div class="ttname"><a href="structblock__size__descriptor.html#a8bc9e1751fe1a81b9ee33c0925fb8f4f">block_size_descriptor::kmeans_texels</a></div><div class="ttdeci">uint8_t kmeans_texels[BLOCK_MAX_KMEANS_TEXELS]</div><div class="ttdoc">The active texels for k-means partition selection.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00602">astcenc_internal.h:602</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_aecc5b82b77caa9b3bf69294d06f84e19"><div class="ttname"><a href="structblock__size__descriptor.html#aecc5b82b77caa9b3bf69294d06f84e19">block_size_descriptor::partitioning_count_selected</a></div><div class="ttdeci">unsigned int partitioning_count_selected[BLOCK_MAX_PARTITIONS]</div><div class="ttdoc">The number of selected partitionings for 1/2/3/4 partitionings.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00574">astcenc_internal.h:574</a></div></div>
<div class="ttc" id="astructvfloat4_html"><div class="ttname"><a href="structvfloat4.html">vfloat4</a></div><div class="ttdoc">4x32-bit vectors, implemented using Armv8-A NEON.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00050">astcenc_vecmathlib_neon_4.h:51</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118_cgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118_cgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118_cgraph" id="aastcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118_cgraph">
<area shape="rect" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="5,234,184,274"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a4567304c86889e62a6cf2b5a391d6260" title="Count the partition table mismatches vs the data clustering." alt="" coords="232,80,431,105"/>
<area shape="poly" title=" " alt="" coords="118,232,169,191,231,146,292,110,295,114,233,151,172,195,121,236"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="679,104,755,129"/>
<area shape="poly" title=" " alt="" coords="132,231,178,209,231,190,289,176,338,167,423,159,509,155,617,139,665,128,666,133,618,145,509,160,424,165,339,172,290,181,233,195,180,214,134,236"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#ad1670adef9a30320320aeb3fa51bb7dc" title="Use counting sort on the mismatch array to sort partition candidates." alt="" coords="258,205,405,245"/>
<area shape="poly" title=" " alt="" coords="184,240,244,233,245,238,185,246"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a48c3e037a653156f4c4d4643f267ba3f" title="Assign texels to clusters, based on a set of chosen center points." alt="" coords="275,319,388,344"/>
<area shape="poly" title=" " alt="" coords="144,272,233,305,262,313,260,318,231,310,142,277"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#acfcac2ef43cb03621ea25d3f6673c19e" title="Functions for finding best partition for a block." alt="" coords="285,269,377,295"/>
<area shape="poly" title=" " alt="" coords="185,262,271,272,271,278,184,267"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#acf130a5dab418b762b9ad6d2db920c9f" title="Compute new cluster centers based on their center of gravity." alt="" coords="274,368,389,393"/>
<area shape="poly" title=" " alt="" coords="119,272,169,314,200,336,233,354,261,365,259,370,231,359,197,340,165,318,115,276"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a6c9cd07ba65d36a11ebdd0363f3a3550" title="Compute bit&#45;mismatch for partitioning in 2&#45;partition mode." alt="" coords="479,5,617,31"/>
<area shape="poly" title=" " alt="" coords="369,77,497,33,499,38,370,82"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a9acad2d527657aaa0da1c424db437e37" title="Compute bit&#45;mismatch for partitioning in 3&#45;partition mode." alt="" coords="479,55,617,80"/>
<area shape="poly" title=" " alt="" coords="431,78,465,74,465,80,431,84"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a3febec3fce459c429e5c4445c852d3bb" title="Compute bit&#45;mismatch for partitioning in 4&#45;partition mode." alt="" coords="479,104,617,129"/>
<area shape="poly" title=" " alt="" coords="431,101,465,105,465,110,431,106"/>
<area shape="poly" title=" " alt="" coords="596,28,619,40,634,52,644,64,653,76,667,89,675,95,673,99,664,93,649,80,640,68,630,56,616,44,593,33"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda" title="Population bit count." alt="" coords="679,55,754,80"/>
<area shape="poly" title=" " alt="" coords="593,28,666,50,665,55,591,33"/>
<area shape="poly" title=" " alt="" coords="593,77,666,99,664,104,591,83"/>
<area shape="poly" title=" " alt="" coords="618,65,665,65,665,70,618,70"/>
<area shape="poly" title=" " alt="" coords="618,114,665,114,665,119,618,119"/>
<area shape="poly" title=" " alt="" coords="591,101,665,80,666,85,593,107"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="521,269,575,295"/>
<area shape="poly" title=" " alt="" coords="387,316,506,289,508,294,388,321"/>
<area shape="rect" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9" title="Get an RGBA texel value from the data." alt="" coords="483,319,613,344"/>
<area shape="poly" title=" " alt="" coords="388,329,469,329,469,334,388,334"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="685,269,749,295"/>
<area shape="poly" title=" " alt="" coords="576,279,671,279,671,285,576,285"/>
<area shape="poly" title=" " alt="" coords="689,271,683,261,686,251,697,245,717,243,740,246,750,255,746,259,737,251,717,248,699,250,690,255,688,260,693,268"/>
<area shape="poly" title=" " alt="" coords="377,269,488,237,553,213,616,184,654,160,687,136,690,140,657,165,619,188,555,218,490,242,378,274"/>
<area shape="poly" title=" " alt="" coords="378,279,506,279,506,285,378,285"/>
<area shape="poly" title=" " alt="" coords="378,290,479,313,478,318,377,295"/>
<area shape="poly" title=" " alt="" coords="387,365,478,344,479,350,388,371"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="503,368,593,393"/>
<area shape="poly" title=" " alt="" coords="389,378,489,378,489,383,389,383"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="665,368,768,393"/>
<area shape="poly" title=" " alt="" coords="593,378,651,378,651,383,593,383"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118_icgraph" id="aastcenc__find__best__partitioning_8cpp_a89e88da4b6a389046d10b859ba68a118_icgraph">
<area shape="rect" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="1189,5,1368,45"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1175,28,1142,28,1142,23,1175,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a4567304c86889e62a6cf2b5a391d6260" name="a4567304c86889e62a6cf2b5a391d6260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4567304c86889e62a6cf2b5a391d6260">&#9670;&#160;</a></span>count_partition_mismatch_bits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void count_partition_mismatch_bits </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>partition_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t</td>          <td class="paramname"><span class="paramname"><em>bitmaps</em></span>[BLOCK_MAX_PARTITIONS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>mismatch_counts</em></span>[BLOCK_MAX_PARTITIONINGS]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Count the partition table mismatches vs the data clustering. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">bsd</td><td>The block size information. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_count</td><td>The number of partitions in the block. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bitmaps</td><td>The block texel partition assignment patterns. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mismatch_counts</td><td>The array storing per partitioning mismatch counts. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00365">365</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  370</span>  {</div>
<div class="line"><span class="lineno">  371</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> active_count = bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#aecc5b82b77caa9b3bf69294d06f84e19">partitioning_count_selected</a>[partition_count - 1];</div>
<div class="line"><span class="lineno">  372</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(active_count &gt; 0);</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordflow">if</span> (partition_count == 2)</div>
<div class="line"><span class="lineno">  375</span>    {</div>
<div class="line"><span class="lineno">  376</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; active_count; i++)</div>
<div class="line"><span class="lineno">  377</span>        {</div>
<div class="line"><span class="lineno">  378</span>            mismatch_counts[i] = <a class="code hl_function" href="#a6c9cd07ba65d36a11ebdd0363f3a3550">partition_mismatch2</a>(bitmaps, bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#afb199f7b25412c63ee070afc4f22d647">coverage_bitmaps_2</a>[i]);</div>
<div class="line"><span class="lineno">  379</span>            assert(mismatch_counts[i] &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#a24bfd76e0fe1130b9741b58cc3e2b675">BLOCK_MAX_KMEANS_TEXELS</a>);</div>
<div class="line"><span class="lineno">  380</span>            assert(mismatch_counts[i] &lt; bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>);</div>
<div class="line"><span class="lineno">  381</span>        }</div>
<div class="line"><span class="lineno">  382</span>    }</div>
<div class="line"><span class="lineno">  383</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (partition_count == 3)</div>
<div class="line"><span class="lineno">  384</span>    {</div>
<div class="line"><span class="lineno">  385</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; active_count; i++)</div>
<div class="line"><span class="lineno">  386</span>        {</div>
<div class="line"><span class="lineno">  387</span>            mismatch_counts[i] = <a class="code hl_function" href="#a9acad2d527657aaa0da1c424db437e37">partition_mismatch3</a>(bitmaps, bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a2de235b96a8763b4d757954e66f084a3">coverage_bitmaps_3</a>[i]);</div>
<div class="line"><span class="lineno">  388</span>            assert(mismatch_counts[i] &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#a24bfd76e0fe1130b9741b58cc3e2b675">BLOCK_MAX_KMEANS_TEXELS</a>);</div>
<div class="line"><span class="lineno">  389</span>            assert(mismatch_counts[i] &lt; bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>);</div>
<div class="line"><span class="lineno">  390</span>        }</div>
<div class="line"><span class="lineno">  391</span>    }</div>
<div class="line"><span class="lineno">  392</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  393</span>    {</div>
<div class="line"><span class="lineno">  394</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; active_count; i++)</div>
<div class="line"><span class="lineno">  395</span>        {</div>
<div class="line"><span class="lineno">  396</span>            mismatch_counts[i] = <a class="code hl_function" href="#a3febec3fce459c429e5c4445c852d3bb">partition_mismatch4</a>(bitmaps, bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a2efb4a6e89af7eb8f833c5a7c5c65ac2">coverage_bitmaps_4</a>[i]);</div>
<div class="line"><span class="lineno">  397</span>            assert(mismatch_counts[i] &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#a24bfd76e0fe1130b9741b58cc3e2b675">BLOCK_MAX_KMEANS_TEXELS</a>);</div>
<div class="line"><span class="lineno">  398</span>            assert(mismatch_counts[i] &lt; bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>);</div>
<div class="line"><span class="lineno">  399</span>        }</div>
<div class="line"><span class="lineno">  400</span>    }</div>
<div class="line"><span class="lineno">  401</span>}</div>
<div class="ttc" id="aastcenc__find__best__partitioning_8cpp_html_a3febec3fce459c429e5c4445c852d3bb"><div class="ttname"><a href="#a3febec3fce459c429e5c4445c852d3bb">partition_mismatch4</a></div><div class="ttdeci">static uint8_t partition_mismatch4(const uint64_t a[4], const uint64_t b[4])</div><div class="ttdoc">Compute bit-mismatch for partitioning in 4-partition mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__find__best__partitioning_8cpp_source.html#l00314">astcenc_find_best_partitioning.cpp:314</a></div></div>
<div class="ttc" id="aastcenc__find__best__partitioning_8cpp_html_a6c9cd07ba65d36a11ebdd0363f3a3550"><div class="ttname"><a href="#a6c9cd07ba65d36a11ebdd0363f3a3550">partition_mismatch2</a></div><div class="ttdeci">static uint8_t partition_mismatch2(const uint64_t a[2], const uint64_t b[2])</div><div class="ttdoc">Compute bit-mismatch for partitioning in 2-partition mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__find__best__partitioning_8cpp_source.html#l00253">astcenc_find_best_partitioning.cpp:253</a></div></div>
<div class="ttc" id="aastcenc__find__best__partitioning_8cpp_html_a9acad2d527657aaa0da1c424db437e37"><div class="ttname"><a href="#a9acad2d527657aaa0da1c424db437e37">partition_mismatch3</a></div><div class="ttdeci">static uint8_t partition_mismatch3(const uint64_t a[3], const uint64_t b[3])</div><div class="ttdoc">Compute bit-mismatch for partitioning in 3-partition mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__find__best__partitioning_8cpp_source.html#l00273">astcenc_find_best_partitioning.cpp:273</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a2de235b96a8763b4d757954e66f084a3"><div class="ttname"><a href="structblock__size__descriptor.html#a2de235b96a8763b4d757954e66f084a3">block_size_descriptor::coverage_bitmaps_3</a></div><div class="ttdeci">uint64_t coverage_bitmaps_3[BLOCK_MAX_PARTITIONINGS][3]</div><div class="ttdoc">The canonical 3-partition coverage pattern used during block partition search.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00616">astcenc_internal.h:616</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a2efb4a6e89af7eb8f833c5a7c5c65ac2"><div class="ttname"><a href="structblock__size__descriptor.html#a2efb4a6e89af7eb8f833c5a7c5c65ac2">block_size_descriptor::coverage_bitmaps_4</a></div><div class="ttdeci">uint64_t coverage_bitmaps_4[BLOCK_MAX_PARTITIONINGS][4]</div><div class="ttdoc">The canonical 4-partition coverage pattern used during block partition search.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00623">astcenc_internal.h:623</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_afb199f7b25412c63ee070afc4f22d647"><div class="ttname"><a href="structblock__size__descriptor.html#afb199f7b25412c63ee070afc4f22d647">block_size_descriptor::coverage_bitmaps_2</a></div><div class="ttdeci">uint64_t coverage_bitmaps_2[BLOCK_MAX_PARTITIONINGS][2]</div><div class="ttdoc">The canonical 2-partition coverage pattern used during block partition search.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00609">astcenc_internal.h:609</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260_cgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260_cgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260_cgraph" id="aastcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260_cgraph">
<area shape="rect" title="Count the partition table mismatches vs the data clustering." alt="" coords="5,55,204,80"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a6c9cd07ba65d36a11ebdd0363f3a3550" title="Compute bit&#45;mismatch for partitioning in 2&#45;partition mode." alt="" coords="252,5,391,31"/>
<area shape="poly" title=" " alt="" coords="161,52,251,31,252,36,162,57"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a9acad2d527657aaa0da1c424db437e37" title="Compute bit&#45;mismatch for partitioning in 3&#45;partition mode." alt="" coords="252,55,391,80"/>
<area shape="poly" title=" " alt="" coords="204,65,238,65,238,70,204,70"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a3febec3fce459c429e5c4445c852d3bb" title="Compute bit&#45;mismatch for partitioning in 4&#45;partition mode." alt="" coords="252,104,391,129"/>
<area shape="poly" title=" " alt="" coords="162,77,252,98,251,104,161,83"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="439,31,515,56"/>
<area shape="poly" title=" " alt="" coords="391,27,426,32,425,38,391,32"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda" title="Population bit count." alt="" coords="439,80,514,105"/>
<area shape="poly" title=" " alt="" coords="364,28,392,40,446,70,443,75,390,44,362,33"/>
<area shape="poly" title=" " alt="" coords="391,54,425,49,426,54,391,59"/>
<area shape="poly" title=" " alt="" coords="391,76,427,82,426,87,391,81"/>
<area shape="poly" title=" " alt="" coords="359,101,390,89,442,61,445,65,392,94,361,106"/>
<area shape="poly" title=" " alt="" coords="391,103,425,98,426,103,391,109"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260_icgraph" id="aastcenc__find__best__partitioning_8cpp_a4567304c86889e62a6cf2b5a391d6260_icgraph">
<area shape="rect" title="Count the partition table mismatches vs the data clustering." alt="" coords="1416,13,1615,38"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a89e88da4b6a389046d10b859ba68a118" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="1189,5,1368,45"/>
<area shape="poly" title=" " alt="" coords="1402,28,1368,28,1368,23,1402,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1175,28,1142,28,1142,23,1175,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a7577b3047a3f9f0fe44fd579f5450630" name="a7577b3047a3f9f0fe44fd579f5450630"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7577b3047a3f9f0fe44fd579f5450630">&#9670;&#160;</a></span>find_best_partition_candidates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int find_best_partition_candidates </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>partition_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>partition_search_limit</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>best_partitions</em></span>[TUNE_MAX_PARTITIONING_CANDIDATES], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>requested_candidates</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the best set of partitions to trial for a given block. </p>
<p>On return the <code>best_partitions</code> list will contain the two best partition candidates; one assuming data has uncorrelated chroma and one assuming the data has correlated chroma. The best candidate is returned first in the list.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">bsd</td><td>The block size information. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_count</td><td>The number of partitions in the block. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_search_limit</td><td>The number of candidate partition encodings to trial. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_partitions</td><td>The best partition candidates. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">requested_candidates</td><td>The number of requested partitionings. May return fewer if candidates are not available.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The actual number of candidates returned. </dd></dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00551">551</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  558</span>  {</div>
<div class="line"><span class="lineno">  559</span>    <span class="comment">// Constant used to estimate quantization error for a given partitioning; the optimal value for</span></div>
<div class="line"><span class="lineno">  560</span>    <span class="comment">// this depends on bitrate. These values have been determined empirically.</span></div>
<div class="line"><span class="lineno">  561</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texels_per_block = bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>;</div>
<div class="line"><span class="lineno">  562</span>    <span class="keywordtype">float</span> weight_imprecision_estim = 0.055f;</div>
<div class="line"><span class="lineno">  563</span>    <span class="keywordflow">if</span> (texels_per_block &lt;= 20)</div>
<div class="line"><span class="lineno">  564</span>    {</div>
<div class="line"><span class="lineno">  565</span>        weight_imprecision_estim = 0.03f;</div>
<div class="line"><span class="lineno">  566</span>    }</div>
<div class="line"><span class="lineno">  567</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (texels_per_block &lt;= 31)</div>
<div class="line"><span class="lineno">  568</span>    {</div>
<div class="line"><span class="lineno">  569</span>        weight_imprecision_estim = 0.04f;</div>
<div class="line"><span class="lineno">  570</span>    }</div>
<div class="line"><span class="lineno">  571</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (texels_per_block &lt;= 41)</div>
<div class="line"><span class="lineno">  572</span>    {</div>
<div class="line"><span class="lineno">  573</span>        weight_imprecision_estim = 0.05f;</div>
<div class="line"><span class="lineno">  574</span>    }</div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  576</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  577</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_search_limit &gt; 0);</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>    weight_imprecision_estim = weight_imprecision_estim * weight_imprecision_estim;</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>    uint16_t partition_sequence[<a class="code hl_variable" href="astcenc__internal_8h.html#adf3049fd85d49f282c72b012b87a267d">BLOCK_MAX_PARTITIONINGS</a>];</div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sequence_len = <a class="code hl_function" href="#a89e88da4b6a389046d10b859ba68a118">compute_kmeans_partition_ordering</a>(bsd, blk, partition_count, partition_sequence);</div>
<div class="line"><span class="lineno">  583</span>    partition_search_limit = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(partition_search_limit, sequence_len);</div>
<div class="line"><span class="lineno">  584</span>    requested_candidates = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(partition_search_limit, requested_candidates);</div>
<div class="line"><span class="lineno">  585</span> </div>
<div class="line"><span class="lineno">  586</span>    <span class="keywordtype">bool</span> uses_alpha = !blk.<a class="code hl_function" href="structimage__block.html#ae3c0735355d378591db6cb7a011e381a">is_constant_channel</a>(3);</div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span>    <span class="comment">// Partitioning errors assuming uncorrelated-chrominance endpoints</span></div>
<div class="line"><span class="lineno">  589</span>    <span class="keywordtype">float</span> uncor_best_errors[<a class="code hl_variable" href="astcenc__internal_8h.html#a5ac3c00190d37f2011afffd4fe1f95b2">TUNE_MAX_PARTITIONING_CANDIDATES</a>];</div>
<div class="line"><span class="lineno">  590</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uncor_best_partitions[<a class="code hl_variable" href="astcenc__internal_8h.html#a5ac3c00190d37f2011afffd4fe1f95b2">TUNE_MAX_PARTITIONING_CANDIDATES</a>];</div>
<div class="line"><span class="lineno">  591</span> </div>
<div class="line"><span class="lineno">  592</span>    <span class="comment">// Partitioning errors assuming same-chrominance endpoints</span></div>
<div class="line"><span class="lineno">  593</span>    <span class="keywordtype">float</span> samec_best_errors[<a class="code hl_variable" href="astcenc__internal_8h.html#a5ac3c00190d37f2011afffd4fe1f95b2">TUNE_MAX_PARTITIONING_CANDIDATES</a>];</div>
<div class="line"><span class="lineno">  594</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> samec_best_partitions[<a class="code hl_variable" href="astcenc__internal_8h.html#a5ac3c00190d37f2011afffd4fe1f95b2">TUNE_MAX_PARTITIONING_CANDIDATES</a>];</div>
<div class="line"><span class="lineno">  595</span> </div>
<div class="line"><span class="lineno">  596</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; requested_candidates; i++)</div>
<div class="line"><span class="lineno">  597</span>    {</div>
<div class="line"><span class="lineno">  598</span>        uncor_best_errors[i] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  599</span>        samec_best_errors[i] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  600</span>    }</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>    <span class="keywordflow">if</span> (uses_alpha)</div>
<div class="line"><span class="lineno">  603</span>    {</div>
<div class="line"><span class="lineno">  604</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_search_limit; i++)</div>
<div class="line"><span class="lineno">  605</span>        {</div>
<div class="line"><span class="lineno">  606</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition = partition_sequence[i];</div>
<div class="line"><span class="lineno">  607</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pi = bsd.<a class="code hl_function" href="structblock__size__descriptor.html#a551741bf3178a4b4617b2389c27345ec">get_raw_partition_info</a>(partition_count, partition);</div>
<div class="line"><span class="lineno">  608</span> </div>
<div class="line"><span class="lineno">  609</span>            <span class="comment">// Compute weighting to give to each component in each partition</span></div>
<div class="line"><span class="lineno">  610</span>            <a class="code hl_struct" href="structpartition__metrics.html">partition_metrics</a> pms[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  611</span> </div>
<div class="line"><span class="lineno">  612</span>            <a class="code hl_function" href="astcenc__averages__and__directions_8cpp.html#a00407861c2f0e767b64b1cb1bb7a27b6">compute_avgs_and_dirs_4_comp</a>(pi, blk, pms);</div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>            <a class="code hl_struct" href="structline4.html">line4</a> uncor_lines[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  615</span>            <a class="code hl_struct" href="structline4.html">line4</a> samec_lines[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  616</span> </div>
<div class="line"><span class="lineno">  617</span>            <a class="code hl_struct" href="structprocessed__line4.html">processed_line4</a> uncor_plines[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  618</span>            <a class="code hl_struct" href="structprocessed__line4.html">processed_line4</a> samec_plines[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>            <span class="keywordtype">float</span> line_lengths[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  621</span> </div>
<div class="line"><span class="lineno">  622</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_count; j++)</div>
<div class="line"><span class="lineno">  623</span>            {</div>
<div class="line"><span class="lineno">  624</span>                <a class="code hl_struct" href="structpartition__metrics.html">partition_metrics</a>&amp; pm = pms[j];</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>                uncor_lines[j].<a class="code hl_variable" href="structline4.html#a35162a2f9eccdf19bd1bc79a9030df30">a</a> = pm.<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a>;</div>
<div class="line"><span class="lineno">  627</span>                uncor_lines[j].<a class="code hl_variable" href="structline4.html#a6cdd2a7bcf113eb9bd2085f9a07b9084">b</a> = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a>(pm.<a class="code hl_variable" href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">dir</a>, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a5177e2c50f2c01a5610b2844ee3a071d">unit4</a>());</div>
<div class="line"><span class="lineno">  628</span> </div>
<div class="line"><span class="lineno">  629</span>                uncor_plines[j].<a class="code hl_variable" href="structprocessed__line4.html#a15d23ed62e7f387dde80641c087fa578">amod</a> = uncor_lines[j].<a class="code hl_variable" href="structline4.html#a35162a2f9eccdf19bd1bc79a9030df30">a</a> - uncor_lines[j].<a class="code hl_variable" href="structline4.html#a6cdd2a7bcf113eb9bd2085f9a07b9084">b</a> * <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(uncor_lines[j].a, uncor_lines[j].b);</div>
<div class="line"><span class="lineno">  630</span>                uncor_plines[j].<a class="code hl_variable" href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">bs</a> = uncor_lines[j].<a class="code hl_variable" href="structline4.html#a6cdd2a7bcf113eb9bd2085f9a07b9084">b</a>;</div>
<div class="line"><span class="lineno">  631</span> </div>
<div class="line"><span class="lineno">  632</span>                samec_lines[j].<a class="code hl_variable" href="structline4.html#a35162a2f9eccdf19bd1bc79a9030df30">a</a> = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  633</span>                samec_lines[j].<a class="code hl_variable" href="structline4.html#a6cdd2a7bcf113eb9bd2085f9a07b9084">b</a> = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a>(pm.<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a>, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a5177e2c50f2c01a5610b2844ee3a071d">unit4</a>());</div>
<div class="line"><span class="lineno">  634</span> </div>
<div class="line"><span class="lineno">  635</span>                samec_plines[j].<a class="code hl_variable" href="structprocessed__line4.html#a15d23ed62e7f387dde80641c087fa578">amod</a> = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  636</span>                samec_plines[j].<a class="code hl_variable" href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">bs</a> = samec_lines[j].<a class="code hl_variable" href="structline4.html#a6cdd2a7bcf113eb9bd2085f9a07b9084">b</a>;</div>
<div class="line"><span class="lineno">  637</span>            }</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>            <span class="keywordtype">float</span> uncor_error = 0.0f;</div>
<div class="line"><span class="lineno">  640</span>            <span class="keywordtype">float</span> samec_error = 0.0f;</div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span>            <a class="code hl_function" href="astcenc__averages__and__directions_8cpp.html#a2dec702033b002eaf4090eb47ce4ad21">compute_error_squared_rgba</a>(pi,</div>
<div class="line"><span class="lineno">  643</span>                                       blk,</div>
<div class="line"><span class="lineno">  644</span>                                       uncor_plines,</div>
<div class="line"><span class="lineno">  645</span>                                       samec_plines,</div>
<div class="line"><span class="lineno">  646</span>                                       line_lengths,</div>
<div class="line"><span class="lineno">  647</span>                                       uncor_error,</div>
<div class="line"><span class="lineno">  648</span>                                       samec_error);</div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span>            <span class="comment">// Compute an estimate of error introduced by weight quantization imprecision.</span></div>
<div class="line"><span class="lineno">  651</span>            <span class="comment">// This error is computed as follows, for each partition</span></div>
<div class="line"><span class="lineno">  652</span>            <span class="comment">//     1: compute the principal-axis vector (full length) in error-space</span></div>
<div class="line"><span class="lineno">  653</span>            <span class="comment">//     2: convert the principal-axis vector to regular RGB-space</span></div>
<div class="line"><span class="lineno">  654</span>            <span class="comment">//     3: scale the vector by a constant that estimates average quantization error</span></div>
<div class="line"><span class="lineno">  655</span>            <span class="comment">//     4: for each texel, square the vector, then do a dot-product with the texel&#39;s</span></div>
<div class="line"><span class="lineno">  656</span>            <span class="comment">//        error weight; sum up the results across all texels.</span></div>
<div class="line"><span class="lineno">  657</span>            <span class="comment">//     4(optimized): square the vector once, then do a dot-product with the average</span></div>
<div class="line"><span class="lineno">  658</span>            <span class="comment">//        texel error, then multiply by the number of texels.</span></div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_count; j++)</div>
<div class="line"><span class="lineno">  661</span>            {</div>
<div class="line"><span class="lineno">  662</span>                <span class="keywordtype">float</span> tpp = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.partition_texel_count[j]);</div>
<div class="line"><span class="lineno">  663</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> error_weights(tpp * weight_imprecision_estim);</div>
<div class="line"><span class="lineno">  664</span> </div>
<div class="line"><span class="lineno">  665</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> uncor_vector = uncor_lines[j].<a class="code hl_variable" href="structline4.html#a6cdd2a7bcf113eb9bd2085f9a07b9084">b</a> * line_lengths[j];</div>
<div class="line"><span class="lineno">  666</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> samec_vector = samec_lines[j].<a class="code hl_variable" href="structline4.html#a6cdd2a7bcf113eb9bd2085f9a07b9084">b</a> * line_lengths[j];</div>
<div class="line"><span class="lineno">  667</span> </div>
<div class="line"><span class="lineno">  668</span>                uncor_error += <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(uncor_vector * uncor_vector, error_weights);</div>
<div class="line"><span class="lineno">  669</span>                samec_error += <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(samec_vector * samec_vector, error_weights);</div>
<div class="line"><span class="lineno">  670</span>            }</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>            <a class="code hl_function" href="#a8d4cb4068f0c27419e45878261806cac">insert_result</a>(requested_candidates, uncor_error, partition, uncor_best_errors, uncor_best_partitions);</div>
<div class="line"><span class="lineno">  673</span>            <a class="code hl_function" href="#a8d4cb4068f0c27419e45878261806cac">insert_result</a>(requested_candidates, samec_error, partition, samec_best_errors, samec_best_partitions);</div>
<div class="line"><span class="lineno">  674</span>        }</div>
<div class="line"><span class="lineno">  675</span>    }</div>
<div class="line"><span class="lineno">  676</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  677</span>    {</div>
<div class="line"><span class="lineno">  678</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_search_limit; i++)</div>
<div class="line"><span class="lineno">  679</span>        {</div>
<div class="line"><span class="lineno">  680</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition = partition_sequence[i];</div>
<div class="line"><span class="lineno">  681</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pi = bsd.<a class="code hl_function" href="structblock__size__descriptor.html#a551741bf3178a4b4617b2389c27345ec">get_raw_partition_info</a>(partition_count, partition);</div>
<div class="line"><span class="lineno">  682</span> </div>
<div class="line"><span class="lineno">  683</span>            <span class="comment">// Compute weighting to give to each component in each partition</span></div>
<div class="line"><span class="lineno">  684</span>            <a class="code hl_struct" href="structpartition__metrics.html">partition_metrics</a> pms[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  685</span>            <a class="code hl_function" href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253">compute_avgs_and_dirs_3_comp_rgb</a>(pi, blk, pms);</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>            <a class="code hl_struct" href="structpartition__lines3.html">partition_lines3</a> plines[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  688</span> </div>
<div class="line"><span class="lineno">  689</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_count; j++)</div>
<div class="line"><span class="lineno">  690</span>            {</div>
<div class="line"><span class="lineno">  691</span>                <a class="code hl_struct" href="structpartition__metrics.html">partition_metrics</a>&amp; pm = pms[j];</div>
<div class="line"><span class="lineno">  692</span>                <a class="code hl_struct" href="structpartition__lines3.html">partition_lines3</a>&amp; pl = plines[j];</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>                pl.<a class="code hl_variable" href="structpartition__lines3.html#aec409761ea4c0f5da2661f3e9b6858cc">uncor_line</a>.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a> = pm.<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a>;</div>
<div class="line"><span class="lineno">  695</span>                pl.<a class="code hl_variable" href="structpartition__lines3.html#aec409761ea4c0f5da2661f3e9b6858cc">uncor_line</a>.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a> = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a>(pm.<a class="code hl_variable" href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">dir</a>, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08">unit3</a>());</div>
<div class="line"><span class="lineno">  696</span> </div>
<div class="line"><span class="lineno">  697</span>                pl.<a class="code hl_variable" href="structpartition__lines3.html#aa068c809940350df0486a8e4f4b108ad">samec_line</a>.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a> = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  698</span>                pl.<a class="code hl_variable" href="structpartition__lines3.html#aa068c809940350df0486a8e4f4b108ad">samec_line</a>.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a> = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a>(pm.<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a>, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08">unit3</a>());</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span>                pl.<a class="code hl_variable" href="structpartition__lines3.html#a859723c79cd27cb1428b2e87d00f21fe">uncor_pline</a>.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a> = pl.<a class="code hl_variable" href="structpartition__lines3.html#aec409761ea4c0f5da2661f3e9b6858cc">uncor_line</a>.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a> - pl.<a class="code hl_variable" href="structpartition__lines3.html#aec409761ea4c0f5da2661f3e9b6858cc">uncor_line</a>.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a> * <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#ae36c7167bc89ff2bf984c1a912526dcb">dot3</a>(pl.<a class="code hl_variable" href="structpartition__lines3.html#aec409761ea4c0f5da2661f3e9b6858cc">uncor_line</a>.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a>, pl.<a class="code hl_variable" href="structpartition__lines3.html#aec409761ea4c0f5da2661f3e9b6858cc">uncor_line</a>.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a>);</div>
<div class="line"><span class="lineno">  701</span>                pl.<a class="code hl_variable" href="structpartition__lines3.html#a859723c79cd27cb1428b2e87d00f21fe">uncor_pline</a>.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>   = pl.<a class="code hl_variable" href="structpartition__lines3.html#aec409761ea4c0f5da2661f3e9b6858cc">uncor_line</a>.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a>;</div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span>                pl.<a class="code hl_variable" href="structpartition__lines3.html#a3d911509177415a3401db5040aea3fae">samec_pline</a>.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a> = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  704</span>                pl.<a class="code hl_variable" href="structpartition__lines3.html#a3d911509177415a3401db5040aea3fae">samec_pline</a>.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>   = pl.<a class="code hl_variable" href="structpartition__lines3.html#aa068c809940350df0486a8e4f4b108ad">samec_line</a>.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a>;</div>
<div class="line"><span class="lineno">  705</span>            }</div>
<div class="line"><span class="lineno">  706</span> </div>
<div class="line"><span class="lineno">  707</span>            <span class="keywordtype">float</span> uncor_error = 0.0f;</div>
<div class="line"><span class="lineno">  708</span>            <span class="keywordtype">float</span> samec_error = 0.0f;</div>
<div class="line"><span class="lineno">  709</span> </div>
<div class="line"><span class="lineno">  710</span>            <a class="code hl_function" href="astcenc__averages__and__directions_8cpp.html#ac4a96475fb0074ef3fd0f08ea66de75e">compute_error_squared_rgb</a>(pi,</div>
<div class="line"><span class="lineno">  711</span>                                      blk,</div>
<div class="line"><span class="lineno">  712</span>                                      plines,</div>
<div class="line"><span class="lineno">  713</span>                                      uncor_error,</div>
<div class="line"><span class="lineno">  714</span>                                      samec_error);</div>
<div class="line"><span class="lineno">  715</span> </div>
<div class="line"><span class="lineno">  716</span>            <span class="comment">// Compute an estimate of error introduced by weight quantization imprecision.</span></div>
<div class="line"><span class="lineno">  717</span>            <span class="comment">// This error is computed as follows, for each partition</span></div>
<div class="line"><span class="lineno">  718</span>            <span class="comment">//     1: compute the principal-axis vector (full length) in error-space</span></div>
<div class="line"><span class="lineno">  719</span>            <span class="comment">//     2: convert the principal-axis vector to regular RGB-space</span></div>
<div class="line"><span class="lineno">  720</span>            <span class="comment">//     3: scale the vector by a constant that estimates average quantization error</span></div>
<div class="line"><span class="lineno">  721</span>            <span class="comment">//     4: for each texel, square the vector, then do a dot-product with the texel&#39;s</span></div>
<div class="line"><span class="lineno">  722</span>            <span class="comment">//        error weight; sum up the results across all texels.</span></div>
<div class="line"><span class="lineno">  723</span>            <span class="comment">//     4(optimized): square the vector once, then do a dot-product with the average</span></div>
<div class="line"><span class="lineno">  724</span>            <span class="comment">//        texel error, then multiply by the number of texels.</span></div>
<div class="line"><span class="lineno">  725</span> </div>
<div class="line"><span class="lineno">  726</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_count; j++)</div>
<div class="line"><span class="lineno">  727</span>            {</div>
<div class="line"><span class="lineno">  728</span>                <a class="code hl_struct" href="structpartition__lines3.html">partition_lines3</a>&amp; pl = plines[j];</div>
<div class="line"><span class="lineno">  729</span> </div>
<div class="line"><span class="lineno">  730</span>                <span class="keywordtype">float</span> tpp = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.partition_texel_count[j]);</div>
<div class="line"><span class="lineno">  731</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> error_weights(tpp * weight_imprecision_estim);</div>
<div class="line"><span class="lineno">  732</span> </div>
<div class="line"><span class="lineno">  733</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> uncor_vector = pl.<a class="code hl_variable" href="structpartition__lines3.html#aec409761ea4c0f5da2661f3e9b6858cc">uncor_line</a>.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a> * pl.<a class="code hl_variable" href="structpartition__lines3.html#aab1e76d822bfde8b007da4dd65714ff2">line_length</a>;</div>
<div class="line"><span class="lineno">  734</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> samec_vector = pl.<a class="code hl_variable" href="structpartition__lines3.html#aa068c809940350df0486a8e4f4b108ad">samec_line</a>.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a> * pl.<a class="code hl_variable" href="structpartition__lines3.html#aab1e76d822bfde8b007da4dd65714ff2">line_length</a>;</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>                uncor_error += <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477">dot3_s</a>(uncor_vector * uncor_vector, error_weights);</div>
<div class="line"><span class="lineno">  737</span>                samec_error += <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477">dot3_s</a>(samec_vector * samec_vector, error_weights);</div>
<div class="line"><span class="lineno">  738</span>            }</div>
<div class="line"><span class="lineno">  739</span> </div>
<div class="line"><span class="lineno">  740</span>            <a class="code hl_function" href="#a8d4cb4068f0c27419e45878261806cac">insert_result</a>(requested_candidates, uncor_error, partition, uncor_best_errors, uncor_best_partitions);</div>
<div class="line"><span class="lineno">  741</span>            <a class="code hl_function" href="#a8d4cb4068f0c27419e45878261806cac">insert_result</a>(requested_candidates, samec_error, partition, samec_best_errors, samec_best_partitions);</div>
<div class="line"><span class="lineno">  742</span>        }</div>
<div class="line"><span class="lineno">  743</span>    }</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> interleave[2 * <a class="code hl_variable" href="astcenc__internal_8h.html#a5ac3c00190d37f2011afffd4fe1f95b2">TUNE_MAX_PARTITIONING_CANDIDATES</a>];</div>
<div class="line"><span class="lineno">  746</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; requested_candidates; i++)</div>
<div class="line"><span class="lineno">  747</span>    {</div>
<div class="line"><span class="lineno">  748</span>        interleave[2 * i] = bsd.<a class="code hl_function" href="structblock__size__descriptor.html#a551741bf3178a4b4617b2389c27345ec">get_raw_partition_info</a>(partition_count, uncor_best_partitions[i]).<a class="code hl_variable" href="structpartition__info.html#ada3e4c7f4d0078a7ae43b1951d856e38">partition_index</a>;</div>
<div class="line"><span class="lineno">  749</span>        interleave[2 * i + 1] = bsd.<a class="code hl_function" href="structblock__size__descriptor.html#a551741bf3178a4b4617b2389c27345ec">get_raw_partition_info</a>(partition_count, samec_best_partitions[i]).<a class="code hl_variable" href="structpartition__info.html#ada3e4c7f4d0078a7ae43b1951d856e38">partition_index</a>;</div>
<div class="line"><span class="lineno">  750</span>    }</div>
<div class="line"><span class="lineno">  751</span> </div>
<div class="line"><span class="lineno">  752</span>    uint64_t bitmasks[1024/64] { 0 };</div>
<div class="line"><span class="lineno">  753</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> emitted = 0;</div>
<div class="line"><span class="lineno">  754</span> </div>
<div class="line"><span class="lineno">  755</span>    <span class="comment">// Deduplicate the first &quot;requested&quot; entries</span></div>
<div class="line"><span class="lineno">  756</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; requested_candidates * 2;  i++)</div>
<div class="line"><span class="lineno">  757</span>    {</div>
<div class="line"><span class="lineno">  758</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition = interleave[i];</div>
<div class="line"><span class="lineno">  759</span> </div>
<div class="line"><span class="lineno">  760</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> word = partition / 64;</div>
<div class="line"><span class="lineno">  761</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bit = partition % 64;</div>
<div class="line"><span class="lineno">  762</span> </div>
<div class="line"><span class="lineno">  763</span>        <span class="keywordtype">bool</span> written = bitmasks[word] &amp; (1ull &lt;&lt; bit);</div>
<div class="line"><span class="lineno">  764</span> </div>
<div class="line"><span class="lineno">  765</span>        <span class="keywordflow">if</span> (!written)</div>
<div class="line"><span class="lineno">  766</span>        {</div>
<div class="line"><span class="lineno">  767</span>            best_partitions[emitted] = partition;</div>
<div class="line"><span class="lineno">  768</span>            bitmasks[word] |= 1ull &lt;&lt; bit;</div>
<div class="line"><span class="lineno">  769</span>            emitted++;</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>            <span class="keywordflow">if</span> (emitted == requested_candidates)</div>
<div class="line"><span class="lineno">  772</span>            {</div>
<div class="line"><span class="lineno">  773</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  774</span>            }</div>
<div class="line"><span class="lineno">  775</span>        }</div>
<div class="line"><span class="lineno">  776</span>    }</div>
<div class="line"><span class="lineno">  777</span> </div>
<div class="line"><span class="lineno">  778</span>    <span class="keywordflow">return</span> emitted;</div>
<div class="line"><span class="lineno">  779</span>}</div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_a00407861c2f0e767b64b1cb1bb7a27b6"><div class="ttname"><a href="astcenc__averages__and__directions_8cpp.html#a00407861c2f0e767b64b1cb1bb7a27b6">compute_avgs_and_dirs_4_comp</a></div><div class="ttdeci">void compute_avgs_and_dirs_4_comp(const partition_info &amp;pi, const image_block &amp;blk, partition_metrics pm[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">Compute averages and dominant directions for each partition in a 4 component texture.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00388">astcenc_averages_and_directions.cpp:388</a></div></div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_a2dec702033b002eaf4090eb47ce4ad21"><div class="ttname"><a href="astcenc__averages__and__directions_8cpp.html#a2dec702033b002eaf4090eb47ce4ad21">compute_error_squared_rgba</a></div><div class="ttdeci">void compute_error_squared_rgba(const partition_info &amp;pi, const image_block &amp;blk, const processed_line4 uncor_plines[BLOCK_MAX_PARTITIONS], const processed_line4 samec_plines[BLOCK_MAX_PARTITIONS], float line_lengths[BLOCK_MAX_PARTITIONS], float &amp;uncor_error, float &amp;samec_error)</div><div class="ttdoc">Compute the RGBA error for uncorrelated and same chroma projections.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00723">astcenc_averages_and_directions.cpp:723</a></div></div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_a73936e5cf41b74f2b8d9b137a9d64253"><div class="ttname"><a href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253">compute_avgs_and_dirs_3_comp_rgb</a></div><div class="ttdeci">void compute_avgs_and_dirs_3_comp_rgb(const partition_info &amp;pi, const image_block &amp;blk, partition_metrics pm[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">Compute averages and dominant directions for each partition in a 3 component texture.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00568">astcenc_averages_and_directions.cpp:568</a></div></div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_ac4a96475fb0074ef3fd0f08ea66de75e"><div class="ttname"><a href="astcenc__averages__and__directions_8cpp.html#ac4a96475fb0074ef3fd0f08ea66de75e">compute_error_squared_rgb</a></div><div class="ttdeci">void compute_error_squared_rgb(const partition_info &amp;pi, const image_block &amp;blk, partition_lines3 plines[BLOCK_MAX_PARTITIONS], float &amp;uncor_error, float &amp;samec_error)</div><div class="ttdoc">Compute the RGB error for uncorrelated and same chroma projections.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00843">astcenc_averages_and_directions.cpp:843</a></div></div>
<div class="ttc" id="aastcenc__find__best__partitioning_8cpp_html_a89e88da4b6a389046d10b859ba68a118"><div class="ttname"><a href="#a89e88da4b6a389046d10b859ba68a118">compute_kmeans_partition_ordering</a></div><div class="ttdeci">static unsigned int compute_kmeans_partition_ordering(const block_size_descriptor &amp;bsd, const image_block &amp;blk, unsigned int partition_count, uint16_t partition_ordering[BLOCK_MAX_PARTITIONINGS])</div><div class="ttdoc">Use k-means clustering to compute a partition ordering for a block..</div><div class="ttdef"><b>Definition</b> <a href="astcenc__find__best__partitioning_8cpp_source.html#l00458">astcenc_find_best_partitioning.cpp:458</a></div></div>
<div class="ttc" id="aastcenc__find__best__partitioning_8cpp_html_a8d4cb4068f0c27419e45878261806cac"><div class="ttname"><a href="#a8d4cb4068f0c27419e45878261806cac">insert_result</a></div><div class="ttdeci">static void insert_result(unsigned int max_values, float this_error, unsigned int this_partition, float *best_errors, unsigned int *best_partitions)</div><div class="ttdoc">Insert a partitioning into an order list of results, sorted by error.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__find__best__partitioning_8cpp_source.html#l00512">astcenc_find_best_partitioning.cpp:512</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a5ac3c00190d37f2011afffd4fe1f95b2"><div class="ttname"><a href="astcenc__internal_8h.html#a5ac3c00190d37f2011afffd4fe1f95b2">TUNE_MAX_PARTITIONING_CANDIDATES</a></div><div class="ttdeci">static constexpr unsigned int TUNE_MAX_PARTITIONING_CANDIDATES</div><div class="ttdoc">The maximum number of candidate partitionings tested for each encoding mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00139">astcenc_internal.h:139</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_aaa341023bf98401423daebc6795e2c83"><div class="ttname"><a href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a></div><div class="ttdeci">static constexpr float ERROR_CALC_DEFAULT</div><div class="ttdoc">The high default error used to initialize error trackers.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00120">astcenc_internal.h:120</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a3b0e8ae23a514219217b72164a7909a4"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 normalize_safe(vfloat4 a, vfloat4 safe)</div><div class="ttdoc">Normalize a vector, returning safe if len is zero.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00300">astcenc_vecmathlib.h:300</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a3cf3e0218d808e69f31668dbc458dc08"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08">unit3</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 unit3()</div><div class="ttdoc">Factory that returns a unit length 3 component vfloat4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00257">astcenc_vecmathlib.h:257</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a5177e2c50f2c01a5610b2844ee3a071d"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a5177e2c50f2c01a5610b2844ee3a071d">unit4</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 unit4()</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00249">astcenc_vecmathlib.h:249</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_a377cafdb98d3ee38a2999ed00504f477"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477">dot3_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float dot3_s(vfloat4 a, vfloat4 b)</div><div class="ttdoc">Return the dot product for the bottom 3 lanes, returning scalar.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00321">astcenc_vecmathlib_common_4.h:321</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_a53a7d8285fd42b50cf3600a004db34ac"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float dot_s(vfloat4 a, vfloat4 b)</div><div class="ttdoc">Return the dot product for the full 4 lanes, returning scalar.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00303">astcenc_vecmathlib_common_4.h:303</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_a6d7561f8f0ebee752b0e217101d9d5f3"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat4 dot(vfloat4 a, vfloat4 b)</div><div class="ttdoc">Return the dot product for the full 4 lanes, returning vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00312">astcenc_vecmathlib_common_4.h:312</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_ae36c7167bc89ff2bf984c1a912526dcb"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#ae36c7167bc89ff2bf984c1a912526dcb">dot3</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat4 dot3(vfloat4 a, vfloat4 b)</div><div class="ttdoc">Return the dot product for the bottom 3 lanes, returning vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00330">astcenc_vecmathlib_common_4.h:330</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a551741bf3178a4b4617b2389c27345ec"><div class="ttname"><a href="structblock__size__descriptor.html#a551741bf3178a4b4617b2389c27345ec">block_size_descriptor::get_raw_partition_info</a></div><div class="ttdeci">const partition_info &amp; get_raw_partition_info(unsigned int partition_count, unsigned int packed_index) const</div><div class="ttdoc">Get the partition info structure for a given partition count and seed.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00722">astcenc_internal.h:722</a></div></div>
<div class="ttc" id="astructimage__block_html_ae3c0735355d378591db6cb7a011e381a"><div class="ttname"><a href="structimage__block.html#ae3c0735355d378591db6cb7a011e381a">image_block::is_constant_channel</a></div><div class="ttdeci">bool is_constant_channel(int channel) const</div><div class="ttdoc">Test if a single color channel is constant across the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00847">astcenc_internal.h:847</a></div></div>
<div class="ttc" id="astructline3_html_a38cf244ed3886bcb8bbee41ce48a8758"><div class="ttname"><a href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">line3::b</a></div><div class="ttdeci">vfloat4 b</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00460">astcenc_mathlib.h:460</a></div></div>
<div class="ttc" id="astructline3_html_a9f31b902a534755efedc7f07672353c3"><div class="ttname"><a href="structline3.html#a9f31b902a534755efedc7f07672353c3">line3::a</a></div><div class="ttdeci">vfloat4 a</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00459">astcenc_mathlib.h:459</a></div></div>
<div class="ttc" id="astructline4_html"><div class="ttname"><a href="structline4.html">line4</a></div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00463">astcenc_mathlib.h:464</a></div></div>
<div class="ttc" id="astructline4_html_a35162a2f9eccdf19bd1bc79a9030df30"><div class="ttname"><a href="structline4.html#a35162a2f9eccdf19bd1bc79a9030df30">line4::a</a></div><div class="ttdeci">vfloat4 a</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00465">astcenc_mathlib.h:465</a></div></div>
<div class="ttc" id="astructline4_html_a6cdd2a7bcf113eb9bd2085f9a07b9084"><div class="ttname"><a href="structline4.html#a6cdd2a7bcf113eb9bd2085f9a07b9084">line4::b</a></div><div class="ttdeci">vfloat4 b</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00466">astcenc_mathlib.h:466</a></div></div>
<div class="ttc" id="astructpartition__info_html_ada3e4c7f4d0078a7ae43b1951d856e38"><div class="ttname"><a href="structpartition__info.html#ada3e4c7f4d0078a7ae43b1951d856e38">partition_info::partition_index</a></div><div class="ttdeci">uint16_t partition_index</div><div class="ttdoc">The index (seed) of this partitioning.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00318">astcenc_internal.h:318</a></div></div>
<div class="ttc" id="astructpartition__lines3_html"><div class="ttname"><a href="structpartition__lines3.html">partition_lines3</a></div><div class="ttdoc">Computed lines for a a three component analysis.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00281">astcenc_internal.h:282</a></div></div>
<div class="ttc" id="astructpartition__lines3_html_a3d911509177415a3401db5040aea3fae"><div class="ttname"><a href="structpartition__lines3.html#a3d911509177415a3401db5040aea3fae">partition_lines3::samec_pline</a></div><div class="ttdeci">processed_line3 samec_pline</div><div class="ttdoc">Post-processed line for correlated chroma, passing though the origin.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00293">astcenc_internal.h:293</a></div></div>
<div class="ttc" id="astructpartition__lines3_html_a859723c79cd27cb1428b2e87d00f21fe"><div class="ttname"><a href="structpartition__lines3.html#a859723c79cd27cb1428b2e87d00f21fe">partition_lines3::uncor_pline</a></div><div class="ttdeci">processed_line3 uncor_pline</div><div class="ttdoc">Post-processed line for uncorrelated chroma.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00290">astcenc_internal.h:290</a></div></div>
<div class="ttc" id="astructpartition__lines3_html_aa068c809940350df0486a8e4f4b108ad"><div class="ttname"><a href="structpartition__lines3.html#aa068c809940350df0486a8e4f4b108ad">partition_lines3::samec_line</a></div><div class="ttdeci">line3 samec_line</div><div class="ttdoc">Line for correlated chroma, passing though the origin.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00287">astcenc_internal.h:287</a></div></div>
<div class="ttc" id="astructpartition__lines3_html_aab1e76d822bfde8b007da4dd65714ff2"><div class="ttname"><a href="structpartition__lines3.html#aab1e76d822bfde8b007da4dd65714ff2">partition_lines3::line_length</a></div><div class="ttdeci">float line_length</div><div class="ttdoc">The length of the line for uncorrelated chroma.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00301">astcenc_internal.h:301</a></div></div>
<div class="ttc" id="astructpartition__lines3_html_aec409761ea4c0f5da2661f3e9b6858cc"><div class="ttname"><a href="structpartition__lines3.html#aec409761ea4c0f5da2661f3e9b6858cc">partition_lines3::uncor_line</a></div><div class="ttdeci">line3 uncor_line</div><div class="ttdoc">Line for uncorrelated chroma.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00284">astcenc_internal.h:284</a></div></div>
<div class="ttc" id="astructpartition__metrics_html"><div class="ttname"><a href="structpartition__metrics.html">partition_metrics</a></div><div class="ttdoc">Computed metrics about a partition in a block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00269">astcenc_internal.h:270</a></div></div>
<div class="ttc" id="astructpartition__metrics_html_a5a05f959255774e848e83001f9b7bd37"><div class="ttname"><a href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">partition_metrics::dir</a></div><div class="ttdeci">vfloat4 dir</div><div class="ttdoc">The dominant error-weighted direction in the partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00275">astcenc_internal.h:275</a></div></div>
<div class="ttc" id="astructpartition__metrics_html_a81851ed35dd9dc3ce09a74b8167f5846"><div class="ttname"><a href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">partition_metrics::avg</a></div><div class="ttdeci">vfloat4 avg</div><div class="ttdoc">The error-weighted average color in the partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00272">astcenc_internal.h:272</a></div></div>
<div class="ttc" id="astructprocessed__line3_html_aa87031817df0c101f16e5e0a7687f10d"><div class="ttname"><a href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">processed_line3::bs</a></div><div class="ttdeci">vfloat4 bs</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00479">astcenc_mathlib.h:479</a></div></div>
<div class="ttc" id="astructprocessed__line3_html_ab2637ed29af1632d3181cd1bc7d7cef0"><div class="ttname"><a href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">processed_line3::amod</a></div><div class="ttdeci">vfloat4 amod</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00478">astcenc_mathlib.h:478</a></div></div>
<div class="ttc" id="astructprocessed__line4_html"><div class="ttname"><a href="structprocessed__line4.html">processed_line4</a></div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00482">astcenc_mathlib.h:483</a></div></div>
<div class="ttc" id="astructprocessed__line4_html_a0e2bff0306a32a7f07e0f127ff13febc"><div class="ttname"><a href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">processed_line4::bs</a></div><div class="ttdeci">vfloat4 bs</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00485">astcenc_mathlib.h:485</a></div></div>
<div class="ttc" id="astructprocessed__line4_html_a15d23ed62e7f387dde80641c087fa578"><div class="ttname"><a href="structprocessed__line4.html#a15d23ed62e7f387dde80641c087fa578">processed_line4::amod</a></div><div class="ttdeci">vfloat4 amod</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00484">astcenc_mathlib.h:484</a></div></div>
<div class="ttc" id="astructvfloat4_html_a04b5f338012dab6be0b2bd7910fcbcae"><div class="ttname"><a href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 zero()</div><div class="ttdoc">Factory that returns a vector of zeros.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00116">astcenc_vecmathlib_neon_4.h:116</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630_cgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630_cgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630_cgraph" id="aastcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630_cgraph">
<area shape="rect" title="Find the best set of partitions to trial for a given block." alt="" coords="5,1459,132,1499"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="189,829,350,869"/>
<area shape="poly" title=" " alt="" coords="72,1459,111,1294,142,1180,177,1064,215,963,251,881,256,883,220,965,183,1066,147,1181,116,1296,77,1460"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="494,1215,534,1240"/>
<area shape="poly" title=" " alt="" coords="77,1458,115,1393,144,1357,178,1327,216,1303,257,1283,342,1254,420,1237,480,1228,481,1233,421,1242,343,1259,259,1288,219,1308,182,1331,148,1361,120,1396,82,1460"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="689,1137,780,1163"/>
<area shape="poly" title=" " alt="" coords="73,1458,85,1419,107,1369,137,1317,157,1293,178,1272,237,1231,303,1200,371,1177,441,1161,509,1151,572,1146,675,1144,676,1149,573,1151,509,1156,442,1166,373,1182,305,1205,240,1236,182,1276,160,1297,142,1320,112,1371,90,1421,78,1460"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a00407861c2f0e767b64b1cb1bb7a27b6" title="Compute averages and dominant directions for each partition in a 4 component texture." alt="" coords="189,1077,350,1117"/>
<area shape="poly" title=" " alt="" coords="70,1459,79,1403,99,1324,131,1238,152,1195,178,1156,195,1138,216,1122,219,1126,199,1141,182,1160,157,1198,136,1240,104,1326,85,1404,75,1460"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#ac4a96475fb0074ef3fd0f08ea66de75e" title="Compute the RGB error for uncorrelated and same chroma projections." alt="" coords="423,332,605,357"/>
<area shape="poly" title=" " alt="" coords="68,1459,75,1302,94,1057,108,927,126,805,150,702,163,661,178,627,208,580,244,536,284,496,326,460,408,401,474,362,477,366,411,406,329,464,287,500,248,540,212,583,182,630,168,662,155,704,132,806,113,928,99,1058,81,1302,73,1459"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a2dec702033b002eaf4090eb47ce4ad21" title="Compute the RGBA error for uncorrelated and same chroma projections." alt="" coords="419,480,609,505"/>
<area shape="poly" title=" " alt="" coords="68,1459,76,1318,95,1101,109,987,128,880,150,790,163,754,178,726,207,685,242,649,280,616,320,587,399,540,466,508,468,513,402,544,323,591,283,620,245,653,211,689,182,729,168,757,155,792,133,881,115,988,100,1102,81,1318,73,1459"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a89e88da4b6a389046d10b859ba68a118" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="180,1567,359,1607"/>
<area shape="poly" title=" " alt="" coords="108,1497,221,1558,218,1563,106,1502"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="707,1591,762,1616"/>
<area shape="poly" title=" " alt="" coords="132,1467,230,1457,354,1455,422,1459,490,1468,558,1482,623,1504,666,1535,713,1579,710,1583,662,1539,620,1508,556,1487,489,1473,421,1464,354,1460,230,1463,133,1472"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="697,1732,773,1757"/>
<area shape="poly" title=" " alt="" coords="84,1498,124,1555,152,1588,182,1617,228,1651,268,1672,310,1690,360,1720,383,1741,393,1750,408,1757,443,1766,480,1772,555,1774,625,1766,683,1755,684,1761,626,1772,555,1779,480,1777,442,1772,406,1762,390,1754,380,1745,357,1724,307,1695,266,1676,225,1656,178,1621,148,1591,120,1558,80,1501"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#ae36c7167bc89ff2bf984c1a912526dcb" title="Return the dot product for the bottom 3 lanes, returning vector." alt="" coords="246,1733,293,1759"/>
<area shape="poly" title=" " alt="" coords="77,1499,88,1543,108,1600,139,1660,159,1687,182,1712,206,1728,233,1737,232,1742,204,1732,178,1716,155,1691,135,1663,103,1602,83,1544,71,1500"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477" title="Return the dot product for the bottom 3 lanes, returning scalar." alt="" coords="239,1783,300,1808"/>
<area shape="poly" title=" " alt="" coords="74,1499,82,1553,99,1626,113,1665,131,1703,154,1739,182,1769,202,1782,226,1789,224,1794,200,1787,178,1773,150,1742,127,1706,108,1667,94,1628,76,1554,69,1500"/>
<area shape="rect" href="structblock__size__descriptor.html#a551741bf3178a4b4617b2389c27345ec" title="Get the partition info structure for a given partition count and seed." alt="" coords="192,1833,347,1873"/>
<area shape="poly" title=" " alt="" coords="73,1499,79,1561,95,1646,109,1692,128,1738,152,1781,182,1819,186,1822,182,1826,178,1822,147,1784,123,1740,104,1694,90,1647,74,1562,68,1500"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a8d4cb4068f0c27419e45878261806cac" title="Insert a partitioning into an order list of results, sorted by error." alt="" coords="223,1897,316,1923"/>
<area shape="poly" title=" " alt="" coords="72,1499,73,1571,85,1674,99,1730,119,1786,146,1837,182,1883,195,1893,210,1900,208,1905,192,1897,178,1887,141,1840,114,1788,94,1732,80,1675,68,1572,66,1500"/>
<area shape="rect" href="structimage__block.html#ae3c0735355d378591db6cb7a011e381a" title="Test if a single color channel is constant across the block." alt="" coords="429,595,599,635"/>
<area shape="poly" title=" " alt="" coords="69,1459,79,1332,99,1142,114,1042,132,950,153,871,178,815,202,782,231,752,263,726,297,702,367,664,432,637,434,642,369,669,300,707,266,730,234,756,206,786,182,818,158,873,137,951,119,1043,105,1143,84,1332,74,1459"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4" title="Normalize a vector, returning safe if len is zero." alt="" coords="215,1341,324,1367"/>
<area shape="poly" title=" " alt="" coords="100,1457,235,1372,238,1376,103,1461"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08" title="Factory that returns a unit length 3 component vfloat4." alt="" coords="244,1947,295,1972"/>
<area shape="poly" title=" " alt="" coords="75,1499,87,1592,109,1723,123,1789,141,1850,160,1900,182,1933,205,1948,231,1955,230,1960,202,1953,178,1937,155,1903,135,1852,118,1791,103,1724,81,1593,70,1500"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a5177e2c50f2c01a5610b2844ee3a071d" title=" " alt="" coords="244,1996,295,2021"/>
<area shape="poly" title=" " alt="" coords="74,1500,85,1601,106,1747,120,1821,138,1890,158,1945,182,1983,204,1998,231,2005,230,2010,202,2002,178,1987,154,1948,133,1891,115,1823,100,1748,79,1602,69,1500"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#ac5429bc77cf39a7dba332af8fb14e093" title="Functions for finding dominant direction of a set of colors." alt="" coords="410,711,618,736"/>
<area shape="poly" title=" " alt="" coords="290,826,340,785,372,763,406,745,424,738,426,743,408,750,375,768,344,789,294,830"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="690,1036,779,1061"/>
<area shape="poly" title=" " alt="" coords="343,826,407,815,480,812,518,815,555,823,590,835,623,853,637,866,647,879,654,907,659,937,672,970,713,1024,709,1027,667,973,654,938,649,908,642,881,633,869,620,858,588,840,553,828,517,821,480,817,407,821,344,831"/>
<area shape="poly" title=" " alt="" coords="286,868,499,1202,495,1204,281,870"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="872,556,927,581"/>
<area shape="poly" title=" " alt="" coords="349,826,357,820,369,805,375,790,378,757,382,725,390,710,405,696,434,679,460,668,486,662,511,662,562,673,623,696,638,707,648,720,656,732,671,742,706,755,736,761,765,758,799,742,818,728,834,711,861,671,879,630,890,594,895,595,884,631,865,674,838,715,821,733,801,747,767,763,736,767,705,761,668,747,652,736,643,723,635,710,620,700,561,678,510,667,486,667,462,673,436,683,408,700,395,713,387,727,383,758,380,791,373,808,361,824,352,831"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="485,912,543,937"/>
<area shape="poly" title=" " alt="" coords="333,866,407,890,473,910,471,915,406,895,331,871"/>
<area shape="rect" href="structimage__block.html#a682b1ada02acb8369d6f6f30378b260e" title="Get an RGB texel value from the data." alt="" coords="445,760,583,785"/>
<area shape="poly" title=" " alt="" coords="331,826,406,802,456,787,457,792,407,807,333,831"/>
<area shape="poly" title=" " alt="" coords="351,853,515,872,585,884,623,897,641,918,651,938,656,958,657,979,657,1023,662,1046,672,1071,691,1100,712,1125,708,1129,686,1104,667,1074,657,1048,652,1023,651,979,650,959,646,940,637,921,620,902,584,889,514,877,350,858"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="687,833,783,859"/>
<area shape="poly" title=" " alt="" coords="594,734,623,745,649,764,671,788,710,822,707,826,667,792,645,768,620,750,592,739"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="867,1037,931,1063"/>
<area shape="poly" title=" " alt="" coords="606,734,623,745,637,760,644,776,649,807,653,838,660,853,671,868,687,881,702,889,733,896,765,902,783,908,802,920,829,944,853,972,887,1024,883,1027,848,975,825,948,798,924,781,913,764,907,732,901,700,894,684,886,667,872,655,856,648,839,644,808,639,778,632,763,620,749,603,738"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="686,708,783,733"/>
<area shape="poly" title=" " alt="" coords="619,719,672,719,672,724,619,725"/>
<area shape="poly" title=" " alt="" coords="608,734,623,745,644,773,655,799,659,826,658,852,656,908,660,938,672,970,690,1000,712,1025,708,1028,686,1003,667,973,655,939,651,908,653,852,654,826,650,801,640,775,619,749,605,738"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07" title="Factory that returns a 3 component vfloat4." alt="" coords="705,935,764,960"/>
<area shape="poly" title=" " alt="" coords="607,734,623,745,640,766,648,787,651,829,651,871,658,892,671,914,694,931,691,935,667,917,653,894,646,872,645,829,643,788,635,769,620,749,604,738"/>
<area shape="poly" title=" " alt="" coords="707,835,702,825,705,815,716,809,735,807,757,810,767,819,763,823,755,815,735,812,718,814,709,819,707,824,712,832"/>
<area shape="poly" title=" " alt="" coords="872,1039,866,1029,869,1019,881,1013,899,1011,922,1014,931,1023,928,1027,919,1019,899,1016,882,1018,873,1023,872,1028,877,1036"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="854,784,945,809"/>
<area shape="poly" title=" " alt="" coords="771,1034,798,1015,834,967,860,914,879,864,890,822,895,824,884,865,865,917,838,970,802,1019,774,1038"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="848,1087,951,1112"/>
<area shape="poly" title=" " alt="" coords="778,1059,845,1080,843,1085,776,1064"/>
<area shape="poly" title=" " alt="" coords="534,1227,585,1228,654,1224,692,1218,730,1207,766,1192,798,1172,810,1161,817,1150,823,1125,829,1099,846,1072,854,1066,857,1070,850,1076,834,1101,828,1126,822,1152,814,1164,802,1176,768,1197,732,1212,693,1223,655,1229,585,1234,534,1232"/>
<area shape="poly" title=" " alt="" coords="585,781,605,790,623,803,636,817,643,831,649,858,654,886,661,900,671,913,694,930,691,935,667,917,656,902,649,887,644,859,638,832,631,820,620,807,602,795,583,786"/>
<area shape="poly" title=" " alt="" coords="776,1135,843,1114,845,1119,778,1140"/>
<area shape="poly" title=" " alt="" coords="350,1086,676,1052,676,1057,350,1091"/>
<area shape="poly" title=" " alt="" coords="309,1114,483,1208,481,1213,307,1119"/>
<area shape="poly" title=" " alt="" coords="329,1074,406,1051,495,1038,611,1025,670,1016,723,1005,767,989,798,969,818,947,830,925,836,903,838,881,838,831,845,771,889,594,894,595,851,772,843,831,843,881,841,904,835,927,822,950,802,973,769,994,724,1010,671,1022,612,1030,496,1043,407,1057,331,1079"/>
<area shape="poly" title=" " alt="" coords="281,1075,330,1011,365,976,405,946,438,933,471,926,472,931,440,938,408,951,369,980,334,1014,285,1078"/>
<area shape="poly" title=" " alt="" coords="351,1103,676,1141,675,1146,350,1108"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a83cf48552a7e8225358c7c43df24fd96" title="Compute the average RGBA color of each partition." alt="" coords="407,961,621,987"/>
<area shape="poly" title=" " alt="" coords="294,1074,344,1039,406,1004,445,988,447,993,408,1008,347,1043,297,1079"/>
<area shape="rect" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9" title="Get an RGBA texel value from the data." alt="" coords="669,1499,800,1524"/>
<area shape="poly" title=" " alt="" coords="287,1115,336,1180,370,1216,408,1249,438,1269,465,1282,516,1299,567,1316,594,1330,623,1352,655,1384,683,1420,723,1485,718,1488,679,1423,651,1388,620,1356,591,1335,564,1321,514,1304,463,1287,435,1274,405,1253,367,1220,332,1183,282,1119"/>
<area shape="poly" title=" " alt="" coords="589,959,620,946,647,929,672,908,712,868,716,871,676,912,650,933,623,951,591,964"/>
<area shape="poly" title=" " alt="" coords="531,985,589,1030,628,1053,670,1070,718,1078,767,1077,814,1071,853,1061,855,1067,815,1076,768,1083,718,1083,669,1075,625,1058,586,1034,528,989"/>
<area shape="poly" title=" " alt="" coords="602,959,620,947,635,929,643,912,649,878,652,839,657,818,667,795,687,766,708,742,712,745,691,770,672,798,662,820,657,840,655,878,648,914,639,932,623,951,605,963"/>
<area shape="poly" title=" " alt="" coords="533,356,579,401,603,432,624,466,639,506,648,542,651,605,653,668,659,703,672,744,693,785,717,821,712,824,688,788,667,746,654,704,648,668,646,605,642,542,634,508,619,469,599,435,575,404,529,359"/>
<area shape="poly" title=" " alt="" coords="521,330,543,300,576,261,618,222,642,206,668,193,706,178,739,170,770,173,802,193,811,208,819,232,830,303,838,396,842,500,846,700,851,820,872,934,894,1024,889,1025,867,935,845,821,841,701,837,500,832,396,825,304,814,234,806,211,798,197,768,178,739,175,707,183,670,198,645,210,621,226,580,265,547,303,526,333"/>
<area shape="poly" title=" " alt="" coords="532,356,577,401,602,432,624,466,642,514,648,555,654,595,672,642,691,671,712,696,708,699,686,674,667,645,649,596,643,556,637,516,619,469,598,435,573,405,528,359"/>
<area shape="poly" title=" " alt="" coords="518,331,537,293,568,241,612,189,639,167,668,149,705,133,738,125,770,129,802,149,815,165,825,184,839,234,846,294,848,360,846,492,847,548,851,592,872,691,893,770,888,772,867,692,845,593,841,549,841,492,842,360,840,295,833,235,820,186,810,168,798,153,768,134,738,130,707,138,671,154,642,171,616,193,573,244,541,295,523,333"/>
<area shape="poly" title=" " alt="" coords="516,331,531,284,561,219,581,184,606,151,635,122,668,98,704,81,737,74,769,79,802,99,828,125,843,152,849,179,850,208,846,270,846,305,851,343,895,542,889,543,845,344,840,305,840,270,845,208,844,180,838,154,823,128,798,103,767,84,737,79,706,86,671,103,638,126,610,154,586,187,565,221,536,286,521,333"/>
<area shape="poly" title=" " alt="" coords="534,356,580,401,605,432,624,466,640,512,652,554,661,632,658,703,649,770,640,837,636,908,645,985,656,1027,672,1072,689,1101,710,1126,706,1129,685,1104,667,1074,651,1028,640,986,631,908,634,837,644,769,653,702,656,632,646,555,635,513,619,468,600,435,576,404,530,360"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad93dff3341cbbeed568d4bd6dc4ef87c" title="True if all lanes are enabled, false otherwise." alt="" coords="715,356,754,381"/>
<area shape="poly" title=" " alt="" coords="606,352,702,363,701,368,606,357"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="704,455,765,480"/>
<area shape="poly" title=" " alt="" coords="535,355,594,395,671,440,692,449,690,454,668,444,591,400,532,360"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a5d1b09f64af83d5171e4b9580f62ac71" title="Return the horizontal maximum of a vector." alt="" coords="701,5,769,31"/>
<area shape="poly" title=" " alt="" coords="516,331,533,280,563,206,608,123,636,84,668,48,686,34,690,38,671,52,640,87,612,126,568,208,538,282,521,333"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a5618d81f875c0158284ccc9923d83dab" title="Return the horizontal minimum of a vector." alt="" coords="703,307,767,332"/>
<area shape="poly" title=" " alt="" coords="606,331,689,322,689,327,606,337"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="695,208,775,233"/>
<area shape="poly" title=" " alt="" coords="531,330,590,288,668,242,681,236,684,241,671,247,593,293,534,334"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3" title="Return the max vector of two vectors." alt="" coords="711,257,758,283"/>
<area shape="poly" title=" " alt="" coords="552,329,697,280,699,285,554,334"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b" title="Return the min vector of two vectors." alt="" coords="713,405,756,431"/>
<area shape="poly" title=" " alt="" coords="554,355,701,404,699,409,552,360"/>
<area shape="poly" title=" " alt="" coords="755,369,778,377,802,391,835,427,860,468,880,508,893,542,888,544,875,510,856,470,830,430,798,395,776,382,753,374"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a516a2f0d872381b8c7c047845a90c9a3" title="Return the horizontal maximum of a vector." alt="" coords="872,5,927,31"/>
<area shape="poly" title=" " alt="" coords="769,15,858,15,858,21,769,21"/>
<area shape="rect" href="structvint8.html#a2e1f0c785f4899e1b7912f2580b9f77c" title="Get the scalar from a single lane." alt="" coords="859,156,939,181"/>
<area shape="poly" title=" " alt="" coords="770,29,802,48,850,96,885,143,880,146,846,99,798,52,767,33"/>
<area shape="poly" title=" " alt="" coords="766,308,798,292,825,269,848,242,882,192,886,195,852,245,828,272,802,296,768,313"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ae7ff255b24f24f8d2a31e6849f4b1250" title="Return the horizontal minimum of a vector." alt="" coords="874,307,925,332"/>
<area shape="poly" title=" " alt="" coords="767,317,860,317,860,322,767,322"/>
<area shape="poly" title=" " alt="" coords="538,503,581,535,604,557,624,582,644,625,652,662,657,699,672,744,694,785,718,820,713,823,690,788,667,746,652,700,646,662,639,626,619,585,600,561,578,539,535,507"/>
<area shape="poly" title=" " alt="" coords="534,504,576,537,623,582,646,613,656,627,671,641,689,652,706,658,738,663,770,670,786,679,802,694,812,712,824,746,851,839,895,1023,890,1024,845,840,819,747,807,715,798,697,783,683,768,675,737,668,704,663,687,657,668,645,652,631,642,616,619,585,572,541,531,508"/>
<area shape="poly" title=" " alt="" coords="536,503,579,536,623,582,639,611,646,637,654,661,671,687,687,699,684,703,667,690,649,664,641,638,634,613,619,585,576,540,533,507"/>
<area shape="poly" title=" " alt="" coords="550,503,670,547,708,557,740,562,769,570,802,592,838,634,865,683,884,731,895,770,890,771,878,732,860,685,834,637,798,596,767,575,739,567,707,562,669,553,548,508"/>
<area shape="poly" title=" " alt="" coords="580,503,859,558,858,563,579,508"/>
<area shape="poly" title=" " alt="" coords="541,503,584,535,606,557,624,582,652,651,662,713,661,770,654,825,647,881,643,938,650,1001,672,1072,689,1101,711,1126,707,1129,685,1104,667,1074,645,1002,638,938,641,880,649,825,656,770,657,713,646,652,619,585,602,560,581,539,537,508"/>
<area shape="poly" title=" " alt="" coords="531,478,590,436,668,390,701,376,703,381,671,395,593,441,534,482"/>
<area shape="poly" title=" " alt="" coords="609,479,690,470,690,475,610,484"/>
<area shape="poly" title=" " alt="" coords="528,478,573,432,598,401,619,367,639,322,648,284,654,244,667,195,721,43,726,45,672,196,659,245,653,285,644,323,624,370,602,404,577,435,532,482"/>
<area shape="poly" title=" " alt="" coords="524,478,581,414,622,375,668,341,688,331,691,335,671,346,625,379,584,418,528,481"/>
<area shape="poly" title=" " alt="" coords="527,478,571,431,619,367,633,333,638,303,646,273,667,243,681,233,684,237,671,247,651,276,644,304,638,334,624,370,575,435,531,482"/>
<area shape="poly" title=" " alt="" coords="525,478,568,430,619,367,632,346,640,328,650,310,668,292,697,276,699,281,671,296,654,313,645,330,637,348,624,370,572,434,529,482"/>
<area shape="poly" title=" " alt="" coords="552,477,700,427,701,432,554,482"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a4567304c86889e62a6cf2b5a391d6260" title="Count the partition table mismatches vs the data clustering." alt="" coords="415,1517,613,1543"/>
<area shape="poly" title=" " alt="" coords="355,1565,445,1543,446,1548,356,1570"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#ad1670adef9a30320320aeb3fa51bb7dc" title="Use counting sort on the mismatch array to sort partition candidates." alt="" coords="441,1567,587,1607"/>
<area shape="poly" title=" " alt="" coords="359,1585,427,1585,427,1590,359,1590"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a48c3e037a653156f4c4d4643f267ba3f" title="Assign texels to clusters, based on a set of chosen center points." alt="" coords="457,1632,571,1657"/>
<area shape="poly" title=" " alt="" coords="356,1605,446,1626,445,1631,355,1610"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#acfcac2ef43cb03621ea25d3f6673c19e" title="Functions for finding best partition for a block." alt="" coords="468,1681,560,1707"/>
<area shape="poly" title=" " alt="" coords="299,1605,348,1637,408,1668,455,1682,454,1687,406,1672,346,1642,296,1610"/>
<area shape="poly" title=" " alt="" coords="292,1605,408,1717,443,1730,479,1740,554,1750,625,1752,683,1748,683,1754,625,1757,554,1755,478,1745,441,1735,405,1722,289,1609"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#acf130a5dab418b762b9ad6d2db920c9f" title="Compute new cluster centers based on their center of gravity." alt="" coords="457,1416,571,1441"/>
<area shape="poly" title=" " alt="" coords="300,1565,480,1447,483,1451,303,1569"/>
<area shape="poly" title=" " alt="" coords="570,1635,596,1628,620,1617,663,1581,711,1532,714,1536,667,1585,623,1622,597,1633,571,1640"/>
<area shape="poly" title=" " alt="" coords="570,1632,693,1608,694,1613,571,1637"/>
<area shape="poly" title=" " alt="" coords="752,1588,777,1565,798,1535,811,1502,820,1469,825,1409,819,1353,809,1299,801,1245,800,1191,804,1163,813,1134,826,1104,846,1072,853,1064,857,1068,850,1076,831,1106,818,1136,809,1164,805,1191,806,1245,815,1298,825,1352,830,1409,825,1470,816,1503,802,1538,781,1569,756,1592"/>
<area shape="poly" title=" " alt="" coords="560,1690,591,1683,620,1668,638,1648,646,1627,653,1604,667,1578,707,1532,711,1536,672,1581,658,1606,651,1629,643,1651,623,1672,593,1688,561,1695"/>
<area shape="poly" title=" " alt="" coords="559,1685,620,1668,665,1646,703,1621,706,1626,668,1650,622,1672,561,1690"/>
<area shape="poly" title=" " alt="" coords="561,1702,684,1730,683,1736,560,1707"/>
<area shape="poly" title=" " alt="" coords="571,1423,597,1416,620,1403,644,1378,665,1350,697,1287,717,1225,727,1176,732,1177,722,1226,702,1289,670,1352,648,1382,623,1407,599,1421,572,1428"/>
<area shape="poly" title=" " alt="" coords="563,1439,622,1458,696,1490,694,1495,620,1463,561,1444"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e" title="Return the horizontal sum of RGB vector lanes as a scalar." alt="" coords="469,1833,559,1859"/>
<area shape="poly" title=" " alt="" coords="293,1747,326,1755,360,1769,375,1780,385,1791,394,1801,408,1812,457,1831,455,1836,405,1816,390,1805,381,1794,371,1784,357,1774,324,1760,292,1752"/>
<area shape="poly" title=" " alt="" coords="301,1799,457,1832,456,1837,300,1804"/>
<area shape="rect" href="structblock__size__descriptor.html#a6d0c429d925ab011c22ab28b5807c368" title="Get the partition info table for a given partition count." alt="" coords="440,1883,588,1923"/>
<area shape="poly" title=" " alt="" coords="348,1866,427,1883,426,1888,347,1871"/>
<area shape="poly" title=" " alt="" coords="580,633,623,652,647,669,671,686,694,699,692,704,668,691,644,673,620,656,578,638"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a1fcb81537a701f246e75fa622c2dd8ee" title="True if any lanes are enabled, false otherwise." alt="" coords="713,607,756,632"/>
<area shape="poly" title=" " alt="" coords="600,614,699,616,699,621,600,620"/>
<area shape="poly" title=" " alt="" coords="756,610,858,578,860,583,757,615"/>
<area shape="poly" title=" " alt="" coords="324,1350,426,1340,489,1329,556,1313,623,1290,687,1260,747,1221,798,1173,838,1027,889,822,894,823,843,1028,802,1175,750,1225,690,1264,625,1295,557,1318,490,1334,427,1345,325,1355"/>
<area shape="poly" title=" " alt="" coords="284,1339,336,1299,405,1257,444,1242,480,1232,481,1237,445,1247,408,1262,339,1304,287,1343"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a46b31b19ff13c14adb023db4b5df8e52" title="Return the sqrt of the lanes in the vector." alt="" coords="492,1367,536,1392"/>
<area shape="poly" title=" " alt="" coords="325,1357,478,1373,478,1378,324,1362"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630_icgraph" id="aastcenc__find__best__partitioning_8cpp_a7577b3047a3f9f0fe44fd579f5450630_icgraph">
<area shape="rect" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="ad1670adef9a30320320aeb3fa51bb7dc" name="ad1670adef9a30320320aeb3fa51bb7dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1670adef9a30320320aeb3fa51bb7dc">&#9670;&#160;</a></span>get_partition_ordering_by_mismatch_bits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int get_partition_ordering_by_mismatch_bits </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>texel_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>partitioning_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>mismatch_count</em></span>[BLOCK_MAX_PARTITIONINGS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>partition_ordering</em></span>[BLOCK_MAX_PARTITIONINGS]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use counting sort on the mismatch array to sort partition candidates. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">partitioning_count</td><td>The number of packed partitionings. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">mismatch_count</td><td>Partitioning mismatch counts, in index order. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">partition_ordering</td><td>Partition index values, in mismatch order.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The number of active partitions in this selection. </dd></dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00412">412</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  417</span>  {</div>
<div class="line"><span class="lineno">  418</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partitioning_count &gt; 0);</div>
<div class="line"><span class="lineno">  419</span>    uint16_t mscount[<a class="code hl_variable" href="astcenc__internal_8h.html#a24bfd76e0fe1130b9741b58cc3e2b675">BLOCK_MAX_KMEANS_TEXELS</a>] { 0 };</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>    <span class="comment">// Create the histogram of mismatch counts</span></div>
<div class="line"><span class="lineno">  422</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partitioning_count; i++)</div>
<div class="line"><span class="lineno">  423</span>    {</div>
<div class="line"><span class="lineno">  424</span>        mscount[mismatch_count[i]]++;</div>
<div class="line"><span class="lineno">  425</span>    }</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>    <span class="comment">// Create a running sum from the histogram array</span></div>
<div class="line"><span class="lineno">  428</span>    <span class="comment">// Cells store previous values only; i.e. exclude self after sum</span></div>
<div class="line"><span class="lineno">  429</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sum = 0;</div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i++)</div>
<div class="line"><span class="lineno">  431</span>    {</div>
<div class="line"><span class="lineno">  432</span>        uint16_t cnt = mscount[i];</div>
<div class="line"><span class="lineno">  433</span>        mscount[i] = sum;</div>
<div class="line"><span class="lineno">  434</span>        sum += cnt;</div>
<div class="line"><span class="lineno">  435</span>    }</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>    <span class="comment">// Use the running sum as the index, incrementing after read to allow</span></div>
<div class="line"><span class="lineno">  438</span>    <span class="comment">// sequential entries with the same count</span></div>
<div class="line"><span class="lineno">  439</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partitioning_count; i++)</div>
<div class="line"><span class="lineno">  440</span>    {</div>
<div class="line"><span class="lineno">  441</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> idx = mscount[mismatch_count[i]]++;</div>
<div class="line"><span class="lineno">  442</span>        partition_ordering[idx] = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(i);</div>
<div class="line"><span class="lineno">  443</span>    }</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>    <span class="keywordflow">return</span> partitioning_count;</div>
<div class="line"><span class="lineno">  446</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_ad1670adef9a30320320aeb3fa51bb7dc_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_ad1670adef9a30320320aeb3fa51bb7dc_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_ad1670adef9a30320320aeb3fa51bb7dc_icgraph" id="aastcenc__find__best__partitioning_8cpp_ad1670adef9a30320320aeb3fa51bb7dc_icgraph">
<area shape="rect" title="Use counting sort on the mismatch array to sort partition candidates." alt="" coords="1416,5,1563,45"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a89e88da4b6a389046d10b859ba68a118" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="1189,5,1368,45"/>
<area shape="poly" title=" " alt="" coords="1402,28,1368,28,1368,23,1402,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1175,28,1142,28,1142,23,1175,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a8d4cb4068f0c27419e45878261806cac" name="a8d4cb4068f0c27419e45878261806cac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d4cb4068f0c27419e45878261806cac">&#9670;&#160;</a></span>insert_result()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void insert_result </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>max_values</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>this_error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>this_partition</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>best_errors</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *</td>          <td class="paramname"><span class="paramname"><em>best_partitions</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Insert a partitioning into an order list of results, sorted by error. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">max_values</td><td>The max number of entries in the best result arrays. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">this_error</td><td>The error of the new entry. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">this_partition</td><td>The partition ID of the new entry. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_errors</td><td>The array of best error values. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_partitions</td><td>The array of best partition values. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00512">512</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  518</span>{</div>
<div class="line"><span class="lineno">  519</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(max_values &gt; 0);</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    <span class="comment">// Don&#39;t bother searching if the current worst error beats the new error</span></div>
<div class="line"><span class="lineno">  522</span>    <span class="keywordflow">if</span> (this_error &gt;= best_errors[max_values - 1])</div>
<div class="line"><span class="lineno">  523</span>    {</div>
<div class="line"><span class="lineno">  524</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  525</span>    }</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>    <span class="comment">// Else insert into the list in error-order</span></div>
<div class="line"><span class="lineno">  528</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; max_values; i++)</div>
<div class="line"><span class="lineno">  529</span>    {</div>
<div class="line"><span class="lineno">  530</span>        <span class="comment">// Existing result is better - move on ...</span></div>
<div class="line"><span class="lineno">  531</span>        <span class="keywordflow">if</span> (this_error &gt; best_errors[i])</div>
<div class="line"><span class="lineno">  532</span>        {</div>
<div class="line"><span class="lineno">  533</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  534</span>        }</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>        <span class="comment">// Move existing results down one</span></div>
<div class="line"><span class="lineno">  537</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = max_values - 1; j &gt; i; j--)</div>
<div class="line"><span class="lineno">  538</span>        {</div>
<div class="line"><span class="lineno">  539</span>            best_errors[j] = best_errors[j - 1];</div>
<div class="line"><span class="lineno">  540</span>            best_partitions[j] = best_partitions[j - 1];</div>
<div class="line"><span class="lineno">  541</span>        }</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span>        <span class="comment">// Insert new result</span></div>
<div class="line"><span class="lineno">  544</span>        best_errors[i] = this_error;</div>
<div class="line"><span class="lineno">  545</span>        best_partitions[i] = this_partition;</div>
<div class="line"><span class="lineno">  546</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  547</span>    }</div>
<div class="line"><span class="lineno">  548</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac_icgraph" id="aastcenc__find__best__partitioning_8cpp_a8d4cb4068f0c27419e45878261806cac_icgraph">
<area shape="rect" title="Insert a partitioning into an order list of results, sorted by error." alt="" coords="1189,13,1283,38"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1176,28,1142,28,1142,23,1176,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a48c3e037a653156f4c4d4643f267ba3f" name="a48c3e037a653156f4c4d4643f267ba3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48c3e037a653156f4c4d4643f267ba3f">&#9670;&#160;</a></span>kmeans_assign()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kmeans_assign </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>texel_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>partition_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>cluster_centers</em></span>[BLOCK_MAX_PARTITIONS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>partition_of_texel</em></span>[BLOCK_MAX_TEXELS]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assign texels to clusters, based on a set of chosen center points. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">texel_count</td><td>The number of texels in the block. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_count</td><td>The number of partitions in the block. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">cluster_centers</td><td>The partition cluster center colors. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">partition_of_texel</td><td>The partition assigned for each texel. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00146">146</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  152</span>  {</div>
<div class="line"><span class="lineno">  153</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  154</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>    uint8_t partition_texel_count[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>] { 0 };</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>    <span class="comment">// Find the best partition for every texel</span></div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i++)</div>
<div class="line"><span class="lineno">  160</span>    {</div>
<div class="line"><span class="lineno">  161</span>        <span class="keywordtype">float</span> best_distance = std::numeric_limits&lt;float&gt;::max();</div>
<div class="line"><span class="lineno">  162</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> best_partition = 0;</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color = blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(i);</div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_count; j++)</div>
<div class="line"><span class="lineno">  166</span>        {</div>
<div class="line"><span class="lineno">  167</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> diff = color - cluster_centers[j];</div>
<div class="line"><span class="lineno">  168</span>            <span class="keywordtype">float</span> distance = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(diff * diff, blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>);</div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">if</span> (distance &lt; best_distance)</div>
<div class="line"><span class="lineno">  170</span>            {</div>
<div class="line"><span class="lineno">  171</span>                best_distance = distance;</div>
<div class="line"><span class="lineno">  172</span>                best_partition = j;</div>
<div class="line"><span class="lineno">  173</span>            }</div>
<div class="line"><span class="lineno">  174</span>        }</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>        partition_of_texel[i] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(best_partition);</div>
<div class="line"><span class="lineno">  177</span>        partition_texel_count[best_partition]++;</div>
<div class="line"><span class="lineno">  178</span>    }</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>    <span class="comment">// It is possible to get a situation where a partition ends up without any texels. In this case,</span></div>
<div class="line"><span class="lineno">  181</span>    <span class="comment">// assign texel N to partition N. This is silly, but ensures that every partition retains at</span></div>
<div class="line"><span class="lineno">  182</span>    <span class="comment">// least one texel. Reassigning a texel in this manner may cause another partition to go empty,</span></div>
<div class="line"><span class="lineno">  183</span>    <span class="comment">// so if we actually did a reassignment, run the whole loop over again.</span></div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordtype">bool</span> problem_case;</div>
<div class="line"><span class="lineno">  185</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  186</span>    {</div>
<div class="line"><span class="lineno">  187</span>        problem_case = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  189</span>        {</div>
<div class="line"><span class="lineno">  190</span>            <span class="keywordflow">if</span> (partition_texel_count[i] == 0)</div>
<div class="line"><span class="lineno">  191</span>            {</div>
<div class="line"><span class="lineno">  192</span>                partition_texel_count[partition_of_texel[i]]--;</div>
<div class="line"><span class="lineno">  193</span>                partition_texel_count[i]++;</div>
<div class="line"><span class="lineno">  194</span>                partition_of_texel[i] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(i);</div>
<div class="line"><span class="lineno">  195</span>                problem_case = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  196</span>            }</div>
<div class="line"><span class="lineno">  197</span>        }</div>
<div class="line"><span class="lineno">  198</span>    } <span class="keywordflow">while</span> (problem_case);</div>
<div class="line"><span class="lineno">  199</span>}</div>
<div class="ttc" id="astructimage__block_html_a6fd749c93e25e5e96748a10387c24a77"><div class="ttname"><a href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">image_block::channel_weight</a></div><div class="ttdeci">vfloat4 channel_weight</div><div class="ttdoc">The relative error significance of the color channels.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00774">astcenc_internal.h:774</a></div></div>
<div class="ttc" id="astructimage__block_html_af99de7d75e1e380b31d70d131509caa9"><div class="ttname"><a href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">image_block::texel</a></div><div class="ttdeci">vfloat4 texel(unsigned int index) const</div><div class="ttdoc">Get an RGBA texel value from the data.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00804">astcenc_internal.h:804</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f_cgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f_cgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f_cgraph" id="aastcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f_cgraph">
<area shape="rect" title="Assign texels to clusters, based on a set of chosen center points." alt="" coords="5,55,119,80"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="205,29,259,55"/>
<area shape="poly" title=" " alt="" coords="119,56,191,45,191,51,119,62"/>
<area shape="rect" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9" title="Get an RGBA texel value from the data." alt="" coords="167,79,297,104"/>
<area shape="poly" title=" " alt="" coords="119,73,154,78,153,83,119,78"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="345,29,409,55"/>
<area shape="poly" title=" " alt="" coords="260,39,331,39,331,45,260,45"/>
<area shape="poly" title=" " alt="" coords="353,30,348,21,350,11,361,5,377,3,397,6,406,15,402,18,395,11,377,8,362,10,355,15,353,20,357,28"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f_icgraph" id="aastcenc__find__best__partitioning_8cpp_a48c3e037a653156f4c4d4643f267ba3f_icgraph">
<area shape="rect" title="Assign texels to clusters, based on a set of chosen center points." alt="" coords="1416,13,1529,38"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a89e88da4b6a389046d10b859ba68a118" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="1189,5,1368,45"/>
<area shape="poly" title=" " alt="" coords="1403,28,1368,28,1368,23,1403,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1175,28,1142,28,1142,23,1175,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="acfcac2ef43cb03621ea25d3f6673c19e" name="acfcac2ef43cb03621ea25d3f6673c19e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfcac2ef43cb03621ea25d3f6673c19e">&#9670;&#160;</a></span>kmeans_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kmeans_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>texel_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>partition_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>cluster_centers</em></span>[BLOCK_MAX_PARTITIONS]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Functions for finding best partition for a block. </p>
<p>The partition search operates in two stages. The first pass uses kmeans clustering to group texels into an ideal partitioning for the requested partition count, and then compares that against the 1024 partitionings generated by the ASTC partition hash function. The generated partitions are then ranked by the number of texels in the wrong partition, compared to the ideal clustering. All 1024 partitions are tested for similarity and ranked, apart from duplicates and partitionings that actually generate fewer than the requested partition count, but only the top N candidates are actually put through a more detailed search. N is determined by the compressor quality preset.</p>
<p>For the detailed search, each candidate is checked against two possible encoding methods:</p>
<ul>
<li>The best partitioning assuming different chroma colors (RGB + RGB or RGB + delta endpoints).</li>
<li>The best partitioning assuming same chroma colors (RGB + scale endpoints).</li>
</ul>
<p>This is implemented by computing the compute mean color and dominant direction for each partition. This defines two lines, both of which go through the mean color value.</p>
<ul>
<li>One line has a direction defined by the dominant direction; this is used to assess the error from using an uncorrelated color representation.</li>
<li>The other line goes through (0,0,0,1) and is used to assess the error from using a same chroma (RGB + scale) color representation.</li>
</ul>
<p>The best candidate is selected by computing the squared-errors that result from using these lines for endpoint selection.</p>
<p>Pick some initial kmeans cluster centers.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">texel_count</td><td>The number of texels in the block. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_count</td><td>The number of partitions in the block. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cluster_centers</td><td>The initial partition cluster center colors. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00060">60</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>  {</div>
<div class="line"><span class="lineno">   66</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">   67</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> clusters_selected = 0;</div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordtype">float</span> distances[<a class="code hl_variable" href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a>];</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>    <span class="comment">// Pick a random sample as first cluster center; 145897 from random.org</span></div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sample = 145897 % texel_count;</div>
<div class="line"><span class="lineno">   74</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> center_color = blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(sample);</div>
<div class="line"><span class="lineno">   75</span>    cluster_centers[clusters_selected] = center_color;</div>
<div class="line"><span class="lineno">   76</span>    clusters_selected++;</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>    <span class="comment">// Compute the distance to the first cluster center</span></div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordtype">float</span> distance_sum = 0.0f;</div>
<div class="line"><span class="lineno">   80</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i++)</div>
<div class="line"><span class="lineno">   81</span>    {</div>
<div class="line"><span class="lineno">   82</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color = blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(i);</div>
<div class="line"><span class="lineno">   83</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> diff = color - center_color;</div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordtype">float</span> distance = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(diff * diff, blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>);</div>
<div class="line"><span class="lineno">   85</span>        distance_sum += distance;</div>
<div class="line"><span class="lineno">   86</span>        distances[i] = distance;</div>
<div class="line"><span class="lineno">   87</span>    }</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="comment">// More numbers from random.org for weighted-random center selection</span></div>
<div class="line"><span class="lineno">   90</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> cluster_cutoffs[9] {</div>
<div class="line"><span class="lineno">   91</span>        0.626220f, 0.932770f, 0.275454f,</div>
<div class="line"><span class="lineno">   92</span>        0.318558f, 0.240113f, 0.009190f,</div>
<div class="line"><span class="lineno">   93</span>        0.347661f, 0.731960f, 0.156391f</div>
<div class="line"><span class="lineno">   94</span>    };</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cutoff = (clusters_selected - 1) + 3 * (partition_count - 2);</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>    <span class="comment">// Pick the remaining samples as needed</span></div>
<div class="line"><span class="lineno">   99</span>    <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  100</span>    {</div>
<div class="line"><span class="lineno">  101</span>        <span class="comment">// Pick the next center in a weighted-random fashion.</span></div>
<div class="line"><span class="lineno">  102</span>        <span class="keywordtype">float</span> summa = 0.0f;</div>
<div class="line"><span class="lineno">  103</span>        <span class="keywordtype">float</span> distance_cutoff = distance_sum * cluster_cutoffs[cutoff++];</div>
<div class="line"><span class="lineno">  104</span>        <span class="keywordflow">for</span> (sample = 0; sample &lt; texel_count; sample++)</div>
<div class="line"><span class="lineno">  105</span>        {</div>
<div class="line"><span class="lineno">  106</span>            summa += distances[sample];</div>
<div class="line"><span class="lineno">  107</span>            <span class="keywordflow">if</span> (summa &gt;= distance_cutoff)</div>
<div class="line"><span class="lineno">  108</span>            {</div>
<div class="line"><span class="lineno">  109</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  110</span>            }</div>
<div class="line"><span class="lineno">  111</span>        }</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>        <span class="comment">// Clamp to a valid range and store the selected cluster center</span></div>
<div class="line"><span class="lineno">  114</span>        sample = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(sample, texel_count - 1);</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>        center_color = blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(sample);</div>
<div class="line"><span class="lineno">  117</span>        cluster_centers[clusters_selected++] = center_color;</div>
<div class="line"><span class="lineno">  118</span>        <span class="keywordflow">if</span> (clusters_selected &gt;= partition_count)</div>
<div class="line"><span class="lineno">  119</span>        {</div>
<div class="line"><span class="lineno">  120</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  121</span>        }</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>        <span class="comment">// Compute the distance to the new cluster center, keep the min dist</span></div>
<div class="line"><span class="lineno">  124</span>        distance_sum = 0.0f;</div>
<div class="line"><span class="lineno">  125</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i++)</div>
<div class="line"><span class="lineno">  126</span>        {</div>
<div class="line"><span class="lineno">  127</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color = blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(i);</div>
<div class="line"><span class="lineno">  128</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> diff = color - center_color;</div>
<div class="line"><span class="lineno">  129</span>            <span class="keywordtype">float</span> distance = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(diff * diff, blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>);</div>
<div class="line"><span class="lineno">  130</span>            distance = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(distance, distances[i]);</div>
<div class="line"><span class="lineno">  131</span>            distance_sum += distance;</div>
<div class="line"><span class="lineno">  132</span>            distances[i] = distance;</div>
<div class="line"><span class="lineno">  133</span>        }</div>
<div class="line"><span class="lineno">  134</span>    }</div>
<div class="line"><span class="lineno">  135</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e_cgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e_cgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e_cgraph" id="aastcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e_cgraph">
<area shape="rect" title="Functions for finding best partition for a block." alt="" coords="5,79,97,104"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="183,29,238,55"/>
<area shape="poly" title=" " alt="" coords="92,76,169,52,171,57,94,81"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="173,79,249,104"/>
<area shape="poly" title=" " alt="" coords="98,89,159,89,159,94,98,94"/>
<area shape="rect" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9" title="Get an RGBA texel value from the data." alt="" coords="145,128,276,153"/>
<area shape="poly" title=" " alt="" coords="94,101,156,121,155,126,92,107"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="324,29,388,55"/>
<area shape="poly" title=" " alt="" coords="238,39,310,39,310,45,238,45"/>
<area shape="poly" title=" " alt="" coords="331,30,326,21,329,11,339,5,356,3,376,6,385,15,381,18,373,11,356,8,341,10,333,15,332,20,336,28"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e_icgraph" id="aastcenc__find__best__partitioning_8cpp_acfcac2ef43cb03621ea25d3f6673c19e_icgraph">
<area shape="rect" title="Functions for finding best partition for a block." alt="" coords="1416,13,1508,38"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a89e88da4b6a389046d10b859ba68a118" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="1189,5,1368,45"/>
<area shape="poly" title=" " alt="" coords="1402,28,1368,28,1368,23,1402,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1175,28,1142,28,1142,23,1175,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="acf130a5dab418b762b9ad6d2db920c9f" name="acf130a5dab418b762b9ad6d2db920c9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf130a5dab418b762b9ad6d2db920c9f">&#9670;&#160;</a></span>kmeans_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void kmeans_update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>texel_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>partition_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>cluster_centers</em></span>[BLOCK_MAX_PARTITIONS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>partition_of_texel</em></span>[BLOCK_MAX_TEXELS]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute new cluster centers based on their center of gravity. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">texel_count</td><td>The number of texels in the block. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_count</td><td>The number of partitions in the block. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cluster_centers</td><td>The new cluster center colors. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_of_texel</td><td>The partition assigned for each texel. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00210">210</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  216</span>  {</div>
<div class="line"><span class="lineno">  217</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  218</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_sum[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>] {</div>
<div class="line"><span class="lineno">  221</span>        <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>(),</div>
<div class="line"><span class="lineno">  222</span>        <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>(),</div>
<div class="line"><span class="lineno">  223</span>        <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>(),</div>
<div class="line"><span class="lineno">  224</span>        <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>()</div>
<div class="line"><span class="lineno">  225</span>    };</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>    uint8_t partition_texel_count[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>] { 0 };</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>    <span class="comment">// Find the center-of-gravity in each cluster</span></div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i++)</div>
<div class="line"><span class="lineno">  231</span>    {</div>
<div class="line"><span class="lineno">  232</span>        uint8_t partition = partition_of_texel[i];</div>
<div class="line"><span class="lineno">  233</span>        color_sum[partition] += blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(i);</div>
<div class="line"><span class="lineno">  234</span>        partition_texel_count[partition]++;</div>
<div class="line"><span class="lineno">  235</span>    }</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <span class="comment">// Set the center of gravity to be the new cluster center</span></div>
<div class="line"><span class="lineno">  238</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  239</span>    {</div>
<div class="line"><span class="lineno">  240</span>        <span class="keywordtype">float</span> scale = 1.0f / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(partition_texel_count[i]);</div>
<div class="line"><span class="lineno">  241</span>        cluster_centers[i] = color_sum[i] * scale;</div>
<div class="line"><span class="lineno">  242</span>    }</div>
<div class="line"><span class="lineno">  243</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f_cgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f_cgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f_cgraph" id="aastcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f_cgraph">
<area shape="rect" title="Compute new cluster centers based on their center of gravity." alt="" coords="5,31,120,56"/>
<area shape="rect" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9" title="Get an RGBA texel value from the data." alt="" coords="168,5,299,31"/>
<area shape="poly" title=" " alt="" coords="120,32,154,27,155,32,121,37"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="188,55,279,80"/>
<area shape="poly" title=" " alt="" coords="121,49,175,56,174,62,120,54"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="347,55,449,80"/>
<area shape="poly" title=" " alt="" coords="279,65,333,65,333,70,279,70"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f_icgraph" id="aastcenc__find__best__partitioning_8cpp_acf130a5dab418b762b9ad6d2db920c9f_icgraph">
<area shape="rect" title="Compute new cluster centers based on their center of gravity." alt="" coords="1416,13,1531,38"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a89e88da4b6a389046d10b859ba68a118" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="1189,5,1368,45"/>
<area shape="poly" title=" " alt="" coords="1402,28,1368,28,1368,23,1402,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1175,28,1142,28,1142,23,1175,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a6c9cd07ba65d36a11ebdd0363f3a3550" name="a6c9cd07ba65d36a11ebdd0363f3a3550"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c9cd07ba65d36a11ebdd0363f3a3550">&#9670;&#160;</a></span>partition_mismatch2()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t partition_mismatch2 </td>
          <td>(</td>
          <td class="paramtype">const uint64_t</td>          <td class="paramname"><span class="paramname"><em>a</em></span>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t</td>          <td class="paramname"><span class="paramname"><em>b</em></span>[2]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute bit-mismatch for partitioning in 2-partition mode. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>The texel assignment bitvector for the block. </td></tr>
    <tr><td class="paramname">b</td><td>The texel assignment bitvector for the partition table.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The number of bit mismatches. </dd></dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00253">253</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  256</span>  {</div>
<div class="line"><span class="lineno">  257</span>    <span class="keywordtype">int</span> v1 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[0] ^ b[0]) + <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[1] ^ b[1]);</div>
<div class="line"><span class="lineno">  258</span>    <span class="keywordtype">int</span> v2 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[0] ^ b[1]) + <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[1] ^ b[0]);</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>    <span class="comment">// Divide by 2 because XOR always counts errors twice, once when missing</span></div>
<div class="line"><span class="lineno">  261</span>    <span class="comment">// in the expected position, and again when present in the wrong partition</span></div>
<div class="line"><span class="lineno">  262</span>    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(v1, v2) / 2);</div>
<div class="line"><span class="lineno">  263</span>}</div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_a652a0112f173bddee3a84a27eb679fda"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a></div><div class="ttdeci">static int popcount(uint64_t v)</div><div class="ttdoc">Population bit count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00348">astcenc_vecmathlib_common_4.h:348</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550_cgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550_cgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550_cgraph" id="aastcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550_cgraph">
<area shape="rect" title="Compute bit&#45;mismatch for partitioning in 2&#45;partition mode." alt="" coords="5,31,144,56"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="192,5,268,31"/>
<area shape="poly" title=" " alt="" coords="144,29,178,24,179,29,145,35"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda" title="Population bit count." alt="" coords="193,55,267,80"/>
<area shape="poly" title=" " alt="" coords="145,51,180,57,179,62,144,57"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550_icgraph" id="aastcenc__find__best__partitioning_8cpp_a6c9cd07ba65d36a11ebdd0363f3a3550_icgraph">
<area shape="rect" title="Compute bit&#45;mismatch for partitioning in 2&#45;partition mode." alt="" coords="1663,13,1801,38"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a4567304c86889e62a6cf2b5a391d6260" title="Count the partition table mismatches vs the data clustering." alt="" coords="1416,13,1615,38"/>
<area shape="poly" title=" " alt="" coords="1649,28,1615,28,1615,23,1649,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a89e88da4b6a389046d10b859ba68a118" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="1189,5,1368,45"/>
<area shape="poly" title=" " alt="" coords="1402,28,1368,28,1368,23,1402,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1175,28,1142,28,1142,23,1175,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a9acad2d527657aaa0da1c424db437e37" name="a9acad2d527657aaa0da1c424db437e37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9acad2d527657aaa0da1c424db437e37">&#9670;&#160;</a></span>partition_mismatch3()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t partition_mismatch3 </td>
          <td>(</td>
          <td class="paramtype">const uint64_t</td>          <td class="paramname"><span class="paramname"><em>a</em></span>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t</td>          <td class="paramname"><span class="paramname"><em>b</em></span>[3]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute bit-mismatch for partitioning in 3-partition mode. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>The texel assignment bitvector for the block. </td></tr>
    <tr><td class="paramname">b</td><td>The texel assignment bitvector for the partition table.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The number of bit mismatches. </dd></dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00273">273</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  276</span>  {</div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordtype">int</span> p00 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[0] ^ b[0]);</div>
<div class="line"><span class="lineno">  278</span>    <span class="keywordtype">int</span> p01 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[0] ^ b[1]);</div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordtype">int</span> p02 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[0] ^ b[2]);</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>    <span class="keywordtype">int</span> p10 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[1] ^ b[0]);</div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordtype">int</span> p11 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[1] ^ b[1]);</div>
<div class="line"><span class="lineno">  283</span>    <span class="keywordtype">int</span> p12 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[1] ^ b[2]);</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>    <span class="keywordtype">int</span> p20 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[2] ^ b[0]);</div>
<div class="line"><span class="lineno">  286</span>    <span class="keywordtype">int</span> p21 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[2] ^ b[1]);</div>
<div class="line"><span class="lineno">  287</span>    <span class="keywordtype">int</span> p22 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[2] ^ b[2]);</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>    <span class="keywordtype">int</span> s0 = p11 + p22;</div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordtype">int</span> s1 = p12 + p21;</div>
<div class="line"><span class="lineno">  291</span>    <span class="keywordtype">int</span> v0 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(s0, s1) + p00;</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordtype">int</span> s2 = p10 + p22;</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordtype">int</span> s3 = p12 + p20;</div>
<div class="line"><span class="lineno">  295</span>    <span class="keywordtype">int</span> v1 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(s2, s3) + p01;</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    <span class="keywordtype">int</span> s4 = p10 + p21;</div>
<div class="line"><span class="lineno">  298</span>    <span class="keywordtype">int</span> s5 = p11 + p20;</div>
<div class="line"><span class="lineno">  299</span>    <span class="keywordtype">int</span> v2 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(s4, s5) + p02;</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>    <span class="comment">// Divide by 2 because XOR always counts errors twice, once when missing</span></div>
<div class="line"><span class="lineno">  302</span>    <span class="comment">// in the expected position, and again when present in the wrong partition</span></div>
<div class="line"><span class="lineno">  303</span>    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(v0, v1, v2) / 2);</div>
<div class="line"><span class="lineno">  304</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37_cgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37_cgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37_cgraph" id="aastcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37_cgraph">
<area shape="rect" title="Compute bit&#45;mismatch for partitioning in 3&#45;partition mode." alt="" coords="5,31,144,56"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="192,5,268,31"/>
<area shape="poly" title=" " alt="" coords="144,29,178,24,179,29,145,35"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda" title="Population bit count." alt="" coords="193,55,267,80"/>
<area shape="poly" title=" " alt="" coords="145,51,180,57,179,62,144,57"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37_icgraph" id="aastcenc__find__best__partitioning_8cpp_a9acad2d527657aaa0da1c424db437e37_icgraph">
<area shape="rect" title="Compute bit&#45;mismatch for partitioning in 3&#45;partition mode." alt="" coords="1663,13,1801,38"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a4567304c86889e62a6cf2b5a391d6260" title="Count the partition table mismatches vs the data clustering." alt="" coords="1416,13,1615,38"/>
<area shape="poly" title=" " alt="" coords="1649,28,1615,28,1615,23,1649,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a89e88da4b6a389046d10b859ba68a118" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="1189,5,1368,45"/>
<area shape="poly" title=" " alt="" coords="1402,28,1368,28,1368,23,1402,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1175,28,1142,28,1142,23,1175,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a3febec3fce459c429e5c4445c852d3bb" name="a3febec3fce459c429e5c4445c852d3bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3febec3fce459c429e5c4445c852d3bb">&#9670;&#160;</a></span>partition_mismatch4()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t partition_mismatch4 </td>
          <td>(</td>
          <td class="paramtype">const uint64_t</td>          <td class="paramname"><span class="paramname"><em>a</em></span>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t</td>          <td class="paramname"><span class="paramname"><em>b</em></span>[4]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute bit-mismatch for partitioning in 4-partition mode. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>The texel assignment bitvector for the block. </td></tr>
    <tr><td class="paramname">b</td><td>The texel assignment bitvector for the partition table.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The number of bit mismatches. </dd></dl>

<p class="definition"><a class="el" href="astcenc__find__best__partitioning_8cpp_source.html">astcenc_find_best_partitioning.cpp</a> 파일의 <a class="el" href="astcenc__find__best__partitioning_8cpp_source.html#l00314">314</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  317</span>  {</div>
<div class="line"><span class="lineno">  318</span>    <span class="keywordtype">int</span> p00 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[0] ^ b[0]);</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordtype">int</span> p01 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[0] ^ b[1]);</div>
<div class="line"><span class="lineno">  320</span>    <span class="keywordtype">int</span> p02 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[0] ^ b[2]);</div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordtype">int</span> p03 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[0] ^ b[3]);</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordtype">int</span> p10 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[1] ^ b[0]);</div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordtype">int</span> p11 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[1] ^ b[1]);</div>
<div class="line"><span class="lineno">  325</span>    <span class="keywordtype">int</span> p12 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[1] ^ b[2]);</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordtype">int</span> p13 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[1] ^ b[3]);</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordtype">int</span> p20 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[2] ^ b[0]);</div>
<div class="line"><span class="lineno">  329</span>    <span class="keywordtype">int</span> p21 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[2] ^ b[1]);</div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordtype">int</span> p22 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[2] ^ b[2]);</div>
<div class="line"><span class="lineno">  331</span>    <span class="keywordtype">int</span> p23 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[2] ^ b[3]);</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordtype">int</span> p30 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[3] ^ b[0]);</div>
<div class="line"><span class="lineno">  334</span>    <span class="keywordtype">int</span> p31 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[3] ^ b[1]);</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordtype">int</span> p32 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[3] ^ b[2]);</div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordtype">int</span> p33 = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda">popcount</a>(a[3] ^ b[3]);</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordtype">int</span> mx23 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(p22 + p33, p23 + p32);</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordtype">int</span> mx13 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(p21 + p33, p23 + p31);</div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordtype">int</span> mx12 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(p21 + p32, p22 + p31);</div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordtype">int</span> mx03 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(p20 + p33, p23 + p30);</div>
<div class="line"><span class="lineno">  342</span>    <span class="keywordtype">int</span> mx02 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(p20 + p32, p22 + p30);</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordtype">int</span> mx01 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(p21 + p30, p20 + p31);</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordtype">int</span> v0 = p00 + <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(p11 + mx23, p12 + mx13, p13 + mx12);</div>
<div class="line"><span class="lineno">  346</span>    <span class="keywordtype">int</span> v1 = p01 + <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(p10 + mx23, p12 + mx03, p13 + mx02);</div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordtype">int</span> v2 = p02 + <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(p11 + mx03, p10 + mx13, p13 + mx01);</div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordtype">int</span> v3 = p03 + <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(p11 + mx02, p12 + mx01, p10 + mx12);</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>    <span class="comment">// Divide by 2 because XOR always counts errors twice, once when missing</span></div>
<div class="line"><span class="lineno">  351</span>    <span class="comment">// in the expected position, and again when present in the wrong partition</span></div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(v0, v1, v2, v3) / 2);</div>
<div class="line"><span class="lineno">  353</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb_cgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb_cgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb_cgraph" id="aastcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb_cgraph">
<area shape="rect" title="Compute bit&#45;mismatch for partitioning in 4&#45;partition mode." alt="" coords="5,31,144,56"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="192,5,268,31"/>
<area shape="poly" title=" " alt="" coords="144,29,178,24,179,29,145,35"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a652a0112f173bddee3a84a27eb679fda" title="Population bit count." alt="" coords="193,55,267,80"/>
<area shape="poly" title=" " alt="" coords="145,51,180,57,179,62,144,57"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb_icgraph.png" border="0" usemap="#aastcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb_icgraph" alt=""/></div>
<map name="aastcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb_icgraph" id="aastcenc__find__best__partitioning_8cpp_a3febec3fce459c429e5c4445c852d3bb_icgraph">
<area shape="rect" title="Compute bit&#45;mismatch for partitioning in 4&#45;partition mode." alt="" coords="1663,13,1801,38"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a4567304c86889e62a6cf2b5a391d6260" title="Count the partition table mismatches vs the data clustering." alt="" coords="1416,13,1615,38"/>
<area shape="poly" title=" " alt="" coords="1649,28,1615,28,1615,23,1649,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a89e88da4b6a389046d10b859ba68a118" title="Use k&#45;means clustering to compute a partition ordering for a block.." alt="" coords="1189,5,1368,45"/>
<area shape="poly" title=" " alt="" coords="1402,28,1368,28,1368,23,1402,23"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1175,28,1142,28,1142,23,1175,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_211b531afad3b7391864460492782af6.html">astc-encoder-main</a></li><li class="navelem"><a class="el" href="dir_7df889ea08e038e0b05c337eccc30153.html">Source</a></li><li class="navelem"><a class="el" href="astcenc__find__best__partitioning_8cpp.html">astcenc_find_best_partitioning.cpp</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
