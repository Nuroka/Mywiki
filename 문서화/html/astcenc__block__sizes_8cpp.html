<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project1: C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-encoder-main/Source/astcenc_block_sizes.cpp 파일 참조</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Project1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('astcenc__block__sizes_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">함수</a>  </div>
  <div class="headertitle"><div class="title">astcenc_block_sizes.cpp 파일 참조</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="astcenc__internal_8h_source.html">astcenc_internal.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
astcenc_block_sizes.cpp에 대한 include 의존 그래프</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp__incl.png" border="0" usemap="#a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__block__sizes_8cpp" alt=""/></div>
<map name="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__block__sizes_8cpp" id="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__block__sizes_8cpp">
<area shape="rect" title=" " alt="" coords="112,5,331,75"/>
<area shape="rect" href="astcenc__internal_8h.html" title=" " alt="" coords="158,123,286,148"/>
<area shape="poly" title=" " alt="" coords="224,75,224,109,219,109,219,75"/>
<area shape="rect" title=" " alt="" coords="72,431,147,456"/>
<area shape="poly" title=" " alt="" coords="158,142,124,147,88,158,55,174,28,198,13,224,8,253,12,284,23,315,56,373,91,418,87,421,52,376,18,317,7,285,3,253,8,222,24,194,52,170,86,153,122,142,157,136"/>
<area shape="rect" title=" " alt="" coords="27,269,91,295"/>
<area shape="poly" title=" " alt="" coords="158,141,125,147,92,158,62,174,38,197,33,211,33,226,46,257,41,259,28,227,28,210,34,195,59,170,90,153,124,142,157,136"/>
<area shape="rect" title=" " alt="" coords="216,269,278,295"/>
<area shape="poly" title=" " alt="" coords="249,146,279,165,293,179,304,195,308,214,302,232,277,262,272,259,297,229,302,213,299,197,289,182,276,169,246,150"/>
<area shape="rect" title=" " alt="" coords="152,196,212,221"/>
<area shape="poly" title=" " alt="" coords="217,150,197,185,192,183,213,147"/>
<area shape="rect" title=" " alt="" coords="236,196,290,221"/>
<area shape="poly" title=" " alt="" coords="231,147,252,183,247,185,226,150"/>
<area shape="rect" href="astcenc_8h.html" title=" " alt="" coords="49,196,128,221"/>
<area shape="poly" title=" " alt="" coords="201,150,123,192,121,187,199,146"/>
<area shape="rect" href="astcenc__mathlib_8h.html" title=" " alt="" coords="364,196,492,221"/>
<area shape="poly" title=" " alt="" coords="256,145,383,189,381,194,254,151"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html" title=" " alt="" coords="475,269,622,295"/>
<area shape="poly" title=" " alt="" coords="286,141,410,161,467,176,506,194,520,207,530,223,544,255,539,257,526,226,515,211,503,198,465,181,409,166,285,146"/>
<area shape="poly" title=" " alt="" coords="86,223,71,258,66,256,81,221"/>
<area shape="poly" title=" " alt="" coords="115,219,210,261,208,266,113,224"/>
<area shape="poly" title=" " alt="" coords="400,224,290,267,288,262,398,219"/>
<area shape="rect" title=" " alt="" coords="302,269,368,295"/>
<area shape="poly" title=" " alt="" coords="415,223,363,263,359,259,412,219"/>
<area shape="rect" title=" " alt="" coords="392,269,451,295"/>
<area shape="poly" title=" " alt="" coords="430,222,427,256,421,256,425,221"/>
<area shape="poly" title=" " alt="" coords="449,219,518,260,515,264,446,224"/>
<area shape="rect" href="astcenc__vecmathlib__none__4_8h.html" title=" " alt="" coords="320,343,456,383"/>
<area shape="poly" title=" " alt="" coords="526,297,441,339,438,334,524,292"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html" title=" " alt="" coords="480,343,616,383"/>
<area shape="poly" title=" " alt="" coords="551,295,551,329,546,329,546,295"/>
<area shape="poly" title=" " alt="" coords="322,385,161,430,160,425,321,380"/>
<area shape="rect" title=" " alt="" coords="500,431,557,456"/>
<area shape="poly" title=" " alt="" coords="423,380,497,421,494,426,421,385"/>
<area shape="rect" title=" " alt="" coords="395,431,456,456"/>
<area shape="poly" title=" " alt="" coords="400,382,417,417,412,419,395,384"/>
<area shape="rect" title=" " alt="" coords="320,431,371,456"/>
<area shape="poly" title=" " alt="" coords="380,384,361,420,356,417,376,382"/>
<area shape="poly" title=" " alt="" coords="546,384,537,418,532,416,541,382"/>
</map>
</div>
</div>
<p><a href="astcenc__block__sizes_8cpp_source.html">이 파일의 소스 코드 페이지로 가기</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
함수</h2></td></tr>
<tr class="memitem:a6a5e2e9b931f3399e9722f7de90f537c" id="r_a6a5e2e9b931f3399e9722f7de90f537c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a5e2e9b931f3399e9722f7de90f537c">decode_block_mode_2d</a> (unsigned int <a class="el" href="structblock__mode.html">block_mode</a>, unsigned int &amp;x_weights, unsigned int &amp;y_weights, bool &amp;is_dual_plane, unsigned int &amp;quant_mode, unsigned int &amp;weight_bits)</td></tr>
<tr class="memdesc:a6a5e2e9b931f3399e9722f7de90f537c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions to generate block size descriptor and decimation tables.  <br /></td></tr>
<tr class="separator:a6a5e2e9b931f3399e9722f7de90f537c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eadba499223d475df0afa41228a7d30" id="r_a0eadba499223d475df0afa41228a7d30"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0eadba499223d475df0afa41228a7d30">decode_block_mode_3d</a> (unsigned int <a class="el" href="structblock__mode.html">block_mode</a>, unsigned int &amp;x_weights, unsigned int &amp;y_weights, unsigned int &amp;z_weights, bool &amp;is_dual_plane, unsigned int &amp;quant_mode, unsigned int &amp;weight_bits)</td></tr>
<tr class="memdesc:a0eadba499223d475df0afa41228a7d30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode the properties of an encoded 3D block mode.  <br /></td></tr>
<tr class="separator:a0eadba499223d475df0afa41228a7d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8405c6d5685c364a91ff3ae3c5c4057" id="r_ad8405c6d5685c364a91ff3ae3c5c4057"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad8405c6d5685c364a91ff3ae3c5c4057">init_decimation_info_2d</a> (unsigned int x_texels, unsigned int y_texels, unsigned int x_weights, unsigned int y_weights, <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;di, <a class="el" href="structdt__init__working__buffers.html">dt_init_working_buffers</a> &amp;wb)</td></tr>
<tr class="memdesc:ad8405c6d5685c364a91ff3ae3c5c4057"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a 2D decimation entry for a block-size and weight-decimation pair.  <br /></td></tr>
<tr class="separator:ad8405c6d5685c364a91ff3ae3c5c4057"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2baafb8e792da4735cef4849633739ac" id="r_a2baafb8e792da4735cef4849633739ac"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2baafb8e792da4735cef4849633739ac">init_decimation_info_3d</a> (unsigned int x_texels, unsigned int y_texels, unsigned int z_texels, unsigned int x_weights, unsigned int y_weights, unsigned int z_weights, <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;di, <a class="el" href="structdt__init__working__buffers.html">dt_init_working_buffers</a> &amp;wb)</td></tr>
<tr class="memdesc:a2baafb8e792da4735cef4849633739ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a 3D decimation entry for a block-size and weight-decimation pair.  <br /></td></tr>
<tr class="separator:a2baafb8e792da4735cef4849633739ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20c3e73541fd2727c8b79cc8c19919b2" id="r_a20c3e73541fd2727c8b79cc8c19919b2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20c3e73541fd2727c8b79cc8c19919b2">assign_kmeans_texels</a> (<a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd)</td></tr>
<tr class="memdesc:a20c3e73541fd2727c8b79cc8c19919b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assign the texels to use for kmeans clustering.  <br /></td></tr>
<tr class="separator:a20c3e73541fd2727c8b79cc8c19919b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa894007bf90b5ec41a26d1c391ace949" id="r_aa894007bf90b5ec41a26d1c391ace949"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa894007bf90b5ec41a26d1c391ace949">construct_dt_entry_2d</a> (unsigned int x_texels, unsigned int y_texels, unsigned int x_weights, unsigned int y_weights, <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd, <a class="el" href="structdt__init__working__buffers.html">dt_init_working_buffers</a> &amp;wb, unsigned int index)</td></tr>
<tr class="memdesc:aa894007bf90b5ec41a26d1c391ace949"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a single 2D decimation table entry.  <br /></td></tr>
<tr class="separator:aa894007bf90b5ec41a26d1c391ace949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e6657689fff66c3d8729b63d6ae7c5" id="r_ae2e6657689fff66c3d8729b63d6ae7c5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae2e6657689fff66c3d8729b63d6ae7c5">construct_block_size_descriptor_2d</a> (unsigned int x_texels, unsigned int y_texels, bool can_omit_modes, float mode_cutoff, <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd)</td></tr>
<tr class="memdesc:ae2e6657689fff66c3d8729b63d6ae7c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate block modes and decimation tables for a single 2D block size.  <br /></td></tr>
<tr class="separator:ae2e6657689fff66c3d8729b63d6ae7c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fde919cf8b9a7f9db851cfff6a7a87c" id="r_a3fde919cf8b9a7f9db851cfff6a7a87c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3fde919cf8b9a7f9db851cfff6a7a87c">construct_block_size_descriptor_3d</a> (unsigned int x_texels, unsigned int y_texels, unsigned int z_texels, <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd)</td></tr>
<tr class="memdesc:a3fde919cf8b9a7f9db851cfff6a7a87c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate block modes and decimation tables for a single 3D block size.  <br /></td></tr>
<tr class="separator:a3fde919cf8b9a7f9db851cfff6a7a87c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c46863585cc583c3deb49323dfb73d8" id="r_a5c46863585cc583c3deb49323dfb73d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c46863585cc583c3deb49323dfb73d8">init_block_size_descriptor</a> (unsigned int x_texels, unsigned int y_texels, unsigned int z_texels, bool can_omit_modes, unsigned int partition_count_cutoff, float mode_cutoff, <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd)</td></tr>
<tr class="memdesc:a5c46863585cc583c3deb49323dfb73d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populate the block size descriptor for the target block size.  <br /></td></tr>
<tr class="separator:a5c46863585cc583c3deb49323dfb73d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">함수 문서화</h2>
<a id="a20c3e73541fd2727c8b79cc8c19919b2" name="a20c3e73541fd2727c8b79cc8c19919b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20c3e73541fd2727c8b79cc8c19919b2">&#9670;&#160;</a></span>assign_kmeans_texels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void assign_kmeans_texels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assign the texels to use for kmeans clustering. </p>
<p>The max limit is <code>BLOCK_MAX_KMEANS_TEXELS</code>; above this a random selection is used. The <code>bsd.texel_count</code> is an input and must be populated beforehand.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">bsd</td><td>The block size descriptor to populate. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__block__sizes_8cpp_source.html">astcenc_block_sizes.cpp</a> 파일의 <a class="el" href="astcenc__block__sizes_8cpp_source.html#l00688">688</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  690</span>  {</div>
<div class="line"><span class="lineno">  691</span>    <span class="comment">// Use all texels for kmeans on a small block</span></div>
<div class="line"><span class="lineno">  692</span>    <span class="keywordflow">if</span> (bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a> &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a24bfd76e0fe1130b9741b58cc3e2b675">BLOCK_MAX_KMEANS_TEXELS</a>)</div>
<div class="line"><span class="lineno">  693</span>    {</div>
<div class="line"><span class="lineno">  694</span>        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>; i++)</div>
<div class="line"><span class="lineno">  695</span>        {</div>
<div class="line"><span class="lineno">  696</span>            bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a8bc9e1751fe1a81b9ee33c0925fb8f4f">kmeans_texels</a>[i] = i;</div>
<div class="line"><span class="lineno">  697</span>        }</div>
<div class="line"><span class="lineno">  698</span> </div>
<div class="line"><span class="lineno">  699</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  700</span>    }</div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span>    <span class="comment">// Select a random subset of BLOCK_MAX_KMEANS_TEXELS for kmeans on a large block</span></div>
<div class="line"><span class="lineno">  703</span>    uint64_t rng_state[2];</div>
<div class="line"><span class="lineno">  704</span>    <a class="code hl_function" href="namespaceastc.html#a3a0b157316c84b208b4195916b2593e1">astc::rand_init</a>(rng_state);</div>
<div class="line"><span class="lineno">  705</span> </div>
<div class="line"><span class="lineno">  706</span>    <span class="comment">// Initialize array used for tracking used indices</span></div>
<div class="line"><span class="lineno">  707</span>    <span class="keywordtype">bool</span> seen[<a class="code hl_variable" href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a>];</div>
<div class="line"><span class="lineno">  708</span>    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>; i++)</div>
<div class="line"><span class="lineno">  709</span>    {</div>
<div class="line"><span class="lineno">  710</span>        seen[i] = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  711</span>    }</div>
<div class="line"><span class="lineno">  712</span> </div>
<div class="line"><span class="lineno">  713</span>    <span class="comment">// Assign 64 random indices, retrying if we see repeats</span></div>
<div class="line"><span class="lineno">  714</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> arr_elements_set = 0;</div>
<div class="line"><span class="lineno">  715</span>    <span class="keywordflow">while</span> (arr_elements_set &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#a24bfd76e0fe1130b9741b58cc3e2b675">BLOCK_MAX_KMEANS_TEXELS</a>)</div>
<div class="line"><span class="lineno">  716</span>    {</div>
<div class="line"><span class="lineno">  717</span>        uint8_t texel = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespaceastc.html#acd6244a33d585dcaa70ceb08313115ff">astc::rand</a>(rng_state));</div>
<div class="line"><span class="lineno">  718</span>        texel = texel % bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>;</div>
<div class="line"><span class="lineno">  719</span>        <span class="keywordflow">if</span> (!seen[texel])</div>
<div class="line"><span class="lineno">  720</span>        {</div>
<div class="line"><span class="lineno">  721</span>            bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a8bc9e1751fe1a81b9ee33c0925fb8f4f">kmeans_texels</a>[arr_elements_set++] = texel;</div>
<div class="line"><span class="lineno">  722</span>            seen[texel] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  723</span>        }</div>
<div class="line"><span class="lineno">  724</span>    }</div>
<div class="line"><span class="lineno">  725</span>}</div>
<div class="ttc" id="aastcenc__internal_8h_html_a24bfd76e0fe1130b9741b58cc3e2b675"><div class="ttname"><a href="astcenc__internal_8h.html#a24bfd76e0fe1130b9741b58cc3e2b675">BLOCK_MAX_KMEANS_TEXELS</a></div><div class="ttdeci">static constexpr uint8_t BLOCK_MAX_KMEANS_TEXELS</div><div class="ttdoc">The maximum number of texels used during partition selection for texel clustering.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00084">astcenc_internal.h:84</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_ad694a8ff82a68a50b11bac439531241e"><div class="ttname"><a href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_TEXELS</div><div class="ttdoc">The maximum number of texels a block can support (6x6x6 block).</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00072">astcenc_internal.h:72</a></div></div>
<div class="ttc" id="anamespaceastc_html_a3a0b157316c84b208b4195916b2593e1"><div class="ttname"><a href="namespaceastc.html#a3a0b157316c84b208b4195916b2593e1">astc::rand_init</a></div><div class="ttdeci">void rand_init(uint64_t state[2])</div><div class="ttdoc">Initialize the seed structure for a random number generator.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8cpp_source.html#l00032">astcenc_mathlib.cpp:32</a></div></div>
<div class="ttc" id="anamespaceastc_html_acd6244a33d585dcaa70ceb08313115ff"><div class="ttname"><a href="namespaceastc.html#acd6244a33d585dcaa70ceb08313115ff">astc::rand</a></div><div class="ttdeci">uint64_t rand(uint64_t state[2])</div><div class="ttdoc">Return the next random number from the generator.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8cpp_source.html#l00039">astcenc_mathlib.cpp:39</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a0df466b2eda6958f2e5f8a4f147367e4"><div class="ttname"><a href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">block_size_descriptor::texel_count</a></div><div class="ttdeci">uint8_t texel_count</div><div class="ttdoc">The block total texel count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00542">astcenc_internal.h:542</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a8bc9e1751fe1a81b9ee33c0925fb8f4f"><div class="ttname"><a href="structblock__size__descriptor.html#a8bc9e1751fe1a81b9ee33c0925fb8f4f">block_size_descriptor::kmeans_texels</a></div><div class="ttdeci">uint8_t kmeans_texels[BLOCK_MAX_KMEANS_TEXELS]</div><div class="ttdoc">The active texels for k-means partition selection.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00602">astcenc_internal.h:602</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a20c3e73541fd2727c8b79cc8c19919b2_cgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a20c3e73541fd2727c8b79cc8c19919b2_cgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a20c3e73541fd2727c8b79cc8c19919b2_cgraph" id="aastcenc__block__sizes_8cpp_a20c3e73541fd2727c8b79cc8c19919b2_cgraph">
<area shape="rect" title="Assign the texels to use for kmeans clustering." alt="" coords="5,31,160,56"/>
<area shape="rect" href="namespaceastc.html#acd6244a33d585dcaa70ceb08313115ff" title="Return the next random number from the generator." alt="" coords="220,5,300,31"/>
<area shape="poly" title=" " alt="" coords="160,30,206,23,207,28,160,35"/>
<area shape="rect" href="namespaceastc.html#a3a0b157316c84b208b4195916b2593e1" title="Initialize the seed structure for a random number generator." alt="" coords="208,55,312,80"/>
<area shape="poly" title=" " alt="" coords="160,51,195,56,194,61,160,56"/>
<area shape="rect" href="astcenc__mathlib_8cpp.html#ada00fa3b97cd1f54329bc637fcba9ec6" title="64&#45;bit rotate left." alt="" coords="360,5,400,31"/>
<area shape="poly" title=" " alt="" coords="300,15,346,15,346,21,300,21"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a20c3e73541fd2727c8b79cc8c19919b2_icgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a20c3e73541fd2727c8b79cc8c19919b2_icgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a20c3e73541fd2727c8b79cc8c19919b2_icgraph" id="aastcenc__block__sizes_8cpp_a20c3e73541fd2727c8b79cc8c19919b2_icgraph">
<area shape="rect" title="Assign the texels to use for kmeans clustering." alt="" coords="868,45,1023,70"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#ae2e6657689fff66c3d8729b63d6ae7c5" title="Allocate block modes and decimation tables for a single 2D block size." alt="" coords="675,5,820,45"/>
<area shape="poly" title=" " alt="" coords="854,45,820,40,821,34,855,40"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a3fde919cf8b9a7f9db851cfff6a7a87c" title="Allocate block modes and decimation tables for a single 3D block size." alt="" coords="675,69,820,109"/>
<area shape="poly" title=" " alt="" coords="855,75,821,80,820,75,854,69"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a5c46863585cc583c3deb49323dfb73d8" title="Populate the block size descriptor for the target block size." alt="" coords="455,45,627,70"/>
<area shape="poly" title=" " alt="" coords="662,41,623,47,623,42,661,36"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a823234313a697f5b4cdbd2cd6caaef4a" title="Allocate a new codec context based on a config." alt="" coords="255,45,407,70"/>
<area shape="poly" title=" " alt="" coords="441,60,407,60,407,55,441,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="241,60,207,60,207,55,241,55"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="661,79,623,73,623,67,662,73"/>
</map>
</div>

</div>
</div>
<a id="ae2e6657689fff66c3d8729b63d6ae7c5" name="ae2e6657689fff66c3d8729b63d6ae7c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2e6657689fff66c3d8729b63d6ae7c5">&#9670;&#160;</a></span>construct_block_size_descriptor_2d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void construct_block_size_descriptor_2d </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>x_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>y_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>can_omit_modes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>mode_cutoff</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate block modes and decimation tables for a single 2D block size. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">x_texels</td><td>The number of texels in the X dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">y_texels</td><td>The number of texels in the Y dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">can_omit_modes</td><td>Can we discard modes that astcenc won't use, even if legal? </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">mode_cutoff</td><td>Percentile cutoff in range [0,1]. Low values more likely to be used. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bsd</td><td>The block size descriptor to populate. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__block__sizes_8cpp_source.html">astcenc_block_sizes.cpp</a> 파일의 <a class="el" href="astcenc__block__sizes_8cpp_source.html#l00792">792</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  798</span>  {</div>
<div class="line"><span class="lineno">  799</span>    <span class="comment">// Store a remap table for storing packed decimation modes.</span></div>
<div class="line"><span class="lineno">  800</span>    <span class="comment">// Indexing uses [Y * 16 + X] and max size for each axis is 12.</span></div>
<div class="line"><span class="lineno">  801</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> MAX_DMI = 12 * 16 + 12;</div>
<div class="line"><span class="lineno">  802</span>    <span class="keywordtype">int</span> decimation_mode_index[MAX_DMI];</div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>    <a class="code hl_struct" href="structdt__init__working__buffers.html">dt_init_working_buffers</a>* wb = <span class="keyword">new</span> <a class="code hl_struct" href="structdt__init__working__buffers.html">dt_init_working_buffers</a>;</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#aa00a247a5ba4c0501174c3ff6ecb9145">xdim</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(x_texels);</div>
<div class="line"><span class="lineno">  807</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a44583f2512e5ae120df42bfc4270fa03">ydim</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(y_texels);</div>
<div class="line"><span class="lineno">  808</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#afc7428efe69cba2425ae335d9d266714">zdim</a> = 1;</div>
<div class="line"><span class="lineno">  809</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(x_texels * y_texels);</div>
<div class="line"><span class="lineno">  810</span> </div>
<div class="line"><span class="lineno">  811</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; MAX_DMI; i++)</div>
<div class="line"><span class="lineno">  812</span>    {</div>
<div class="line"><span class="lineno">  813</span>        decimation_mode_index[i] = -1;</div>
<div class="line"><span class="lineno">  814</span>    }</div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span>    <span class="comment">// Gather all the decimation grids that can be used with the current block</span></div>
<div class="line"><span class="lineno">  817</span><span class="preprocessor">#if !defined(ASTCENC_DECOMPRESS_ONLY)</span></div>
<div class="line"><span class="lineno">  818</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> *percentiles = <a class="code hl_function" href="astcenc__internal_8h.html#af98304be147ac93a80eaf13cbe448605">get_2d_percentile_table</a>(x_texels, y_texels);</div>
<div class="line"><span class="lineno">  819</span>    <span class="keywordtype">float</span> always_cutoff = 0.0f;</div>
<div class="line"><span class="lineno">  820</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  821</span>    <span class="comment">// Unused in decompress-only builds</span></div>
<div class="line"><span class="lineno">  822</span>    (void)can_omit_modes;</div>
<div class="line"><span class="lineno">  823</span>    (void)mode_cutoff;</div>
<div class="line"><span class="lineno">  824</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>    <span class="comment">// Construct the list of block formats referencing the decimation tables</span></div>
<div class="line"><span class="lineno">  827</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> packed_bm_idx = 0;</div>
<div class="line"><span class="lineno">  828</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> packed_dm_idx = 0;</div>
<div class="line"><span class="lineno">  829</span> </div>
<div class="line"><span class="lineno">  830</span>    <span class="comment">// Trackers</span></div>
<div class="line"><span class="lineno">  831</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bm_counts[4] { 0 };</div>
<div class="line"><span class="lineno">  832</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dm_counts[4] { 0 };</div>
<div class="line"><span class="lineno">  833</span> </div>
<div class="line"><span class="lineno">  834</span>    <span class="comment">// Clear the list to a known-bad value</span></div>
<div class="line"><span class="lineno">  835</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#ac446d816e6883587f7cd6fd115d9a40c">WEIGHTS_MAX_BLOCK_MODES</a>; i++)</div>
<div class="line"><span class="lineno">  836</span>    {</div>
<div class="line"><span class="lineno">  837</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ad2a7804c5aa2d87b691f9899d85c5bc6">block_mode_packed_index</a>[i] = <a class="code hl_variable" href="astcenc__internal_8h.html#a9909bfb0b9a42a121838a9a145a8612f">BLOCK_BAD_BLOCK_MODE</a>;</div>
<div class="line"><span class="lineno">  838</span>    }</div>
<div class="line"><span class="lineno">  839</span> </div>
<div class="line"><span class="lineno">  840</span>    <span class="comment">// Iterate four times to build a usefully ordered list:</span></div>
<div class="line"><span class="lineno">  841</span>    <span class="comment">//   - Pass 0 - keep selected single plane &quot;always&quot; block modes</span></div>
<div class="line"><span class="lineno">  842</span>    <span class="comment">//   - Pass 1 - keep selected single plane &quot;non-always&quot; block modes</span></div>
<div class="line"><span class="lineno">  843</span>    <span class="comment">//   - Pass 2 - keep select dual plane block modes</span></div>
<div class="line"><span class="lineno">  844</span>    <span class="comment">//   - Pass 3 - keep everything else that&#39;s legal</span></div>
<div class="line"><span class="lineno">  845</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> limit = can_omit_modes ? 3 : 4;</div>
<div class="line"><span class="lineno">  846</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; limit; j ++)</div>
<div class="line"><span class="lineno">  847</span>    {</div>
<div class="line"><span class="lineno">  848</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#ac446d816e6883587f7cd6fd115d9a40c">WEIGHTS_MAX_BLOCK_MODES</a>; i++)</div>
<div class="line"><span class="lineno">  849</span>        {</div>
<div class="line"><span class="lineno">  850</span>            <span class="comment">// Skip modes we&#39;ve already included in a previous pass</span></div>
<div class="line"><span class="lineno">  851</span>            <span class="keywordflow">if</span> (bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ad2a7804c5aa2d87b691f9899d85c5bc6">block_mode_packed_index</a>[i] != <a class="code hl_variable" href="astcenc__internal_8h.html#a9909bfb0b9a42a121838a9a145a8612f">BLOCK_BAD_BLOCK_MODE</a>)</div>
<div class="line"><span class="lineno">  852</span>            {</div>
<div class="line"><span class="lineno">  853</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  854</span>            }</div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span>            <span class="comment">// Decode parameters</span></div>
<div class="line"><span class="lineno">  857</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x_weights;</div>
<div class="line"><span class="lineno">  858</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y_weights;</div>
<div class="line"><span class="lineno">  859</span>            <span class="keywordtype">bool</span> is_dual_plane;</div>
<div class="line"><span class="lineno">  860</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quant_mode;</div>
<div class="line"><span class="lineno">  861</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weight_bits;</div>
<div class="line"><span class="lineno">  862</span>            <span class="keywordtype">bool</span> valid = <a class="code hl_function" href="#a6a5e2e9b931f3399e9722f7de90f537c">decode_block_mode_2d</a>(i, x_weights, y_weights, is_dual_plane, quant_mode, weight_bits);</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>            <span class="comment">// Always skip invalid encodings for the current block size</span></div>
<div class="line"><span class="lineno">  865</span>            <span class="keywordflow">if</span> (!valid || (x_weights &gt; x_texels) || (y_weights &gt; y_texels))</div>
<div class="line"><span class="lineno">  866</span>            {</div>
<div class="line"><span class="lineno">  867</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  868</span>            }</div>
<div class="line"><span class="lineno">  869</span> </div>
<div class="line"><span class="lineno">  870</span>            <span class="comment">// Selectively skip dual plane encodings</span></div>
<div class="line"><span class="lineno">  871</span>            <span class="keywordflow">if</span> (((j &lt;= 1) &amp;&amp; is_dual_plane) || (j == 2 &amp;&amp; !is_dual_plane))</div>
<div class="line"><span class="lineno">  872</span>            {</div>
<div class="line"><span class="lineno">  873</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  874</span>            }</div>
<div class="line"><span class="lineno">  875</span> </div>
<div class="line"><span class="lineno">  876</span>            <span class="comment">// Always skip encodings we can&#39;t physically encode based on</span></div>
<div class="line"><span class="lineno">  877</span>            <span class="comment">// generic encoding bit availability</span></div>
<div class="line"><span class="lineno">  878</span>            <span class="keywordflow">if</span> (is_dual_plane)</div>
<div class="line"><span class="lineno">  879</span>            {</div>
<div class="line"><span class="lineno">  880</span>                 <span class="comment">// This is the only check we need as only support 1 partition</span></div>
<div class="line"><span class="lineno">  881</span>                 <span class="keywordflow">if</span> ((109 - weight_bits) &lt;= 0)</div>
<div class="line"><span class="lineno">  882</span>                 {</div>
<div class="line"><span class="lineno">  883</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  884</span>                 }</div>
<div class="line"><span class="lineno">  885</span>            }</div>
<div class="line"><span class="lineno">  886</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  887</span>            {</div>
<div class="line"><span class="lineno">  888</span>                <span class="comment">// This is conservative - fewer bits may be available for &gt; 1 partition</span></div>
<div class="line"><span class="lineno">  889</span>                 <span class="keywordflow">if</span> ((111 - weight_bits) &lt;= 0)</div>
<div class="line"><span class="lineno">  890</span>                 {</div>
<div class="line"><span class="lineno">  891</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  892</span>                 }</div>
<div class="line"><span class="lineno">  893</span>            }</div>
<div class="line"><span class="lineno">  894</span> </div>
<div class="line"><span class="lineno">  895</span>            <span class="comment">// Selectively skip encodings based on percentile</span></div>
<div class="line"><span class="lineno">  896</span>            <span class="keywordtype">bool</span> percentile_hit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  897</span><span class="preprocessor">    #if !defined(ASTCENC_DECOMPRESS_ONLY)</span></div>
<div class="line"><span class="lineno">  898</span>            <span class="keywordflow">if</span> (j == 0)</div>
<div class="line"><span class="lineno">  899</span>            {</div>
<div class="line"><span class="lineno">  900</span>                percentile_hit = percentiles[i] &lt;= always_cutoff;</div>
<div class="line"><span class="lineno">  901</span>            }</div>
<div class="line"><span class="lineno">  902</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  903</span>            {</div>
<div class="line"><span class="lineno">  904</span>                percentile_hit = percentiles[i] &lt;= mode_cutoff;</div>
<div class="line"><span class="lineno">  905</span>            }</div>
<div class="line"><span class="lineno">  906</span><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>            <span class="keywordflow">if</span> (j != 3 &amp;&amp; !percentile_hit)</div>
<div class="line"><span class="lineno">  909</span>            {</div>
<div class="line"><span class="lineno">  910</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  911</span>            }</div>
<div class="line"><span class="lineno">  912</span> </div>
<div class="line"><span class="lineno">  913</span>            <span class="comment">// Allocate and initialize the decimation table entry if we&#39;ve not used it yet</span></div>
<div class="line"><span class="lineno">  914</span>            <span class="keywordtype">int</span> <a class="code hl_struct" href="structdecimation__mode.html">decimation_mode</a> = decimation_mode_index[y_weights * 16 + x_weights];</div>
<div class="line"><span class="lineno">  915</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="structdecimation__mode.html">decimation_mode</a> &lt; 0)</div>
<div class="line"><span class="lineno">  916</span>            {</div>
<div class="line"><span class="lineno">  917</span>                <a class="code hl_function" href="#aa894007bf90b5ec41a26d1c391ace949">construct_dt_entry_2d</a>(x_texels, y_texels, x_weights, y_weights, bsd, *wb, packed_dm_idx);</div>
<div class="line"><span class="lineno">  918</span>                decimation_mode_index[y_weights * 16 + x_weights] = packed_dm_idx;</div>
<div class="line"><span class="lineno">  919</span>                <a class="code hl_struct" href="structdecimation__mode.html">decimation_mode</a> = packed_dm_idx;</div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span>                dm_counts[j]++;</div>
<div class="line"><span class="lineno">  922</span>                packed_dm_idx++;</div>
<div class="line"><span class="lineno">  923</span>            }</div>
<div class="line"><span class="lineno">  924</span> </div>
<div class="line"><span class="lineno">  925</span>            <span class="keyword">auto</span>&amp; bm = bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a82d0bf7e49df4683f0823b4951fb77f8">block_modes</a>[packed_bm_idx];</div>
<div class="line"><span class="lineno">  926</span> </div>
<div class="line"><span class="lineno">  927</span>            bm.<a class="code hl_variable" href="structblock__mode.html#aaf9846117d40406d5e84508f429cf949">decimation_mode</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_struct" href="structdecimation__mode.html">decimation_mode</a>);</div>
<div class="line"><span class="lineno">  928</span>            bm.quant_mode = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(quant_mode);</div>
<div class="line"><span class="lineno">  929</span>            bm.is_dual_plane = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(is_dual_plane);</div>
<div class="line"><span class="lineno">  930</span>            bm.weight_bits = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(weight_bits);</div>
<div class="line"><span class="lineno">  931</span>            bm.mode_index = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(i);</div>
<div class="line"><span class="lineno">  932</span> </div>
<div class="line"><span class="lineno">  933</span>            <span class="keyword">auto</span>&amp; dm = bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[<a class="code hl_struct" href="structdecimation__mode.html">decimation_mode</a>];</div>
<div class="line"><span class="lineno">  934</span> </div>
<div class="line"><span class="lineno">  935</span>            <span class="keywordflow">if</span> (is_dual_plane)</div>
<div class="line"><span class="lineno">  936</span>            {</div>
<div class="line"><span class="lineno">  937</span>                dm.<a class="code hl_function" href="structdecimation__mode.html#a84c78b671414b48738ddb97937c66ddf">set_ref_2plane</a>(bm.get_weight_quant_mode());</div>
<div class="line"><span class="lineno">  938</span>            }</div>
<div class="line"><span class="lineno">  939</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  940</span>            {</div>
<div class="line"><span class="lineno">  941</span>                dm.set_ref_1plane(bm.get_weight_quant_mode());</div>
<div class="line"><span class="lineno">  942</span>            }</div>
<div class="line"><span class="lineno">  943</span> </div>
<div class="line"><span class="lineno">  944</span>            bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ad2a7804c5aa2d87b691f9899d85c5bc6">block_mode_packed_index</a>[i] = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(packed_bm_idx);</div>
<div class="line"><span class="lineno">  945</span> </div>
<div class="line"><span class="lineno">  946</span>            packed_bm_idx++;</div>
<div class="line"><span class="lineno">  947</span>            bm_counts[j]++;</div>
<div class="line"><span class="lineno">  948</span>        }</div>
<div class="line"><span class="lineno">  949</span>    }</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ae2f4cd561ea1618e1c44f9afbead038f">block_mode_count_1plane_always</a> = bm_counts[0];</div>
<div class="line"><span class="lineno">  952</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a2f96c6e4d1e35b4bac8778c474c69bb1">block_mode_count_1plane_selected</a> = bm_counts[0] + bm_counts[1];</div>
<div class="line"><span class="lineno">  953</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a796557a9c78ee86175f67ed504731ac5">block_mode_count_1plane_2plane_selected</a> = bm_counts[0] + bm_counts[1] + bm_counts[2];</div>
<div class="line"><span class="lineno">  954</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a2f7e6f96bb4dddb56f41aeeea8abda2f">block_mode_count_all</a> = bm_counts[0] + bm_counts[1] + bm_counts[2] + bm_counts[3];</div>
<div class="line"><span class="lineno">  955</span> </div>
<div class="line"><span class="lineno">  956</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ab9f7c875237ad395d3795506d934dba1">decimation_mode_count_always</a> = dm_counts[0];</div>
<div class="line"><span class="lineno">  957</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a5344a8e95df2fe4fe2b396b669993140">decimation_mode_count_selected</a> = dm_counts[0] + dm_counts[1] + dm_counts[2];</div>
<div class="line"><span class="lineno">  958</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a16bc48defd8d3085accc3da158b12f40">decimation_mode_count_all</a> = dm_counts[0] + dm_counts[1] + dm_counts[2] + dm_counts[3];</div>
<div class="line"><span class="lineno">  959</span> </div>
<div class="line"><span class="lineno">  960</span><span class="preprocessor">#if !defined(ASTCENC_DECOMPRESS_ONLY)</span></div>
<div class="line"><span class="lineno">  961</span>    assert(bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ae2f4cd561ea1618e1c44f9afbead038f">block_mode_count_1plane_always</a> &gt; 0);</div>
<div class="line"><span class="lineno">  962</span>    assert(bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ab9f7c875237ad395d3795506d934dba1">decimation_mode_count_always</a> &gt; 0);</div>
<div class="line"><span class="lineno">  963</span> </div>
<div class="line"><span class="lineno">  964</span>    <span class="keyword">delete</span>[] percentiles;</div>
<div class="line"><span class="lineno">  965</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  966</span> </div>
<div class="line"><span class="lineno">  967</span>    <span class="comment">// Ensure the end of the array contains valid data (should never get read)</span></div>
<div class="line"><span class="lineno">  968</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a16bc48defd8d3085accc3da158b12f40">decimation_mode_count_all</a>; i &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#a803b1633e5a45c902bc513ef4c333327">WEIGHTS_MAX_DECIMATION_MODES</a>; i++)</div>
<div class="line"><span class="lineno">  969</span>    {</div>
<div class="line"><span class="lineno">  970</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[i].<a class="code hl_variable" href="structdecimation__mode.html#a469a9f9e5df5748e571801cd921b7b9b">maxprec_1plane</a> = -1;</div>
<div class="line"><span class="lineno">  971</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[i].<a class="code hl_variable" href="structdecimation__mode.html#a6cc1d777d75001f629a2a0661894a334">maxprec_2planes</a> = -1;</div>
<div class="line"><span class="lineno">  972</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[i].<a class="code hl_variable" href="structdecimation__mode.html#af7821f4c585e26acef567aca653879c1">refprec_1plane</a> = 0;</div>
<div class="line"><span class="lineno">  973</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[i].<a class="code hl_variable" href="structdecimation__mode.html#a3f0254c125ad2fab3716af8cc856b77a">refprec_2planes</a> = 0;</div>
<div class="line"><span class="lineno">  974</span>    }</div>
<div class="line"><span class="lineno">  975</span> </div>
<div class="line"><span class="lineno">  976</span>    <span class="comment">// Determine the texels to use for kmeans clustering.</span></div>
<div class="line"><span class="lineno">  977</span>    <a class="code hl_function" href="#a20c3e73541fd2727c8b79cc8c19919b2">assign_kmeans_texels</a>(bsd);</div>
<div class="line"><span class="lineno">  978</span> </div>
<div class="line"><span class="lineno">  979</span>    <span class="keyword">delete</span> wb;</div>
<div class="line"><span class="lineno">  980</span>}</div>
<div class="ttc" id="aastcenc__block__sizes_8cpp_html_a20c3e73541fd2727c8b79cc8c19919b2"><div class="ttname"><a href="#a20c3e73541fd2727c8b79cc8c19919b2">assign_kmeans_texels</a></div><div class="ttdeci">static void assign_kmeans_texels(block_size_descriptor &amp;bsd)</div><div class="ttdoc">Assign the texels to use for kmeans clustering.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__block__sizes_8cpp_source.html#l00688">astcenc_block_sizes.cpp:688</a></div></div>
<div class="ttc" id="aastcenc__block__sizes_8cpp_html_a6a5e2e9b931f3399e9722f7de90f537c"><div class="ttname"><a href="#a6a5e2e9b931f3399e9722f7de90f537c">decode_block_mode_2d</a></div><div class="ttdeci">static bool decode_block_mode_2d(unsigned int block_mode, unsigned int &amp;x_weights, unsigned int &amp;y_weights, bool &amp;is_dual_plane, unsigned int &amp;quant_mode, unsigned int &amp;weight_bits)</div><div class="ttdoc">Functions to generate block size descriptor and decimation tables.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__block__sizes_8cpp_source.html#l00036">astcenc_block_sizes.cpp:36</a></div></div>
<div class="ttc" id="aastcenc__block__sizes_8cpp_html_aa894007bf90b5ec41a26d1c391ace949"><div class="ttname"><a href="#aa894007bf90b5ec41a26d1c391ace949">construct_dt_entry_2d</a></div><div class="ttdeci">static void construct_dt_entry_2d(unsigned int x_texels, unsigned int y_texels, unsigned int x_weights, unsigned int y_weights, block_size_descriptor &amp;bsd, dt_init_working_buffers &amp;wb, unsigned int index)</div><div class="ttdoc">Allocate a single 2D decimation table entry.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__block__sizes_8cpp_source.html#l00738">astcenc_block_sizes.cpp:738</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a803b1633e5a45c902bc513ef4c333327"><div class="ttname"><a href="astcenc__internal_8h.html#a803b1633e5a45c902bc513ef4c333327">WEIGHTS_MAX_DECIMATION_MODES</a></div><div class="ttdeci">static constexpr unsigned int WEIGHTS_MAX_DECIMATION_MODES</div><div class="ttdoc">The number of weight grid decimation modes supported by the ASTC format.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00117">astcenc_internal.h:117</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a9909bfb0b9a42a121838a9a145a8612f"><div class="ttname"><a href="astcenc__internal_8h.html#a9909bfb0b9a42a121838a9a145a8612f">BLOCK_BAD_BLOCK_MODE</a></div><div class="ttdeci">static constexpr uint16_t BLOCK_BAD_BLOCK_MODE</div><div class="ttdoc">The index indicating a bad (unused) block mode in the remap array.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00099">astcenc_internal.h:99</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_ac446d816e6883587f7cd6fd115d9a40c"><div class="ttname"><a href="astcenc__internal_8h.html#ac446d816e6883587f7cd6fd115d9a40c">WEIGHTS_MAX_BLOCK_MODES</a></div><div class="ttdeci">static constexpr unsigned int WEIGHTS_MAX_BLOCK_MODES</div><div class="ttdoc">The number of block modes supported by the ASTC format.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00114">astcenc_internal.h:114</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_af98304be147ac93a80eaf13cbe448605"><div class="ttname"><a href="astcenc__internal_8h.html#af98304be147ac93a80eaf13cbe448605">get_2d_percentile_table</a></div><div class="ttdeci">const float * get_2d_percentile_table(unsigned int xdim, unsigned int ydim)</div><div class="ttdoc">Get the percentile table for 2D block modes.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__percentile__tables_8cpp_source.html#l01165">astcenc_percentile_tables.cpp:1165</a></div></div>
<div class="ttc" id="astructblock__mode_html_aaf9846117d40406d5e84508f429cf949"><div class="ttname"><a href="structblock__mode.html#aaf9846117d40406d5e84508f429cf949">block_mode::decimation_mode</a></div><div class="ttdeci">uint8_t decimation_mode</div><div class="ttdoc">The decimation mode index in the compressor reindexed list.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00421">astcenc_internal.h:421</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a16bc48defd8d3085accc3da158b12f40"><div class="ttname"><a href="structblock__size__descriptor.html#a16bc48defd8d3085accc3da158b12f40">block_size_descriptor::decimation_mode_count_all</a></div><div class="ttdeci">unsigned int decimation_mode_count_all</div><div class="ttdoc">The number of stored decimation modes for any encoding.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00555">astcenc_internal.h:555</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a2f7e6f96bb4dddb56f41aeeea8abda2f"><div class="ttname"><a href="structblock__size__descriptor.html#a2f7e6f96bb4dddb56f41aeeea8abda2f">block_size_descriptor::block_mode_count_all</a></div><div class="ttdeci">unsigned int block_mode_count_all</div><div class="ttdoc">The number of stored block modes for any encoding.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00571">astcenc_internal.h:571</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a2f96c6e4d1e35b4bac8778c474c69bb1"><div class="ttname"><a href="structblock__size__descriptor.html#a2f96c6e4d1e35b4bac8778c474c69bb1">block_size_descriptor::block_mode_count_1plane_selected</a></div><div class="ttdeci">unsigned int block_mode_count_1plane_selected</div><div class="ttdoc">The number of stored block modes for active 1 plane encodings.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00565">astcenc_internal.h:565</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a44583f2512e5ae120df42bfc4270fa03"><div class="ttname"><a href="structblock__size__descriptor.html#a44583f2512e5ae120df42bfc4270fa03">block_size_descriptor::ydim</a></div><div class="ttdeci">uint8_t ydim</div><div class="ttdoc">The block Y dimension, in texels.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00536">astcenc_internal.h:536</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a5344a8e95df2fe4fe2b396b669993140"><div class="ttname"><a href="structblock__size__descriptor.html#a5344a8e95df2fe4fe2b396b669993140">block_size_descriptor::decimation_mode_count_selected</a></div><div class="ttdeci">unsigned int decimation_mode_count_selected</div><div class="ttdoc">The number of stored decimation modes for selected encodings.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00552">astcenc_internal.h:552</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a796557a9c78ee86175f67ed504731ac5"><div class="ttname"><a href="structblock__size__descriptor.html#a796557a9c78ee86175f67ed504731ac5">block_size_descriptor::block_mode_count_1plane_2plane_selected</a></div><div class="ttdeci">unsigned int block_mode_count_1plane_2plane_selected</div><div class="ttdoc">The number of stored block modes for active 1 and 2 plane encodings.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00568">astcenc_internal.h:568</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a82d0bf7e49df4683f0823b4951fb77f8"><div class="ttname"><a href="structblock__size__descriptor.html#a82d0bf7e49df4683f0823b4951fb77f8">block_size_descriptor::block_modes</a></div><div class="ttdeci">block_mode block_modes[WEIGHTS_MAX_BLOCK_MODES]</div><div class="ttdoc">The active block modes, stored in low indices.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00589">astcenc_internal.h:589</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_aa00a247a5ba4c0501174c3ff6ecb9145"><div class="ttname"><a href="structblock__size__descriptor.html#aa00a247a5ba4c0501174c3ff6ecb9145">block_size_descriptor::xdim</a></div><div class="ttdeci">uint8_t xdim</div><div class="ttdoc">The block X dimension, in texels.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00533">astcenc_internal.h:533</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_ab9f7c875237ad395d3795506d934dba1"><div class="ttname"><a href="structblock__size__descriptor.html#ab9f7c875237ad395d3795506d934dba1">block_size_descriptor::decimation_mode_count_always</a></div><div class="ttdeci">unsigned int decimation_mode_count_always</div><div class="ttdoc">The number of stored decimation modes which are &quot;always&quot; modes.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00549">astcenc_internal.h:549</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_acfb1b28b22c740a1c8262587f5a6364f"><div class="ttname"><a href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">block_size_descriptor::decimation_modes</a></div><div class="ttdeci">decimation_mode decimation_modes[WEIGHTS_MAX_DECIMATION_MODES]</div><div class="ttdoc">The active decimation modes, stored in low indices.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00580">astcenc_internal.h:580</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_ad2a7804c5aa2d87b691f9899d85c5bc6"><div class="ttname"><a href="structblock__size__descriptor.html#ad2a7804c5aa2d87b691f9899d85c5bc6">block_size_descriptor::block_mode_packed_index</a></div><div class="ttdeci">uint16_t block_mode_packed_index[WEIGHTS_MAX_BLOCK_MODES]</div><div class="ttdoc">The packed block mode array index, or BLOCK_BAD_BLOCK_MODE if not active.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00586">astcenc_internal.h:586</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_ae2f4cd561ea1618e1c44f9afbead038f"><div class="ttname"><a href="structblock__size__descriptor.html#ae2f4cd561ea1618e1c44f9afbead038f">block_size_descriptor::block_mode_count_1plane_always</a></div><div class="ttdeci">unsigned int block_mode_count_1plane_always</div><div class="ttdoc">The number of stored block modes which are &quot;always&quot; modes.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00562">astcenc_internal.h:562</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_afc7428efe69cba2425ae335d9d266714"><div class="ttname"><a href="structblock__size__descriptor.html#afc7428efe69cba2425ae335d9d266714">block_size_descriptor::zdim</a></div><div class="ttdeci">uint8_t zdim</div><div class="ttdoc">The block Z dimension, in texels.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00539">astcenc_internal.h:539</a></div></div>
<div class="ttc" id="astructdecimation__mode_html"><div class="ttname"><a href="structdecimation__mode.html">decimation_mode</a></div><div class="ttdoc">Metadata for single decimation mode for a specific block size.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00446">astcenc_internal.h:447</a></div></div>
<div class="ttc" id="astructdecimation__mode_html_a3f0254c125ad2fab3716af8cc856b77a"><div class="ttname"><a href="structdecimation__mode.html#a3f0254c125ad2fab3716af8cc856b77a">decimation_mode::refprec_2planes</a></div><div class="ttdeci">uint16_t refprec_2planes</div><div class="ttdoc">Bitvector indicating weight quant methods used by active 2 plane block modes.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00466">astcenc_internal.h:466</a></div></div>
<div class="ttc" id="astructdecimation__mode_html_a469a9f9e5df5748e571801cd921b7b9b"><div class="ttname"><a href="structdecimation__mode.html#a469a9f9e5df5748e571801cd921b7b9b">decimation_mode::maxprec_1plane</a></div><div class="ttdeci">int8_t maxprec_1plane</div><div class="ttdoc">The max weight precision for 1 plane, or -1 if not supported.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00449">astcenc_internal.h:449</a></div></div>
<div class="ttc" id="astructdecimation__mode_html_a6cc1d777d75001f629a2a0661894a334"><div class="ttname"><a href="structdecimation__mode.html#a6cc1d777d75001f629a2a0661894a334">decimation_mode::maxprec_2planes</a></div><div class="ttdeci">int8_t maxprec_2planes</div><div class="ttdoc">The max weight precision for 2 planes, or -1 if not supported.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00452">astcenc_internal.h:452</a></div></div>
<div class="ttc" id="astructdecimation__mode_html_a84c78b671414b48738ddb97937c66ddf"><div class="ttname"><a href="structdecimation__mode.html#a84c78b671414b48738ddb97937c66ddf">decimation_mode::set_ref_2plane</a></div><div class="ttdeci">void set_ref_2plane(quant_method weight_quant)</div><div class="ttdoc">Set a 2 plane weight quant as active.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00494">astcenc_internal.h:494</a></div></div>
<div class="ttc" id="astructdecimation__mode_html_af7821f4c585e26acef567aca653879c1"><div class="ttname"><a href="structdecimation__mode.html#af7821f4c585e26acef567aca653879c1">decimation_mode::refprec_1plane</a></div><div class="ttdeci">uint16_t refprec_1plane</div><div class="ttdoc">Bitvector indicating weight quant modes used by active 1 plane block modes.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00459">astcenc_internal.h:459</a></div></div>
<div class="ttc" id="astructdt__init__working__buffers_html"><div class="ttname"><a href="structdt__init__working__buffers.html">dt_init_working_buffers</a></div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01009">astcenc_internal.h:1010</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_ae2e6657689fff66c3d8729b63d6ae7c5_cgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_ae2e6657689fff66c3d8729b63d6ae7c5_cgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_ae2e6657689fff66c3d8729b63d6ae7c5_cgraph" id="aastcenc__block__sizes_8cpp_ae2e6657689fff66c3d8729b63d6ae7c5_cgraph">
<area shape="rect" title="Allocate block modes and decimation tables for a single 2D block size." alt="" coords="5,146,151,186"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a20c3e73541fd2727c8b79cc8c19919b2" title="Assign the texels to use for kmeans clustering." alt="" coords="203,55,357,80"/>
<area shape="poly" title=" " alt="" coords="105,144,148,116,198,89,215,82,217,87,200,94,150,120,108,148"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#aa894007bf90b5ec41a26d1c391ace949" title="Allocate a single 2D decimation table entry." alt="" coords="205,153,355,179"/>
<area shape="poly" title=" " alt="" coords="151,163,191,163,191,169,151,169"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a6a5e2e9b931f3399e9722f7de90f537c" title="Functions to generate block size descriptor and decimation tables." alt="" coords="199,104,361,129"/>
<area shape="poly" title=" " alt="" coords="150,146,214,130,215,135,151,151"/>
<area shape="rect" href="astcenc__percentile__tables_8cpp.html#af98304be147ac93a80eaf13cbe448605" title="Get the percentile table for 2D block modes." alt="" coords="201,203,359,228"/>
<area shape="poly" title=" " alt="" coords="151,181,215,197,214,202,150,186"/>
<area shape="rect" href="structdecimation__mode.html#a84c78b671414b48738ddb97937c66ddf" title="Set a 2 plane weight quant as active." alt="" coords="205,253,355,293"/>
<area shape="poly" title=" " alt="" coords="110,184,200,238,213,245,211,250,197,243,107,189"/>
<area shape="rect" href="namespaceastc.html#acd6244a33d585dcaa70ceb08313115ff" title="Return the next random number from the generator." alt="" coords="459,5,539,31"/>
<area shape="poly" title=" " alt="" coords="337,52,445,27,446,33,338,57"/>
<area shape="rect" href="namespaceastc.html#a3a0b157316c84b208b4195916b2593e1" title="Initialize the seed structure for a random number generator." alt="" coords="447,55,551,80"/>
<area shape="poly" title=" " alt="" coords="358,65,433,65,433,70,358,70"/>
<area shape="rect" href="astcenc__mathlib_8cpp.html#ada00fa3b97cd1f54329bc637fcba9ec6" title="64&#45;bit rotate left." alt="" coords="719,5,759,31"/>
<area shape="poly" title=" " alt="" coords="540,15,705,15,705,21,540,21"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19" title="Return the number of bits needed to encode an ISE sequence." alt="" coords="409,104,589,129"/>
<area shape="poly" title=" " alt="" coords="337,151,428,130,429,135,338,156"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#ad8405c6d5685c364a91ff3ae3c5c4057" title="Create a 2D decimation entry for a block&#45;size and weight&#45;decimation pair." alt="" coords="421,153,578,179"/>
<area shape="poly" title=" " alt="" coords="356,163,407,163,407,169,356,169"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="699,128,779,153"/>
<area shape="poly" title=" " alt="" coords="578,155,685,144,685,149,578,160"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="637,177,840,203"/>
<area shape="poly" title=" " alt="" coords="578,171,624,176,623,181,578,177"/>
<area shape="poly" title=" " alt="" coords="361,114,396,114,396,119,361,119"/>
<area shape="rect" href="astcenc__percentile__tables_8cpp.html#ad46153321aa8b7efe0d78a7f6e8a88e9" title="Fetch the packed percentile table for the given 2D block size." alt="" coords="437,203,561,228"/>
<area shape="poly" title=" " alt="" coords="360,213,423,213,423,218,360,218"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_ae2e6657689fff66c3d8729b63d6ae7c5_icgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_ae2e6657689fff66c3d8729b63d6ae7c5_icgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_ae2e6657689fff66c3d8729b63d6ae7c5_icgraph" id="aastcenc__block__sizes_8cpp_ae2e6657689fff66c3d8729b63d6ae7c5_icgraph">
<area shape="rect" title="Allocate block modes and decimation tables for a single 2D block size." alt="" coords="675,5,820,45"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a5c46863585cc583c3deb49323dfb73d8" title="Populate the block size descriptor for the target block size." alt="" coords="455,13,627,38"/>
<area shape="poly" title=" " alt="" coords="661,28,627,28,627,23,661,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a823234313a697f5b4cdbd2cd6caaef4a" title="Allocate a new codec context based on a config." alt="" coords="255,13,407,38"/>
<area shape="poly" title=" " alt="" coords="441,28,407,28,407,23,441,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="241,28,207,28,207,23,241,23"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
</map>
</div>

</div>
</div>
<a id="a3fde919cf8b9a7f9db851cfff6a7a87c" name="a3fde919cf8b9a7f9db851cfff6a7a87c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fde919cf8b9a7f9db851cfff6a7a87c">&#9670;&#160;</a></span>construct_block_size_descriptor_3d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void construct_block_size_descriptor_3d </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>x_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>y_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>z_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate block modes and decimation tables for a single 3D block size. </p>
<p>TODO: This function doesn't include all of the heuristics that we use for 2D block sizes such as the percentile mode cutoffs. If 3D becomes more widely used we should look at this.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">x_texels</td><td>The number of texels in the X dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">y_texels</td><td>The number of texels in the Y dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">z_texels</td><td>The number of texels in the Z dimension. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bsd</td><td>The block size descriptor to populate. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__block__sizes_8cpp_source.html">astcenc_block_sizes.cpp</a> 파일의 <a class="el" href="astcenc__block__sizes_8cpp_source.html#l00993">993</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  998</span>  {</div>
<div class="line"><span class="lineno">  999</span>    <span class="comment">// Store a remap table for storing packed decimation modes.</span></div>
<div class="line"><span class="lineno"> 1000</span>    <span class="comment">// Indexing uses [Z * 64 + Y *  8 + X] and max size for each axis is 6.</span></div>
<div class="line"><span class="lineno"> 1001</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> MAX_DMI = 6 * 64 + 6 * 8 + 6;</div>
<div class="line"><span class="lineno"> 1002</span>    <span class="keywordtype">int</span> decimation_mode_index[MAX_DMI];</div>
<div class="line"><span class="lineno"> 1003</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> decimation_mode_count = 0;</div>
<div class="line"><span class="lineno"> 1004</span> </div>
<div class="line"><span class="lineno"> 1005</span>    <a class="code hl_struct" href="structdt__init__working__buffers.html">dt_init_working_buffers</a>* wb = <span class="keyword">new</span> <a class="code hl_struct" href="structdt__init__working__buffers.html">dt_init_working_buffers</a>;</div>
<div class="line"><span class="lineno"> 1006</span> </div>
<div class="line"><span class="lineno"> 1007</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#aa00a247a5ba4c0501174c3ff6ecb9145">xdim</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(x_texels);</div>
<div class="line"><span class="lineno"> 1008</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a44583f2512e5ae120df42bfc4270fa03">ydim</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(y_texels);</div>
<div class="line"><span class="lineno"> 1009</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#afc7428efe69cba2425ae335d9d266714">zdim</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(z_texels);</div>
<div class="line"><span class="lineno"> 1010</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(x_texels * y_texels * z_texels);</div>
<div class="line"><span class="lineno"> 1011</span> </div>
<div class="line"><span class="lineno"> 1012</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; MAX_DMI; i++)</div>
<div class="line"><span class="lineno"> 1013</span>    {</div>
<div class="line"><span class="lineno"> 1014</span>        decimation_mode_index[i] = -1;</div>
<div class="line"><span class="lineno"> 1015</span>    }</div>
<div class="line"><span class="lineno"> 1016</span> </div>
<div class="line"><span class="lineno"> 1017</span>    <span class="comment">// gather all the infill-modes that can be used with the current block size</span></div>
<div class="line"><span class="lineno"> 1018</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x_weights = 2; x_weights &lt;= x_texels; x_weights++)</div>
<div class="line"><span class="lineno"> 1019</span>    {</div>
<div class="line"><span class="lineno"> 1020</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y_weights = 2; y_weights &lt;= y_texels; y_weights++)</div>
<div class="line"><span class="lineno"> 1021</span>        {</div>
<div class="line"><span class="lineno"> 1022</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> z_weights = 2; z_weights &lt;= z_texels; z_weights++)</div>
<div class="line"><span class="lineno"> 1023</span>            {</div>
<div class="line"><span class="lineno"> 1024</span>                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weight_count = x_weights * y_weights * z_weights;</div>
<div class="line"><span class="lineno"> 1025</span>                <span class="keywordflow">if</span> (weight_count &gt; <a class="code hl_variable" href="astcenc__internal_8h.html#aa069d5d400baafe528bce4778aba6c45">BLOCK_MAX_WEIGHTS</a>)</div>
<div class="line"><span class="lineno"> 1026</span>                {</div>
<div class="line"><span class="lineno"> 1027</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1028</span>                }</div>
<div class="line"><span class="lineno"> 1029</span> </div>
<div class="line"><span class="lineno"> 1030</span>                <a class="code hl_struct" href="structdecimation__info.html">decimation_info</a>&amp; di = bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a273c234d668c2b48f96ff9f7b3869bf6">decimation_tables</a>[decimation_mode_count];</div>
<div class="line"><span class="lineno"> 1031</span>                decimation_mode_index[z_weights * 64 + y_weights * 8 + x_weights] = decimation_mode_count;</div>
<div class="line"><span class="lineno"> 1032</span>                <a class="code hl_function" href="#a2baafb8e792da4735cef4849633739ac">init_decimation_info_3d</a>(x_texels, y_texels, z_texels, x_weights, y_weights, z_weights, di, *wb);</div>
<div class="line"><span class="lineno"> 1033</span> </div>
<div class="line"><span class="lineno"> 1034</span>                <span class="keywordtype">int</span> maxprec_1plane = -1;</div>
<div class="line"><span class="lineno"> 1035</span>                <span class="keywordtype">int</span> maxprec_2planes = -1;</div>
<div class="line"><span class="lineno"> 1036</span>                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 12; i++)</div>
<div class="line"><span class="lineno"> 1037</span>                {</div>
<div class="line"><span class="lineno"> 1038</span>                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bits_1plane = <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19">get_ise_sequence_bitcount</a>(weight_count, <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(i));</div>
<div class="line"><span class="lineno"> 1039</span>                    <span class="keywordflow">if</span> (bits_1plane &gt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a817c25d21478b157f13181438fee0aaa">BLOCK_MIN_WEIGHT_BITS</a> &amp;&amp; bits_1plane &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a0ec606b58f917d012feda99c58c20b91">BLOCK_MAX_WEIGHT_BITS</a>)</div>
<div class="line"><span class="lineno"> 1040</span>                    {</div>
<div class="line"><span class="lineno"> 1041</span>                        maxprec_1plane = i;</div>
<div class="line"><span class="lineno"> 1042</span>                    }</div>
<div class="line"><span class="lineno"> 1043</span> </div>
<div class="line"><span class="lineno"> 1044</span>                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bits_2planes = <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19">get_ise_sequence_bitcount</a>(2 * weight_count, <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(i));</div>
<div class="line"><span class="lineno"> 1045</span>                    <span class="keywordflow">if</span> (bits_2planes &gt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a817c25d21478b157f13181438fee0aaa">BLOCK_MIN_WEIGHT_BITS</a> &amp;&amp; bits_2planes &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a0ec606b58f917d012feda99c58c20b91">BLOCK_MAX_WEIGHT_BITS</a>)</div>
<div class="line"><span class="lineno"> 1046</span>                    {</div>
<div class="line"><span class="lineno"> 1047</span>                        maxprec_2planes = i;</div>
<div class="line"><span class="lineno"> 1048</span>                    }</div>
<div class="line"><span class="lineno"> 1049</span>                }</div>
<div class="line"><span class="lineno"> 1050</span> </div>
<div class="line"><span class="lineno"> 1051</span>                <span class="keywordflow">if</span> ((2 * weight_count) &gt; <a class="code hl_variable" href="astcenc__internal_8h.html#aa069d5d400baafe528bce4778aba6c45">BLOCK_MAX_WEIGHTS</a>)</div>
<div class="line"><span class="lineno"> 1052</span>                {</div>
<div class="line"><span class="lineno"> 1053</span>                    maxprec_2planes = -1;</div>
<div class="line"><span class="lineno"> 1054</span>                }</div>
<div class="line"><span class="lineno"> 1055</span> </div>
<div class="line"><span class="lineno"> 1056</span>                bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[decimation_mode_count].<a class="code hl_variable" href="structdecimation__mode.html#a469a9f9e5df5748e571801cd921b7b9b">maxprec_1plane</a> = <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>(maxprec_1plane);</div>
<div class="line"><span class="lineno"> 1057</span>                bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[decimation_mode_count].<a class="code hl_variable" href="structdecimation__mode.html#a6cc1d777d75001f629a2a0661894a334">maxprec_2planes</a> = <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>(maxprec_2planes);</div>
<div class="line"><span class="lineno"> 1058</span>                bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[decimation_mode_count].<a class="code hl_variable" href="structdecimation__mode.html#af7821f4c585e26acef567aca653879c1">refprec_1plane</a> = maxprec_1plane == -1 ? 0 : 0xFFFF;</div>
<div class="line"><span class="lineno"> 1059</span>                bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[decimation_mode_count].<a class="code hl_variable" href="structdecimation__mode.html#a3f0254c125ad2fab3716af8cc856b77a">refprec_2planes</a> = maxprec_2planes == -1 ? 0 : 0xFFFF;</div>
<div class="line"><span class="lineno"> 1060</span>                decimation_mode_count++;</div>
<div class="line"><span class="lineno"> 1061</span>            }</div>
<div class="line"><span class="lineno"> 1062</span>        }</div>
<div class="line"><span class="lineno"> 1063</span>    }</div>
<div class="line"><span class="lineno"> 1064</span> </div>
<div class="line"><span class="lineno"> 1065</span>    <span class="comment">// Ensure the end of the array contains valid data (should never get read)</span></div>
<div class="line"><span class="lineno"> 1066</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = decimation_mode_count; i &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#a803b1633e5a45c902bc513ef4c333327">WEIGHTS_MAX_DECIMATION_MODES</a>; i++)</div>
<div class="line"><span class="lineno"> 1067</span>    {</div>
<div class="line"><span class="lineno"> 1068</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[i].<a class="code hl_variable" href="structdecimation__mode.html#a469a9f9e5df5748e571801cd921b7b9b">maxprec_1plane</a> = -1;</div>
<div class="line"><span class="lineno"> 1069</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[i].<a class="code hl_variable" href="structdecimation__mode.html#a6cc1d777d75001f629a2a0661894a334">maxprec_2planes</a> = -1;</div>
<div class="line"><span class="lineno"> 1070</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[i].<a class="code hl_variable" href="structdecimation__mode.html#af7821f4c585e26acef567aca653879c1">refprec_1plane</a> = 0;</div>
<div class="line"><span class="lineno"> 1071</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[i].<a class="code hl_variable" href="structdecimation__mode.html#a3f0254c125ad2fab3716af8cc856b77a">refprec_2planes</a> = 0;</div>
<div class="line"><span class="lineno"> 1072</span>    }</div>
<div class="line"><span class="lineno"> 1073</span> </div>
<div class="line"><span class="lineno"> 1074</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ab9f7c875237ad395d3795506d934dba1">decimation_mode_count_always</a> = 0; <span class="comment">// Skipped for 3D modes</span></div>
<div class="line"><span class="lineno"> 1075</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a5344a8e95df2fe4fe2b396b669993140">decimation_mode_count_selected</a> = decimation_mode_count;</div>
<div class="line"><span class="lineno"> 1076</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a16bc48defd8d3085accc3da158b12f40">decimation_mode_count_all</a> = decimation_mode_count;</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>    <span class="comment">// Construct the list of block formats referencing the decimation tables</span></div>
<div class="line"><span class="lineno"> 1079</span> </div>
<div class="line"><span class="lineno"> 1080</span>    <span class="comment">// Clear the list to a known-bad value</span></div>
<div class="line"><span class="lineno"> 1081</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#ac446d816e6883587f7cd6fd115d9a40c">WEIGHTS_MAX_BLOCK_MODES</a>; i++)</div>
<div class="line"><span class="lineno"> 1082</span>    {</div>
<div class="line"><span class="lineno"> 1083</span>        bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ad2a7804c5aa2d87b691f9899d85c5bc6">block_mode_packed_index</a>[i] = <a class="code hl_variable" href="astcenc__internal_8h.html#a9909bfb0b9a42a121838a9a145a8612f">BLOCK_BAD_BLOCK_MODE</a>;</div>
<div class="line"><span class="lineno"> 1084</span>    }</div>
<div class="line"><span class="lineno"> 1085</span> </div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> packed_idx = 0;</div>
<div class="line"><span class="lineno"> 1087</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bm_counts[2] { 0 };</div>
<div class="line"><span class="lineno"> 1088</span> </div>
<div class="line"><span class="lineno"> 1089</span>    <span class="comment">// Iterate two times to build a usefully ordered list:</span></div>
<div class="line"><span class="lineno"> 1090</span>    <span class="comment">//   - Pass 0 - keep valid single plane block modes</span></div>
<div class="line"><span class="lineno"> 1091</span>    <span class="comment">//   - Pass 1 - keep valid dual plane block modes</span></div>
<div class="line"><span class="lineno"> 1092</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; 2; j++)</div>
<div class="line"><span class="lineno"> 1093</span>    {</div>
<div class="line"><span class="lineno"> 1094</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#ac446d816e6883587f7cd6fd115d9a40c">WEIGHTS_MAX_BLOCK_MODES</a>; i++)</div>
<div class="line"><span class="lineno"> 1095</span>        {</div>
<div class="line"><span class="lineno"> 1096</span>            <span class="comment">// Skip modes we&#39;ve already included in a previous pass</span></div>
<div class="line"><span class="lineno"> 1097</span>            <span class="keywordflow">if</span> (bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ad2a7804c5aa2d87b691f9899d85c5bc6">block_mode_packed_index</a>[i] != <a class="code hl_variable" href="astcenc__internal_8h.html#a9909bfb0b9a42a121838a9a145a8612f">BLOCK_BAD_BLOCK_MODE</a>)</div>
<div class="line"><span class="lineno"> 1098</span>            {</div>
<div class="line"><span class="lineno"> 1099</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1100</span>            }</div>
<div class="line"><span class="lineno"> 1101</span> </div>
<div class="line"><span class="lineno"> 1102</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x_weights;</div>
<div class="line"><span class="lineno"> 1103</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y_weights;</div>
<div class="line"><span class="lineno"> 1104</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> z_weights;</div>
<div class="line"><span class="lineno"> 1105</span>            <span class="keywordtype">bool</span> is_dual_plane;</div>
<div class="line"><span class="lineno"> 1106</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> quant_mode;</div>
<div class="line"><span class="lineno"> 1107</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weight_bits;</div>
<div class="line"><span class="lineno"> 1108</span> </div>
<div class="line"><span class="lineno"> 1109</span>            <span class="keywordtype">bool</span> valid = <a class="code hl_function" href="#a0eadba499223d475df0afa41228a7d30">decode_block_mode_3d</a>(i, x_weights, y_weights, z_weights, is_dual_plane, quant_mode, weight_bits);</div>
<div class="line"><span class="lineno"> 1110</span>            <span class="comment">// Skip invalid encodings</span></div>
<div class="line"><span class="lineno"> 1111</span>            <span class="keywordflow">if</span> (!valid || x_weights &gt; x_texels || y_weights &gt; y_texels || z_weights &gt; z_texels)</div>
<div class="line"><span class="lineno"> 1112</span>            {</div>
<div class="line"><span class="lineno"> 1113</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1114</span>            }</div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="line"><span class="lineno"> 1116</span>            <span class="comment">// Skip encodings in the wrong iteration</span></div>
<div class="line"><span class="lineno"> 1117</span>            <span class="keywordflow">if</span> ((j == 0 &amp;&amp; is_dual_plane) || (j == 1 &amp;&amp; !is_dual_plane))</div>
<div class="line"><span class="lineno"> 1118</span>            {</div>
<div class="line"><span class="lineno"> 1119</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1120</span>            }</div>
<div class="line"><span class="lineno"> 1121</span> </div>
<div class="line"><span class="lineno"> 1122</span>            <span class="comment">// Always skip encodings we can&#39;t physically encode based on bit availability</span></div>
<div class="line"><span class="lineno"> 1123</span>            <span class="keywordflow">if</span> (is_dual_plane)</div>
<div class="line"><span class="lineno"> 1124</span>            {</div>
<div class="line"><span class="lineno"> 1125</span>                 <span class="comment">// This is the only check we need as only support 1 partition</span></div>
<div class="line"><span class="lineno"> 1126</span>                 <span class="keywordflow">if</span> ((109 - weight_bits) &lt;= 0)</div>
<div class="line"><span class="lineno"> 1127</span>                 {</div>
<div class="line"><span class="lineno"> 1128</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1129</span>                 }</div>
<div class="line"><span class="lineno"> 1130</span>            }</div>
<div class="line"><span class="lineno"> 1131</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1132</span>            {</div>
<div class="line"><span class="lineno"> 1133</span>                <span class="comment">// This is conservative - fewer bits may be available for &gt; 1 partition</span></div>
<div class="line"><span class="lineno"> 1134</span>                 <span class="keywordflow">if</span> ((111 - weight_bits) &lt;= 0)</div>
<div class="line"><span class="lineno"> 1135</span>                 {</div>
<div class="line"><span class="lineno"> 1136</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1137</span>                 }</div>
<div class="line"><span class="lineno"> 1138</span>            }</div>
<div class="line"><span class="lineno"> 1139</span> </div>
<div class="line"><span class="lineno"> 1140</span>            <span class="keywordtype">int</span> <a class="code hl_struct" href="structdecimation__mode.html">decimation_mode</a> = decimation_mode_index[z_weights * 64 + y_weights * 8 + x_weights];</div>
<div class="line"><span class="lineno"> 1141</span>            bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a82d0bf7e49df4683f0823b4951fb77f8">block_modes</a>[packed_idx].<a class="code hl_variable" href="structblock__mode.html#aaf9846117d40406d5e84508f429cf949">decimation_mode</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_struct" href="structdecimation__mode.html">decimation_mode</a>);</div>
<div class="line"><span class="lineno"> 1142</span>            bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a82d0bf7e49df4683f0823b4951fb77f8">block_modes</a>[packed_idx].<a class="code hl_variable" href="structblock__mode.html#a57910e5bd3d21447cdea6c7789723a86">quant_mode</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(quant_mode);</div>
<div class="line"><span class="lineno"> 1143</span>            bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a82d0bf7e49df4683f0823b4951fb77f8">block_modes</a>[packed_idx].<a class="code hl_variable" href="structblock__mode.html#a22f24a51f0c67cad40998833545e675e">weight_bits</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(weight_bits);</div>
<div class="line"><span class="lineno"> 1144</span>            bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a82d0bf7e49df4683f0823b4951fb77f8">block_modes</a>[packed_idx].<a class="code hl_variable" href="structblock__mode.html#a78b282103d0a8bee2b07c0da075a3dc4">is_dual_plane</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(is_dual_plane);</div>
<div class="line"><span class="lineno"> 1145</span>            bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a82d0bf7e49df4683f0823b4951fb77f8">block_modes</a>[packed_idx].<a class="code hl_variable" href="structblock__mode.html#a045cae1a970db63e55e66df097c84863">mode_index</a> = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(i);</div>
<div class="line"><span class="lineno"> 1146</span> </div>
<div class="line"><span class="lineno"> 1147</span>            bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ad2a7804c5aa2d87b691f9899d85c5bc6">block_mode_packed_index</a>[i] = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(packed_idx);</div>
<div class="line"><span class="lineno"> 1148</span>            bm_counts[j]++;</div>
<div class="line"><span class="lineno"> 1149</span>            packed_idx++;</div>
<div class="line"><span class="lineno"> 1150</span>        }</div>
<div class="line"><span class="lineno"> 1151</span>    }</div>
<div class="line"><span class="lineno"> 1152</span> </div>
<div class="line"><span class="lineno"> 1153</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ae2f4cd561ea1618e1c44f9afbead038f">block_mode_count_1plane_always</a> = 0;  <span class="comment">// Skipped for 3D modes</span></div>
<div class="line"><span class="lineno"> 1154</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a2f96c6e4d1e35b4bac8778c474c69bb1">block_mode_count_1plane_selected</a> = bm_counts[0];</div>
<div class="line"><span class="lineno"> 1155</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a796557a9c78ee86175f67ed504731ac5">block_mode_count_1plane_2plane_selected</a> = bm_counts[0] + bm_counts[1];</div>
<div class="line"><span class="lineno"> 1156</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a2f7e6f96bb4dddb56f41aeeea8abda2f">block_mode_count_all</a> = bm_counts[0] + bm_counts[1];</div>
<div class="line"><span class="lineno"> 1157</span> </div>
<div class="line"><span class="lineno"> 1158</span>    <span class="comment">// Determine the texels to use for kmeans clustering.</span></div>
<div class="line"><span class="lineno"> 1159</span>    <a class="code hl_function" href="#a20c3e73541fd2727c8b79cc8c19919b2">assign_kmeans_texels</a>(bsd);</div>
<div class="line"><span class="lineno"> 1160</span> </div>
<div class="line"><span class="lineno"> 1161</span>    <span class="keyword">delete</span> wb;</div>
<div class="line"><span class="lineno"> 1162</span>}</div>
<div class="ttc" id="aastcenc__block__sizes_8cpp_html_a0eadba499223d475df0afa41228a7d30"><div class="ttname"><a href="#a0eadba499223d475df0afa41228a7d30">decode_block_mode_3d</a></div><div class="ttdeci">static bool decode_block_mode_3d(unsigned int block_mode, unsigned int &amp;x_weights, unsigned int &amp;y_weights, unsigned int &amp;z_weights, bool &amp;is_dual_plane, unsigned int &amp;quant_mode, unsigned int &amp;weight_bits)</div><div class="ttdoc">Decode the properties of an encoded 3D block mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__block__sizes_8cpp_source.html#l00152">astcenc_block_sizes.cpp:152</a></div></div>
<div class="ttc" id="aastcenc__block__sizes_8cpp_html_a2baafb8e792da4735cef4849633739ac"><div class="ttname"><a href="#a2baafb8e792da4735cef4849633739ac">init_decimation_info_3d</a></div><div class="ttdeci">static void init_decimation_info_3d(unsigned int x_texels, unsigned int y_texels, unsigned int z_texels, unsigned int x_weights, unsigned int y_weights, unsigned int z_weights, decimation_info &amp;di, dt_init_working_buffers &amp;wb)</div><div class="ttdoc">Create a 3D decimation entry for a block-size and weight-decimation pair.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__block__sizes_8cpp_source.html#l00436">astcenc_block_sizes.cpp:436</a></div></div>
<div class="ttc" id="aastcenc__integer__sequence_8cpp_html_af46c9322b401332698e9cb93c968fe19"><div class="ttname"><a href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19">get_ise_sequence_bitcount</a></div><div class="ttdeci">unsigned int get_ise_sequence_bitcount(unsigned int character_count, quant_method quant_level)</div><div class="ttdoc">Return the number of bits needed to encode an ISE sequence.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__integer__sequence_8cpp_source.html#l00419">astcenc_integer_sequence.cpp:419</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a0ec606b58f917d012feda99c58c20b91"><div class="ttname"><a href="astcenc__internal_8h.html#a0ec606b58f917d012feda99c58c20b91">BLOCK_MAX_WEIGHT_BITS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_WEIGHT_BITS</div><div class="ttdoc">The maximum number of weight bits a candidate encoding can encode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00096">astcenc_internal.h:96</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a806a5b8001942a6fa06d788ffec45a75"><div class="ttname"><a href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a></div><div class="ttdeci">quant_method</div><div class="ttdoc">The ASTC quantization methods.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00203">astcenc_internal.h:204</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a817c25d21478b157f13181438fee0aaa"><div class="ttname"><a href="astcenc__internal_8h.html#a817c25d21478b157f13181438fee0aaa">BLOCK_MIN_WEIGHT_BITS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MIN_WEIGHT_BITS</div><div class="ttdoc">The minimum number of weight bits a candidate encoding must encode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00093">astcenc_internal.h:93</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_aa069d5d400baafe528bce4778aba6c45"><div class="ttname"><a href="astcenc__internal_8h.html#aa069d5d400baafe528bce4778aba6c45">BLOCK_MAX_WEIGHTS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_WEIGHTS</div><div class="ttdoc">The maximum number of weights a block can support.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00087">astcenc_internal.h:87</a></div></div>
<div class="ttc" id="astructblock__mode_html_a045cae1a970db63e55e66df097c84863"><div class="ttname"><a href="structblock__mode.html#a045cae1a970db63e55e66df097c84863">block_mode::mode_index</a></div><div class="ttdeci">uint16_t mode_index</div><div class="ttdoc">The block mode index in the ASTC encoded form.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00418">astcenc_internal.h:418</a></div></div>
<div class="ttc" id="astructblock__mode_html_a22f24a51f0c67cad40998833545e675e"><div class="ttname"><a href="structblock__mode.html#a22f24a51f0c67cad40998833545e675e">block_mode::weight_bits</a></div><div class="ttdeci">uint8_t weight_bits</div><div class="ttdoc">The weight quantization used by this block mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00427">astcenc_internal.h:427</a></div></div>
<div class="ttc" id="astructblock__mode_html_a57910e5bd3d21447cdea6c7789723a86"><div class="ttname"><a href="structblock__mode.html#a57910e5bd3d21447cdea6c7789723a86">block_mode::quant_mode</a></div><div class="ttdeci">uint8_t quant_mode</div><div class="ttdoc">The weight quantization used by this block mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00424">astcenc_internal.h:424</a></div></div>
<div class="ttc" id="astructblock__mode_html_a78b282103d0a8bee2b07c0da075a3dc4"><div class="ttname"><a href="structblock__mode.html#a78b282103d0a8bee2b07c0da075a3dc4">block_mode::is_dual_plane</a></div><div class="ttdeci">uint8_t is_dual_plane</div><div class="ttdoc">Is a dual weight plane used by this block mode?</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00430">astcenc_internal.h:430</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a273c234d668c2b48f96ff9f7b3869bf6"><div class="ttname"><a href="structblock__size__descriptor.html#a273c234d668c2b48f96ff9f7b3869bf6">block_size_descriptor::decimation_tables</a></div><div class="ttdeci">ASTCENC_ALIGNAS decimation_info decimation_tables[WEIGHTS_MAX_DECIMATION_MODES]</div><div class="ttdoc">The active decimation tables, stored in low indices.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00583">astcenc_internal.h:583</a></div></div>
<div class="ttc" id="astructdecimation__info_html"><div class="ttname"><a href="structdecimation__info.html">decimation_info</a></div><div class="ttdoc">The weight grid information for a single decimation pattern.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00346">astcenc_internal.h:347</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a3fde919cf8b9a7f9db851cfff6a7a87c_cgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a3fde919cf8b9a7f9db851cfff6a7a87c_cgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a3fde919cf8b9a7f9db851cfff6a7a87c_cgraph" id="aastcenc__block__sizes_8cpp_a3fde919cf8b9a7f9db851cfff6a7a87c_cgraph">
<area shape="rect" title="Allocate block modes and decimation tables for a single 3D block size." alt="" coords="5,115,151,155"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a20c3e73541fd2727c8b79cc8c19919b2" title="Assign the texels to use for kmeans clustering." alt="" coords="203,48,357,73"/>
<area shape="poly" title=" " alt="" coords="124,113,198,84,222,75,224,80,200,88,126,118"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a0eadba499223d475df0afa41228a7d30" title="Decode the properties of an encoded 3D block mode." alt="" coords="199,97,361,123"/>
<area shape="poly" title=" " alt="" coords="150,124,185,119,185,125,151,129"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19" title="Return the number of bits needed to encode an ISE sequence." alt="" coords="421,111,601,136"/>
<area shape="poly" title=" " alt="" coords="151,134,361,133,407,130,407,135,361,138,151,140"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a2baafb8e792da4735cef4849633739ac" title="Create a 3D decimation entry for a block&#45;size and weight&#45;decimation pair." alt="" coords="201,199,359,224"/>
<area shape="poly" title=" " alt="" coords="133,153,233,191,231,196,131,158"/>
<area shape="rect" href="namespaceastc.html#acd6244a33d585dcaa70ceb08313115ff" title="Return the next random number from the generator." alt="" coords="471,5,551,31"/>
<area shape="poly" title=" " alt="" coords="349,45,457,25,458,30,350,51"/>
<area shape="rect" href="namespaceastc.html#a3a0b157316c84b208b4195916b2593e1" title="Initialize the seed structure for a random number generator." alt="" coords="459,55,563,80"/>
<area shape="poly" title=" " alt="" coords="358,60,445,63,445,68,358,66"/>
<area shape="rect" href="astcenc__mathlib_8cpp.html#ada00fa3b97cd1f54329bc637fcba9ec6" title="64&#45;bit rotate left." alt="" coords="660,5,700,31"/>
<area shape="poly" title=" " alt="" coords="551,15,646,15,646,21,551,21"/>
<area shape="poly" title=" " alt="" coords="362,112,407,115,406,120,362,117"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="471,172,551,197"/>
<area shape="poly" title=" " alt="" coords="359,200,456,188,457,193,359,205"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="409,221,612,247"/>
<area shape="poly" title=" " alt="" coords="359,216,396,220,396,225,359,222"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a3fde919cf8b9a7f9db851cfff6a7a87c_icgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a3fde919cf8b9a7f9db851cfff6a7a87c_icgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a3fde919cf8b9a7f9db851cfff6a7a87c_icgraph" id="aastcenc__block__sizes_8cpp_a3fde919cf8b9a7f9db851cfff6a7a87c_icgraph">
<area shape="rect" title="Allocate block modes and decimation tables for a single 3D block size." alt="" coords="675,5,820,45"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a5c46863585cc583c3deb49323dfb73d8" title="Populate the block size descriptor for the target block size." alt="" coords="455,13,627,38"/>
<area shape="poly" title=" " alt="" coords="661,28,627,28,627,23,661,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a823234313a697f5b4cdbd2cd6caaef4a" title="Allocate a new codec context based on a config." alt="" coords="255,13,407,38"/>
<area shape="poly" title=" " alt="" coords="441,28,407,28,407,23,441,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="241,28,207,28,207,23,241,23"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
</map>
</div>

</div>
</div>
<a id="aa894007bf90b5ec41a26d1c391ace949" name="aa894007bf90b5ec41a26d1c391ace949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa894007bf90b5ec41a26d1c391ace949">&#9670;&#160;</a></span>construct_dt_entry_2d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void construct_dt_entry_2d </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>x_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>y_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>x_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>y_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdt__init__working__buffers.html">dt_init_working_buffers</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>wb</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate a single 2D decimation table entry. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramname">x_texels</td><td>The number of texels in the X dimension. </td></tr>
    <tr><td class="paramname">y_texels</td><td>The number of texels in the Y dimension. </td></tr>
    <tr><td class="paramname">x_weights</td><td>The number of weights in the X dimension. </td></tr>
    <tr><td class="paramname">y_weights</td><td>The number of weights in the Y dimension. </td></tr>
    <tr><td class="paramname">bsd</td><td>The block size descriptor we are populating. </td></tr>
    <tr><td class="paramname">wb</td><td>The decimation table init scratch working buffers. </td></tr>
    <tr><td class="paramname">index</td><td>The packed array index to populate. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__block__sizes_8cpp_source.html">astcenc_block_sizes.cpp</a> 파일의 <a class="el" href="astcenc__block__sizes_8cpp_source.html#l00738">738</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  746</span>  {</div>
<div class="line"><span class="lineno">  747</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weight_count = x_weights * y_weights;</div>
<div class="line"><span class="lineno">  748</span>    assert(weight_count &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#aa069d5d400baafe528bce4778aba6c45">BLOCK_MAX_WEIGHTS</a>);</div>
<div class="line"><span class="lineno">  749</span> </div>
<div class="line"><span class="lineno">  750</span>    <span class="keywordtype">bool</span> try_2planes = (2 * weight_count) &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#aa069d5d400baafe528bce4778aba6c45">BLOCK_MAX_WEIGHTS</a>;</div>
<div class="line"><span class="lineno">  751</span> </div>
<div class="line"><span class="lineno">  752</span>    <a class="code hl_struct" href="structdecimation__info.html">decimation_info</a>&amp; di = bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a273c234d668c2b48f96ff9f7b3869bf6">decimation_tables</a>[index];</div>
<div class="line"><span class="lineno">  753</span>    <a class="code hl_function" href="#ad8405c6d5685c364a91ff3ae3c5c4057">init_decimation_info_2d</a>(x_texels, y_texels, x_weights, y_weights, di, wb);</div>
<div class="line"><span class="lineno">  754</span> </div>
<div class="line"><span class="lineno">  755</span>    <span class="keywordtype">int</span> maxprec_1plane = -1;</div>
<div class="line"><span class="lineno">  756</span>    <span class="keywordtype">int</span> maxprec_2planes = -1;</div>
<div class="line"><span class="lineno">  757</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 12; i++)</div>
<div class="line"><span class="lineno">  758</span>    {</div>
<div class="line"><span class="lineno">  759</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bits_1plane = <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19">get_ise_sequence_bitcount</a>(weight_count, <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(i));</div>
<div class="line"><span class="lineno">  760</span>        <span class="keywordflow">if</span> (bits_1plane &gt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a817c25d21478b157f13181438fee0aaa">BLOCK_MIN_WEIGHT_BITS</a> &amp;&amp; bits_1plane &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a0ec606b58f917d012feda99c58c20b91">BLOCK_MAX_WEIGHT_BITS</a>)</div>
<div class="line"><span class="lineno">  761</span>        {</div>
<div class="line"><span class="lineno">  762</span>            maxprec_1plane = i;</div>
<div class="line"><span class="lineno">  763</span>        }</div>
<div class="line"><span class="lineno">  764</span> </div>
<div class="line"><span class="lineno">  765</span>        <span class="keywordflow">if</span> (try_2planes)</div>
<div class="line"><span class="lineno">  766</span>        {</div>
<div class="line"><span class="lineno">  767</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bits_2planes = <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19">get_ise_sequence_bitcount</a>(2 * weight_count, <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(i));</div>
<div class="line"><span class="lineno">  768</span>            <span class="keywordflow">if</span> (bits_2planes &gt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a817c25d21478b157f13181438fee0aaa">BLOCK_MIN_WEIGHT_BITS</a> &amp;&amp; bits_2planes &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a0ec606b58f917d012feda99c58c20b91">BLOCK_MAX_WEIGHT_BITS</a>)</div>
<div class="line"><span class="lineno">  769</span>            {</div>
<div class="line"><span class="lineno">  770</span>                maxprec_2planes = i;</div>
<div class="line"><span class="lineno">  771</span>            }</div>
<div class="line"><span class="lineno">  772</span>        }</div>
<div class="line"><span class="lineno">  773</span>    }</div>
<div class="line"><span class="lineno">  774</span> </div>
<div class="line"><span class="lineno">  775</span>    <span class="comment">// At least one of the two should be valid ...</span></div>
<div class="line"><span class="lineno">  776</span>    assert(maxprec_1plane &gt;= 0 || maxprec_2planes &gt;= 0);</div>
<div class="line"><span class="lineno">  777</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[index].<a class="code hl_variable" href="structdecimation__mode.html#a469a9f9e5df5748e571801cd921b7b9b">maxprec_1plane</a> = <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>(maxprec_1plane);</div>
<div class="line"><span class="lineno">  778</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[index].<a class="code hl_variable" href="structdecimation__mode.html#a6cc1d777d75001f629a2a0661894a334">maxprec_2planes</a> = <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>(maxprec_2planes);</div>
<div class="line"><span class="lineno">  779</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[index].<a class="code hl_variable" href="structdecimation__mode.html#af7821f4c585e26acef567aca653879c1">refprec_1plane</a> = 0;</div>
<div class="line"><span class="lineno">  780</span>    bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#acfb1b28b22c740a1c8262587f5a6364f">decimation_modes</a>[index].<a class="code hl_variable" href="structdecimation__mode.html#a3f0254c125ad2fab3716af8cc856b77a">refprec_2planes</a> = 0;</div>
<div class="line"><span class="lineno">  781</span>}</div>
<div class="ttc" id="aastcenc__block__sizes_8cpp_html_ad8405c6d5685c364a91ff3ae3c5c4057"><div class="ttname"><a href="#ad8405c6d5685c364a91ff3ae3c5c4057">init_decimation_info_2d</a></div><div class="ttdeci">static void init_decimation_info_2d(unsigned int x_texels, unsigned int y_texels, unsigned int x_weights, unsigned int y_weights, decimation_info &amp;di, dt_init_working_buffers &amp;wb)</div><div class="ttdoc">Create a 2D decimation entry for a block-size and weight-decimation pair.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__block__sizes_8cpp_source.html#l00252">astcenc_block_sizes.cpp:252</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_aa894007bf90b5ec41a26d1c391ace949_cgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_aa894007bf90b5ec41a26d1c391ace949_cgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_aa894007bf90b5ec41a26d1c391ace949_cgraph" id="aastcenc__block__sizes_8cpp_aa894007bf90b5ec41a26d1c391ace949_cgraph">
<area shape="rect" title="Allocate a single 2D decimation table entry." alt="" coords="5,31,156,56"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19" title="Return the number of bits needed to encode an ISE sequence." alt="" coords="204,5,384,31"/>
<area shape="poly" title=" " alt="" coords="156,32,190,28,191,33,157,37"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#ad8405c6d5685c364a91ff3ae3c5c4057" title="Create a 2D decimation entry for a block&#45;size and weight&#45;decimation pair." alt="" coords="215,55,373,80"/>
<area shape="poly" title=" " alt="" coords="157,49,202,54,201,60,156,54"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="493,29,573,55"/>
<area shape="poly" title=" " alt="" coords="373,56,479,45,480,50,373,62"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="432,79,635,104"/>
<area shape="poly" title=" " alt="" coords="373,73,419,77,418,82,373,78"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_aa894007bf90b5ec41a26d1c391ace949_icgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_aa894007bf90b5ec41a26d1c391ace949_icgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_aa894007bf90b5ec41a26d1c391ace949_icgraph" id="aastcenc__block__sizes_8cpp_aa894007bf90b5ec41a26d1c391ace949_icgraph">
<area shape="rect" title="Allocate a single 2D decimation table entry." alt="" coords="868,13,1019,38"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#ae2e6657689fff66c3d8729b63d6ae7c5" title="Allocate block modes and decimation tables for a single 2D block size." alt="" coords="675,5,820,45"/>
<area shape="poly" title=" " alt="" coords="854,28,820,28,820,23,854,23"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a5c46863585cc583c3deb49323dfb73d8" title="Populate the block size descriptor for the target block size." alt="" coords="455,13,627,38"/>
<area shape="poly" title=" " alt="" coords="661,28,627,28,627,23,661,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a823234313a697f5b4cdbd2cd6caaef4a" title="Allocate a new codec context based on a config." alt="" coords="255,13,407,38"/>
<area shape="poly" title=" " alt="" coords="441,28,407,28,407,23,441,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="241,28,207,28,207,23,241,23"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
</map>
</div>

</div>
</div>
<a id="a6a5e2e9b931f3399e9722f7de90f537c" name="a6a5e2e9b931f3399e9722f7de90f537c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a5e2e9b931f3399e9722f7de90f537c">&#9670;&#160;</a></span>decode_block_mode_2d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool decode_block_mode_2d </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>block_mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;</td>          <td class="paramname"><span class="paramname"><em>x_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;</td>          <td class="paramname"><span class="paramname"><em>y_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;</td>          <td class="paramname"><span class="paramname"><em>is_dual_plane</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;</td>          <td class="paramname"><span class="paramname"><em>quant_mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;</td>          <td class="paramname"><span class="paramname"><em>weight_bits</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Functions to generate block size descriptor and decimation tables. </p>
<p>Decode the properties of an encoded 2D block mode.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname"><a class="el" href="structblock__mode.html" title="Metadata for single block mode for a specific block size.">block_mode</a></td><td>The encoded block mode. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">x_weights</td><td>The number of weights in the X dimension. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">y_weights</td><td>The number of weights in the Y dimension. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">is_dual_plane</td><td>True if this block mode has two weight planes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">quant_mode</td><td>The quantization level for the weights. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">weight_bits</td><td>The storage bit count for the weights.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>Returns true if a valid mode, false otherwise. </dd></dl>

<p class="definition"><a class="el" href="astcenc__block__sizes_8cpp_source.html">astcenc_block_sizes.cpp</a> 파일의 <a class="el" href="astcenc__block__sizes_8cpp_source.html#l00036">36</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">   43</span>  {</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> base_quant_mode = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 4) &amp; 1;</div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> H = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 9) &amp; 1;</div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> D = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 10) &amp; 1;</div>
<div class="line"><span class="lineno">   47</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> A = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 5) &amp; 0x3;</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>    x_weights = 0;</div>
<div class="line"><span class="lineno">   50</span>    y_weights = 0;</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">if</span> ((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &amp; 3) != 0)</div>
<div class="line"><span class="lineno">   53</span>    {</div>
<div class="line"><span class="lineno">   54</span>        base_quant_mode |= (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &amp; 3) &lt;&lt; 1;</div>
<div class="line"><span class="lineno">   55</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> B = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 7) &amp; 3;</div>
<div class="line"><span class="lineno">   56</span>        <span class="keywordflow">switch</span> ((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 2) &amp; 3)</div>
<div class="line"><span class="lineno">   57</span>        {</div>
<div class="line"><span class="lineno">   58</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">   59</span>            x_weights = B + 4;</div>
<div class="line"><span class="lineno">   60</span>            y_weights = A + 2;</div>
<div class="line"><span class="lineno">   61</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">   63</span>            x_weights = B + 8;</div>
<div class="line"><span class="lineno">   64</span>            y_weights = A + 2;</div>
<div class="line"><span class="lineno">   65</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   66</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">   67</span>            x_weights = A + 2;</div>
<div class="line"><span class="lineno">   68</span>            y_weights = B + 8;</div>
<div class="line"><span class="lineno">   69</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   70</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno">   71</span>            B &amp;= 1;</div>
<div class="line"><span class="lineno">   72</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &amp; 0x100)</div>
<div class="line"><span class="lineno">   73</span>            {</div>
<div class="line"><span class="lineno">   74</span>                x_weights = B + 2;</div>
<div class="line"><span class="lineno">   75</span>                y_weights = A + 2;</div>
<div class="line"><span class="lineno">   76</span>            }</div>
<div class="line"><span class="lineno">   77</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   78</span>            {</div>
<div class="line"><span class="lineno">   79</span>                x_weights = A + 2;</div>
<div class="line"><span class="lineno">   80</span>                y_weights = B + 6;</div>
<div class="line"><span class="lineno">   81</span>            }</div>
<div class="line"><span class="lineno">   82</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   83</span>        }</div>
<div class="line"><span class="lineno">   84</span>    }</div>
<div class="line"><span class="lineno">   85</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   86</span>    {</div>
<div class="line"><span class="lineno">   87</span>        base_quant_mode |= ((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 2) &amp; 3) &lt;&lt; 1;</div>
<div class="line"><span class="lineno">   88</span>        <span class="keywordflow">if</span> (((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 2) &amp; 3) == 0)</div>
<div class="line"><span class="lineno">   89</span>        {</div>
<div class="line"><span class="lineno">   90</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   91</span>        }</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> B = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 9) &amp; 3;</div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordflow">switch</span> ((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 7) &amp; 3)</div>
<div class="line"><span class="lineno">   95</span>        {</div>
<div class="line"><span class="lineno">   96</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">   97</span>            x_weights = 12;</div>
<div class="line"><span class="lineno">   98</span>            y_weights = A + 2;</div>
<div class="line"><span class="lineno">   99</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">  101</span>            x_weights = A + 2;</div>
<div class="line"><span class="lineno">  102</span>            y_weights = 12;</div>
<div class="line"><span class="lineno">  103</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  104</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  105</span>            x_weights = A + 6;</div>
<div class="line"><span class="lineno">  106</span>            y_weights = B + 6;</div>
<div class="line"><span class="lineno">  107</span>            D = 0;</div>
<div class="line"><span class="lineno">  108</span>            H = 0;</div>
<div class="line"><span class="lineno">  109</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  110</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordflow">switch</span> ((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 5) &amp; 3)</div>
<div class="line"><span class="lineno">  112</span>            {</div>
<div class="line"><span class="lineno">  113</span>            <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">  114</span>                x_weights = 6;</div>
<div class="line"><span class="lineno">  115</span>                y_weights = 10;</div>
<div class="line"><span class="lineno">  116</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  117</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">  118</span>                x_weights = 10;</div>
<div class="line"><span class="lineno">  119</span>                y_weights = 6;</div>
<div class="line"><span class="lineno">  120</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  121</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  122</span>            <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno">  123</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  124</span>            }</div>
<div class="line"><span class="lineno">  125</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  126</span>        }</div>
<div class="line"><span class="lineno">  127</span>    }</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weight_count = x_weights * y_weights * (D + 1);</div>
<div class="line"><span class="lineno">  130</span>    quant_mode = (base_quant_mode - 2) + 6 * H;</div>
<div class="line"><span class="lineno">  131</span>    is_dual_plane = D != 0;</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    weight_bits = <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19">get_ise_sequence_bitcount</a>(weight_count, <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(quant_mode));</div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">return</span> (weight_count &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#aa069d5d400baafe528bce4778aba6c45">BLOCK_MAX_WEIGHTS</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  135</span>            weight_bits &gt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a817c25d21478b157f13181438fee0aaa">BLOCK_MIN_WEIGHT_BITS</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  136</span>            weight_bits &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a0ec606b58f917d012feda99c58c20b91">BLOCK_MAX_WEIGHT_BITS</a>);</div>
<div class="line"><span class="lineno">  137</span>}</div>
<div class="ttc" id="astructblock__mode_html"><div class="ttname"><a href="structblock__mode.html">block_mode</a></div><div class="ttdoc">Metadata for single block mode for a specific block size.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00415">astcenc_internal.h:416</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a6a5e2e9b931f3399e9722f7de90f537c_cgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a6a5e2e9b931f3399e9722f7de90f537c_cgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a6a5e2e9b931f3399e9722f7de90f537c_cgraph" id="aastcenc__block__sizes_8cpp_a6a5e2e9b931f3399e9722f7de90f537c_cgraph">
<area shape="rect" title="Functions to generate block size descriptor and decimation tables." alt="" coords="5,5,168,31"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19" title="Return the number of bits needed to encode an ISE sequence." alt="" coords="216,5,396,31"/>
<area shape="poly" title=" " alt="" coords="168,15,202,15,202,21,168,21"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a6a5e2e9b931f3399e9722f7de90f537c_icgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a6a5e2e9b931f3399e9722f7de90f537c_icgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a6a5e2e9b931f3399e9722f7de90f537c_icgraph" id="aastcenc__block__sizes_8cpp_a6a5e2e9b931f3399e9722f7de90f537c_icgraph">
<area shape="rect" title="Functions to generate block size descriptor and decimation tables." alt="" coords="868,13,1031,38"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#ae2e6657689fff66c3d8729b63d6ae7c5" title="Allocate block modes and decimation tables for a single 2D block size." alt="" coords="675,5,820,45"/>
<area shape="poly" title=" " alt="" coords="854,28,820,28,820,23,854,23"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a5c46863585cc583c3deb49323dfb73d8" title="Populate the block size descriptor for the target block size." alt="" coords="455,13,627,38"/>
<area shape="poly" title=" " alt="" coords="661,28,627,28,627,23,661,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a823234313a697f5b4cdbd2cd6caaef4a" title="Allocate a new codec context based on a config." alt="" coords="255,13,407,38"/>
<area shape="poly" title=" " alt="" coords="441,28,407,28,407,23,441,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="241,28,207,28,207,23,241,23"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
</map>
</div>

</div>
</div>
<a id="a0eadba499223d475df0afa41228a7d30" name="a0eadba499223d475df0afa41228a7d30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eadba499223d475df0afa41228a7d30">&#9670;&#160;</a></span>decode_block_mode_3d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool decode_block_mode_3d </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>block_mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;</td>          <td class="paramname"><span class="paramname"><em>x_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;</td>          <td class="paramname"><span class="paramname"><em>y_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;</td>          <td class="paramname"><span class="paramname"><em>z_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;</td>          <td class="paramname"><span class="paramname"><em>is_dual_plane</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;</td>          <td class="paramname"><span class="paramname"><em>quant_mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int &amp;</td>          <td class="paramname"><span class="paramname"><em>weight_bits</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decode the properties of an encoded 3D block mode. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname"><a class="el" href="structblock__mode.html" title="Metadata for single block mode for a specific block size.">block_mode</a></td><td>The encoded block mode. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">x_weights</td><td>The number of weights in the X dimension. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">y_weights</td><td>The number of weights in the Y dimension. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">z_weights</td><td>The number of weights in the Z dimension. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">is_dual_plane</td><td>True if this block mode has two weight planes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">quant_mode</td><td>The quantization level for the weights. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">weight_bits</td><td>The storage bit count for the weights.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>Returns true if a valid mode, false otherwise. </dd></dl>

<p class="definition"><a class="el" href="astcenc__block__sizes_8cpp_source.html">astcenc_block_sizes.cpp</a> 파일의 <a class="el" href="astcenc__block__sizes_8cpp_source.html#l00152">152</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  160</span>  {</div>
<div class="line"><span class="lineno">  161</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> base_quant_mode = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 4) &amp; 1;</div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> H = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 9) &amp; 1;</div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> D = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 10) &amp; 1;</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> A = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 5) &amp; 0x3;</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    x_weights = 0;</div>
<div class="line"><span class="lineno">  167</span>    y_weights = 0;</div>
<div class="line"><span class="lineno">  168</span>    z_weights = 0;</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>    <span class="keywordflow">if</span> ((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &amp; 3) != 0)</div>
<div class="line"><span class="lineno">  171</span>    {</div>
<div class="line"><span class="lineno">  172</span>        base_quant_mode |= (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &amp; 3) &lt;&lt; 1;</div>
<div class="line"><span class="lineno">  173</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> B = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 7) &amp; 3;</div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> C = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 2) &amp; 0x3;</div>
<div class="line"><span class="lineno">  175</span>        x_weights = A + 2;</div>
<div class="line"><span class="lineno">  176</span>        y_weights = B + 2;</div>
<div class="line"><span class="lineno">  177</span>        z_weights = C + 2;</div>
<div class="line"><span class="lineno">  178</span>    }</div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  180</span>    {</div>
<div class="line"><span class="lineno">  181</span>        base_quant_mode |= ((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 2) &amp; 3) &lt;&lt; 1;</div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">if</span> (((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 2) &amp; 3) == 0)</div>
<div class="line"><span class="lineno">  183</span>        {</div>
<div class="line"><span class="lineno">  184</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  185</span>        }</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>        <span class="keywordtype">int</span> B = (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 9) &amp; 3;</div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">if</span> (((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 7) &amp; 3) != 3)</div>
<div class="line"><span class="lineno">  189</span>        {</div>
<div class="line"><span class="lineno">  190</span>            D = 0;</div>
<div class="line"><span class="lineno">  191</span>            H = 0;</div>
<div class="line"><span class="lineno">  192</span>        }</div>
<div class="line"><span class="lineno">  193</span>        <span class="keywordflow">switch</span> ((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 7) &amp; 3)</div>
<div class="line"><span class="lineno">  194</span>        {</div>
<div class="line"><span class="lineno">  195</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">  196</span>            x_weights = 6;</div>
<div class="line"><span class="lineno">  197</span>            y_weights = B + 2;</div>
<div class="line"><span class="lineno">  198</span>            z_weights = A + 2;</div>
<div class="line"><span class="lineno">  199</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  200</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">  201</span>            x_weights = A + 2;</div>
<div class="line"><span class="lineno">  202</span>            y_weights = 6;</div>
<div class="line"><span class="lineno">  203</span>            z_weights = B + 2;</div>
<div class="line"><span class="lineno">  204</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  206</span>            x_weights = A + 2;</div>
<div class="line"><span class="lineno">  207</span>            y_weights = B + 2;</div>
<div class="line"><span class="lineno">  208</span>            z_weights = 6;</div>
<div class="line"><span class="lineno">  209</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  210</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno">  211</span>            x_weights = 2;</div>
<div class="line"><span class="lineno">  212</span>            y_weights = 2;</div>
<div class="line"><span class="lineno">  213</span>            z_weights = 2;</div>
<div class="line"><span class="lineno">  214</span>            <span class="keywordflow">switch</span> ((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &gt;&gt; 5) &amp; 3)</div>
<div class="line"><span class="lineno">  215</span>            {</div>
<div class="line"><span class="lineno">  216</span>            <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">  217</span>                x_weights = 6;</div>
<div class="line"><span class="lineno">  218</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  219</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">  220</span>                y_weights = 6;</div>
<div class="line"><span class="lineno">  221</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  222</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  223</span>                z_weights = 6;</div>
<div class="line"><span class="lineno">  224</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  225</span>            <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno">  226</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  227</span>            }</div>
<div class="line"><span class="lineno">  228</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  229</span>        }</div>
<div class="line"><span class="lineno">  230</span>    }</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weight_count = x_weights * y_weights * z_weights * (D + 1);</div>
<div class="line"><span class="lineno">  233</span>    quant_mode = (base_quant_mode - 2) + 6 * H;</div>
<div class="line"><span class="lineno">  234</span>    is_dual_plane = D != 0;</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>    weight_bits = <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19">get_ise_sequence_bitcount</a>(weight_count, <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(quant_mode));</div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">return</span> (weight_count &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#aa069d5d400baafe528bce4778aba6c45">BLOCK_MAX_WEIGHTS</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  238</span>            weight_bits &gt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a817c25d21478b157f13181438fee0aaa">BLOCK_MIN_WEIGHT_BITS</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  239</span>            weight_bits &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a0ec606b58f917d012feda99c58c20b91">BLOCK_MAX_WEIGHT_BITS</a>);</div>
<div class="line"><span class="lineno">  240</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a0eadba499223d475df0afa41228a7d30_cgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a0eadba499223d475df0afa41228a7d30_cgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a0eadba499223d475df0afa41228a7d30_cgraph" id="aastcenc__block__sizes_8cpp_a0eadba499223d475df0afa41228a7d30_cgraph">
<area shape="rect" title="Decode the properties of an encoded 3D block mode." alt="" coords="5,5,168,31"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19" title="Return the number of bits needed to encode an ISE sequence." alt="" coords="216,5,396,31"/>
<area shape="poly" title=" " alt="" coords="168,15,202,15,202,21,168,21"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a0eadba499223d475df0afa41228a7d30_icgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a0eadba499223d475df0afa41228a7d30_icgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a0eadba499223d475df0afa41228a7d30_icgraph" id="aastcenc__block__sizes_8cpp_a0eadba499223d475df0afa41228a7d30_icgraph">
<area shape="rect" title="Decode the properties of an encoded 3D block mode." alt="" coords="868,13,1031,38"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a3fde919cf8b9a7f9db851cfff6a7a87c" title="Allocate block modes and decimation tables for a single 3D block size." alt="" coords="675,5,820,45"/>
<area shape="poly" title=" " alt="" coords="854,28,820,28,820,23,854,23"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a5c46863585cc583c3deb49323dfb73d8" title="Populate the block size descriptor for the target block size." alt="" coords="455,13,627,38"/>
<area shape="poly" title=" " alt="" coords="661,28,627,28,627,23,661,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a823234313a697f5b4cdbd2cd6caaef4a" title="Allocate a new codec context based on a config." alt="" coords="255,13,407,38"/>
<area shape="poly" title=" " alt="" coords="441,28,407,28,407,23,441,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="241,28,207,28,207,23,241,23"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
</map>
</div>

</div>
</div>
<a id="a5c46863585cc583c3deb49323dfb73d8" name="a5c46863585cc583c3deb49323dfb73d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c46863585cc583c3deb49323dfb73d8">&#9670;&#160;</a></span>init_block_size_descriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_block_size_descriptor </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>x_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>y_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>z_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>can_omit_modes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>partition_count_cutoff</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>mode_cutoff</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Populate the block size descriptor for the target block size. </p>
<p>This will also initialize the partition table metadata, which is stored as part of the BSD structure.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">x_texels</td><td>The number of texels in the block X dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">y_texels</td><td>The number of texels in the block Y dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">z_texels</td><td>The number of texels in the block Z dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">can_omit_modes</td><td>Can we discard modes and partitionings that astcenc won't use? </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_count_cutoff</td><td>The partition count cutoff to use, if we can omit partitionings. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">mode_cutoff</td><td>The block mode percentile cutoff [0-1]. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bsd</td><td>The descriptor to initialize. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__block__sizes_8cpp_source.html">astcenc_block_sizes.cpp</a> 파일의 <a class="el" href="astcenc__block__sizes_8cpp_source.html#l01165">1165</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1173</span>  {</div>
<div class="line"><span class="lineno"> 1174</span>    <span class="keywordflow">if</span> (z_texels &gt; 1)</div>
<div class="line"><span class="lineno"> 1175</span>    {</div>
<div class="line"><span class="lineno"> 1176</span>        <a class="code hl_function" href="#a3fde919cf8b9a7f9db851cfff6a7a87c">construct_block_size_descriptor_3d</a>(x_texels, y_texels, z_texels, bsd);</div>
<div class="line"><span class="lineno"> 1177</span>    }</div>
<div class="line"><span class="lineno"> 1178</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1179</span>    {</div>
<div class="line"><span class="lineno"> 1180</span>        <a class="code hl_function" href="#ae2e6657689fff66c3d8729b63d6ae7c5">construct_block_size_descriptor_2d</a>(x_texels, y_texels, can_omit_modes, mode_cutoff, bsd);</div>
<div class="line"><span class="lineno"> 1181</span>    }</div>
<div class="line"><span class="lineno"> 1182</span> </div>
<div class="line"><span class="lineno"> 1183</span>    <a class="code hl_function" href="astcenc__internal_8h.html#a9460ca3acf0175a93580b78d5d99a36a">init_partition_tables</a>(bsd, can_omit_modes, partition_count_cutoff);</div>
<div class="line"><span class="lineno"> 1184</span>}</div>
<div class="ttc" id="aastcenc__block__sizes_8cpp_html_a3fde919cf8b9a7f9db851cfff6a7a87c"><div class="ttname"><a href="#a3fde919cf8b9a7f9db851cfff6a7a87c">construct_block_size_descriptor_3d</a></div><div class="ttdeci">static void construct_block_size_descriptor_3d(unsigned int x_texels, unsigned int y_texels, unsigned int z_texels, block_size_descriptor &amp;bsd)</div><div class="ttdoc">Allocate block modes and decimation tables for a single 3D block size.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__block__sizes_8cpp_source.html#l00993">astcenc_block_sizes.cpp:993</a></div></div>
<div class="ttc" id="aastcenc__block__sizes_8cpp_html_ae2e6657689fff66c3d8729b63d6ae7c5"><div class="ttname"><a href="#ae2e6657689fff66c3d8729b63d6ae7c5">construct_block_size_descriptor_2d</a></div><div class="ttdeci">static void construct_block_size_descriptor_2d(unsigned int x_texels, unsigned int y_texels, bool can_omit_modes, float mode_cutoff, block_size_descriptor &amp;bsd)</div><div class="ttdoc">Allocate block modes and decimation tables for a single 2D block size.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__block__sizes_8cpp_source.html#l00792">astcenc_block_sizes.cpp:792</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a9460ca3acf0175a93580b78d5d99a36a"><div class="ttname"><a href="astcenc__internal_8h.html#a9460ca3acf0175a93580b78d5d99a36a">init_partition_tables</a></div><div class="ttdeci">void init_partition_tables(block_size_descriptor &amp;bsd, bool can_omit_partitionings, unsigned int partition_count_cutoff)</div><div class="ttdoc">Populate the partition tables for the target block size.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__partition__tables_8cpp_source.html#l00460">astcenc_partition_tables.cpp:460</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a5c46863585cc583c3deb49323dfb73d8_cgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a5c46863585cc583c3deb49323dfb73d8_cgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a5c46863585cc583c3deb49323dfb73d8_cgraph" id="aastcenc__block__sizes_8cpp_a5c46863585cc583c3deb49323dfb73d8_cgraph">
<area shape="rect" title="Populate the block size descriptor for the target block size." alt="" coords="5,293,177,318"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#ae2e6657689fff66c3d8729b63d6ae7c5" title="Allocate block modes and decimation tables for a single 2D block size." alt="" coords="225,137,371,177"/>
<area shape="poly" title=" " alt="" coords="109,290,256,183,259,188,112,295"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a3fde919cf8b9a7f9db851cfff6a7a87c" title="Allocate block modes and decimation tables for a single 3D block size." alt="" coords="225,285,371,325"/>
<area shape="poly" title=" " alt="" coords="177,303,211,303,211,308,177,308"/>
<area shape="rect" href="astcenc__partition__tables_8cpp.html#a9460ca3acf0175a93580b78d5d99a36a" title="Populate the partition tables for the target block size." alt="" coords="231,419,365,445"/>
<area shape="poly" title=" " alt="" coords="115,316,266,410,263,414,112,320"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a20c3e73541fd2727c8b79cc8c19919b2" title="Assign the texels to use for kmeans clustering." alt="" coords="423,119,577,145"/>
<area shape="poly" title=" " alt="" coords="370,146,409,141,409,146,371,151"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#aa894007bf90b5ec41a26d1c391ace949" title="Allocate a single 2D decimation table entry." alt="" coords="425,169,575,194"/>
<area shape="poly" title=" " alt="" coords="371,163,411,168,411,173,370,169"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a6a5e2e9b931f3399e9722f7de90f537c" title="Functions to generate block size descriptor and decimation tables." alt="" coords="419,218,581,243"/>
<area shape="poly" title=" " alt="" coords="346,175,420,204,441,211,440,216,418,209,344,180"/>
<area shape="rect" href="astcenc__percentile__tables_8cpp.html#af98304be147ac93a80eaf13cbe448605" title="Get the percentile table for 2D block modes." alt="" coords="421,70,579,95"/>
<area shape="poly" title=" " alt="" coords="344,135,418,106,442,97,444,102,420,110,346,140"/>
<area shape="rect" href="structdecimation__mode.html#a84c78b671414b48738ddb97937c66ddf" title="Set a 2 plane weight quant as active." alt="" coords="425,5,575,45"/>
<area shape="poly" title=" " alt="" coords="318,135,361,95,417,55,428,49,431,54,420,60,365,100,321,139"/>
<area shape="rect" href="namespaceastc.html#acd6244a33d585dcaa70ceb08313115ff" title="Return the next random number from the generator." alt="" coords="695,119,775,145"/>
<area shape="poly" title=" " alt="" coords="578,129,681,129,681,135,578,135"/>
<area shape="rect" href="namespaceastc.html#a3a0b157316c84b208b4195916b2593e1" title="Initialize the seed structure for a random number generator." alt="" coords="683,169,787,194"/>
<area shape="poly" title=" " alt="" coords="562,142,670,165,669,170,561,147"/>
<area shape="rect" href="astcenc__mathlib_8cpp.html#ada00fa3b97cd1f54329bc637fcba9ec6" title="64&#45;bit rotate left." alt="" coords="969,119,1009,145"/>
<area shape="poly" title=" " alt="" coords="775,129,956,129,956,135,775,135"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19" title="Return the number of bits needed to encode an ISE sequence." alt="" coords="645,267,825,293"/>
<area shape="poly" title=" " alt="" coords="556,192,583,204,598,217,607,230,616,242,631,254,644,260,642,265,628,258,612,246,603,233,594,221,580,209,553,197"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#ad8405c6d5685c364a91ff3ae3c5c4057" title="Create a 2D decimation entry for a block&#45;size and weight&#45;decimation pair." alt="" coords="656,218,813,243"/>
<area shape="poly" title=" " alt="" coords="562,191,661,212,660,218,561,197"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="949,251,1029,277"/>
<area shape="poly" title=" " alt="" coords="814,238,936,254,936,260,813,244"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="888,335,1091,361"/>
<area shape="poly" title=" " alt="" coords="805,241,841,254,866,269,890,287,955,326,952,331,886,292,863,274,839,258,803,246"/>
<area shape="poly" title=" " alt="" coords="562,241,661,262,660,267,561,246"/>
<area shape="rect" href="astcenc__percentile__tables_8cpp.html#ad46153321aa8b7efe0d78a7f6e8a88e9" title="Fetch the packed percentile table for the given 2D block size." alt="" coords="673,70,797,95"/>
<area shape="poly" title=" " alt="" coords="580,80,659,80,659,85,580,85"/>
<area shape="poly" title=" " alt="" coords="308,283,351,220,381,185,417,155,430,148,432,153,420,160,385,189,355,224,313,286"/>
<area shape="poly" title=" " alt="" coords="371,306,471,307,581,303,658,292,659,298,582,308,471,313,371,311"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a0eadba499223d475df0afa41228a7d30" title="Decode the properties of an encoded 3D block mode." alt="" coords="419,267,581,293"/>
<area shape="poly" title=" " alt="" coords="370,294,405,289,405,295,371,299"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a2baafb8e792da4735cef4849633739ac" title="Create a 3D decimation entry for a block&#45;size and weight&#45;decimation pair." alt="" coords="656,335,813,361"/>
<area shape="poly" title=" " alt="" coords="371,310,642,336,642,342,371,315"/>
<area shape="poly" title=" " alt="" coords="582,277,631,277,631,283,582,283"/>
<area shape="poly" title=" " alt="" coords="773,333,936,279,938,284,775,338"/>
<area shape="poly" title=" " alt="" coords="814,345,874,345,874,351,814,351"/>
<area shape="rect" href="astcenc__partition__tables_8cpp.html#a83b39a9f5b84470876611393553d38b5" title=" " alt="" coords="419,469,581,509"/>
<area shape="poly" title=" " alt="" coords="344,442,417,463,416,468,343,447"/>
<area shape="rect" href="astcenc__partition__tables_8cpp.html#a11a5380f66eb5461273c7d4f5c71e6d0" title="Generate a single partition info structure." alt="" coords="658,405,811,445"/>
<area shape="poly" title=" " alt="" coords="366,428,644,424,644,429,366,434"/>
<area shape="rect" href="astcenc__partition__tables_8cpp.html#adced470735eb4be99d56b03b57201e2a" title="Compare two canonical patterns to see if they are the same." alt="" coords="629,534,840,559"/>
<area shape="poly" title=" " alt="" coords="582,507,630,519,669,528,667,533,629,524,581,512"/>
<area shape="rect" href="astcenc__partition__tables_8cpp.html#a656f2dcd2ed9221814a6f1b38bff7cb6" title="Generate a canonical representation of a partition pattern." alt="" coords="667,469,802,509"/>
<area shape="poly" title=" " alt="" coords="582,487,654,487,654,492,582,492"/>
<area shape="poly" title=" " alt="" coords="573,467,647,446,649,451,575,472"/>
<area shape="poly" title=" " alt="" coords="801,403,933,362,934,367,802,408"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="951,398,1027,423"/>
<area shape="poly" title=" " alt="" coords="811,418,937,411,938,416,812,424"/>
<area shape="rect" href="astcenc__partition__tables_8cpp.html#a57b1b10c9fc1e915dcf985ea37a8cbf6" title="Select texel assignment for a single coordinate." alt="" coords="934,447,1045,473"/>
<area shape="poly" title=" " alt="" coords="812,433,921,448,920,453,811,438"/>
<area shape="rect" href="astcenc__partition__tables_8cpp.html#a28958825dfb33d5371f54dae6d247f8a" title="Hash function used for procedural partition assignment." alt="" coords="1139,447,1203,473"/>
<area shape="poly" title=" " alt="" coords="1045,457,1125,457,1125,463,1045,463"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a5c46863585cc583c3deb49323dfb73d8_icgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a5c46863585cc583c3deb49323dfb73d8_icgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a5c46863585cc583c3deb49323dfb73d8_icgraph" id="aastcenc__block__sizes_8cpp_a5c46863585cc583c3deb49323dfb73d8_icgraph">
<area shape="rect" title="Populate the block size descriptor for the target block size." alt="" coords="455,5,627,31"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a823234313a697f5b4cdbd2cd6caaef4a" title="Allocate a new codec context based on a config." alt="" coords="255,5,407,31"/>
<area shape="poly" title=" " alt="" coords="441,21,407,21,407,15,441,15"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,5,207,31"/>
<area shape="poly" title=" " alt="" coords="241,21,207,21,207,15,241,15"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,57,21,57,15,90,15"/>
</map>
</div>

</div>
</div>
<a id="ad8405c6d5685c364a91ff3ae3c5c4057" name="ad8405c6d5685c364a91ff3ae3c5c4057"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8405c6d5685c364a91ff3ae3c5c4057">&#9670;&#160;</a></span>init_decimation_info_2d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void init_decimation_info_2d </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>x_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>y_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>x_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>y_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdecimation__info.html">decimation_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>di</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdt__init__working__buffers.html">dt_init_working_buffers</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>wb</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a 2D decimation entry for a block-size and weight-decimation pair. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">x_texels</td><td>The number of texels in the X dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">y_texels</td><td>The number of texels in the Y dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">x_weights</td><td>The number of weights in the X dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">y_weights</td><td>The number of weights in the Y dimension. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">di</td><td>The decimation info structure to populate. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">wb</td><td>The decimation table init scratch working buffers. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__block__sizes_8cpp_source.html">astcenc_block_sizes.cpp</a> 파일의 <a class="el" href="astcenc__block__sizes_8cpp_source.html#l00252">252</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  259</span>  {</div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texels_per_block = x_texels * y_texels;</div>
<div class="line"><span class="lineno">  261</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weights_per_block = x_weights * y_weights;</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>    uint8_t max_texel_count_of_weight = 0;</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(weights_per_block &gt; 0);</div>
<div class="line"><span class="lineno">  266</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texels_per_block &gt; 0);</div>
<div class="line"><span class="lineno">  267</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(x_texels &gt; 0);</div>
<div class="line"><span class="lineno">  268</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(y_texels &gt; 0);</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; weights_per_block; i++)</div>
<div class="line"><span class="lineno">  271</span>    {</div>
<div class="line"><span class="lineno">  272</span>        wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[i] = 0;</div>
<div class="line"><span class="lineno">  273</span>    }</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texels_per_block; i++)</div>
<div class="line"><span class="lineno">  276</span>    {</div>
<div class="line"><span class="lineno">  277</span>        wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[i] = 0;</div>
<div class="line"><span class="lineno">  278</span>    }</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y = 0; y &lt; y_texels; y++)</div>
<div class="line"><span class="lineno">  281</span>    {</div>
<div class="line"><span class="lineno">  282</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = 0; x &lt; x_texels; x++)</div>
<div class="line"><span class="lineno">  283</span>        {</div>
<div class="line"><span class="lineno">  284</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel = y * x_texels + x;</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x_weight = (((1024 + x_texels / 2) / (x_texels - 1)) * x * (x_weights - 1) + 32) &gt;&gt; 6;</div>
<div class="line"><span class="lineno">  287</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y_weight = (((1024 + y_texels / 2) / (y_texels - 1)) * y * (y_weights - 1) + 32) &gt;&gt; 6;</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x_weight_frac = x_weight &amp; 0xF;</div>
<div class="line"><span class="lineno">  290</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y_weight_frac = y_weight &amp; 0xF;</div>
<div class="line"><span class="lineno">  291</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x_weight_int = x_weight &gt;&gt; 4;</div>
<div class="line"><span class="lineno">  292</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y_weight_int = y_weight &gt;&gt; 4;</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> qweight[4];</div>
<div class="line"><span class="lineno">  295</span>            qweight[0] = x_weight_int + y_weight_int * x_weights;</div>
<div class="line"><span class="lineno">  296</span>            qweight[1] = qweight[0] + 1;</div>
<div class="line"><span class="lineno">  297</span>            qweight[2] = qweight[0] + x_weights;</div>
<div class="line"><span class="lineno">  298</span>            qweight[3] = qweight[2] + 1;</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>            <span class="comment">// Truncated-precision bilinear interpolation</span></div>
<div class="line"><span class="lineno">  301</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> prod = x_weight_frac * y_weight_frac;</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weight[4];</div>
<div class="line"><span class="lineno">  304</span>            weight[3] = (prod + 8) &gt;&gt; 4;</div>
<div class="line"><span class="lineno">  305</span>            weight[1] = x_weight_frac - weight[3];</div>
<div class="line"><span class="lineno">  306</span>            weight[2] = y_weight_frac - weight[3];</div>
<div class="line"><span class="lineno">  307</span>            weight[0] = 16 - x_weight_frac - y_weight_frac + weight[3];</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 4; i++)</div>
<div class="line"><span class="lineno">  310</span>            {</div>
<div class="line"><span class="lineno">  311</span>                <span class="keywordflow">if</span> (weight[i] != 0)</div>
<div class="line"><span class="lineno">  312</span>                {</div>
<div class="line"><span class="lineno">  313</span>                    wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a94fb91fd46de96c40dcad16d62aec912">grid_weights_of_texel</a>[texel][wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[texel]] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(qweight[i]);</div>
<div class="line"><span class="lineno">  314</span>                    wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a17f0fb0ee306de22e1c4b1cf10516fc6">weights_of_texel</a>[texel][wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[texel]] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(weight[i]);</div>
<div class="line"><span class="lineno">  315</span>                    wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[texel]++;</div>
<div class="line"><span class="lineno">  316</span>                    wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aaabc2fdaf1a6f098a3f5e679893970e6">texels_of_weight</a>[qweight[i]][wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[qweight[i]]] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(texel);</div>
<div class="line"><span class="lineno">  317</span>                    wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a0bdf121b6efcf714af645bdb93abda3a">texel_weights_of_weight</a>[qweight[i]][wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[qweight[i]]] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(weight[i]);</div>
<div class="line"><span class="lineno">  318</span>                    wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[qweight[i]]++;</div>
<div class="line"><span class="lineno">  319</span>                    max_texel_count_of_weight = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(max_texel_count_of_weight, wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[qweight[i]]);</div>
<div class="line"><span class="lineno">  320</span>                }</div>
<div class="line"><span class="lineno">  321</span>            }</div>
<div class="line"><span class="lineno">  322</span>        }</div>
<div class="line"><span class="lineno">  323</span>    }</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>    uint8_t max_texel_weight_count = 0;</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texels_per_block; i++)</div>
<div class="line"><span class="lineno">  327</span>    {</div>
<div class="line"><span class="lineno">  328</span>        di.<a class="code hl_variable" href="structdecimation__info.html#a3bb3777eb8526788c915e582b10d6d27">texel_weight_count</a>[i] = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[i];</div>
<div class="line"><span class="lineno">  329</span>        max_texel_weight_count = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(max_texel_weight_count, di.<a class="code hl_variable" href="structdecimation__info.html#a3bb3777eb8526788c915e582b10d6d27">texel_weight_count</a>[i]);</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[i]; j++)</div>
<div class="line"><span class="lineno">  332</span>        {</div>
<div class="line"><span class="lineno">  333</span>            di.<a class="code hl_variable" href="structdecimation__info.html#ab27eb4b71fcc9d8b7827ce5abbf43d4a">texel_weight_contribs_int_tr</a>[j][i] = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a17f0fb0ee306de22e1c4b1cf10516fc6">weights_of_texel</a>[i][j];</div>
<div class="line"><span class="lineno">  334</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[j][i] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a17f0fb0ee306de22e1c4b1cf10516fc6">weights_of_texel</a>[i][j]) * (1.0f / <a class="code hl_variable" href="astcenc__internal_8h.html#a00c99c52668709ec2e60ec1eb401e55a">WEIGHTS_TEXEL_SUM</a>);</div>
<div class="line"><span class="lineno">  335</span>            di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[j][i] = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a94fb91fd46de96c40dcad16d62aec912">grid_weights_of_texel</a>[i][j];</div>
<div class="line"><span class="lineno">  336</span>        }</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>        <span class="comment">// Init all 4 entries so we can rely on zeros for vectorization</span></div>
<div class="line"><span class="lineno">  339</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[i]; j &lt; 4; j++)</div>
<div class="line"><span class="lineno">  340</span>        {</div>
<div class="line"><span class="lineno">  341</span>            di.<a class="code hl_variable" href="structdecimation__info.html#ab27eb4b71fcc9d8b7827ce5abbf43d4a">texel_weight_contribs_int_tr</a>[j][i] = 0;</div>
<div class="line"><span class="lineno">  342</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[j][i] = 0.0f;</div>
<div class="line"><span class="lineno">  343</span>            di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[j][i] = 0;</div>
<div class="line"><span class="lineno">  344</span>        }</div>
<div class="line"><span class="lineno">  345</span>    }</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>    di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> = max_texel_weight_count;</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; weights_per_block; i++)</div>
<div class="line"><span class="lineno">  350</span>    {</div>
<div class="line"><span class="lineno">  351</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count_wt = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[i];</div>
<div class="line"><span class="lineno">  352</span>        di.<a class="code hl_variable" href="structdecimation__info.html#af8cbdbb54638ad694f845fb0bd96d007">weight_texel_count</a>[i] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(texel_count_wt);</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; texel_count_wt; j++)</div>
<div class="line"><span class="lineno">  355</span>        {</div>
<div class="line"><span class="lineno">  356</span>            uint8_t texel = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aaabc2fdaf1a6f098a3f5e679893970e6">texels_of_weight</a>[i][j];</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>            <span class="comment">// Create transposed versions of these for better vectorization</span></div>
<div class="line"><span class="lineno">  359</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[j][i] = texel;</div>
<div class="line"><span class="lineno">  360</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a8938034ba8a3eeb122662bf5d90df522">weights_texel_contribs_tr</a>[j][i] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a0bdf121b6efcf714af645bdb93abda3a">texel_weights_of_weight</a>[i][j]);</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>            <span class="comment">// Store the per-texel contribution of this weight for each texel it contributes to</span></div>
<div class="line"><span class="lineno">  363</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a512f049d754ab5546758122dc0f5efcc">texel_contrib_for_weight</a>[j][i] = 0.0f;</div>
<div class="line"><span class="lineno">  364</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; 4; k++)</div>
<div class="line"><span class="lineno">  365</span>            {</div>
<div class="line"><span class="lineno">  366</span>                uint8_t dttw = di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[k][texel];</div>
<div class="line"><span class="lineno">  367</span>                <span class="keywordtype">float</span> dttwf = di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[k][texel];</div>
<div class="line"><span class="lineno">  368</span>                <span class="keywordflow">if</span> (dttw == i &amp;&amp; dttwf != 0.0f)</div>
<div class="line"><span class="lineno">  369</span>                {</div>
<div class="line"><span class="lineno">  370</span>                    di.<a class="code hl_variable" href="structdecimation__info.html#a512f049d754ab5546758122dc0f5efcc">texel_contrib_for_weight</a>[j][i] = di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[k][texel];</div>
<div class="line"><span class="lineno">  371</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  372</span>                }</div>
<div class="line"><span class="lineno">  373</span>            }</div>
<div class="line"><span class="lineno">  374</span>        }</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>        <span class="comment">// Initialize array tail so we can over-fetch with SIMD later to avoid loop tails</span></div>
<div class="line"><span class="lineno">  377</span>        <span class="comment">// Match last texel in active lane in SIMD group, for better gathers</span></div>
<div class="line"><span class="lineno">  378</span>        uint8_t last_texel = di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[texel_count_wt - 1][i];</div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = texel_count_wt; j &lt; max_texel_count_of_weight; j++)</div>
<div class="line"><span class="lineno">  380</span>        {</div>
<div class="line"><span class="lineno">  381</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[j][i] = last_texel;</div>
<div class="line"><span class="lineno">  382</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a8938034ba8a3eeb122662bf5d90df522">weights_texel_contribs_tr</a>[j][i] = 0.0f;</div>
<div class="line"><span class="lineno">  383</span>        }</div>
<div class="line"><span class="lineno">  384</span>    }</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>    <span class="comment">// Initialize array tail so we can over-fetch with SIMD later to avoid loop tails</span></div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texels_per_block_simd = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37">round_up_to_simd_multiple_vla</a>(texels_per_block);</div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = texels_per_block; i &lt; texels_per_block_simd; i++)</div>
<div class="line"><span class="lineno">  389</span>    {</div>
<div class="line"><span class="lineno">  390</span>        di.<a class="code hl_variable" href="structdecimation__info.html#a3bb3777eb8526788c915e582b10d6d27">texel_weight_count</a>[i] = 0;</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; 4; j++)</div>
<div class="line"><span class="lineno">  393</span>        {</div>
<div class="line"><span class="lineno">  394</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[j][i] = 0;</div>
<div class="line"><span class="lineno">  395</span>            di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[j][i] = 0;</div>
<div class="line"><span class="lineno">  396</span>            di.<a class="code hl_variable" href="structdecimation__info.html#ab27eb4b71fcc9d8b7827ce5abbf43d4a">texel_weight_contribs_int_tr</a>[j][i] = 0;</div>
<div class="line"><span class="lineno">  397</span>        }</div>
<div class="line"><span class="lineno">  398</span>    }</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>    <span class="comment">// Initialize array tail so we can over-fetch with SIMD later to avoid loop tails</span></div>
<div class="line"><span class="lineno">  401</span>    <span class="comment">// Match last texel in active lane in SIMD group, for better gathers</span></div>
<div class="line"><span class="lineno">  402</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> last_texel_count_wt = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[weights_per_block - 1];</div>
<div class="line"><span class="lineno">  403</span>    uint8_t last_texel = di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[last_texel_count_wt - 1][weights_per_block - 1];</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weights_per_block_simd = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37">round_up_to_simd_multiple_vla</a>(weights_per_block);</div>
<div class="line"><span class="lineno">  406</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = weights_per_block; i &lt; weights_per_block_simd; i++)</div>
<div class="line"><span class="lineno">  407</span>    {</div>
<div class="line"><span class="lineno">  408</span>        di.<a class="code hl_variable" href="structdecimation__info.html#af8cbdbb54638ad694f845fb0bd96d007">weight_texel_count</a>[i] = 0;</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; max_texel_count_of_weight; j++)</div>
<div class="line"><span class="lineno">  411</span>        {</div>
<div class="line"><span class="lineno">  412</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[j][i] = last_texel;</div>
<div class="line"><span class="lineno">  413</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a8938034ba8a3eeb122662bf5d90df522">weights_texel_contribs_tr</a>[j][i] = 0.0f;</div>
<div class="line"><span class="lineno">  414</span>        }</div>
<div class="line"><span class="lineno">  415</span>    }</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>    di.<a class="code hl_variable" href="structdecimation__info.html#a2f6c6f84342c82092324c05035b3c9c1">texel_count</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(texels_per_block);</div>
<div class="line"><span class="lineno">  418</span>    di.<a class="code hl_variable" href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">weight_count</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(weights_per_block);</div>
<div class="line"><span class="lineno">  419</span>    di.<a class="code hl_variable" href="structdecimation__info.html#a0b51669603759128ab6ab40458601461">weight_x</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(x_weights);</div>
<div class="line"><span class="lineno">  420</span>    di.<a class="code hl_variable" href="structdecimation__info.html#a1b0d75c94edac7ae7e5a53fea1757a2c">weight_y</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(y_weights);</div>
<div class="line"><span class="lineno">  421</span>    di.<a class="code hl_variable" href="structdecimation__info.html#afc8c1ca38b0a7d5014343ca9028a0186">weight_z</a> = 1;</div>
<div class="line"><span class="lineno">  422</span>}</div>
<div class="ttc" id="aastcenc__internal_8h_html_a00c99c52668709ec2e60ec1eb401e55a"><div class="ttname"><a href="astcenc__internal_8h.html#a00c99c52668709ec2e60ec1eb401e55a">WEIGHTS_TEXEL_SUM</a></div><div class="ttdeci">static constexpr float WEIGHTS_TEXEL_SUM</div><div class="ttdoc">The sum of quantized weights for one texel.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00111">astcenc_internal.h:111</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a2cce51c3362aa0b5040437ac0e7f8969"><div class="ttname"><a href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a></div><div class="ttdeci">#define promise(cond)</div><div class="ttdoc">Functions and data declarations.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00061">astcenc_internal.h:61</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_ae36622d837079b4899b971731c2dda37"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37">round_up_to_simd_multiple_vla</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE unsigned int round_up_to_simd_multiple_vla(unsigned int count)</div><div class="ttdoc">Round a count up to the largest multiple of the SIMD width.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00204">astcenc_vecmathlib.h:204</a></div></div>
<div class="ttc" id="anamespaceastc_html_a83a55552d03399cdff6cf2fed8312c9f"><div class="ttname"><a href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a></div><div class="ttdeci">static T max(T p, T q)</div><div class="ttdoc">Return the maximum of two values.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00210">astcenc_mathlib.h:210</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a0b51669603759128ab6ab40458601461"><div class="ttname"><a href="structdecimation__info.html#a0b51669603759128ab6ab40458601461">decimation_info::weight_x</a></div><div class="ttdeci">uint8_t weight_x</div><div class="ttdoc">The number of stored weights in the X dimension.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00358">astcenc_internal.h:358</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a1419dcd0f618164042315f80527d3f4f"><div class="ttname"><a href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">decimation_info::max_texel_weight_count</a></div><div class="ttdeci">uint8_t max_texel_weight_count</div><div class="ttdoc">The maximum number of stored weights that contribute to each texel, between 1 and 4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00352">astcenc_internal.h:352</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a1b0d75c94edac7ae7e5a53fea1757a2c"><div class="ttname"><a href="structdecimation__info.html#a1b0d75c94edac7ae7e5a53fea1757a2c">decimation_info::weight_y</a></div><div class="ttdeci">uint8_t weight_y</div><div class="ttdoc">The number of stored weights in the Y dimension.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00361">astcenc_internal.h:361</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a2f6c6f84342c82092324c05035b3c9c1"><div class="ttname"><a href="structdecimation__info.html#a2f6c6f84342c82092324c05035b3c9c1">decimation_info::texel_count</a></div><div class="ttdeci">uint8_t texel_count</div><div class="ttdoc">The total number of texels in the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00349">astcenc_internal.h:349</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a312c1244893e84561d7d01bb43493d2e"><div class="ttname"><a href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">decimation_info::weight_texels_tr</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t weight_texels_tr[BLOCK_MAX_TEXELS][BLOCK_MAX_WEIGHTS]</div><div class="ttdoc">The list of texels that use a specific weight index. Stored transposed to improve vectorization.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00397">astcenc_internal.h:397</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a3bb3777eb8526788c915e582b10d6d27"><div class="ttname"><a href="structdecimation__info.html#a3bb3777eb8526788c915e582b10d6d27">decimation_info::texel_weight_count</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t texel_weight_count[BLOCK_MAX_TEXELS]</div><div class="ttdoc">The number of weights that contribute to each texel. Value is between 1 and 4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00370">astcenc_internal.h:370</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a4d05a42b1764a046f86d4a5220cb5365"><div class="ttname"><a href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">decimation_info::texel_weight_contribs_float_tr</a></div><div class="ttdeci">ASTCENC_ALIGNAS float texel_weight_contribs_float_tr[4][BLOCK_MAX_TEXELS]</div><div class="ttdoc">The bilinear contribution of the N weights that are interpolated for each texel. Value is between 0 a...</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00388">astcenc_internal.h:388</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a512f049d754ab5546758122dc0f5efcc"><div class="ttname"><a href="structdecimation__info.html#a512f049d754ab5546758122dc0f5efcc">decimation_info::texel_contrib_for_weight</a></div><div class="ttdeci">float texel_contrib_for_weight[BLOCK_MAX_TEXELS][BLOCK_MAX_WEIGHTS]</div><div class="ttdoc">The bilinear contribution to the Nth texel that uses each weight. Value is between 0 and 1,...</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00409">astcenc_internal.h:409</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a8938034ba8a3eeb122662bf5d90df522"><div class="ttname"><a href="structdecimation__info.html#a8938034ba8a3eeb122662bf5d90df522">decimation_info::weights_texel_contribs_tr</a></div><div class="ttdeci">ASTCENC_ALIGNAS float weights_texel_contribs_tr[BLOCK_MAX_TEXELS][BLOCK_MAX_WEIGHTS]</div><div class="ttdoc">The bilinear contribution to the N texels that use each weight. Value is between 0 and 1,...</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00403">astcenc_internal.h:403</a></div></div>
<div class="ttc" id="astructdecimation__info_html_ab27eb4b71fcc9d8b7827ce5abbf43d4a"><div class="ttname"><a href="structdecimation__info.html#ab27eb4b71fcc9d8b7827ce5abbf43d4a">decimation_info::texel_weight_contribs_int_tr</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t texel_weight_contribs_int_tr[4][BLOCK_MAX_TEXELS]</div><div class="ttdoc">The bilinear contribution of the N weights that are interpolated for each texel. Value is between 0 a...</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00382">astcenc_internal.h:382</a></div></div>
<div class="ttc" id="astructdecimation__info_html_adcee6ed79e4c94e1bcb305d429e3cff5"><div class="ttname"><a href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">decimation_info::texel_weights_tr</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t texel_weights_tr[4][BLOCK_MAX_TEXELS]</div><div class="ttdoc">The weight index of the N weights that are interpolated for each texel. Stored transposed to improve ...</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00376">astcenc_internal.h:376</a></div></div>
<div class="ttc" id="astructdecimation__info_html_af7d0c86be805995a20a6c09f6c3ab8ca"><div class="ttname"><a href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">decimation_info::weight_count</a></div><div class="ttdeci">uint8_t weight_count</div><div class="ttdoc">The total number of weights stored.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00355">astcenc_internal.h:355</a></div></div>
<div class="ttc" id="astructdecimation__info_html_af8cbdbb54638ad694f845fb0bd96d007"><div class="ttname"><a href="structdecimation__info.html#af8cbdbb54638ad694f845fb0bd96d007">decimation_info::weight_texel_count</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t weight_texel_count[BLOCK_MAX_WEIGHTS]</div><div class="ttdoc">The number of texels that each stored weight contributes to.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00391">astcenc_internal.h:391</a></div></div>
<div class="ttc" id="astructdecimation__info_html_afc8c1ca38b0a7d5014343ca9028a0186"><div class="ttname"><a href="structdecimation__info.html#afc8c1ca38b0a7d5014343ca9028a0186">decimation_info::weight_z</a></div><div class="ttdeci">uint8_t weight_z</div><div class="ttdoc">The number of stored weights in the Z dimension.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00364">astcenc_internal.h:364</a></div></div>
<div class="ttc" id="astructdt__init__working__buffers_html_a0bdf121b6efcf714af645bdb93abda3a"><div class="ttname"><a href="structdt__init__working__buffers.html#a0bdf121b6efcf714af645bdb93abda3a">dt_init_working_buffers::texel_weights_of_weight</a></div><div class="ttdeci">uint8_t texel_weights_of_weight[BLOCK_MAX_WEIGHTS][BLOCK_MAX_TEXELS]</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01017">astcenc_internal.h:1017</a></div></div>
<div class="ttc" id="astructdt__init__working__buffers_html_a17f0fb0ee306de22e1c4b1cf10516fc6"><div class="ttname"><a href="structdt__init__working__buffers.html#a17f0fb0ee306de22e1c4b1cf10516fc6">dt_init_working_buffers::weights_of_texel</a></div><div class="ttdeci">uint8_t weights_of_texel[BLOCK_MAX_TEXELS][4]</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01013">astcenc_internal.h:1013</a></div></div>
<div class="ttc" id="astructdt__init__working__buffers_html_a94fb91fd46de96c40dcad16d62aec912"><div class="ttname"><a href="structdt__init__working__buffers.html#a94fb91fd46de96c40dcad16d62aec912">dt_init_working_buffers::grid_weights_of_texel</a></div><div class="ttdeci">uint8_t grid_weights_of_texel[BLOCK_MAX_TEXELS][4]</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01012">astcenc_internal.h:1012</a></div></div>
<div class="ttc" id="astructdt__init__working__buffers_html_aaabc2fdaf1a6f098a3f5e679893970e6"><div class="ttname"><a href="structdt__init__working__buffers.html#aaabc2fdaf1a6f098a3f5e679893970e6">dt_init_working_buffers::texels_of_weight</a></div><div class="ttdeci">uint8_t texels_of_weight[BLOCK_MAX_WEIGHTS][BLOCK_MAX_TEXELS]</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01016">astcenc_internal.h:1016</a></div></div>
<div class="ttc" id="astructdt__init__working__buffers_html_ad9eee6cd691ff7368eaeb7dcec226ee7"><div class="ttname"><a href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">dt_init_working_buffers::weight_count_of_texel</a></div><div class="ttdeci">uint8_t weight_count_of_texel[BLOCK_MAX_TEXELS]</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01011">astcenc_internal.h:1011</a></div></div>
<div class="ttc" id="astructdt__init__working__buffers_html_aff356b5d5b167b90ea08479ce3e96f4c"><div class="ttname"><a href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">dt_init_working_buffers::texel_count_of_weight</a></div><div class="ttdeci">uint8_t texel_count_of_weight[BLOCK_MAX_WEIGHTS]</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01015">astcenc_internal.h:1015</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_ad8405c6d5685c364a91ff3ae3c5c4057_cgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_ad8405c6d5685c364a91ff3ae3c5c4057_cgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_ad8405c6d5685c364a91ff3ae3c5c4057_cgraph" id="aastcenc__block__sizes_8cpp_ad8405c6d5685c364a91ff3ae3c5c4057_cgraph">
<area shape="rect" title="Create a 2D decimation entry for a block&#45;size and weight&#45;decimation pair." alt="" coords="5,31,163,56"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="272,5,352,31"/>
<area shape="poly" title=" " alt="" coords="163,32,258,21,259,27,163,37"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="211,55,413,80"/>
<area shape="poly" title=" " alt="" coords="163,49,197,53,197,58,163,54"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_ad8405c6d5685c364a91ff3ae3c5c4057_icgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_ad8405c6d5685c364a91ff3ae3c5c4057_icgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_ad8405c6d5685c364a91ff3ae3c5c4057_icgraph" id="aastcenc__block__sizes_8cpp_ad8405c6d5685c364a91ff3ae3c5c4057_icgraph">
<area shape="rect" title="Create a 2D decimation entry for a block&#45;size and weight&#45;decimation pair." alt="" coords="1067,13,1224,38"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#aa894007bf90b5ec41a26d1c391ace949" title="Allocate a single 2D decimation table entry." alt="" coords="868,13,1019,38"/>
<area shape="poly" title=" " alt="" coords="1053,28,1019,28,1019,23,1053,23"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#ae2e6657689fff66c3d8729b63d6ae7c5" title="Allocate block modes and decimation tables for a single 2D block size." alt="" coords="675,5,820,45"/>
<area shape="poly" title=" " alt="" coords="854,28,820,28,820,23,854,23"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a5c46863585cc583c3deb49323dfb73d8" title="Populate the block size descriptor for the target block size." alt="" coords="455,13,627,38"/>
<area shape="poly" title=" " alt="" coords="661,28,627,28,627,23,661,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a823234313a697f5b4cdbd2cd6caaef4a" title="Allocate a new codec context based on a config." alt="" coords="255,13,407,38"/>
<area shape="poly" title=" " alt="" coords="441,28,407,28,407,23,441,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="241,28,207,28,207,23,241,23"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
</map>
</div>

</div>
</div>
<a id="a2baafb8e792da4735cef4849633739ac" name="a2baafb8e792da4735cef4849633739ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2baafb8e792da4735cef4849633739ac">&#9670;&#160;</a></span>init_decimation_info_3d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void init_decimation_info_3d </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>x_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>y_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>z_texels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>x_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>y_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>z_weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdecimation__info.html">decimation_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>di</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdt__init__working__buffers.html">dt_init_working_buffers</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>wb</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a 3D decimation entry for a block-size and weight-decimation pair. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">x_texels</td><td>The number of texels in the X dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">y_texels</td><td>The number of texels in the Y dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">z_texels</td><td>The number of texels in the Z dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">x_weights</td><td>The number of weights in the X dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">y_weights</td><td>The number of weights in the Y dimension. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">z_weights</td><td>The number of weights in the Z dimension. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">di</td><td>The decimation info structure to populate. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">wb</td><td>The decimation table init scratch working buffers. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__block__sizes_8cpp_source.html">astcenc_block_sizes.cpp</a> 파일의 <a class="el" href="astcenc__block__sizes_8cpp_source.html#l00436">436</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  445</span>  {</div>
<div class="line"><span class="lineno">  446</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texels_per_block = x_texels * y_texels * z_texels;</div>
<div class="line"><span class="lineno">  447</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weights_per_block = x_weights * y_weights * z_weights;</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>    uint8_t max_texel_count_of_weight = 0;</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(weights_per_block &gt; 0);</div>
<div class="line"><span class="lineno">  452</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texels_per_block &gt; 0);</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; weights_per_block; i++)</div>
<div class="line"><span class="lineno">  455</span>    {</div>
<div class="line"><span class="lineno">  456</span>        wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[i] = 0;</div>
<div class="line"><span class="lineno">  457</span>    }</div>
<div class="line"><span class="lineno">  458</span> </div>
<div class="line"><span class="lineno">  459</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texels_per_block; i++)</div>
<div class="line"><span class="lineno">  460</span>    {</div>
<div class="line"><span class="lineno">  461</span>        wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[i] = 0;</div>
<div class="line"><span class="lineno">  462</span>    }</div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> z = 0; z &lt; z_texels; z++)</div>
<div class="line"><span class="lineno">  465</span>    {</div>
<div class="line"><span class="lineno">  466</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y = 0; y &lt; y_texels; y++)</div>
<div class="line"><span class="lineno">  467</span>        {</div>
<div class="line"><span class="lineno">  468</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = 0; x &lt; x_texels; x++)</div>
<div class="line"><span class="lineno">  469</span>            {</div>
<div class="line"><span class="lineno">  470</span>                <span class="keywordtype">int</span> texel = (z * y_texels + y) * x_texels + x;</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>                <span class="keywordtype">int</span> x_weight = (((1024 + x_texels / 2) / (x_texels - 1)) * x * (x_weights - 1) + 32) &gt;&gt; 6;</div>
<div class="line"><span class="lineno">  473</span>                <span class="keywordtype">int</span> y_weight = (((1024 + y_texels / 2) / (y_texels - 1)) * y * (y_weights - 1) + 32) &gt;&gt; 6;</div>
<div class="line"><span class="lineno">  474</span>                <span class="keywordtype">int</span> z_weight = (((1024 + z_texels / 2) / (z_texels - 1)) * z * (z_weights - 1) + 32) &gt;&gt; 6;</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>                <span class="keywordtype">int</span> x_weight_frac = x_weight &amp; 0xF;</div>
<div class="line"><span class="lineno">  477</span>                <span class="keywordtype">int</span> y_weight_frac = y_weight &amp; 0xF;</div>
<div class="line"><span class="lineno">  478</span>                <span class="keywordtype">int</span> z_weight_frac = z_weight &amp; 0xF;</div>
<div class="line"><span class="lineno">  479</span>                <span class="keywordtype">int</span> x_weight_int = x_weight &gt;&gt; 4;</div>
<div class="line"><span class="lineno">  480</span>                <span class="keywordtype">int</span> y_weight_int = y_weight &gt;&gt; 4;</div>
<div class="line"><span class="lineno">  481</span>                <span class="keywordtype">int</span> z_weight_int = z_weight &gt;&gt; 4;</div>
<div class="line"><span class="lineno">  482</span>                <span class="keywordtype">int</span> qweight[4];</div>
<div class="line"><span class="lineno">  483</span>                <span class="keywordtype">int</span> weight[4];</div>
<div class="line"><span class="lineno">  484</span>                qweight[0] = (z_weight_int * y_weights + y_weight_int) * x_weights + x_weight_int;</div>
<div class="line"><span class="lineno">  485</span>                qweight[3] = ((z_weight_int + 1) * y_weights + (y_weight_int + 1)) * x_weights + (x_weight_int + 1);</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>                <span class="comment">// simplex interpolation</span></div>
<div class="line"><span class="lineno">  488</span>                <span class="keywordtype">int</span> fs = x_weight_frac;</div>
<div class="line"><span class="lineno">  489</span>                <span class="keywordtype">int</span> ft = y_weight_frac;</div>
<div class="line"><span class="lineno">  490</span>                <span class="keywordtype">int</span> fp = z_weight_frac;</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>                <span class="keywordtype">int</span> cas = ((fs &gt; ft) &lt;&lt; 2) + ((ft &gt; fp) &lt;&lt; 1) + ((fs &gt; fp));</div>
<div class="line"><span class="lineno">  493</span>                <span class="keywordtype">int</span> N = x_weights;</div>
<div class="line"><span class="lineno">  494</span>                <span class="keywordtype">int</span> NM = x_weights * y_weights;</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>                <span class="keywordtype">int</span> s1, s2, w0, w1, w2, w3;</div>
<div class="line"><span class="lineno">  497</span>                <span class="keywordflow">switch</span> (cas)</div>
<div class="line"><span class="lineno">  498</span>                {</div>
<div class="line"><span class="lineno">  499</span>                <span class="keywordflow">case</span> 7:</div>
<div class="line"><span class="lineno">  500</span>                    s1 = 1;</div>
<div class="line"><span class="lineno">  501</span>                    s2 = N;</div>
<div class="line"><span class="lineno">  502</span>                    w0 = 16 - fs;</div>
<div class="line"><span class="lineno">  503</span>                    w1 = fs - ft;</div>
<div class="line"><span class="lineno">  504</span>                    w2 = ft - fp;</div>
<div class="line"><span class="lineno">  505</span>                    w3 = fp;</div>
<div class="line"><span class="lineno">  506</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  507</span>                <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno">  508</span>                    s1 = N;</div>
<div class="line"><span class="lineno">  509</span>                    s2 = 1;</div>
<div class="line"><span class="lineno">  510</span>                    w0 = 16 - ft;</div>
<div class="line"><span class="lineno">  511</span>                    w1 = ft - fs;</div>
<div class="line"><span class="lineno">  512</span>                    w2 = fs - fp;</div>
<div class="line"><span class="lineno">  513</span>                    w3 = fp;</div>
<div class="line"><span class="lineno">  514</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  515</span>                <span class="keywordflow">case</span> 5:</div>
<div class="line"><span class="lineno">  516</span>                    s1 = 1;</div>
<div class="line"><span class="lineno">  517</span>                    s2 = NM;</div>
<div class="line"><span class="lineno">  518</span>                    w0 = 16 - fs;</div>
<div class="line"><span class="lineno">  519</span>                    w1 = fs - fp;</div>
<div class="line"><span class="lineno">  520</span>                    w2 = fp - ft;</div>
<div class="line"><span class="lineno">  521</span>                    w3 = ft;</div>
<div class="line"><span class="lineno">  522</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  523</span>                <span class="keywordflow">case</span> 4:</div>
<div class="line"><span class="lineno">  524</span>                    s1 = NM;</div>
<div class="line"><span class="lineno">  525</span>                    s2 = 1;</div>
<div class="line"><span class="lineno">  526</span>                    w0 = 16 - fp;</div>
<div class="line"><span class="lineno">  527</span>                    w1 = fp - fs;</div>
<div class="line"><span class="lineno">  528</span>                    w2 = fs - ft;</div>
<div class="line"><span class="lineno">  529</span>                    w3 = ft;</div>
<div class="line"><span class="lineno">  530</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  531</span>                <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  532</span>                    s1 = N;</div>
<div class="line"><span class="lineno">  533</span>                    s2 = NM;</div>
<div class="line"><span class="lineno">  534</span>                    w0 = 16 - ft;</div>
<div class="line"><span class="lineno">  535</span>                    w1 = ft - fp;</div>
<div class="line"><span class="lineno">  536</span>                    w2 = fp - fs;</div>
<div class="line"><span class="lineno">  537</span>                    w3 = fs;</div>
<div class="line"><span class="lineno">  538</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  539</span>                <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">  540</span>                    s1 = NM;</div>
<div class="line"><span class="lineno">  541</span>                    s2 = N;</div>
<div class="line"><span class="lineno">  542</span>                    w0 = 16 - fp;</div>
<div class="line"><span class="lineno">  543</span>                    w1 = fp - ft;</div>
<div class="line"><span class="lineno">  544</span>                    w2 = ft - fs;</div>
<div class="line"><span class="lineno">  545</span>                    w3 = fs;</div>
<div class="line"><span class="lineno">  546</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  547</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  548</span>                    s1 = NM;</div>
<div class="line"><span class="lineno">  549</span>                    s2 = N;</div>
<div class="line"><span class="lineno">  550</span>                    w0 = 16 - fp;</div>
<div class="line"><span class="lineno">  551</span>                    w1 = fp - ft;</div>
<div class="line"><span class="lineno">  552</span>                    w2 = ft - fs;</div>
<div class="line"><span class="lineno">  553</span>                    w3 = fs;</div>
<div class="line"><span class="lineno">  554</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  555</span>                }</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>                qweight[1] = qweight[0] + s1;</div>
<div class="line"><span class="lineno">  558</span>                qweight[2] = qweight[1] + s2;</div>
<div class="line"><span class="lineno">  559</span>                weight[0] = w0;</div>
<div class="line"><span class="lineno">  560</span>                weight[1] = w1;</div>
<div class="line"><span class="lineno">  561</span>                weight[2] = w2;</div>
<div class="line"><span class="lineno">  562</span>                weight[3] = w3;</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 4; i++)</div>
<div class="line"><span class="lineno">  565</span>                {</div>
<div class="line"><span class="lineno">  566</span>                    <span class="keywordflow">if</span> (weight[i] != 0)</div>
<div class="line"><span class="lineno">  567</span>                    {</div>
<div class="line"><span class="lineno">  568</span>                        wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a94fb91fd46de96c40dcad16d62aec912">grid_weights_of_texel</a>[texel][wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[texel]] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(qweight[i]);</div>
<div class="line"><span class="lineno">  569</span>                        wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a17f0fb0ee306de22e1c4b1cf10516fc6">weights_of_texel</a>[texel][wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[texel]] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(weight[i]);</div>
<div class="line"><span class="lineno">  570</span>                        wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[texel]++;</div>
<div class="line"><span class="lineno">  571</span>                        wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aaabc2fdaf1a6f098a3f5e679893970e6">texels_of_weight</a>[qweight[i]][wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[qweight[i]]] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(texel);</div>
<div class="line"><span class="lineno">  572</span>                        wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a0bdf121b6efcf714af645bdb93abda3a">texel_weights_of_weight</a>[qweight[i]][wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[qweight[i]]] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(weight[i]);</div>
<div class="line"><span class="lineno">  573</span>                        wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[qweight[i]]++;</div>
<div class="line"><span class="lineno">  574</span>                        max_texel_count_of_weight = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(max_texel_count_of_weight, wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[qweight[i]]);</div>
<div class="line"><span class="lineno">  575</span>                    }</div>
<div class="line"><span class="lineno">  576</span>                }</div>
<div class="line"><span class="lineno">  577</span>            }</div>
<div class="line"><span class="lineno">  578</span>        }</div>
<div class="line"><span class="lineno">  579</span>    }</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>    uint8_t max_texel_weight_count = 0;</div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texels_per_block; i++)</div>
<div class="line"><span class="lineno">  583</span>    {</div>
<div class="line"><span class="lineno">  584</span>        di.<a class="code hl_variable" href="structdecimation__info.html#a3bb3777eb8526788c915e582b10d6d27">texel_weight_count</a>[i] = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[i];</div>
<div class="line"><span class="lineno">  585</span>        max_texel_weight_count = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(max_texel_weight_count, di.<a class="code hl_variable" href="structdecimation__info.html#a3bb3777eb8526788c915e582b10d6d27">texel_weight_count</a>[i]);</div>
<div class="line"><span class="lineno">  586</span> </div>
<div class="line"><span class="lineno">  587</span>        <span class="comment">// Init all 4 entries so we can rely on zeros for vectorization</span></div>
<div class="line"><span class="lineno">  588</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; 4; j++)</div>
<div class="line"><span class="lineno">  589</span>        {</div>
<div class="line"><span class="lineno">  590</span>            di.<a class="code hl_variable" href="structdecimation__info.html#ab27eb4b71fcc9d8b7827ce5abbf43d4a">texel_weight_contribs_int_tr</a>[j][i] = 0;</div>
<div class="line"><span class="lineno">  591</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[j][i] = 0.0f;</div>
<div class="line"><span class="lineno">  592</span>            di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[j][i] = 0;</div>
<div class="line"><span class="lineno">  593</span>        }</div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#ad9eee6cd691ff7368eaeb7dcec226ee7">weight_count_of_texel</a>[i]; j++)</div>
<div class="line"><span class="lineno">  596</span>        {</div>
<div class="line"><span class="lineno">  597</span>            di.<a class="code hl_variable" href="structdecimation__info.html#ab27eb4b71fcc9d8b7827ce5abbf43d4a">texel_weight_contribs_int_tr</a>[j][i] = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a17f0fb0ee306de22e1c4b1cf10516fc6">weights_of_texel</a>[i][j];</div>
<div class="line"><span class="lineno">  598</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[j][i] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a17f0fb0ee306de22e1c4b1cf10516fc6">weights_of_texel</a>[i][j]) * (1.0f / <a class="code hl_variable" href="astcenc__internal_8h.html#a00c99c52668709ec2e60ec1eb401e55a">WEIGHTS_TEXEL_SUM</a>);</div>
<div class="line"><span class="lineno">  599</span>            di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[j][i] = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a94fb91fd46de96c40dcad16d62aec912">grid_weights_of_texel</a>[i][j];</div>
<div class="line"><span class="lineno">  600</span>        }</div>
<div class="line"><span class="lineno">  601</span>    }</div>
<div class="line"><span class="lineno">  602</span> </div>
<div class="line"><span class="lineno">  603</span>    di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> = max_texel_weight_count;</div>
<div class="line"><span class="lineno">  604</span> </div>
<div class="line"><span class="lineno">  605</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; weights_per_block; i++)</div>
<div class="line"><span class="lineno">  606</span>    {</div>
<div class="line"><span class="lineno">  607</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count_wt = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[i];</div>
<div class="line"><span class="lineno">  608</span>        di.<a class="code hl_variable" href="structdecimation__info.html#af8cbdbb54638ad694f845fb0bd96d007">weight_texel_count</a>[i] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(texel_count_wt);</div>
<div class="line"><span class="lineno">  609</span> </div>
<div class="line"><span class="lineno">  610</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; texel_count_wt; j++)</div>
<div class="line"><span class="lineno">  611</span>        {</div>
<div class="line"><span class="lineno">  612</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aaabc2fdaf1a6f098a3f5e679893970e6">texels_of_weight</a>[i][j];</div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>            <span class="comment">// Create transposed versions of these for better vectorization</span></div>
<div class="line"><span class="lineno">  615</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[j][i] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(texel);</div>
<div class="line"><span class="lineno">  616</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a8938034ba8a3eeb122662bf5d90df522">weights_texel_contribs_tr</a>[j][i] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#a0bdf121b6efcf714af645bdb93abda3a">texel_weights_of_weight</a>[i][j]);</div>
<div class="line"><span class="lineno">  617</span> </div>
<div class="line"><span class="lineno">  618</span>            <span class="comment">// Store the per-texel contribution of this weight for each texel it contributes to</span></div>
<div class="line"><span class="lineno">  619</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a512f049d754ab5546758122dc0f5efcc">texel_contrib_for_weight</a>[j][i] = 0.0f;</div>
<div class="line"><span class="lineno">  620</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; 4; k++)</div>
<div class="line"><span class="lineno">  621</span>            {</div>
<div class="line"><span class="lineno">  622</span>                uint8_t dttw = di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[k][texel];</div>
<div class="line"><span class="lineno">  623</span>                <span class="keywordtype">float</span> dttwf = di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[k][texel];</div>
<div class="line"><span class="lineno">  624</span>                <span class="keywordflow">if</span> (dttw == i &amp;&amp; dttwf != 0.0f)</div>
<div class="line"><span class="lineno">  625</span>                {</div>
<div class="line"><span class="lineno">  626</span>                    di.<a class="code hl_variable" href="structdecimation__info.html#a512f049d754ab5546758122dc0f5efcc">texel_contrib_for_weight</a>[j][i] = di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[k][texel];</div>
<div class="line"><span class="lineno">  627</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  628</span>                }</div>
<div class="line"><span class="lineno">  629</span>            }</div>
<div class="line"><span class="lineno">  630</span>        }</div>
<div class="line"><span class="lineno">  631</span> </div>
<div class="line"><span class="lineno">  632</span>        <span class="comment">// Initialize array tail so we can over-fetch with SIMD later to avoid loop tails</span></div>
<div class="line"><span class="lineno">  633</span>        <span class="comment">// Match last texel in active lane in SIMD group, for better gathers</span></div>
<div class="line"><span class="lineno">  634</span>        uint8_t last_texel = di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[texel_count_wt - 1][i];</div>
<div class="line"><span class="lineno">  635</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = texel_count_wt; j &lt; max_texel_count_of_weight; j++)</div>
<div class="line"><span class="lineno">  636</span>        {</div>
<div class="line"><span class="lineno">  637</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[j][i] = last_texel;</div>
<div class="line"><span class="lineno">  638</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a8938034ba8a3eeb122662bf5d90df522">weights_texel_contribs_tr</a>[j][i] = 0.0f;</div>
<div class="line"><span class="lineno">  639</span>        }</div>
<div class="line"><span class="lineno">  640</span>    }</div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span>    <span class="comment">// Initialize array tail so we can over-fetch with SIMD later to avoid loop tails</span></div>
<div class="line"><span class="lineno">  643</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texels_per_block_simd = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37">round_up_to_simd_multiple_vla</a>(texels_per_block);</div>
<div class="line"><span class="lineno">  644</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = texels_per_block; i &lt; texels_per_block_simd; i++)</div>
<div class="line"><span class="lineno">  645</span>    {</div>
<div class="line"><span class="lineno">  646</span>        di.<a class="code hl_variable" href="structdecimation__info.html#a3bb3777eb8526788c915e582b10d6d27">texel_weight_count</a>[i] = 0;</div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; 4; j++)</div>
<div class="line"><span class="lineno">  649</span>        {</div>
<div class="line"><span class="lineno">  650</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[j][i] = 0;</div>
<div class="line"><span class="lineno">  651</span>            di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[j][i] = 0;</div>
<div class="line"><span class="lineno">  652</span>            di.<a class="code hl_variable" href="structdecimation__info.html#ab27eb4b71fcc9d8b7827ce5abbf43d4a">texel_weight_contribs_int_tr</a>[j][i] = 0;</div>
<div class="line"><span class="lineno">  653</span>        }</div>
<div class="line"><span class="lineno">  654</span>    }</div>
<div class="line"><span class="lineno">  655</span> </div>
<div class="line"><span class="lineno">  656</span>    <span class="comment">// Initialize array tail so we can over-fetch with SIMD later to avoid loop tails</span></div>
<div class="line"><span class="lineno">  657</span>    <span class="comment">// Match last texel in active lane in SIMD group, for better gathers</span></div>
<div class="line"><span class="lineno">  658</span>    <span class="keywordtype">int</span> last_texel_count_wt = wb.<a class="code hl_variable" href="structdt__init__working__buffers.html#aff356b5d5b167b90ea08479ce3e96f4c">texel_count_of_weight</a>[weights_per_block - 1];</div>
<div class="line"><span class="lineno">  659</span>    uint8_t last_texel = di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[last_texel_count_wt - 1][weights_per_block - 1];</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weights_per_block_simd = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37">round_up_to_simd_multiple_vla</a>(weights_per_block);</div>
<div class="line"><span class="lineno">  662</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = weights_per_block; i &lt; weights_per_block_simd; i++)</div>
<div class="line"><span class="lineno">  663</span>    {</div>
<div class="line"><span class="lineno">  664</span>        di.<a class="code hl_variable" href="structdecimation__info.html#af8cbdbb54638ad694f845fb0bd96d007">weight_texel_count</a>[i] = 0;</div>
<div class="line"><span class="lineno">  665</span> </div>
<div class="line"><span class="lineno">  666</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; max_texel_count_of_weight; j++)</div>
<div class="line"><span class="lineno">  667</span>        {</div>
<div class="line"><span class="lineno">  668</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[j][i] = last_texel;</div>
<div class="line"><span class="lineno">  669</span>            di.<a class="code hl_variable" href="structdecimation__info.html#a8938034ba8a3eeb122662bf5d90df522">weights_texel_contribs_tr</a>[j][i] = 0.0f;</div>
<div class="line"><span class="lineno">  670</span>        }</div>
<div class="line"><span class="lineno">  671</span>    }</div>
<div class="line"><span class="lineno">  672</span> </div>
<div class="line"><span class="lineno">  673</span>    di.<a class="code hl_variable" href="structdecimation__info.html#a2f6c6f84342c82092324c05035b3c9c1">texel_count</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(texels_per_block);</div>
<div class="line"><span class="lineno">  674</span>    di.<a class="code hl_variable" href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">weight_count</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(weights_per_block);</div>
<div class="line"><span class="lineno">  675</span>    di.<a class="code hl_variable" href="structdecimation__info.html#a0b51669603759128ab6ab40458601461">weight_x</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(x_weights);</div>
<div class="line"><span class="lineno">  676</span>    di.<a class="code hl_variable" href="structdecimation__info.html#a1b0d75c94edac7ae7e5a53fea1757a2c">weight_y</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(y_weights);</div>
<div class="line"><span class="lineno">  677</span>    di.<a class="code hl_variable" href="structdecimation__info.html#afc8c1ca38b0a7d5014343ca9028a0186">weight_z</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(z_weights);</div>
<div class="line"><span class="lineno">  678</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a2baafb8e792da4735cef4849633739ac_cgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a2baafb8e792da4735cef4849633739ac_cgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a2baafb8e792da4735cef4849633739ac_cgraph" id="aastcenc__block__sizes_8cpp_a2baafb8e792da4735cef4849633739ac_cgraph">
<area shape="rect" title="Create a 3D decimation entry for a block&#45;size and weight&#45;decimation pair." alt="" coords="5,31,163,56"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="272,5,352,31"/>
<area shape="poly" title=" " alt="" coords="163,32,258,21,259,27,163,37"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="211,55,413,80"/>
<area shape="poly" title=" " alt="" coords="163,49,197,53,197,58,163,54"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__block__sizes_8cpp_a2baafb8e792da4735cef4849633739ac_icgraph.png" border="0" usemap="#aastcenc__block__sizes_8cpp_a2baafb8e792da4735cef4849633739ac_icgraph" alt=""/></div>
<map name="aastcenc__block__sizes_8cpp_a2baafb8e792da4735cef4849633739ac_icgraph" id="aastcenc__block__sizes_8cpp_a2baafb8e792da4735cef4849633739ac_icgraph">
<area shape="rect" title="Create a 3D decimation entry for a block&#45;size and weight&#45;decimation pair." alt="" coords="868,13,1025,38"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a3fde919cf8b9a7f9db851cfff6a7a87c" title="Allocate block modes and decimation tables for a single 3D block size." alt="" coords="675,5,820,45"/>
<area shape="poly" title=" " alt="" coords="854,28,820,28,820,23,854,23"/>
<area shape="rect" href="astcenc__block__sizes_8cpp.html#a5c46863585cc583c3deb49323dfb73d8" title="Populate the block size descriptor for the target block size." alt="" coords="455,13,627,38"/>
<area shape="poly" title=" " alt="" coords="661,28,627,28,627,23,661,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a823234313a697f5b4cdbd2cd6caaef4a" title="Allocate a new codec context based on a config." alt="" coords="255,13,407,38"/>
<area shape="poly" title=" " alt="" coords="441,28,407,28,407,23,441,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="241,28,207,28,207,23,241,23"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_211b531afad3b7391864460492782af6.html">astc-encoder-main</a></li><li class="navelem"><a class="el" href="dir_7df889ea08e038e0b05c337eccc30153.html">Source</a></li><li class="navelem"><a class="el" href="astcenc__block__sizes_8cpp.html">astcenc_block_sizes.cpp</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
