<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project1: C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-encoder-main/Source/astcenc_ideal_endpoints_and_weights.cpp 파일 참조</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Project1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('astcenc__ideal__endpoints__and__weights_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">함수</a>  </div>
  <div class="headertitle"><div class="title">astcenc_ideal_endpoints_and_weights.cpp 파일 참조</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;cassert&gt;</code><br />
<code>#include &quot;<a class="el" href="astcenc__internal_8h_source.html">astcenc_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="astcenc__vecmathlib_8h_source.html">astcenc_vecmathlib.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
astcenc_ideal_endpoints_and_weights.cpp에 대한 include 의존 그래프</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp__incl.png" border="0" usemap="#a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__ideal__endpoints__and__weights_8cpp" alt=""/></div>
<map name="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__ideal__endpoints__and__weights_8cpp" id="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__ideal__endpoints__and__weights_8cpp">
<area shape="rect" title=" " alt="" coords="420,5,635,89"/>
<area shape="rect" title=" " alt="" coords="439,284,504,309"/>
<area shape="poly" title=" " alt="" coords="529,90,522,159,505,237,488,273,484,271,500,235,516,158,523,89"/>
<area shape="rect" href="astcenc__internal_8h.html" title=" " alt="" coords="184,137,312,163"/>
<area shape="poly" title=" " alt="" coords="421,90,293,135,291,130,419,85"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html" title=" " alt="" coords="529,284,676,309"/>
<area shape="poly" title=" " alt="" coords="542,89,597,270,592,272,537,90"/>
<area shape="rect" title=" " alt="" coords="136,445,210,471"/>
<area shape="poly" title=" " alt="" coords="184,162,89,181,49,196,24,212,10,242,10,273,21,305,41,336,66,366,94,393,147,435,143,440,91,397,62,370,37,339,16,307,5,274,5,241,20,209,46,191,87,176,183,157"/>
<area shape="rect" title=" " alt="" coords="88,284,152,309"/>
<area shape="poly" title=" " alt="" coords="184,163,95,183,57,196,35,212,31,221,30,229,39,246,58,262,81,276,78,280,55,266,35,250,25,230,25,220,31,209,55,192,93,178,183,158"/>
<area shape="rect" title=" " alt="" coords="270,284,332,309"/>
<area shape="poly" title=" " alt="" coords="264,161,284,182,301,210,307,241,307,270,302,270,302,241,296,212,280,185,260,165"/>
<area shape="rect" title=" " alt="" coords="46,211,106,236"/>
<area shape="poly" title=" " alt="" coords="221,165,117,208,115,203,219,160"/>
<area shape="rect" title=" " alt="" coords="130,211,184,236"/>
<area shape="poly" title=" " alt="" coords="235,165,184,204,181,200,231,161"/>
<area shape="rect" href="astcenc_8h.html" title=" " alt="" coords="208,211,287,236"/>
<area shape="poly" title=" " alt="" coords="250,163,250,197,245,197,245,163"/>
<area shape="rect" href="astcenc__mathlib_8h.html" title=" " alt="" coords="362,211,490,236"/>
<area shape="poly" title=" " alt="" coords="277,160,385,203,384,208,275,165"/>
<area shape="poly" title=" " alt="" coords="312,155,405,173,455,188,504,208,549,239,584,272,581,276,546,243,501,213,453,193,404,178,311,160"/>
<area shape="poly" title=" " alt="" coords="228,238,154,279,151,275,226,234"/>
<area shape="poly" title=" " alt="" coords="259,235,286,272,282,275,254,238"/>
<area shape="poly" title=" " alt="" coords="436,235,459,271,455,274,431,238"/>
<area shape="poly" title=" " alt="" coords="407,238,335,279,332,275,405,234"/>
<area shape="rect" title=" " alt="" coords="356,284,414,309"/>
<area shape="poly" title=" " alt="" coords="422,238,401,273,396,271,417,235"/>
<area shape="poly" title=" " alt="" coords="456,234,562,276,560,281,454,238"/>
<area shape="rect" href="astcenc__vecmathlib__none__4_8h.html" title=" " alt="" coords="534,357,670,397"/>
<area shape="poly" title=" " alt="" coords="605,310,605,344,600,344,600,310"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html" title=" " alt="" coords="374,357,510,397"/>
<area shape="poly" title=" " alt="" coords="580,312,495,353,492,349,578,307"/>
<area shape="poly" title=" " alt="" coords="535,397,523,400,359,430,224,452,223,446,358,425,522,395,534,392"/>
<area shape="rect" title=" " alt="" coords="432,445,490,471"/>
<area shape="poly" title=" " alt="" coords="570,400,495,441,493,436,567,395"/>
<area shape="rect" title=" " alt="" coords="552,445,613,471"/>
<area shape="poly" title=" " alt="" coords="600,398,591,432,586,431,595,397"/>
<area shape="rect" title=" " alt="" coords="637,445,688,471"/>
<area shape="poly" title=" " alt="" coords="619,396,647,433,643,436,615,399"/>
<area shape="poly" title=" " alt="" coords="449,397,458,431,452,432,444,398"/>
</map>
</div>
</div>
<p><a href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">이 파일의 소스 코드 페이지로 가기</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
함수</h2></td></tr>
<tr class="memitem:a617a8dec1d2168023a84f5c0fa1c20ca" id="r_a617a8dec1d2168023a84f5c0fa1c20ca"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a617a8dec1d2168023a84f5c0fa1c20ca">bilinear_infill_vla</a> (const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;di, const float *weights, unsigned int index)</td></tr>
<tr class="memdesc:a617a8dec1d2168023a84f5c0fa1c20ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions for computing color endpoints and texel weights.  <br /></td></tr>
<tr class="separator:a617a8dec1d2168023a84f5c0fa1c20ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84286bd889620da3be77539ddfdf3b45" id="r_a84286bd889620da3be77539ddfdf3b45"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84286bd889620da3be77539ddfdf3b45">bilinear_infill_vla_2</a> (const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;di, const float *weights, unsigned int index)</td></tr>
<tr class="memdesc:a84286bd889620da3be77539ddfdf3b45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the infilled weight for N texel indices in a decimated grid.  <br /></td></tr>
<tr class="separator:a84286bd889620da3be77539ddfdf3b45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e9812129972c73914841ecc0f6a7e71" id="r_a3e9812129972c73914841ecc0f6a7e71"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e9812129972c73914841ecc0f6a7e71">compute_ideal_colors_and_weights_1_comp</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;ei, unsigned int component)</td></tr>
<tr class="memdesc:a3e9812129972c73914841ecc0f6a7e71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the ideal endpoints and weights for 1 color component.  <br /></td></tr>
<tr class="separator:a3e9812129972c73914841ecc0f6a7e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad96c399a873ddd142d4779b6aeb74b87" id="r_ad96c399a873ddd142d4779b6aeb74b87"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad96c399a873ddd142d4779b6aeb74b87">compute_ideal_colors_and_weights_2_comp</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;ei, int component1, int component2)</td></tr>
<tr class="memdesc:ad96c399a873ddd142d4779b6aeb74b87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the ideal endpoints and weights for 2 color components.  <br /></td></tr>
<tr class="separator:ad96c399a873ddd142d4779b6aeb74b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ec20ff2556f6357cc0754c13e841262" id="r_a7ec20ff2556f6357cc0754c13e841262"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ec20ff2556f6357cc0754c13e841262">compute_ideal_colors_and_weights_3_comp</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;ei, unsigned int omitted_component)</td></tr>
<tr class="memdesc:a7ec20ff2556f6357cc0754c13e841262"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the ideal endpoints and weights for 3 color components.  <br /></td></tr>
<tr class="separator:a7ec20ff2556f6357cc0754c13e841262"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08aebec57ada3441207dce6a7a02797e" id="r_a08aebec57ada3441207dce6a7a02797e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08aebec57ada3441207dce6a7a02797e">compute_ideal_colors_and_weights_4_comp</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;ei)</td></tr>
<tr class="memdesc:a08aebec57ada3441207dce6a7a02797e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the ideal endpoints and weights for 4 color components.  <br /></td></tr>
<tr class="separator:a08aebec57ada3441207dce6a7a02797e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa8cab65d4b6f0cbece52eec38aed523" id="r_afa8cab65d4b6f0cbece52eec38aed523"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa8cab65d4b6f0cbece52eec38aed523">compute_ideal_colors_and_weights_1plane</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;ei)</td></tr>
<tr class="memdesc:afa8cab65d4b6f0cbece52eec38aed523"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute ideal endpoint colors and weights for 1 plane of weights.  <br /></td></tr>
<tr class="separator:afa8cab65d4b6f0cbece52eec38aed523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52d3985007cfc83025661e0347bc00cc" id="r_a52d3985007cfc83025661e0347bc00cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a52d3985007cfc83025661e0347bc00cc">compute_ideal_colors_and_weights_2planes</a> (const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, unsigned int plane2_component, <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;ei1, <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;ei2)</td></tr>
<tr class="memdesc:a52d3985007cfc83025661e0347bc00cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute ideal endpoint colors and weights for 2 planes of weights.  <br /></td></tr>
<tr class="separator:a52d3985007cfc83025661e0347bc00cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4077e6408620eefddd42b7e159dc93c" id="r_aa4077e6408620eefddd42b7e159dc93c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4077e6408620eefddd42b7e159dc93c">compute_error_of_weight_set_1plane</a> (const <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;eai, const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;di, const float *dec_weight_quant_uvalue)</td></tr>
<tr class="memdesc:aa4077e6408620eefddd42b7e159dc93c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the error of a decimated weight set for 1 plane.  <br /></td></tr>
<tr class="separator:aa4077e6408620eefddd42b7e159dc93c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09a63c4b1e684f7ff9d88e5717b10bfb" id="r_a09a63c4b1e684f7ff9d88e5717b10bfb"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09a63c4b1e684f7ff9d88e5717b10bfb">compute_error_of_weight_set_2planes</a> (const <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;eai1, const <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;eai2, const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;di, const float *dec_weight_quant_uvalue_plane1, const float *dec_weight_quant_uvalue_plane2)</td></tr>
<tr class="memdesc:a09a63c4b1e684f7ff9d88e5717b10bfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the error of a decimated weight set for 2 planes.  <br /></td></tr>
<tr class="separator:a09a63c4b1e684f7ff9d88e5717b10bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1b4e922c67d5349fc849709ca08178f" id="r_ae1b4e922c67d5349fc849709ca08178f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1b4e922c67d5349fc849709ca08178f">compute_ideal_weights_for_decimation</a> (const <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;ei, const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;di, float *dec_weight_ideal_value)</td></tr>
<tr class="memdesc:ae1b4e922c67d5349fc849709ca08178f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the optimal unquantized weights for a decimation table.  <br /></td></tr>
<tr class="separator:ae1b4e922c67d5349fc849709ca08178f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af42cf444db5f16e2ed4fb642acf81f4a" id="r_af42cf444db5f16e2ed4fb642acf81f4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af42cf444db5f16e2ed4fb642acf81f4a">compute_quantized_weights_for_decimation</a> (const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;di, float low_bound, float high_bound, const float *dec_weight_ideal_value, float *weight_set_out, uint8_t *quantized_weight_set, <a class="el" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a> quant_level)</td></tr>
<tr class="memdesc:af42cf444db5f16e2ed4fb642acf81f4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the optimal quantized weights for a decimation table.  <br /></td></tr>
<tr class="separator:af42cf444db5f16e2ed4fb642acf81f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55d08b4feda289df7cbcfa6e1ed0b80c" id="r_a55d08b4feda289df7cbcfa6e1ed0b80c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structvfloat4.html">vfloat4</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a55d08b4feda289df7cbcfa6e1ed0b80c">compute_rgbo_vector</a> (<a class="el" href="structvfloat4.html">vfloat4</a> rgba_weight_sum, <a class="el" href="structvfloat4.html">vfloat4</a> weight_weight_sum, <a class="el" href="structvfloat4.html">vfloat4</a> rgbq_sum, float psum)</td></tr>
<tr class="memdesc:a55d08b4feda289df7cbcfa6e1ed0b80c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the RGB + offset for a HDR endpoint mode #7.  <br /></td></tr>
<tr class="separator:a55d08b4feda289df7cbcfa6e1ed0b80c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02bcad94240678ee727ccf2f0fbfb5d3" id="r_a02bcad94240678ee727ccf2f0fbfb5d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a02bcad94240678ee727ccf2f0fbfb5d3">recompute_ideal_colors_1plane</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;di, const uint8_t *dec_weights_uquant, <a class="el" href="structendpoints.html">endpoints</a> &amp;ep, <a class="el" href="structvfloat4.html">vfloat4</a> rgbs_vectors[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>], <a class="el" href="structvfloat4.html">vfloat4</a> rgbo_vectors[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>])</td></tr>
<tr class="memdesc:a02bcad94240678ee727ccf2f0fbfb5d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a given 1 plane weight set recompute the endpoint colors.  <br /></td></tr>
<tr class="separator:a02bcad94240678ee727ccf2f0fbfb5d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb3c455470bef24f48d7815bb78bb569" id="r_afb3c455470bef24f48d7815bb78bb569"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb3c455470bef24f48d7815bb78bb569">recompute_ideal_colors_2planes</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd, const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;di, const uint8_t *dec_weights_uquant_plane1, const uint8_t *dec_weights_uquant_plane2, <a class="el" href="structendpoints.html">endpoints</a> &amp;ep, <a class="el" href="structvfloat4.html">vfloat4</a> &amp;rgbs_vector, <a class="el" href="structvfloat4.html">vfloat4</a> &amp;rgbo_vector, int plane2_component)</td></tr>
<tr class="memdesc:afb3c455470bef24f48d7815bb78bb569"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a given 2 plane weight set recompute the endpoint colors.  <br /></td></tr>
<tr class="separator:afb3c455470bef24f48d7815bb78bb569"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">함수 문서화</h2>
<a id="a617a8dec1d2168023a84f5c0fa1c20ca" name="a617a8dec1d2168023a84f5c0fa1c20ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a617a8dec1d2168023a84f5c0fa1c20ca">&#9670;&#160;</a></span>bilinear_infill_vla()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a> bilinear_infill_vla </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>di</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Functions for computing color endpoints and texel weights. </p>
<p>Compute the infilled weight for N texel indices in a decimated grid.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramname">di</td><td>The weight grid decimation to use. </td></tr>
    <tr><td class="paramname">weights</td><td>The decimated weight values to use. </td></tr>
    <tr><td class="paramname">index</td><td>The first texel index to interpolate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The interpolated weight for the given set of SIMD_WIDTH texels. </dd></dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00038">38</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">   42</span>  {</div>
<div class="line"><span class="lineno">   43</span>    <span class="comment">// Load the bilinear filter texel weight indexes in the decimated grid</span></div>
<div class="line"><span class="lineno">   44</span>    <a class="code hl_struct" href="structvint4.html">vint</a> weight_idx0 = <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[0] + index);</div>
<div class="line"><span class="lineno">   45</span>    <a class="code hl_struct" href="structvint4.html">vint</a> weight_idx1 = <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[1] + index);</div>
<div class="line"><span class="lineno">   46</span>    <a class="code hl_struct" href="structvint4.html">vint</a> weight_idx2 = <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[2] + index);</div>
<div class="line"><span class="lineno">   47</span>    <a class="code hl_struct" href="structvint4.html">vint</a> weight_idx3 = <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[3] + index);</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>    <span class="comment">// Load the bilinear filter weights from the decimated grid</span></div>
<div class="line"><span class="lineno">   50</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight_val0 = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(weights, weight_idx0);</div>
<div class="line"><span class="lineno">   51</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight_val1 = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(weights, weight_idx1);</div>
<div class="line"><span class="lineno">   52</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight_val2 = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(weights, weight_idx2);</div>
<div class="line"><span class="lineno">   53</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight_val3 = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(weights, weight_idx3);</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>    <span class="comment">// Load the weight contribution factors for each decimated weight</span></div>
<div class="line"><span class="lineno">   56</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> tex_weight_float0 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[0] + index);</div>
<div class="line"><span class="lineno">   57</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> tex_weight_float1 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[1] + index);</div>
<div class="line"><span class="lineno">   58</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> tex_weight_float2 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[2] + index);</div>
<div class="line"><span class="lineno">   59</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> tex_weight_float3 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[3] + index);</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>    <span class="comment">// Compute the bilinear interpolation to generate the per-texel weight</span></div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">return</span> (weight_val0 * tex_weight_float0 + weight_val1 * tex_weight_float1) +</div>
<div class="line"><span class="lineno">   63</span>           (weight_val2 * tex_weight_float2 + weight_val3 * tex_weight_float3);</div>
<div class="line"><span class="lineno">   64</span>}</div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a1d994704cca1a088c460bd5a3058e3bc"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a></div><div class="ttdeci">vint4 vint</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00150">astcenc_vecmathlib.h:150</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a535908f39a759651e1adb70d750a96f7"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a></div><div class="ttdeci">constexpr auto loada</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00153">astcenc_vecmathlib.h:153</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aae2f99eb48f3cde0f4739b894e8ca29f"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat8 gatherf(const float *base, vint8 indices)</div><div class="ttdoc">Load a vector of gathered results from an array;</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00977">astcenc_vecmathlib_avx2_8.h:977</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a4d05a42b1764a046f86d4a5220cb5365"><div class="ttname"><a href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">decimation_info::texel_weight_contribs_float_tr</a></div><div class="ttdeci">ASTCENC_ALIGNAS float texel_weight_contribs_float_tr[4][BLOCK_MAX_TEXELS]</div><div class="ttdoc">The bilinear contribution of the N weights that are interpolated for each texel. Value is between 0 a...</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00388">astcenc_internal.h:388</a></div></div>
<div class="ttc" id="astructdecimation__info_html_adcee6ed79e4c94e1bcb305d429e3cff5"><div class="ttname"><a href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">decimation_info::texel_weights_tr</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t texel_weights_tr[4][BLOCK_MAX_TEXELS]</div><div class="ttdoc">The weight index of the N weights that are interpolated for each texel. Stored transposed to improve ...</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00376">astcenc_internal.h:376</a></div></div>
<div class="ttc" id="astructvfloat4_html"><div class="ttname"><a href="structvfloat4.html">vfloat4</a></div><div class="ttdoc">4x32-bit vectors, implemented using Armv8-A NEON.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00050">astcenc_vecmathlib_neon_4.h:51</a></div></div>
<div class="ttc" id="astructvint4_html"><div class="ttname"><a href="structvint4.html">vint4</a></div><div class="ttdoc">Data type for 4-wide ints.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00183">astcenc_vecmathlib_neon_4.h:184</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a617a8dec1d2168023a84f5c0fa1c20ca_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a617a8dec1d2168023a84f5c0fa1c20ca_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a617a8dec1d2168023a84f5c0fa1c20ca_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a617a8dec1d2168023a84f5c0fa1c20ca_cgraph">
<area shape="rect" title="Functions for computing color endpoints and texel weights." alt="" coords="5,5,120,31"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="168,5,229,31"/>
<area shape="poly" title=" " alt="" coords="120,15,154,15,154,21,120,21"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a617a8dec1d2168023a84f5c0fa1c20ca_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a617a8dec1d2168023a84f5c0fa1c20ca_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a617a8dec1d2168023a84f5c0fa1c20ca_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a617a8dec1d2168023a84f5c0fa1c20ca_icgraph">
<area shape="rect" title="Functions for computing color endpoints and texel weights." alt="" coords="1453,141,1568,166"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#aa4077e6408620eefddd42b7e159dc93c" title="Compute the error of a decimated weight set for 1 plane." alt="" coords="1239,5,1405,45"/>
<area shape="poly" title=" " alt="" coords="1487,132,1450,96,1404,60,1382,48,1384,43,1407,55,1454,92,1491,129"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a09a63c4b1e684f7ff9d88e5717b10bfb" title="Compute the error of a decimated weight set for 2 planes." alt="" coords="1239,197,1405,237"/>
<area shape="poly" title=" " alt="" coords="1460,173,1383,200,1381,195,1459,168"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#ae1b4e922c67d5349fc849709ca08178f" title="Compute the optimal unquantized weights for a decimation table." alt="" coords="1243,133,1401,173"/>
<area shape="poly" title=" " alt="" coords="1440,156,1401,156,1401,151,1440,151"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a02bcad94240678ee727ccf2f0fbfb5d3" title="For a given 1 plane weight set recompute the endpoint colors." alt="" coords="1243,69,1401,109"/>
<area shape="poly" title=" " alt="" coords="1459,139,1381,112,1383,107,1460,134"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#afb3c455470bef24f48d7815bb78bb569" title="For a given 2 plane weight set recompute the endpoint colors." alt="" coords="1243,261,1401,301"/>
<area shape="poly" title=" " alt="" coords="1491,178,1454,215,1407,252,1384,264,1382,259,1404,247,1450,211,1487,174"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,101,1191,141"/>
<area shape="poly" title=" " alt="" coords="1256,53,1240,60,1145,104,1143,99,1238,55,1254,48"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,173,967,198"/>
<area shape="poly" title=" " alt="" coords="1029,148,948,175,947,170,1027,143"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,173,801,198"/>
<area shape="poly" title=" " alt="" coords="835,188,802,188,802,183,835,183"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,173,632,198"/>
<area shape="poly" title=" " alt="" coords="666,188,632,188,632,183,666,183"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,173,207,198"/>
<area shape="poly" title=" " alt="" coords="444,185,409,184,255,184,207,186,207,180,255,179,409,179,444,179"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,193,409,233"/>
<area shape="poly" title=" " alt="" coords="444,201,410,206,409,201,443,196"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,173,56,198"/>
<area shape="poly" title=" " alt="" coords="90,188,57,188,57,183,90,183"/>
<area shape="poly" title=" " alt="" coords="241,202,206,196,207,191,242,196"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,197,1191,237"/>
<area shape="poly" title=" " alt="" coords="1225,220,1191,220,1191,215,1225,215"/>
<area shape="poly" title=" " alt="" coords="1001,203,966,198,967,192,1002,198"/>
<area shape="poly" title=" " alt="" coords="1229,143,1191,137,1191,132,1230,137"/>
<area shape="poly" title=" " alt="" coords="1241,180,1172,200,1171,195,1239,175"/>
<area shape="poly" title=" " alt="" coords="1229,106,1191,111,1191,106,1229,100"/>
<area shape="poly" title=" " alt="" coords="1239,260,1171,240,1172,235,1241,255"/>
</map>
</div>

</div>
</div>
<a id="a84286bd889620da3be77539ddfdf3b45" name="a84286bd889620da3be77539ddfdf3b45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84286bd889620da3be77539ddfdf3b45">&#9670;&#160;</a></span>bilinear_infill_vla_2()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a> bilinear_infill_vla_2 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>di</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>weights</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>index</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the infilled weight for N texel indices in a decimated grid. </p>
<p>This is specialized version which computes only two weights per texel for encodings that are only decimated in a single axis.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramname">di</td><td>The weight grid decimation to use. </td></tr>
    <tr><td class="paramname">weights</td><td>The decimated weight values to use. </td></tr>
    <tr><td class="paramname">index</td><td>The first texel index to interpolate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The interpolated weight for the given set of SIMD_WIDTH texels. </dd></dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00078">78</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">   82</span>  {</div>
<div class="line"><span class="lineno">   83</span>    <span class="comment">// Load the bilinear filter texel weight indexes in the decimated grid</span></div>
<div class="line"><span class="lineno">   84</span>    <a class="code hl_struct" href="structvint4.html">vint</a> weight_idx0 = <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[0] + index);</div>
<div class="line"><span class="lineno">   85</span>    <a class="code hl_struct" href="structvint4.html">vint</a> weight_idx1 = <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(di.<a class="code hl_variable" href="structdecimation__info.html#adcee6ed79e4c94e1bcb305d429e3cff5">texel_weights_tr</a>[1] + index);</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    <span class="comment">// Load the bilinear filter weights from the decimated grid</span></div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight_val0 = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(weights, weight_idx0);</div>
<div class="line"><span class="lineno">   89</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight_val1 = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(weights, weight_idx1);</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>    <span class="comment">// Load the weight contribution factors for each decimated weight</span></div>
<div class="line"><span class="lineno">   92</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> tex_weight_float0 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[0] + index);</div>
<div class="line"><span class="lineno">   93</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> tex_weight_float1 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(di.<a class="code hl_variable" href="structdecimation__info.html#a4d05a42b1764a046f86d4a5220cb5365">texel_weight_contribs_float_tr</a>[1] + index);</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    <span class="comment">// Compute the bilinear interpolation to generate the per-texel weight</span></div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">return</span> (weight_val0 * tex_weight_float0 + weight_val1 * tex_weight_float1);</div>
<div class="line"><span class="lineno">   97</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a84286bd889620da3be77539ddfdf3b45_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a84286bd889620da3be77539ddfdf3b45_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a84286bd889620da3be77539ddfdf3b45_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a84286bd889620da3be77539ddfdf3b45_cgraph">
<area shape="rect" title="Compute the infilled weight for N texel indices in a decimated grid." alt="" coords="5,5,133,31"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="181,5,243,31"/>
<area shape="poly" title=" " alt="" coords="134,15,168,15,168,21,134,21"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a84286bd889620da3be77539ddfdf3b45_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a84286bd889620da3be77539ddfdf3b45_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a84286bd889620da3be77539ddfdf3b45_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a84286bd889620da3be77539ddfdf3b45_icgraph">
<area shape="rect" title="Compute the infilled weight for N texel indices in a decimated grid." alt="" coords="1453,141,1581,166"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#aa4077e6408620eefddd42b7e159dc93c" title="Compute the error of a decimated weight set for 1 plane." alt="" coords="1239,5,1405,45"/>
<area shape="poly" title=" " alt="" coords="1493,132,1453,96,1404,60,1381,48,1384,43,1407,55,1456,92,1496,129"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a09a63c4b1e684f7ff9d88e5717b10bfb" title="Compute the error of a decimated weight set for 2 planes." alt="" coords="1239,197,1405,237"/>
<area shape="poly" title=" " alt="" coords="1465,173,1385,200,1383,195,1464,168"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#ae1b4e922c67d5349fc849709ca08178f" title="Compute the optimal unquantized weights for a decimation table." alt="" coords="1243,133,1401,173"/>
<area shape="poly" title=" " alt="" coords="1439,156,1401,156,1401,151,1439,151"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a02bcad94240678ee727ccf2f0fbfb5d3" title="For a given 1 plane weight set recompute the endpoint colors." alt="" coords="1243,69,1401,109"/>
<area shape="poly" title=" " alt="" coords="1464,139,1383,112,1385,107,1465,134"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#afb3c455470bef24f48d7815bb78bb569" title="For a given 2 plane weight set recompute the endpoint colors." alt="" coords="1243,261,1401,301"/>
<area shape="poly" title=" " alt="" coords="1496,178,1456,215,1407,252,1384,264,1381,259,1404,247,1453,211,1493,174"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,101,1191,141"/>
<area shape="poly" title=" " alt="" coords="1256,53,1240,60,1145,104,1143,99,1238,55,1254,48"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,173,967,198"/>
<area shape="poly" title=" " alt="" coords="1029,148,948,175,947,170,1027,143"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,173,801,198"/>
<area shape="poly" title=" " alt="" coords="835,188,802,188,802,183,835,183"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,173,632,198"/>
<area shape="poly" title=" " alt="" coords="666,188,632,188,632,183,666,183"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,173,207,198"/>
<area shape="poly" title=" " alt="" coords="444,185,409,184,255,184,207,186,207,180,255,179,409,179,444,179"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,193,409,233"/>
<area shape="poly" title=" " alt="" coords="444,201,410,206,409,201,443,196"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,173,56,198"/>
<area shape="poly" title=" " alt="" coords="90,188,57,188,57,183,90,183"/>
<area shape="poly" title=" " alt="" coords="241,202,206,196,207,191,242,196"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,197,1191,237"/>
<area shape="poly" title=" " alt="" coords="1225,220,1191,220,1191,215,1225,215"/>
<area shape="poly" title=" " alt="" coords="1001,203,966,198,967,192,1002,198"/>
<area shape="poly" title=" " alt="" coords="1229,143,1191,137,1191,132,1230,137"/>
<area shape="poly" title=" " alt="" coords="1241,180,1172,200,1171,195,1239,175"/>
<area shape="poly" title=" " alt="" coords="1229,106,1191,111,1191,106,1229,100"/>
<area shape="poly" title=" " alt="" coords="1239,260,1171,240,1172,235,1241,255"/>
</map>
</div>

</div>
</div>
<a id="aa4077e6408620eefddd42b7e159dc93c" name="aa4077e6408620eefddd42b7e159dc93c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4077e6408620eefddd42b7e159dc93c">&#9670;&#160;</a></span>compute_error_of_weight_set_1plane()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float compute_error_of_weight_set_1plane </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>eai</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>di</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>dec_weight_quant_uvalue</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the error of a decimated weight set for 1 plane. </p>
<p>After computing ideal weights for the case with one weight per texel, we want to compute the error for decimated weight grids where weights are stored at a lower resolution. This function computes the error of the reduced grid, compared to the full grid.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramname">eai</td><td>The ideal weights for the full grid. </td></tr>
    <tr><td class="paramname">di</td><td>The selected weight decimation. </td></tr>
    <tr><td class="paramname">dec_weight_quant_uvalue</td><td>The quantized weights for the decimated grid.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The accumulated error. </dd></dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00688">688</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  692</span>  {</div>
<div class="line"><span class="lineno">  693</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> error_summav = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">  694</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = di.<a class="code hl_variable" href="structdecimation__info.html#a2f6c6f84342c82092324c05035b3c9c1">texel_count</a>;</div>
<div class="line"><span class="lineno">  695</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  696</span> </div>
<div class="line"><span class="lineno">  697</span>    <span class="comment">// Process SIMD-width chunks, safe to over-fetch - the extra space is zero initialized</span></div>
<div class="line"><span class="lineno">  698</span>    <span class="keywordflow">if</span> (di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> &gt; 2)</div>
<div class="line"><span class="lineno">  699</span>    {</div>
<div class="line"><span class="lineno">  700</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  701</span>        {</div>
<div class="line"><span class="lineno">  702</span>            <span class="comment">// Compute the bilinear interpolation of the decimated weight grid</span></div>
<div class="line"><span class="lineno">  703</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> current_values = <a class="code hl_function" href="#a617a8dec1d2168023a84f5c0fa1c20ca">bilinear_infill_vla</a>(di, dec_weight_quant_uvalue, i);</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span>            <span class="comment">// Compute the error between the computed value and the ideal weight</span></div>
<div class="line"><span class="lineno">  706</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> actual_values = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a> + i);</div>
<div class="line"><span class="lineno">  707</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> diff = current_values - actual_values;</div>
<div class="line"><span class="lineno">  708</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> significance = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a> + i);</div>
<div class="line"><span class="lineno">  709</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error = diff * diff * significance;</div>
<div class="line"><span class="lineno">  710</span> </div>
<div class="line"><span class="lineno">  711</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(error_summav, error);</div>
<div class="line"><span class="lineno">  712</span>        }</div>
<div class="line"><span class="lineno">  713</span>    }</div>
<div class="line"><span class="lineno">  714</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> &gt; 1)</div>
<div class="line"><span class="lineno">  715</span>    {</div>
<div class="line"><span class="lineno">  716</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  717</span>        {</div>
<div class="line"><span class="lineno">  718</span>            <span class="comment">// Compute the bilinear interpolation of the decimated weight grid</span></div>
<div class="line"><span class="lineno">  719</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> current_values = <a class="code hl_function" href="#a84286bd889620da3be77539ddfdf3b45">bilinear_infill_vla_2</a>(di, dec_weight_quant_uvalue, i);</div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span>            <span class="comment">// Compute the error between the computed value and the ideal weight</span></div>
<div class="line"><span class="lineno">  722</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> actual_values = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a> + i);</div>
<div class="line"><span class="lineno">  723</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> diff = current_values - actual_values;</div>
<div class="line"><span class="lineno">  724</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> significance = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a> + i);</div>
<div class="line"><span class="lineno">  725</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error = diff * diff * significance;</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(error_summav, error);</div>
<div class="line"><span class="lineno">  728</span>        }</div>
<div class="line"><span class="lineno">  729</span>    }</div>
<div class="line"><span class="lineno">  730</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  731</span>    {</div>
<div class="line"><span class="lineno">  732</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  733</span>        {</div>
<div class="line"><span class="lineno">  734</span>            <span class="comment">// Load the weight set directly, without interpolation</span></div>
<div class="line"><span class="lineno">  735</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> current_values = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(dec_weight_quant_uvalue + i);</div>
<div class="line"><span class="lineno">  736</span> </div>
<div class="line"><span class="lineno">  737</span>            <span class="comment">// Compute the error between the computed value and the ideal weight</span></div>
<div class="line"><span class="lineno">  738</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> actual_values = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a> + i);</div>
<div class="line"><span class="lineno">  739</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> diff = current_values - actual_values;</div>
<div class="line"><span class="lineno">  740</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> significance = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a> + i);</div>
<div class="line"><span class="lineno">  741</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error = diff * diff * significance;</div>
<div class="line"><span class="lineno">  742</span> </div>
<div class="line"><span class="lineno">  743</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(error_summav, error);</div>
<div class="line"><span class="lineno">  744</span>        }</div>
<div class="line"><span class="lineno">  745</span>    }</div>
<div class="line"><span class="lineno">  746</span> </div>
<div class="line"><span class="lineno">  747</span>    <span class="comment">// Resolve the final scalar accumulator sum</span></div>
<div class="line"><span class="lineno">  748</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(error_summav);</div>
<div class="line"><span class="lineno">  749</span>}</div>
<div class="ttc" id="aastcenc__ideal__endpoints__and__weights_8cpp_html_a617a8dec1d2168023a84f5c0fa1c20ca"><div class="ttname"><a href="#a617a8dec1d2168023a84f5c0fa1c20ca">bilinear_infill_vla</a></div><div class="ttdeci">static vfloat bilinear_infill_vla(const decimation_info &amp;di, const float *weights, unsigned int index)</div><div class="ttdoc">Functions for computing color endpoints and texel weights.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00038">astcenc_ideal_endpoints_and_weights.cpp:38</a></div></div>
<div class="ttc" id="aastcenc__ideal__endpoints__and__weights_8cpp_html_a84286bd889620da3be77539ddfdf3b45"><div class="ttname"><a href="#a84286bd889620da3be77539ddfdf3b45">bilinear_infill_vla_2</a></div><div class="ttdeci">static vfloat bilinear_infill_vla_2(const decimation_info &amp;di, const float *weights, unsigned int index)</div><div class="ttdoc">Compute the infilled weight for N texel indices in a decimated grid.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00078">astcenc_ideal_endpoints_and_weights.cpp:78</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a2cce51c3362aa0b5040437ac0e7f8969"><div class="ttname"><a href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a></div><div class="ttdeci">#define promise(cond)</div><div class="ttdoc">Functions and data declarations.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00061">astcenc_internal.h:61</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_aaf679f3389069313db808a4ebd6af8ad"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a></div><div class="ttdeci">#define ASTCENC_SIMD_WIDTH</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00146">astcenc_vecmathlib.h:146</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aaa291a197219a09a2e1103aec6945b3c"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE void haccumulate(vfloat4 &amp;accum, vfloat8 a)</div><div class="ttdoc">Accumulate lane-wise sums for a vector, folded 4-wide.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00925">astcenc_vecmathlib_avx2_8.h:925</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aacd26478e4fe1f97a5d47e8adaacc898"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float hadd_s(vfloat8 a)</div><div class="ttdoc">Return the horizontal sum of a vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00896">astcenc_vecmathlib_avx2_8.h:896</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a1419dcd0f618164042315f80527d3f4f"><div class="ttname"><a href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">decimation_info::max_texel_weight_count</a></div><div class="ttdeci">uint8_t max_texel_weight_count</div><div class="ttdoc">The maximum number of stored weights that contribute to each texel, between 1 and 4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00352">astcenc_internal.h:352</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a2f6c6f84342c82092324c05035b3c9c1"><div class="ttname"><a href="structdecimation__info.html#a2f6c6f84342c82092324c05035b3c9c1">decimation_info::texel_count</a></div><div class="ttdeci">uint8_t texel_count</div><div class="ttdoc">The total number of texels in the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00349">astcenc_internal.h:349</a></div></div>
<div class="ttc" id="astructendpoints__and__weights_html_a2f7e43bbb9027b71c7b240be53251217"><div class="ttname"><a href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">endpoints_and_weights::weights</a></div><div class="ttdeci">ASTCENC_ALIGNAS float weights[BLOCK_MAX_TEXELS]</div><div class="ttdoc">The ideal weight for each texel; may be undecimated or decimated.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00908">astcenc_internal.h:908</a></div></div>
<div class="ttc" id="astructendpoints__and__weights_html_a7e487945a9fdc482afc3015b47bc9ee7"><div class="ttname"><a href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">endpoints_and_weights::weight_error_scale</a></div><div class="ttdeci">ASTCENC_ALIGNAS float weight_error_scale[BLOCK_MAX_TEXELS]</div><div class="ttdoc">The ideal weight error scaling for each texel; may be undecimated or decimated.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00911">astcenc_internal.h:911</a></div></div>
<div class="ttc" id="astructvfloat4_html_a04b5f338012dab6be0b2bd7910fcbcae"><div class="ttname"><a href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 zero()</div><div class="ttdoc">Factory that returns a vector of zeros.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00116">astcenc_vecmathlib_neon_4.h:116</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_aa4077e6408620eefddd42b7e159dc93c_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_aa4077e6408620eefddd42b7e159dc93c_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_aa4077e6408620eefddd42b7e159dc93c_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_aa4077e6408620eefddd42b7e159dc93c_cgraph">
<area shape="rect" title="Compute the error of a decimated weight set for 1 plane." alt="" coords="5,121,172,161"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a617a8dec1d2168023a84f5c0fa1c20ca" title="Functions for computing color endpoints and texel weights." alt="" coords="227,5,341,31"/>
<area shape="poly" title=" " alt="" coords="111,118,159,79,219,40,231,34,233,38,221,44,162,84,114,122"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a84286bd889620da3be77539ddfdf3b45" title="Compute the infilled weight for N texel indices in a decimated grid." alt="" coords="220,55,348,80"/>
<area shape="poly" title=" " alt="" coords="142,118,235,83,237,88,144,123"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="236,128,332,153"/>
<area shape="poly" title=" " alt="" coords="172,138,222,138,222,143,172,143"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="252,201,316,227"/>
<area shape="poly" title=" " alt="" coords="144,158,240,195,238,200,142,163"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="239,251,329,276"/>
<area shape="poly" title=" " alt="" coords="115,159,163,197,221,236,235,243,232,247,219,240,159,201,111,163"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="417,31,478,56"/>
<area shape="poly" title=" " alt="" coords="342,24,403,34,402,39,341,29"/>
<area shape="poly" title=" " alt="" coords="348,55,403,47,403,52,349,61"/>
<area shape="poly" title=" " alt="" coords="257,129,251,120,254,110,265,104,284,101,306,105,316,113,312,117,304,110,284,107,267,109,258,113,256,119,261,126"/>
<area shape="poly" title=" " alt="" coords="257,203,251,193,254,183,265,177,284,175,306,178,316,187,312,191,304,183,284,180,267,182,258,187,256,192,261,200"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="396,251,499,276"/>
<area shape="poly" title=" " alt="" coords="330,261,382,261,382,266,330,266"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_aa4077e6408620eefddd42b7e159dc93c_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_aa4077e6408620eefddd42b7e159dc93c_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_aa4077e6408620eefddd42b7e159dc93c_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_aa4077e6408620eefddd42b7e159dc93c_icgraph">
<area shape="rect" title="Compute the error of a decimated weight set for 1 plane." alt="" coords="1239,5,1405,45"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a09a63c4b1e684f7ff9d88e5717b10bfb" name="a09a63c4b1e684f7ff9d88e5717b10bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09a63c4b1e684f7ff9d88e5717b10bfb">&#9670;&#160;</a></span>compute_error_of_weight_set_2planes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float compute_error_of_weight_set_2planes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>eai1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>eai2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>di</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>dec_weight_quant_uvalue_plane1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>dec_weight_quant_uvalue_plane2</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the error of a decimated weight set for 2 planes. </p>
<p>After computing ideal weights for the case with one weight per texel, we want to compute the error for decimated weight grids where weights are stored at a lower resolution. This function computes the error of the reduced grid, compared to the full grid.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramname">eai1</td><td>The ideal weights for the full grid and plane 1. </td></tr>
    <tr><td class="paramname">eai2</td><td>The ideal weights for the full grid and plane 2. </td></tr>
    <tr><td class="paramname">di</td><td>The selected weight decimation. </td></tr>
    <tr><td class="paramname">dec_weight_quant_uvalue_plane1</td><td>The quantized weights for the decimated grid plane 1. </td></tr>
    <tr><td class="paramname">dec_weight_quant_uvalue_plane2</td><td>The quantized weights for the decimated grid plane 2.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The accumulated error. </dd></dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00752">752</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  758</span>  {</div>
<div class="line"><span class="lineno">  759</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> error_summav = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">  760</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = di.<a class="code hl_variable" href="structdecimation__info.html#a2f6c6f84342c82092324c05035b3c9c1">texel_count</a>;</div>
<div class="line"><span class="lineno">  761</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  762</span> </div>
<div class="line"><span class="lineno">  763</span>    <span class="comment">// Process SIMD-width chunks, safe to over-fetch - the extra space is zero initialized</span></div>
<div class="line"><span class="lineno">  764</span>    <span class="keywordflow">if</span> (di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> &gt; 2)</div>
<div class="line"><span class="lineno">  765</span>    {</div>
<div class="line"><span class="lineno">  766</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  767</span>        {</div>
<div class="line"><span class="lineno">  768</span>            <span class="comment">// Plane 1</span></div>
<div class="line"><span class="lineno">  769</span>            <span class="comment">// Compute the bilinear interpolation of the decimated weight grid</span></div>
<div class="line"><span class="lineno">  770</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> current_values1 = <a class="code hl_function" href="#a617a8dec1d2168023a84f5c0fa1c20ca">bilinear_infill_vla</a>(di, dec_weight_quant_uvalue_plane1, i);</div>
<div class="line"><span class="lineno">  771</span> </div>
<div class="line"><span class="lineno">  772</span>            <span class="comment">// Compute the error between the computed value and the ideal weight</span></div>
<div class="line"><span class="lineno">  773</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> actual_values1 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai1.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a> + i);</div>
<div class="line"><span class="lineno">  774</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> diff = current_values1 - actual_values1;</div>
<div class="line"><span class="lineno">  775</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error1 = diff * diff * <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai1.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a> + i);</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>            <span class="comment">// Plane 2</span></div>
<div class="line"><span class="lineno">  778</span>            <span class="comment">// Compute the bilinear interpolation of the decimated weight grid</span></div>
<div class="line"><span class="lineno">  779</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> current_values2 = <a class="code hl_function" href="#a617a8dec1d2168023a84f5c0fa1c20ca">bilinear_infill_vla</a>(di, dec_weight_quant_uvalue_plane2, i);</div>
<div class="line"><span class="lineno">  780</span> </div>
<div class="line"><span class="lineno">  781</span>            <span class="comment">// Compute the error between the computed value and the ideal weight</span></div>
<div class="line"><span class="lineno">  782</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> actual_values2 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai2.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a> + i);</div>
<div class="line"><span class="lineno">  783</span>            diff = current_values2 - actual_values2;</div>
<div class="line"><span class="lineno">  784</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error2 = diff * diff * <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai2.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a> + i);</div>
<div class="line"><span class="lineno">  785</span> </div>
<div class="line"><span class="lineno">  786</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(error_summav, error1 + error2);</div>
<div class="line"><span class="lineno">  787</span>        }</div>
<div class="line"><span class="lineno">  788</span>    }</div>
<div class="line"><span class="lineno">  789</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> &gt; 1)</div>
<div class="line"><span class="lineno">  790</span>    {</div>
<div class="line"><span class="lineno">  791</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  792</span>        {</div>
<div class="line"><span class="lineno">  793</span>            <span class="comment">// Plane 1</span></div>
<div class="line"><span class="lineno">  794</span>            <span class="comment">// Compute the bilinear interpolation of the decimated weight grid</span></div>
<div class="line"><span class="lineno">  795</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> current_values1 = <a class="code hl_function" href="#a84286bd889620da3be77539ddfdf3b45">bilinear_infill_vla_2</a>(di, dec_weight_quant_uvalue_plane1, i);</div>
<div class="line"><span class="lineno">  796</span> </div>
<div class="line"><span class="lineno">  797</span>            <span class="comment">// Compute the error between the computed value and the ideal weight</span></div>
<div class="line"><span class="lineno">  798</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> actual_values1 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai1.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a> + i);</div>
<div class="line"><span class="lineno">  799</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> diff = current_values1 - actual_values1;</div>
<div class="line"><span class="lineno">  800</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error1 = diff * diff * <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai1.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a> + i);</div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span>            <span class="comment">// Plane 2</span></div>
<div class="line"><span class="lineno">  803</span>            <span class="comment">// Compute the bilinear interpolation of the decimated weight grid</span></div>
<div class="line"><span class="lineno">  804</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> current_values2 = <a class="code hl_function" href="#a84286bd889620da3be77539ddfdf3b45">bilinear_infill_vla_2</a>(di, dec_weight_quant_uvalue_plane2, i);</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>            <span class="comment">// Compute the error between the computed value and the ideal weight</span></div>
<div class="line"><span class="lineno">  807</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> actual_values2 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai2.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a> + i);</div>
<div class="line"><span class="lineno">  808</span>            diff = current_values2 - actual_values2;</div>
<div class="line"><span class="lineno">  809</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error2 = diff * diff * <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai2.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a> + i);</div>
<div class="line"><span class="lineno">  810</span> </div>
<div class="line"><span class="lineno">  811</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(error_summav, error1 + error2);</div>
<div class="line"><span class="lineno">  812</span>        }</div>
<div class="line"><span class="lineno">  813</span>    }</div>
<div class="line"><span class="lineno">  814</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  815</span>    {</div>
<div class="line"><span class="lineno">  816</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  817</span>        {</div>
<div class="line"><span class="lineno">  818</span>            <span class="comment">// Plane 1</span></div>
<div class="line"><span class="lineno">  819</span>            <span class="comment">// Load the weight set directly, without interpolation</span></div>
<div class="line"><span class="lineno">  820</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> current_values1 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(dec_weight_quant_uvalue_plane1 + i);</div>
<div class="line"><span class="lineno">  821</span> </div>
<div class="line"><span class="lineno">  822</span>            <span class="comment">// Compute the error between the computed value and the ideal weight</span></div>
<div class="line"><span class="lineno">  823</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> actual_values1 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai1.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a> + i);</div>
<div class="line"><span class="lineno">  824</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> diff = current_values1 - actual_values1;</div>
<div class="line"><span class="lineno">  825</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error1 = diff * diff * <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai1.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a> + i);</div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>            <span class="comment">// Plane 2</span></div>
<div class="line"><span class="lineno">  828</span>            <span class="comment">// Load the weight set directly, without interpolation</span></div>
<div class="line"><span class="lineno">  829</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> current_values2 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(dec_weight_quant_uvalue_plane2 + i);</div>
<div class="line"><span class="lineno">  830</span> </div>
<div class="line"><span class="lineno">  831</span>            <span class="comment">// Compute the error between the computed value and the ideal weight</span></div>
<div class="line"><span class="lineno">  832</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> actual_values2 = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai2.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a> + i);</div>
<div class="line"><span class="lineno">  833</span>            diff = current_values2 - actual_values2;</div>
<div class="line"><span class="lineno">  834</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error2 = diff * diff * <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(eai2.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a> + i);</div>
<div class="line"><span class="lineno">  835</span> </div>
<div class="line"><span class="lineno">  836</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(error_summav, error1 + error2);</div>
<div class="line"><span class="lineno">  837</span>        }</div>
<div class="line"><span class="lineno">  838</span>    }</div>
<div class="line"><span class="lineno">  839</span> </div>
<div class="line"><span class="lineno">  840</span>    <span class="comment">// Resolve the final scalar accumulator sum</span></div>
<div class="line"><span class="lineno">  841</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(error_summav);</div>
<div class="line"><span class="lineno">  842</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a09a63c4b1e684f7ff9d88e5717b10bfb_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a09a63c4b1e684f7ff9d88e5717b10bfb_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a09a63c4b1e684f7ff9d88e5717b10bfb_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a09a63c4b1e684f7ff9d88e5717b10bfb_cgraph">
<area shape="rect" title="Compute the error of a decimated weight set for 2 planes." alt="" coords="5,121,172,161"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a617a8dec1d2168023a84f5c0fa1c20ca" title="Functions for computing color endpoints and texel weights." alt="" coords="227,5,341,31"/>
<area shape="poly" title=" " alt="" coords="111,118,159,79,219,40,231,34,233,38,221,44,162,84,114,122"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a84286bd889620da3be77539ddfdf3b45" title="Compute the infilled weight for N texel indices in a decimated grid." alt="" coords="220,55,348,80"/>
<area shape="poly" title=" " alt="" coords="142,118,235,83,237,88,144,123"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="236,128,332,153"/>
<area shape="poly" title=" " alt="" coords="172,138,222,138,222,143,172,143"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="252,201,316,227"/>
<area shape="poly" title=" " alt="" coords="144,158,240,195,238,200,142,163"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="239,251,329,276"/>
<area shape="poly" title=" " alt="" coords="115,159,163,197,221,236,235,243,232,247,219,240,159,201,111,163"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="417,31,478,56"/>
<area shape="poly" title=" " alt="" coords="342,24,403,34,402,39,341,29"/>
<area shape="poly" title=" " alt="" coords="348,55,403,47,403,52,349,61"/>
<area shape="poly" title=" " alt="" coords="257,129,251,120,254,110,265,104,284,101,306,105,316,113,312,117,304,110,284,107,267,109,258,113,256,119,261,126"/>
<area shape="poly" title=" " alt="" coords="257,203,251,193,254,183,265,177,284,175,306,178,316,187,312,191,304,183,284,180,267,182,258,187,256,192,261,200"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="396,251,499,276"/>
<area shape="poly" title=" " alt="" coords="330,261,382,261,382,266,330,266"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a09a63c4b1e684f7ff9d88e5717b10bfb_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a09a63c4b1e684f7ff9d88e5717b10bfb_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a09a63c4b1e684f7ff9d88e5717b10bfb_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a09a63c4b1e684f7ff9d88e5717b10bfb_icgraph">
<area shape="rect" title="Compute the error of a decimated weight set for 2 planes." alt="" coords="1239,5,1405,45"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a3e9812129972c73914841ecc0f6a7e71" name="a3e9812129972c73914841ecc0f6a7e71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e9812129972c73914841ecc0f6a7e71">&#9670;&#160;</a></span>compute_ideal_colors_and_weights_1_comp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compute_ideal_colors_and_weights_1_comp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ei</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>component</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the ideal endpoints and weights for 1 color component. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ei</td><td>The computed ideal endpoints and weights. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">component</td><td>The color component to compute. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00107">107</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>  {</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  114</span>    ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a6815660d1584ae9e1fc4faebddf91658">partition_count</a> = partition_count;</div>
<div class="line"><span class="lineno">  115</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>;</div>
<div class="line"><span class="lineno">  118</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordtype">float</span> error_weight;</div>
<div class="line"><span class="lineno">  121</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vr = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>    assert(component &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#acfaa28ad6768cb0ebe7f535fc8a9e6df">BLOCK_MAX_COMPONENTS</a>);</div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">switch</span> (component)</div>
<div class="line"><span class="lineno">  125</span>    {</div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">  127</span>        error_weight = blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;();</div>
<div class="line"><span class="lineno">  128</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>;</div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  130</span>    <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">  131</span>        error_weight = blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;();</div>
<div class="line"><span class="lineno">  132</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>;</div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  135</span>        error_weight = blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;();</div>
<div class="line"><span class="lineno">  136</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  137</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  138</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  139</span>        assert(component == 3);</div>
<div class="line"><span class="lineno">  140</span>        error_weight = blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;();</div>
<div class="line"><span class="lineno">  141</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a>;</div>
<div class="line"><span class="lineno">  142</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  143</span>    }</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>    <a class="code hl_struct" href="structvmask4.html">vmask4</a> sep_mask = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint4::lane_id</a>() == <a class="code hl_struct" href="structvint4.html">vint4</a>(component);</div>
<div class="line"><span class="lineno">  146</span>    <span class="keywordtype">bool</span> is_constant_wes { <span class="keyword">true</span> };</div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordtype">float</span> partition0_len_sq { 0.0f };</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  150</span>    {</div>
<div class="line"><span class="lineno">  151</span>        <span class="keywordtype">float</span> lowvalue { 1e10f };</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordtype">float</span> highvalue { -1e10f };</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[i];</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_texel_count; j++)</div>
<div class="line"><span class="lineno">  156</span>        {</div>
<div class="line"><span class="lineno">  157</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tix = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[i][j];</div>
<div class="line"><span class="lineno">  158</span>            <span class="keywordtype">float</span> value = data_vr[tix];</div>
<div class="line"><span class="lineno">  159</span>            lowvalue = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(value, lowvalue);</div>
<div class="line"><span class="lineno">  160</span>            highvalue = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(value, highvalue);</div>
<div class="line"><span class="lineno">  161</span>        }</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">if</span> (highvalue &lt;= lowvalue)</div>
<div class="line"><span class="lineno">  164</span>        {</div>
<div class="line"><span class="lineno">  165</span>            lowvalue = 0.0f;</div>
<div class="line"><span class="lineno">  166</span>            highvalue = 1e-7f;</div>
<div class="line"><span class="lineno">  167</span>        }</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordtype">float</span> length = highvalue - lowvalue;</div>
<div class="line"><span class="lineno">  170</span>        <span class="keywordtype">float</span> length_squared = length * length;</div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordtype">float</span> scale = 1.0f / length;</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>        <span class="keywordflow">if</span> (i == 0)</div>
<div class="line"><span class="lineno">  174</span>        {</div>
<div class="line"><span class="lineno">  175</span>            partition0_len_sq = length_squared;</div>
<div class="line"><span class="lineno">  176</span>        }</div>
<div class="line"><span class="lineno">  177</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  178</span>        {</div>
<div class="line"><span class="lineno">  179</span>            is_constant_wes = is_constant_wes &amp;&amp; length_squared == partition0_len_sq;</div>
<div class="line"><span class="lineno">  180</span>        }</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_texel_count; j++)</div>
<div class="line"><span class="lineno">  183</span>        {</div>
<div class="line"><span class="lineno">  184</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tix = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[i][j];</div>
<div class="line"><span class="lineno">  185</span>            <span class="keywordtype">float</span> value = (data_vr[tix] - lowvalue) * scale;</div>
<div class="line"><span class="lineno">  186</span>            value = <a class="code hl_function" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e">astc::clamp1f</a>(value);</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[tix] = value;</div>
<div class="line"><span class="lineno">  189</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[tix] = length_squared * error_weight;</div>
<div class="line"><span class="lineno">  190</span>            assert(!<a class="code hl_function" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b">astc::isnan</a>(ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[tix]));</div>
<div class="line"><span class="lineno">  191</span>        }</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(blk.<a class="code hl_variable" href="structimage__block.html#a4222fc6e5a97194fd342700adff483db">data_min</a>, <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(lowvalue), sep_mask);</div>
<div class="line"><span class="lineno">  194</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(blk.<a class="code hl_variable" href="structimage__block.html#af1b03600b295cf8dc02a333db04871fc">data_max</a>, <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(highvalue), sep_mask);</div>
<div class="line"><span class="lineno">  195</span>    }</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>    <span class="comment">// Zero initialize any SIMD over-fetch</span></div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count_simd = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37">round_up_to_simd_multiple_vla</a>(texel_count);</div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = texel_count; i &lt; texel_count_simd; i++)</div>
<div class="line"><span class="lineno">  200</span>    {</div>
<div class="line"><span class="lineno">  201</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[i] = 0.0f;</div>
<div class="line"><span class="lineno">  202</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[i] = 0.0f;</div>
<div class="line"><span class="lineno">  203</span>    }</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a351e13ebfb998f06c4134c405cb5d0ec">is_constant_weight_error_scale</a> = is_constant_wes;</div>
<div class="line"><span class="lineno">  206</span>}</div>
<div class="ttc" id="aastcenc__internal_8h_html_acfaa28ad6768cb0ebe7f535fc8a9e6df"><div class="ttname"><a href="astcenc__internal_8h.html#acfaa28ad6768cb0ebe7f535fc8a9e6df">BLOCK_MAX_COMPONENTS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_COMPONENTS</div><div class="ttdoc">The maximum number of components a block can support.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00075">astcenc_internal.h:75</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_ae36622d837079b4899b971731c2dda37"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37">round_up_to_simd_multiple_vla</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE unsigned int round_up_to_simd_multiple_vla(unsigned int count)</div><div class="ttdoc">Round a count up to the largest multiple of the SIMD width.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00204">astcenc_vecmathlib.h:204</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a844ab5b69b84569f033be33bf5fb9fbc"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 select(vint8 a, vint8 b, vmask8 cond)</div><div class="ttdoc">Return lanes from b if cond is set, else a.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00602">astcenc_vecmathlib_avx2_8.h:602</a></div></div>
<div class="ttc" id="anamespaceastc_html_a83a55552d03399cdff6cf2fed8312c9f"><div class="ttname"><a href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a></div><div class="ttdeci">static T max(T p, T q)</div><div class="ttdoc">Return the maximum of two values.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00210">astcenc_mathlib.h:210</a></div></div>
<div class="ttc" id="anamespaceastc_html_aa80ae2eee0ffb5b754bdf0bb08b8759b"><div class="ttname"><a href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b">astc::isnan</a></div><div class="ttdeci">static bool isnan(float v)</div><div class="ttdoc">Test if a float value is a nan.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00143">astcenc_mathlib.h:143</a></div></div>
<div class="ttc" id="anamespaceastc_html_ac60307af42a98d70a956170894e29e9e"><div class="ttname"><a href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e">astc::clamp1f</a></div><div class="ttdeci">static float clamp1f(float v)</div><div class="ttdoc">Clamp a float value between 0.0f and 1.0f.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00280">astcenc_mathlib.h:280</a></div></div>
<div class="ttc" id="anamespaceastc_html_af78c0d31374aa9923633a3a2abf8d738"><div class="ttname"><a href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a></div><div class="ttdeci">static T min(T p, T q)</div><div class="ttdoc">Return the minimum of two values.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00159">astcenc_mathlib.h:159</a></div></div>
<div class="ttc" id="astructendpoints__and__weights_html_a351e13ebfb998f06c4134c405cb5d0ec"><div class="ttname"><a href="structendpoints__and__weights.html#a351e13ebfb998f06c4134c405cb5d0ec">endpoints_and_weights::is_constant_weight_error_scale</a></div><div class="ttdeci">bool is_constant_weight_error_scale</div><div class="ttdoc">True if all active values in weight_error_scale are the same.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00902">astcenc_internal.h:902</a></div></div>
<div class="ttc" id="astructendpoints__and__weights_html_a9b5a8f6a4d2bdbf5993eeba5593228c4"><div class="ttname"><a href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">endpoints_and_weights::ep</a></div><div class="ttdeci">endpoints ep</div><div class="ttdoc">The color endpoints.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00905">astcenc_internal.h:905</a></div></div>
<div class="ttc" id="astructendpoints_html_a2a084800ec101a03de2b8deb0d926263"><div class="ttname"><a href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpoints::endpt0</a></div><div class="ttdeci">vfloat4 endpt0[BLOCK_MAX_PARTITIONS]</div><div class="ttdoc">The colors for endpoint 0.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00890">astcenc_internal.h:890</a></div></div>
<div class="ttc" id="astructendpoints_html_a6815660d1584ae9e1fc4faebddf91658"><div class="ttname"><a href="structendpoints.html#a6815660d1584ae9e1fc4faebddf91658">endpoints::partition_count</a></div><div class="ttdeci">unsigned int partition_count</div><div class="ttdoc">The number of partition endpoints stored.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00887">astcenc_internal.h:887</a></div></div>
<div class="ttc" id="astructendpoints_html_a89660f637b681eaea32e7db6b9d9def2"><div class="ttname"><a href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpoints::endpt1</a></div><div class="ttdeci">vfloat4 endpt1[BLOCK_MAX_PARTITIONS]</div><div class="ttdoc">The colors for endpoint 1.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00893">astcenc_internal.h:893</a></div></div>
<div class="ttc" id="astructimage__block_html_a05174b1db0b9131ad61fc49f3aa74676"><div class="ttname"><a href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">image_block::texel_count</a></div><div class="ttdeci">uint8_t texel_count</div><div class="ttdoc">The number of texels in the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00759">astcenc_internal.h:759</a></div></div>
<div class="ttc" id="astructimage__block_html_a298273079b0de525a0c12ced8bf98d13"><div class="ttname"><a href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">image_block::data_b</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_b[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the blue color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00753">astcenc_internal.h:753</a></div></div>
<div class="ttc" id="astructimage__block_html_a4222fc6e5a97194fd342700adff483db"><div class="ttname"><a href="structimage__block.html#a4222fc6e5a97194fd342700adff483db">image_block::data_min</a></div><div class="ttdeci">vfloat4 data_min</div><div class="ttdoc">The min component value of all texels in the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00765">astcenc_internal.h:765</a></div></div>
<div class="ttc" id="astructimage__block_html_a602c8c88dc1ceef33e833f6d6cbc09ea"><div class="ttname"><a href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">image_block::data_a</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_a[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the alpha color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00756">astcenc_internal.h:756</a></div></div>
<div class="ttc" id="astructimage__block_html_a6fd749c93e25e5e96748a10387c24a77"><div class="ttname"><a href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">image_block::channel_weight</a></div><div class="ttdeci">vfloat4 channel_weight</div><div class="ttdoc">The relative error significance of the color channels.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00774">astcenc_internal.h:774</a></div></div>
<div class="ttc" id="astructimage__block_html_abc5bc97aed6bb644726f952818ec74b5"><div class="ttname"><a href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">image_block::data_g</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_g[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the green color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00750">astcenc_internal.h:750</a></div></div>
<div class="ttc" id="astructimage__block_html_acd4ea54654959c7b325efe9d02aaeacc"><div class="ttname"><a href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">image_block::data_r</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_r[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the red color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00747">astcenc_internal.h:747</a></div></div>
<div class="ttc" id="astructimage__block_html_af1b03600b295cf8dc02a333db04871fc"><div class="ttname"><a href="structimage__block.html#af1b03600b295cf8dc02a333db04871fc">image_block::data_max</a></div><div class="ttdeci">vfloat4 data_max</div><div class="ttdoc">The max component value of all texels in the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00771">astcenc_internal.h:771</a></div></div>
<div class="ttc" id="astructpartition__info_html_a1ffb0fdd4d560f536d6118f032fba4f3"><div class="ttname"><a href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_info::partition_count</a></div><div class="ttdeci">uint16_t partition_count</div><div class="ttdoc">The number of partitions in this partitioning.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00315">astcenc_internal.h:315</a></div></div>
<div class="ttc" id="astructpartition__info_html_a92b324c921407ee30e6052426e00e0f6"><div class="ttname"><a href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_info::partition_texel_count</a></div><div class="ttdeci">uint8_t partition_texel_count[BLOCK_MAX_PARTITIONS]</div><div class="ttdoc">The number of texels in each partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00326">astcenc_internal.h:326</a></div></div>
<div class="ttc" id="astructpartition__info_html_af0987713fff05a82c3230d9400c6e1e7"><div class="ttname"><a href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">partition_info::texels_of_partition</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t texels_of_partition[BLOCK_MAX_PARTITIONS][BLOCK_MAX_TEXELS]</div><div class="ttdoc">The list of texels in each partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00332">astcenc_internal.h:332</a></div></div>
<div class="ttc" id="astructvfloat4_html_a04462a7815432c6bc3ce1b5e5d11e4fc"><div class="ttname"><a href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">vfloat4::lane</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float lane() const</div><div class="ttdoc">Get the scalar value of a single lane.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00100">astcenc_vecmathlib_neon_4.h:100</a></div></div>
<div class="ttc" id="astructvint4_html_a21e3d111e37da1aaaeb5ba21a831c863"><div class="ttname"><a href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint4::lane_id</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vint4 lane_id()</div><div class="ttdoc">Factory that returns a vector containing the lane IDs.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00294">astcenc_vecmathlib_neon_4.h:294</a></div></div>
<div class="ttc" id="astructvmask4_html"><div class="ttname"><a href="structvmask4.html">vmask4</a></div><div class="ttdoc">Data type for 4-wide control plane masks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00313">astcenc_vecmathlib_neon_4.h:314</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a3e9812129972c73914841ecc0f6a7e71_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a3e9812129972c73914841ecc0f6a7e71_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a3e9812129972c73914841ecc0f6a7e71_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a3e9812129972c73914841ecc0f6a7e71_cgraph">
<area shape="rect" title="Compute the ideal endpoints and weights for 1 color component." alt="" coords="5,171,160,211"/>
<area shape="rect" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e" title="Clamp a float value between 0.0f and 1.0f." alt="" coords="259,5,359,31"/>
<area shape="poly" title=" " alt="" coords="93,169,137,105,169,69,207,40,245,24,247,29,209,44,172,73,141,108,97,172"/>
<area shape="rect" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b" title="Test if a float value is a nan." alt="" coords="266,55,353,80"/>
<area shape="poly" title=" " alt="" coords="101,169,147,128,176,107,207,89,252,74,253,79,209,94,179,112,150,133,105,173"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="264,104,355,129"/>
<area shape="poly" title=" " alt="" coords="128,169,207,138,250,126,251,131,209,143,130,174"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="261,153,358,179"/>
<area shape="poly" title=" " alt="" coords="160,180,247,170,247,176,161,185"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="269,203,349,228"/>
<area shape="poly" title=" " alt="" coords="161,197,256,207,255,212,160,202"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="271,252,347,277"/>
<area shape="poly" title=" " alt="" coords="133,209,209,237,259,251,257,256,207,242,131,214"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="208,301,411,327"/>
<area shape="poly" title=" " alt="" coords="106,210,151,249,209,286,230,295,228,300,207,291,148,253,102,214"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="281,351,338,376"/>
<area shape="poly" title=" " alt="" coords="97,210,141,273,173,307,209,336,238,349,268,356,266,361,236,354,207,340,169,311,137,276,93,213"/>
<area shape="rect" href="namespaceastc.html#a8f8b2ad23b04a389f6785bc80b61349b" title="Clamp a value value between mn and mx." alt="" coords="459,5,549,31"/>
<area shape="poly" title=" " alt="" coords="360,15,445,15,445,21,360,21"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="463,153,545,179"/>
<area shape="poly" title=" " alt="" coords="358,163,449,163,449,169,358,169"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a3e9812129972c73914841ecc0f6a7e71_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a3e9812129972c73914841ecc0f6a7e71_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a3e9812129972c73914841ecc0f6a7e71_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a3e9812129972c73914841ecc0f6a7e71_icgraph">
<area shape="rect" title="Compute the ideal endpoints and weights for 1 color component." alt="" coords="1440,5,1595,45"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a52d3985007cfc83025661e0347bc00cc" title="Compute ideal endpoint colors and weights for 2 planes of weights." alt="" coords="1239,5,1392,45"/>
<area shape="poly" title=" " alt="" coords="1426,28,1393,28,1393,23,1426,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="afa8cab65d4b6f0cbece52eec38aed523" name="afa8cab65d4b6f0cbece52eec38aed523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa8cab65d4b6f0cbece52eec38aed523">&#9670;&#160;</a></span>compute_ideal_colors_and_weights_1plane()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_ideal_colors_and_weights_1plane </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ei</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute ideal endpoint colors and weights for 1 plane of weights. </p>
<p>The ideal endpoints define a color line for the partition. For each texel the ideal weight defines an exact position on the partition color line. We can then use these to assess the error introduced by removing and quantizing the weight grid.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ei</td><td>The endpoint and weight values. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00612">612</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  616</span>  {</div>
<div class="line"><span class="lineno">  617</span>    <span class="keywordtype">bool</span> uses_alpha = !blk.<a class="code hl_function" href="structimage__block.html#ae3c0735355d378591db6cb7a011e381a">is_constant_channel</a>(3);</div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span>    <span class="keywordflow">if</span> (uses_alpha)</div>
<div class="line"><span class="lineno">  620</span>    {</div>
<div class="line"><span class="lineno">  621</span>        <a class="code hl_function" href="#a08aebec57ada3441207dce6a7a02797e">compute_ideal_colors_and_weights_4_comp</a>(blk, pi, ei);</div>
<div class="line"><span class="lineno">  622</span>    }</div>
<div class="line"><span class="lineno">  623</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  624</span>    {</div>
<div class="line"><span class="lineno">  625</span>        <a class="code hl_function" href="#a7ec20ff2556f6357cc0754c13e841262">compute_ideal_colors_and_weights_3_comp</a>(blk, pi, ei, 3);</div>
<div class="line"><span class="lineno">  626</span>    }</div>
<div class="line"><span class="lineno">  627</span>}</div>
<div class="ttc" id="aastcenc__ideal__endpoints__and__weights_8cpp_html_a08aebec57ada3441207dce6a7a02797e"><div class="ttname"><a href="#a08aebec57ada3441207dce6a7a02797e">compute_ideal_colors_and_weights_4_comp</a></div><div class="ttdeci">static void compute_ideal_colors_and_weights_4_comp(const image_block &amp;blk, const partition_info &amp;pi, endpoints_and_weights &amp;ei)</div><div class="ttdoc">Compute the ideal endpoints and weights for 4 color components.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00520">astcenc_ideal_endpoints_and_weights.cpp:520</a></div></div>
<div class="ttc" id="aastcenc__ideal__endpoints__and__weights_8cpp_html_a7ec20ff2556f6357cc0754c13e841262"><div class="ttname"><a href="#a7ec20ff2556f6357cc0754c13e841262">compute_ideal_colors_and_weights_3_comp</a></div><div class="ttdeci">static void compute_ideal_colors_and_weights_3_comp(const image_block &amp;blk, const partition_info &amp;pi, endpoints_and_weights &amp;ei, unsigned int omitted_component)</div><div class="ttdoc">Compute the ideal endpoints and weights for 3 color components.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00354">astcenc_ideal_endpoints_and_weights.cpp:354</a></div></div>
<div class="ttc" id="astructimage__block_html_ae3c0735355d378591db6cb7a011e381a"><div class="ttname"><a href="structimage__block.html#ae3c0735355d378591db6cb7a011e381a">image_block::is_constant_channel</a></div><div class="ttdeci">bool is_constant_channel(int channel) const</div><div class="ttdoc">Test if a single color channel is constant across the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00847">astcenc_internal.h:847</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_afa8cab65d4b6f0cbece52eec38aed523_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_afa8cab65d4b6f0cbece52eec38aed523_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_afa8cab65d4b6f0cbece52eec38aed523_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_afa8cab65d4b6f0cbece52eec38aed523_cgraph">
<area shape="rect" title="Compute ideal endpoint colors and weights for 1 plane of weights." alt="" coords="5,523,153,563"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a7ec20ff2556f6357cc0754c13e841262" title="Compute the ideal endpoints and weights for 3 color components." alt="" coords="209,523,364,563"/>
<area shape="poly" title=" " alt="" coords="153,540,196,540,196,545,153,545"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a08aebec57ada3441207dce6a7a02797e" title="Compute the ideal endpoints and weights for 4 color components." alt="" coords="209,927,364,967"/>
<area shape="poly" title=" " alt="" coords="93,561,271,913,267,916,88,564"/>
<area shape="rect" href="structimage__block.html#ae3c0735355d378591db6cb7a011e381a" title="Test if a single color channel is constant across the block." alt="" coords="201,217,372,257"/>
<area shape="poly" title=" " alt="" coords="92,521,262,267,267,270,96,524"/>
<area shape="rect" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e" title="Clamp a float value between 0.0f and 1.0f." alt="" coords="471,1070,571,1095"/>
<area shape="poly" title=" " alt="" coords="295,562,360,838,398,986,413,1035,422,1057,439,1069,459,1076,457,1081,436,1073,418,1060,408,1037,393,987,355,839,290,563"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a33f923c5a839af4f1d369a391183c384" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="441,440,602,480"/>
<area shape="poly" title=" " alt="" coords="340,520,419,491,445,482,447,487,421,496,341,525"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="950,862,1014,887"/>
<area shape="poly" title=" " alt="" coords="330,560,421,597,452,605,480,607,530,606,554,607,577,612,600,623,625,643,645,673,652,703,651,733,646,764,642,793,642,821,651,848,672,873,702,891,736,903,771,909,808,910,878,902,936,888,938,893,879,908,808,916,771,915,734,909,700,896,669,877,646,850,637,822,637,793,641,763,646,733,647,703,640,675,621,647,598,628,575,617,553,612,530,611,479,613,451,610,419,602,328,565"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="937,466,1027,491"/>
<area shape="poly" title=" " alt="" coords="294,521,312,486,339,442,374,398,419,362,453,343,483,331,539,322,598,322,670,320,732,310,783,298,807,296,832,298,858,305,887,320,909,342,918,366,923,391,936,420,962,454,957,457,931,423,918,393,912,367,904,345,884,325,856,310,831,303,807,301,784,303,733,315,671,325,598,327,539,327,485,337,455,348,421,366,378,402,343,445,316,489,299,524"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="1085,466,1175,491"/>
<area shape="poly" title=" " alt="" coords="290,522,310,451,340,356,377,267,397,233,418,211,444,198,474,189,549,182,637,186,731,201,824,224,910,253,981,285,1032,321,1052,345,1060,368,1067,392,1081,420,1108,454,1104,457,1076,423,1062,394,1055,370,1047,348,1029,325,979,290,908,257,823,229,730,206,637,192,549,187,475,195,446,203,422,215,402,236,382,269,345,358,315,452,296,523"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07" title="Factory that returns a 3 component vfloat4." alt="" coords="953,334,1011,359"/>
<area shape="poly" title=" " alt="" coords="291,522,306,479,332,424,369,369,392,344,419,323,460,304,515,289,579,279,648,274,783,274,841,279,886,288,924,304,956,324,953,328,921,308,885,293,840,285,782,279,648,279,579,285,516,295,462,309,421,328,396,348,373,372,337,427,311,481,296,523"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="733,686,823,711"/>
<area shape="poly" title=" " alt="" coords="364,538,424,542,491,551,559,569,624,598,641,611,650,626,658,641,672,655,721,680,718,685,669,659,654,644,645,629,637,615,621,602,558,574,490,557,423,547,364,544"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="441,376,602,416"/>
<area shape="poly" title=" " alt="" coords="304,520,353,473,385,448,419,426,432,419,434,424,421,430,388,452,357,477,308,524"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477" title="Return the dot product for the bottom 3 lanes, returning scalar." alt="" coords="491,123,552,149"/>
<area shape="poly" title=" " alt="" coords="291,522,353,327,390,223,405,186,418,166,446,148,476,138,478,143,448,153,422,170,410,189,394,225,358,328,296,523"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e" title="Return the horizontal sum of RGB vector lanes as a scalar." alt="" coords="733,123,823,149"/>
<area shape="poly" title=" " alt="" coords="292,522,369,269,378,221,379,180,382,162,388,144,400,127,418,110,457,88,499,77,543,73,588,75,671,92,738,116,736,121,670,98,587,80,543,78,500,82,459,93,422,114,404,130,393,146,387,163,385,181,383,222,375,270,297,523"/>
<area shape="rect" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b" title="Test if a float value is a nan." alt="" coords="478,706,565,731"/>
<area shape="poly" title=" " alt="" coords="302,561,349,627,382,662,421,692,443,702,466,709,464,714,441,707,419,697,379,666,345,630,298,564"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="481,755,561,781"/>
<area shape="poly" title=" " alt="" coords="298,562,314,601,341,650,377,700,398,722,421,742,444,753,468,760,467,766,442,758,419,746,394,726,372,703,336,653,310,603,293,564"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="483,805,559,830"/>
<area shape="poly" title=" " alt="" coords="295,562,309,610,334,672,371,737,394,766,422,791,445,804,470,811,469,816,443,809,418,795,390,770,366,740,329,674,304,611,290,564"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4" title="Normalize a vector, returning safe if len is zero." alt="" coords="467,1021,576,1046"/>
<area shape="poly" title=" " alt="" coords="295,562,353,804,391,936,408,982,422,1006,437,1017,455,1024,453,1029,434,1022,418,1010,403,984,386,937,348,806,290,563"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="420,657,623,682"/>
<area shape="poly" title=" " alt="" coords="313,561,361,598,421,635,458,650,456,655,419,640,358,602,310,565"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08" title="Factory that returns a unit length 3 component vfloat4." alt="" coords="496,505,547,530"/>
<area shape="poly" title=" " alt="" coords="364,532,482,519,483,524,365,537"/>
<area shape="rect" href="namespaceastc.html#a8f8b2ad23b04a389f6785bc80b61349b" title="Clamp a value value between mn and mx." alt="" coords="733,1102,823,1127"/>
<area shape="poly" title=" " alt="" coords="572,1086,720,1105,719,1110,571,1091"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a83cf48552a7e8225358c7c43df24fd96" title="Compute the average RGBA color of each partition." alt="" coords="671,735,885,761"/>
<area shape="poly" title=" " alt="" coords="604,475,625,491,644,522,652,552,652,581,648,610,644,639,645,667,653,695,673,722,676,726,673,729,669,726,648,697,639,668,639,639,643,610,646,581,647,552,639,524,621,495,601,480"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="758,837,798,862"/>
<area shape="poly" title=" " alt="" coords="604,475,625,491,648,527,658,562,659,596,655,629,650,663,649,698,655,734,673,772,688,791,707,808,747,833,744,838,704,812,685,795,668,775,650,735,644,698,645,663,650,629,654,596,653,563,643,530,621,495,600,479"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="751,485,805,510"/>
<area shape="poly" title=" " alt="" coords="603,469,738,489,737,494,602,474"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="749,534,807,559"/>
<area shape="poly" title=" " alt="" coords="591,478,624,491,648,506,672,520,736,538,735,543,670,525,645,511,621,496,589,483"/>
<area shape="poly" title=" " alt="" coords="604,477,624,491,637,507,644,524,647,557,651,588,659,601,672,614,700,631,726,642,751,649,776,650,801,647,826,640,884,614,903,597,925,567,965,502,969,505,930,570,907,600,887,618,828,645,802,652,776,655,751,654,725,647,698,636,669,618,654,605,646,589,642,558,639,525,633,510,621,495,601,481"/>
<area shape="poly" title=" " alt="" coords="603,478,624,491,641,512,648,534,655,553,672,570,730,597,756,605,781,609,806,608,831,601,857,589,884,570,903,549,913,526,915,503,913,478,910,426,916,398,931,370,939,363,943,366,935,374,921,400,915,426,918,478,920,503,918,528,908,552,887,574,859,593,833,606,807,613,781,614,755,611,728,602,669,574,650,556,643,536,636,515,621,495,600,482"/>
<area shape="poly" title=" " alt="" coords="604,476,625,491,641,514,648,536,649,580,650,623,657,644,673,665,694,680,720,690,718,695,692,685,669,669,652,646,645,624,644,580,643,537,636,516,621,495,601,480"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="934,603,1030,629"/>
<area shape="poly" title=" " alt="" coords="860,733,884,722,909,704,930,682,964,639,968,642,934,685,912,708,887,726,862,738"/>
<area shape="poly" title=" " alt="" coords="801,759,950,852,947,857,798,763"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="933,383,1031,409"/>
<area shape="poly" title=" " alt="" coords="870,733,883,722,907,690,919,660,921,629,919,598,914,531,918,494,931,453,955,418,960,421,936,456,923,495,919,531,925,598,927,629,924,661,912,693,887,726,873,737"/>
<area shape="poly" title=" " alt="" coords="957,604,952,595,955,585,965,579,982,577,1002,580,1011,589,1007,592,1000,585,982,582,967,584,959,589,957,594,962,602"/>
<area shape="poly" title=" " alt="" coords="957,863,952,854,955,844,965,838,982,835,1002,839,1011,847,1007,851,1000,844,982,841,967,843,959,847,957,853,962,861"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="1089,383,1171,409"/>
<area shape="poly" title=" " alt="" coords="1031,393,1075,393,1075,399,1031,399"/>
<area shape="poly" title=" " alt="" coords="799,849,936,866,936,872,798,854"/>
<area shape="poly" title=" " alt="" coords="1027,476,1071,476,1071,481,1027,481"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="1079,593,1181,618"/>
<area shape="poly" title=" " alt="" coords="1000,490,1106,582,1102,586,997,494"/>
<area shape="poly" title=" " alt="" coords="823,688,918,667,1030,639,1084,620,1085,625,1031,644,920,673,824,693"/>
<area shape="poly" title=" " alt="" coords="604,410,625,426,653,470,664,513,663,555,657,596,649,637,646,680,652,725,673,772,688,792,707,808,747,833,744,838,704,813,684,795,668,775,647,726,641,680,644,637,651,595,658,554,658,514,648,472,621,430,601,414"/>
<area shape="poly" title=" " alt="" coords="597,414,624,426,648,445,672,463,705,477,738,486,736,492,703,482,669,468,645,449,621,430,595,419"/>
<area shape="poly" title=" " alt="" coords="604,413,624,426,636,438,643,451,649,475,655,499,661,510,672,520,703,536,736,543,735,548,701,541,669,525,657,513,650,501,644,477,638,453,631,441,621,430,601,417"/>
<area shape="poly" title=" " alt="" coords="603,408,924,466,923,471,602,413"/>
<area shape="poly" title=" " alt="" coords="604,411,624,426,639,444,648,461,655,495,659,531,664,550,673,571,714,629,755,674,751,678,709,632,668,573,659,552,653,532,650,496,643,463,635,447,621,430,601,416"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#ac5429bc77cf39a7dba332af8fb14e093" title="Functions for finding dominant direction of a set of colors." alt="" coords="674,383,882,409"/>
<area shape="poly" title=" " alt="" coords="602,393,660,393,660,399,602,399"/>
<area shape="rect" href="structimage__block.html#a682b1ada02acb8369d6f6f30378b260e" title="Get an RGB texel value from the data." alt="" coords="709,334,847,359"/>
<area shape="poly" title=" " alt="" coords="602,378,698,359,699,364,603,383"/>
<area shape="poly" title=" " alt="" coords="803,407,844,434,887,471,936,533,970,590,965,593,931,536,883,475,841,438,800,411"/>
<area shape="poly" title=" " alt="" coords="808,407,849,433,870,451,888,472,909,533,935,641,978,848,973,849,930,642,903,534,883,475,866,454,846,437,805,411"/>
<area shape="poly" title=" " alt="" coords="882,393,920,393,920,399,882,399"/>
<area shape="poly" title=" " alt="" coords="829,406,886,425,949,457,947,462,884,430,828,411"/>
<area shape="poly" title=" " alt="" coords="837,381,885,369,938,355,940,361,886,375,838,386"/>
<area shape="poly" title=" " alt="" coords="847,344,939,344,939,349,847,349"/>
<area shape="poly" title=" " alt="" coords="552,133,719,133,719,139,552,139"/>
<area shape="rect" href="structvint4.html#a01e3f7debf73dc6c757fa36d585c9d17" title="Get the scalar from a single lane." alt="" coords="942,123,1022,149"/>
<area shape="poly" title=" " alt="" coords="823,133,928,133,928,139,823,139"/>
<area shape="poly" title=" " alt="" coords="576,1024,599,1017,621,1006,637,991,646,975,655,958,669,938,708,900,746,868,750,873,712,904,673,942,659,961,651,978,642,994,624,1010,601,1022,577,1029"/>
<area shape="poly" title=" " alt="" coords="576,1031,640,1029,718,1022,802,1009,885,987,931,971,968,957,999,935,1028,898,1051,857,1063,818,1067,783,1066,747,1062,672,1065,629,1076,580,1093,538,1112,502,1116,504,1098,540,1081,582,1070,630,1067,672,1071,747,1072,783,1068,820,1056,859,1033,901,1002,939,970,961,933,976,886,992,803,1014,719,1028,641,1034,577,1037"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a46b31b19ff13c14adb023db4b5df8e52" title="Return the sqrt of the lanes in the vector." alt="" coords="756,1053,800,1078"/>
<area shape="poly" title=" " alt="" coords="577,1037,742,1058,742,1064,576,1043"/>
<area shape="poly" title=" " alt="" coords="308,965,356,1011,387,1036,421,1056,459,1070,457,1075,419,1061,384,1040,353,1015,304,969"/>
<area shape="poly" title=" " alt="" coords="294,966,306,1016,330,1080,346,1113,367,1145,392,1173,421,1195,448,1209,472,1216,494,1218,516,1216,564,1205,622,1195,701,1191,765,1191,794,1187,822,1178,852,1162,884,1138,908,1112,928,1082,943,1050,955,1016,970,952,977,901,982,901,976,953,960,1018,948,1052,932,1085,912,1115,887,1142,855,1167,824,1183,795,1192,765,1196,701,1197,623,1200,565,1211,517,1221,494,1223,471,1221,446,1214,419,1200,388,1176,363,1148,342,1116,325,1082,301,1017,289,967"/>
<area shape="poly" title=" " alt="" coords="364,939,435,933,511,922,578,906,603,896,621,885,636,866,644,847,645,806,645,764,653,743,669,722,692,707,719,699,720,704,695,712,672,726,658,745,651,765,650,806,649,848,641,869,624,889,606,901,580,911,512,927,436,938,364,945"/>
<area shape="poly" title=" " alt="" coords="331,924,419,889,451,882,480,879,532,880,555,879,577,873,599,862,621,841,633,822,643,799,655,740,659,669,659,591,656,438,659,373,668,322,687,274,711,229,756,158,761,161,715,232,692,276,673,323,664,373,662,438,665,591,665,669,660,740,648,800,638,825,625,844,602,866,579,878,556,884,532,885,480,885,452,887,421,895,333,929"/>
<area shape="poly" title=" " alt="" coords="293,925,310,886,336,836,372,785,394,762,419,742,440,730,464,723,465,728,442,735,421,746,398,766,377,789,341,839,315,888,298,927"/>
<area shape="poly" title=" " alt="" coords="298,925,345,859,379,822,419,791,442,780,467,772,469,777,444,785,421,796,382,826,349,862,302,928"/>
<area shape="poly" title=" " alt="" coords="309,924,357,886,419,847,469,827,471,832,421,852,360,890,312,929"/>
<area shape="poly" title=" " alt="" coords="328,964,421,1005,454,1016,453,1021,419,1010,325,969"/>
<area shape="poly" title=" " alt="" coords="290,926,304,878,329,815,366,749,391,719,418,693,428,686,431,690,422,697,394,722,371,752,334,817,309,879,295,927"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a00407861c2f0e767b64b1cb1bb7a27b6" title="Compute averages and dominant directions for each partition in a 4 component texture." alt="" coords="441,956,602,996"/>
<area shape="poly" title=" " alt="" coords="365,954,427,962,427,967,364,959"/>
<area shape="rect" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9" title="Get an RGBA texel value from the data." alt="" coords="713,951,843,977"/>
<area shape="poly" title=" " alt="" coords="296,966,311,1008,336,1062,372,1114,395,1137,421,1155,475,1180,500,1187,523,1190,546,1188,570,1182,621,1155,635,1143,642,1131,649,1104,653,1073,658,1056,669,1040,702,1007,738,982,741,986,706,1011,673,1043,663,1059,658,1074,654,1105,647,1133,639,1147,624,1159,571,1187,547,1193,523,1195,498,1192,473,1185,419,1160,392,1141,368,1118,331,1064,306,1010,291,968"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="751,1271,805,1297"/>
<area shape="poly" title=" " alt="" coords="293,967,302,1025,323,1103,340,1144,362,1184,389,1220,422,1250,459,1272,501,1287,544,1296,588,1300,671,1299,736,1290,737,1295,671,1304,588,1306,543,1301,499,1292,457,1277,418,1254,385,1224,357,1187,335,1147,318,1105,297,1026,287,967"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a5177e2c50f2c01a5610b2844ee3a071d" title=" " alt="" coords="496,1119,547,1145"/>
<area shape="poly" title=" " alt="" coords="301,966,320,997,347,1035,381,1074,421,1106,452,1119,483,1126,482,1131,450,1124,419,1110,378,1078,343,1039,316,1000,297,968"/>
<area shape="poly" title=" " alt="" coords="596,954,621,935,635,916,641,897,643,858,646,818,653,798,669,778,687,764,690,769,673,782,658,801,651,819,649,858,647,898,639,919,625,939,600,958"/>
<area shape="poly" title=" " alt="" coords="578,953,622,935,688,900,745,866,748,871,691,904,624,940,580,958"/>
<area shape="poly" title=" " alt="" coords="554,954,590,924,607,906,620,885,640,834,644,786,640,740,632,696,625,653,625,610,638,566,651,544,669,521,683,509,701,501,736,494,737,499,702,506,686,513,673,524,655,547,643,568,630,611,630,653,637,696,645,740,650,786,645,835,625,888,611,909,594,928,557,958"/>
<area shape="poly" title=" " alt="" coords="552,954,589,924,620,885,635,856,642,830,646,782,649,732,656,704,668,673,686,642,708,613,750,567,754,571,712,617,691,645,673,676,661,706,655,733,652,782,647,831,640,858,625,888,592,928,556,958"/>
<area shape="poly" title=" " alt="" coords="600,954,621,939,632,925,639,911,643,882,648,853,656,838,669,823,697,805,726,797,753,796,780,799,807,801,833,799,858,791,883,771,903,748,914,725,918,702,919,679,919,628,922,599,931,567,963,502,968,505,936,569,927,600,924,628,924,679,924,703,919,726,907,750,887,775,861,795,834,804,807,806,780,804,753,802,726,803,700,810,672,827,660,841,654,854,649,883,644,913,637,928,624,943,603,958"/>
<area shape="poly" title=" " alt="" coords="597,954,621,936,638,909,645,882,645,856,642,829,640,803,641,776,649,749,669,722,692,706,718,698,720,703,694,711,673,726,654,751,646,777,645,802,648,829,650,856,650,883,643,911,625,939,601,958"/>
<area shape="poly" title=" " alt="" coords="602,970,699,965,699,970,602,975"/>
<area shape="poly" title=" " alt="" coords="805,1280,846,1272,866,1263,883,1250,901,1224,917,1185,943,1085,963,980,975,900,980,901,968,981,949,1086,922,1187,905,1226,887,1254,869,1268,848,1277,806,1286"/>
<area shape="poly" title=" " alt="" coords="295,216,313,182,340,142,375,102,396,86,419,72,487,42,550,20,610,7,667,3,722,11,777,31,832,63,887,110,911,141,921,173,922,205,917,238,912,270,911,303,917,336,936,370,937,373,933,376,931,373,912,338,905,303,907,270,912,237,917,205,916,174,906,144,883,114,828,68,775,35,721,16,667,9,610,12,551,25,489,47,421,77,399,90,379,106,344,145,317,185,299,218"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a1fcb81537a701f246e75fa622c2dd8ee" title="True if any lanes are enabled, false otherwise." alt="" coords="500,225,543,250"/>
<area shape="poly" title=" " alt="" coords="372,235,486,235,486,240,372,240"/>
<area shape="poly" title=" " alt="" coords="535,249,673,419,709,450,746,475,743,479,706,454,669,423,531,252"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_afa8cab65d4b6f0cbece52eec38aed523_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_afa8cab65d4b6f0cbece52eec38aed523_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_afa8cab65d4b6f0cbece52eec38aed523_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_afa8cab65d4b6f0cbece52eec38aed523_icgraph">
<area shape="rect" title="Compute ideal endpoint colors and weights for 1 plane of weights." alt="" coords="1239,5,1387,45"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="ad96c399a873ddd142d4779b6aeb74b87" name="ad96c399a873ddd142d4779b6aeb74b87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad96c399a873ddd142d4779b6aeb74b87">&#9670;&#160;</a></span>compute_ideal_colors_and_weights_2_comp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compute_ideal_colors_and_weights_2_comp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ei</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>component1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>component2</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the ideal endpoints and weights for 2 color components. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ei</td><td>The computed ideal endpoints and weights. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">component1</td><td>The first color component to compute. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">component2</td><td>The second color component to compute. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00217">217</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  223</span>  {</div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  225</span>    ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a6815660d1584ae9e1fc4faebddf91658">partition_count</a> = partition_count;</div>
<div class="line"><span class="lineno">  226</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>;</div>
<div class="line"><span class="lineno">  229</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <a class="code hl_struct" href="structpartition__metrics.html">partition_metrics</a> pms[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>    <span class="keywordtype">float</span> error_weight;</div>
<div class="line"><span class="lineno">  234</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vr = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  235</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vg = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">if</span> (component1 == 0 &amp;&amp; component2 == 1)</div>
<div class="line"><span class="lineno">  238</span>    {</div>
<div class="line"><span class="lineno">  239</span>        error_weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1&gt;()) / 2.0f;</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>;</div>
<div class="line"><span class="lineno">  242</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>;</div>
<div class="line"><span class="lineno">  243</span>    }</div>
<div class="line"><span class="lineno">  244</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (component1 == 0 &amp;&amp; component2 == 2)</div>
<div class="line"><span class="lineno">  245</span>    {</div>
<div class="line"><span class="lineno">  246</span>        error_weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 2&gt;()) / 2.0f;</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>;</div>
<div class="line"><span class="lineno">  249</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  250</span>    }</div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">else</span> <span class="comment">// (component1 == 1 &amp;&amp; component2 == 2)</span></div>
<div class="line"><span class="lineno">  252</span>    {</div>
<div class="line"><span class="lineno">  253</span>        assert(component1 == 1 &amp;&amp; component2 == 2);</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>        error_weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;1, 2&gt;()) / 2.0f;</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>;</div>
<div class="line"><span class="lineno">  258</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  259</span>    }</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>    <a class="code hl_function" href="astcenc__averages__and__directions_8cpp.html#a63e55f3f2ec6932357b8387f3dd82f7a">compute_avgs_and_dirs_2_comp</a>(pi, blk, component1, component2, pms);</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>    <span class="keywordtype">bool</span> is_constant_wes { <span class="keyword">true</span> };</div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordtype">float</span> partition0_len_sq { 0.0f };</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    <a class="code hl_struct" href="structvmask4.html">vmask4</a> comp1_mask = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint4::lane_id</a>() == <a class="code hl_struct" href="structvint4.html">vint4</a>(component1);</div>
<div class="line"><span class="lineno">  267</span>    <a class="code hl_struct" href="structvmask4.html">vmask4</a> comp2_mask = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint4::lane_id</a>() == <a class="code hl_struct" href="structvint4.html">vint4</a>(component2);</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  270</span>    {</div>
<div class="line"><span class="lineno">  271</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> dir = pms[i].<a class="code hl_variable" href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">dir</a>;</div>
<div class="line"><span class="lineno">  272</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(dir) &lt; 0.0f)</div>
<div class="line"><span class="lineno">  273</span>        {</div>
<div class="line"><span class="lineno">  274</span>            dir = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>() - dir;</div>
<div class="line"><span class="lineno">  275</span>        }</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>        <a class="code hl_struct" href="structline2.html">line2</a> line { pms[i].<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a>, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a>(dir, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a7570a31cd88cd3cdb3e6a46da056f3d3">unit2</a>()) };</div>
<div class="line"><span class="lineno">  278</span>        <span class="keywordtype">float</span> lowparam { 1e10f };</div>
<div class="line"><span class="lineno">  279</span>        <span class="keywordtype">float</span> highparam { -1e10f };</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[i];</div>
<div class="line"><span class="lineno">  282</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_texel_count; j++)</div>
<div class="line"><span class="lineno">  283</span>        {</div>
<div class="line"><span class="lineno">  284</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tix = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[i][j];</div>
<div class="line"><span class="lineno">  285</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> point = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde">vfloat2</a>(data_vr[tix], data_vg[tix]);</div>
<div class="line"><span class="lineno">  286</span>            <span class="keywordtype">float</span> param = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(point - line.a, line.b);</div>
<div class="line"><span class="lineno">  287</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[tix] = param;</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>            lowparam = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(param, lowparam);</div>
<div class="line"><span class="lineno">  290</span>            highparam = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(param, highparam);</div>
<div class="line"><span class="lineno">  291</span>        }</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>        <span class="comment">// It is possible for a uniform-color partition to produce length=0;</span></div>
<div class="line"><span class="lineno">  294</span>        <span class="comment">// this causes NaN issues so set to small value to avoid this problem</span></div>
<div class="line"><span class="lineno">  295</span>        <span class="keywordflow">if</span> (highparam &lt;= lowparam)</div>
<div class="line"><span class="lineno">  296</span>        {</div>
<div class="line"><span class="lineno">  297</span>            lowparam = 0.0f;</div>
<div class="line"><span class="lineno">  298</span>            highparam = 1e-7f;</div>
<div class="line"><span class="lineno">  299</span>        }</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>        <span class="keywordtype">float</span> length = highparam - lowparam;</div>
<div class="line"><span class="lineno">  302</span>        <span class="keywordtype">float</span> length_squared = length * length;</div>
<div class="line"><span class="lineno">  303</span>        <span class="keywordtype">float</span> scale = 1.0f / length;</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordflow">if</span> (i == 0)</div>
<div class="line"><span class="lineno">  306</span>        {</div>
<div class="line"><span class="lineno">  307</span>            partition0_len_sq = length_squared;</div>
<div class="line"><span class="lineno">  308</span>        }</div>
<div class="line"><span class="lineno">  309</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  310</span>        {</div>
<div class="line"><span class="lineno">  311</span>            is_constant_wes = is_constant_wes &amp;&amp; length_squared == partition0_len_sq;</div>
<div class="line"><span class="lineno">  312</span>        }</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_texel_count; j++)</div>
<div class="line"><span class="lineno">  315</span>        {</div>
<div class="line"><span class="lineno">  316</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tix = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[i][j];</div>
<div class="line"><span class="lineno">  317</span>            <span class="keywordtype">float</span> idx = (ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[tix] - lowparam) * scale;</div>
<div class="line"><span class="lineno">  318</span>            idx = <a class="code hl_function" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e">astc::clamp1f</a>(idx);</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[tix] = idx;</div>
<div class="line"><span class="lineno">  321</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[tix] = length_squared * error_weight;</div>
<div class="line"><span class="lineno">  322</span>            assert(!<a class="code hl_function" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b">astc::isnan</a>(ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[tix]));</div>
<div class="line"><span class="lineno">  323</span>        }</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> lowvalue = line.a + line.b * lowparam;</div>
<div class="line"><span class="lineno">  326</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> highvalue = line.a + line.b * highparam;</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep0 = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(blk.<a class="code hl_variable" href="structimage__block.html#a4222fc6e5a97194fd342700adff483db">data_min</a>, <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(lowvalue.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;()), comp1_mask);</div>
<div class="line"><span class="lineno">  329</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep1 = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(blk.<a class="code hl_variable" href="structimage__block.html#af1b03600b295cf8dc02a333db04871fc">data_max</a>, <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(highvalue.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;()), comp1_mask);</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep0, <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(lowvalue.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;()), comp2_mask);</div>
<div class="line"><span class="lineno">  332</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep1, <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(highvalue.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;()), comp2_mask);</div>
<div class="line"><span class="lineno">  333</span>    }</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>    <span class="comment">// Zero initialize any SIMD over-fetch</span></div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count_simd = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37">round_up_to_simd_multiple_vla</a>(texel_count);</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = texel_count; i &lt; texel_count_simd; i++)</div>
<div class="line"><span class="lineno">  338</span>    {</div>
<div class="line"><span class="lineno">  339</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[i] = 0.0f;</div>
<div class="line"><span class="lineno">  340</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[i] = 0.0f;</div>
<div class="line"><span class="lineno">  341</span>    }</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>    ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a351e13ebfb998f06c4134c405cb5d0ec">is_constant_weight_error_scale</a> = is_constant_wes;</div>
<div class="line"><span class="lineno">  344</span>}</div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_a63e55f3f2ec6932357b8387f3dd82f7a"><div class="ttname"><a href="astcenc__averages__and__directions_8cpp.html#a63e55f3f2ec6932357b8387f3dd82f7a">compute_avgs_and_dirs_2_comp</a></div><div class="ttdeci">void compute_avgs_and_dirs_2_comp(const partition_info &amp;pt, const image_block &amp;blk, unsigned int component1, unsigned int component2, partition_metrics pm[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">Compute averages and dominant directions for each partition in a 2 component texture.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00631">astcenc_averages_and_directions.cpp:631</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a31f42bb3da7abe95be4b6960feead130"><div class="ttname"><a href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_PARTITIONS</div><div class="ttdoc">The maximum number of partitions a block can support.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00078">astcenc_internal.h:78</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a3b0e8ae23a514219217b72164a7909a4"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 normalize_safe(vfloat4 a, vfloat4 safe)</div><div class="ttdoc">Normalize a vector, returning safe if len is zero.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00300">astcenc_vecmathlib.h:300</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a4750532a1dbacf2063927a027725afde"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde">vfloat2</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 vfloat2(float a, float b)</div><div class="ttdoc">Factory that returns a 2 component vfloat4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00283">astcenc_vecmathlib.h:283</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a7570a31cd88cd3cdb3e6a46da056f3d3"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a7570a31cd88cd3cdb3e6a46da056f3d3">unit2</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 unit2()</div><div class="ttdoc">Factory that returns a unit length 2 component vfloat4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00266">astcenc_vecmathlib.h:266</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_a53a7d8285fd42b50cf3600a004db34ac"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float dot_s(vfloat4 a, vfloat4 b)</div><div class="ttdoc">Return the dot product for the full 4 lanes, returning scalar.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00303">astcenc_vecmathlib_common_4.h:303</a></div></div>
<div class="ttc" id="astructline2_html"><div class="ttname"><a href="structline2.html">line2</a></div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00450">astcenc_mathlib.h:451</a></div></div>
<div class="ttc" id="astructpartition__metrics_html"><div class="ttname"><a href="structpartition__metrics.html">partition_metrics</a></div><div class="ttdoc">Computed metrics about a partition in a block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00269">astcenc_internal.h:270</a></div></div>
<div class="ttc" id="astructpartition__metrics_html_a5a05f959255774e848e83001f9b7bd37"><div class="ttname"><a href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">partition_metrics::dir</a></div><div class="ttdeci">vfloat4 dir</div><div class="ttdoc">The dominant error-weighted direction in the partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00275">astcenc_internal.h:275</a></div></div>
<div class="ttc" id="astructpartition__metrics_html_a81851ed35dd9dc3ce09a74b8167f5846"><div class="ttname"><a href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">partition_metrics::avg</a></div><div class="ttdeci">vfloat4 avg</div><div class="ttdoc">The error-weighted average color in the partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00272">astcenc_internal.h:272</a></div></div>
<div class="ttc" id="astructvfloat4_html_a0a3e390831722cc8e54f29155699f3a5"><div class="ttname"><a href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">vfloat4::swz</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat4 swz() const</div><div class="ttdoc">Return a swizzled float 2.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00149">astcenc_vecmathlib_neon_4.h:149</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_ad96c399a873ddd142d4779b6aeb74b87_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_ad96c399a873ddd142d4779b6aeb74b87_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_ad96c399a873ddd142d4779b6aeb74b87_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_ad96c399a873ddd142d4779b6aeb74b87_cgraph">
<area shape="rect" title="Compute the ideal endpoints and weights for 2 color components." alt="" coords="5,479,160,519"/>
<area shape="rect" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e" title="Clamp a float value between 0.0f and 1.0f." alt="" coords="259,5,359,31"/>
<area shape="poly" title=" " alt="" coords="81,479,82,400,88,346,97,285,112,222,135,159,166,100,206,48,224,34,245,25,247,30,227,39,210,52,170,103,140,161,118,224,102,286,93,346,88,400,86,479"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a63e55f3f2ec6932357b8387f3dd82f7a" title="Compute averages and dominant directions for each partition in a 2 component texture." alt="" coords="229,397,390,437"/>
<area shape="poly" title=" " alt="" coords="137,477,240,439,242,444,139,482"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="617,107,681,132"/>
<area shape="poly" title=" " alt="" coords="82,479,89,415,108,327,124,279,145,233,172,190,206,152,248,119,287,96,325,82,364,76,405,75,448,78,550,91,604,103,603,108,549,97,447,83,404,80,365,81,327,87,289,101,251,123,210,156,176,193,150,235,129,281,113,328,94,416,88,479"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="475,509,533,535"/>
<area shape="poly" title=" " alt="" coords="160,501,462,517,462,522,160,506"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="459,359,549,384"/>
<area shape="poly" title=" " alt="" coords="96,477,141,427,172,402,207,382,269,364,333,356,394,356,446,360,445,365,393,361,333,362,270,369,209,387,175,406,145,431,100,481"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="603,308,694,333"/>
<area shape="poly" title=" " alt="" coords="92,478,110,448,135,413,168,379,207,352,256,331,307,317,360,307,413,302,511,302,590,309,590,314,511,307,413,308,361,313,308,322,257,336,209,356,171,383,139,416,114,451,97,480"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde" title="Factory that returns a 2 component vfloat4." alt="" coords="475,561,533,587"/>
<area shape="poly" title=" " alt="" coords="161,511,208,519,462,564,461,569,208,525,160,516"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="459,457,549,483"/>
<area shape="poly" title=" " alt="" coords="160,491,445,471,445,477,160,497"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="477,107,531,132"/>
<area shape="poly" title=" " alt="" coords="84,479,96,426,118,355,134,317,154,279,178,244,206,213,236,190,269,171,339,144,407,127,463,119,463,125,408,133,341,149,271,176,239,195,210,217,182,248,158,282,138,319,123,357,101,427,90,480"/>
<area shape="rect" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b" title="Test if a float value is a nan." alt="" coords="266,613,353,639"/>
<area shape="poly" title=" " alt="" coords="107,518,153,555,209,592,254,610,252,615,207,596,149,559,104,522"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="261,663,358,688"/>
<area shape="poly" title=" " alt="" coords="97,518,141,583,172,618,209,648,248,664,246,669,207,652,169,622,136,586,93,521"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="269,712,349,737"/>
<area shape="poly" title=" " alt="" coords="93,518,108,557,133,605,167,655,187,678,210,697,232,709,256,717,255,722,230,714,206,702,183,682,162,659,128,608,104,559,88,520"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="271,761,347,787"/>
<area shape="poly" title=" " alt="" coords="91,519,103,566,126,628,161,692,183,721,210,747,233,760,258,767,257,772,231,765,206,751,179,725,156,695,121,630,98,567,85,520"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4" title="Normalize a vector, returning safe if len is zero." alt="" coords="255,228,364,253"/>
<area shape="poly" title=" " alt="" coords="89,478,105,439,131,389,164,336,206,288,230,270,256,257,258,261,233,275,210,292,169,339,135,391,110,441,94,480"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="208,811,411,836"/>
<area shape="poly" title=" " alt="" coords="89,519,98,575,119,650,135,691,155,730,180,766,210,797,215,802,212,806,206,801,175,769,150,733,130,693,114,652,93,576,83,520"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a7570a31cd88cd3cdb3e6a46da056f3d3" title="Factory that returns a unit length 2 component vfloat4." alt="" coords="284,860,335,885"/>
<area shape="poly" title=" " alt="" coords="87,519,94,583,112,672,128,719,149,766,176,809,210,847,239,863,271,869,270,875,237,868,206,851,172,813,144,769,123,721,107,673,89,584,82,520"/>
<area shape="rect" href="namespaceastc.html#a8f8b2ad23b04a389f6785bc80b61349b" title="Clamp a value value between mn and mx." alt="" coords="459,5,549,31"/>
<area shape="poly" title=" " alt="" coords="360,15,445,15,445,21,360,21"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="484,257,524,283"/>
<area shape="poly" title=" " alt="" coords="335,394,473,289,476,293,339,399"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="477,408,531,433"/>
<area shape="poly" title=" " alt="" coords="390,416,463,417,463,423,390,421"/>
<area shape="poly" title=" " alt="" coords="349,434,469,501,467,505,346,439"/>
<area shape="poly" title=" " alt="" coords="390,395,445,382,446,387,391,400"/>
<area shape="poly" title=" " alt="" coords="334,435,390,486,460,544,471,552,468,556,457,548,386,490,330,439"/>
<area shape="poly" title=" " alt="" coords="383,434,446,451,444,457,382,439"/>
<area shape="poly" title=" " alt="" coords="515,255,624,140,628,144,519,259"/>
<area shape="poly" title=" " alt="" coords="624,108,619,98,622,89,632,82,649,80,669,84,677,92,673,96,666,88,649,85,634,87,626,92,624,98,629,105"/>
<area shape="poly" title=" " alt="" coords="540,356,598,335,600,340,542,361"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="597,408,700,433"/>
<area shape="poly" title=" " alt="" coords="543,382,598,401,597,406,541,387"/>
<area shape="poly" title=" " alt="" coords="541,455,597,435,598,440,543,460"/>
<area shape="poly" title=" " alt="" coords="531,117,603,117,603,122,531,122"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="463,663,545,688"/>
<area shape="poly" title=" " alt="" coords="358,673,449,673,449,678,358,678"/>
<area shape="poly" title=" " alt="" coords="365,246,471,262,470,268,364,251"/>
<area shape="poly" title=" " alt="" coords="364,229,453,226,502,230,550,242,573,253,594,266,628,296,625,300,591,271,570,257,548,247,501,236,452,231,364,235"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a46b31b19ff13c14adb023db4b5df8e52" title="Return the sqrt of the lanes in the vector." alt="" coords="482,156,526,181"/>
<area shape="poly" title=" " alt="" coords="344,225,468,179,470,184,345,230"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_ad96c399a873ddd142d4779b6aeb74b87_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_ad96c399a873ddd142d4779b6aeb74b87_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_ad96c399a873ddd142d4779b6aeb74b87_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_ad96c399a873ddd142d4779b6aeb74b87_icgraph">
<area shape="rect" title="Compute the ideal endpoints and weights for 2 color components." alt="" coords="1440,5,1595,45"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a52d3985007cfc83025661e0347bc00cc" title="Compute ideal endpoint colors and weights for 2 planes of weights." alt="" coords="1239,5,1392,45"/>
<area shape="poly" title=" " alt="" coords="1426,28,1393,28,1393,23,1426,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a52d3985007cfc83025661e0347bc00cc" name="a52d3985007cfc83025661e0347bc00cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52d3985007cfc83025661e0347bc00cc">&#9670;&#160;</a></span>compute_ideal_colors_and_weights_2planes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_ideal_colors_and_weights_2planes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>plane2_component</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ei1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ei2</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute ideal endpoint colors and weights for 2 planes of weights. </p>
<p>The ideal endpoints define a color line for the partition. For each texel the ideal weight defines an exact position on the partition color line. We can then use these to assess the error introduced by removing and quantizing the weight grid.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">bsd</td><td>The block size information. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">plane2_component</td><td>The component assigned to plane 2. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ei1</td><td>The endpoint and weight values for plane 1. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ei2</td><td>The endpoint and weight values for plane 2. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00630">630</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  636</span>  {</div>
<div class="line"><span class="lineno">  637</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pi = bsd.<a class="code hl_function" href="structblock__size__descriptor.html#aa9dfc7b23c8b5e6c71e956e2e39fff74">get_partition_info</a>(1, 0);</div>
<div class="line"><span class="lineno">  638</span>    <span class="keywordtype">bool</span> uses_alpha = !blk.<a class="code hl_function" href="structimage__block.html#ae3c0735355d378591db6cb7a011e381a">is_constant_channel</a>(3);</div>
<div class="line"><span class="lineno">  639</span> </div>
<div class="line"><span class="lineno">  640</span>    assert(plane2_component &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#acfaa28ad6768cb0ebe7f535fc8a9e6df">BLOCK_MAX_COMPONENTS</a>);</div>
<div class="line"><span class="lineno">  641</span>    <span class="keywordflow">switch</span> (plane2_component)</div>
<div class="line"><span class="lineno">  642</span>    {</div>
<div class="line"><span class="lineno">  643</span>    <span class="keywordflow">case</span> 0: <span class="comment">// Separate weights for red</span></div>
<div class="line"><span class="lineno">  644</span>        <span class="keywordflow">if</span> (uses_alpha)</div>
<div class="line"><span class="lineno">  645</span>        {</div>
<div class="line"><span class="lineno">  646</span>            <a class="code hl_function" href="#a7ec20ff2556f6357cc0754c13e841262">compute_ideal_colors_and_weights_3_comp</a>(blk, pi, ei1, 0);</div>
<div class="line"><span class="lineno">  647</span>        }</div>
<div class="line"><span class="lineno">  648</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  649</span>        {</div>
<div class="line"><span class="lineno">  650</span>            <a class="code hl_function" href="#ad96c399a873ddd142d4779b6aeb74b87">compute_ideal_colors_and_weights_2_comp</a>(blk, pi, ei1, 1, 2);</div>
<div class="line"><span class="lineno">  651</span>        }</div>
<div class="line"><span class="lineno">  652</span>        <a class="code hl_function" href="#a3e9812129972c73914841ecc0f6a7e71">compute_ideal_colors_and_weights_1_comp</a>(blk, pi, ei2, 0);</div>
<div class="line"><span class="lineno">  653</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  654</span> </div>
<div class="line"><span class="lineno">  655</span>    <span class="keywordflow">case</span> 1: <span class="comment">// Separate weights for green</span></div>
<div class="line"><span class="lineno">  656</span>        <span class="keywordflow">if</span> (uses_alpha)</div>
<div class="line"><span class="lineno">  657</span>        {</div>
<div class="line"><span class="lineno">  658</span>            <a class="code hl_function" href="#a7ec20ff2556f6357cc0754c13e841262">compute_ideal_colors_and_weights_3_comp</a>(blk, pi, ei1, 1);</div>
<div class="line"><span class="lineno">  659</span>        }</div>
<div class="line"><span class="lineno">  660</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  661</span>        {</div>
<div class="line"><span class="lineno">  662</span>            <a class="code hl_function" href="#ad96c399a873ddd142d4779b6aeb74b87">compute_ideal_colors_and_weights_2_comp</a>(blk, pi, ei1, 0, 2);</div>
<div class="line"><span class="lineno">  663</span>        }</div>
<div class="line"><span class="lineno">  664</span>        <a class="code hl_function" href="#a3e9812129972c73914841ecc0f6a7e71">compute_ideal_colors_and_weights_1_comp</a>(blk, pi, ei2, 1);</div>
<div class="line"><span class="lineno">  665</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>    <span class="keywordflow">case</span> 2: <span class="comment">// Separate weights for blue</span></div>
<div class="line"><span class="lineno">  668</span>        <span class="keywordflow">if</span> (uses_alpha)</div>
<div class="line"><span class="lineno">  669</span>        {</div>
<div class="line"><span class="lineno">  670</span>            <a class="code hl_function" href="#a7ec20ff2556f6357cc0754c13e841262">compute_ideal_colors_and_weights_3_comp</a>(blk, pi, ei1, 2);</div>
<div class="line"><span class="lineno">  671</span>        }</div>
<div class="line"><span class="lineno">  672</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  673</span>        {</div>
<div class="line"><span class="lineno">  674</span>            <a class="code hl_function" href="#ad96c399a873ddd142d4779b6aeb74b87">compute_ideal_colors_and_weights_2_comp</a>(blk, pi, ei1, 0, 1);</div>
<div class="line"><span class="lineno">  675</span>        }</div>
<div class="line"><span class="lineno">  676</span>        <a class="code hl_function" href="#a3e9812129972c73914841ecc0f6a7e71">compute_ideal_colors_and_weights_1_comp</a>(blk, pi, ei2, 2);</div>
<div class="line"><span class="lineno">  677</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  678</span> </div>
<div class="line"><span class="lineno">  679</span>    <span class="keywordflow">default</span>: <span class="comment">// Separate weights for alpha</span></div>
<div class="line"><span class="lineno">  680</span>        assert(uses_alpha);</div>
<div class="line"><span class="lineno">  681</span>        <a class="code hl_function" href="#a7ec20ff2556f6357cc0754c13e841262">compute_ideal_colors_and_weights_3_comp</a>(blk, pi, ei1, 3);</div>
<div class="line"><span class="lineno">  682</span>        <a class="code hl_function" href="#a3e9812129972c73914841ecc0f6a7e71">compute_ideal_colors_and_weights_1_comp</a>(blk, pi, ei2, 3);</div>
<div class="line"><span class="lineno">  683</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  684</span>    }</div>
<div class="line"><span class="lineno">  685</span>}</div>
<div class="ttc" id="aastcenc__ideal__endpoints__and__weights_8cpp_html_a3e9812129972c73914841ecc0f6a7e71"><div class="ttname"><a href="#a3e9812129972c73914841ecc0f6a7e71">compute_ideal_colors_and_weights_1_comp</a></div><div class="ttdeci">static void compute_ideal_colors_and_weights_1_comp(const image_block &amp;blk, const partition_info &amp;pi, endpoints_and_weights &amp;ei, unsigned int component)</div><div class="ttdoc">Compute the ideal endpoints and weights for 1 color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00107">astcenc_ideal_endpoints_and_weights.cpp:107</a></div></div>
<div class="ttc" id="aastcenc__ideal__endpoints__and__weights_8cpp_html_ad96c399a873ddd142d4779b6aeb74b87"><div class="ttname"><a href="#ad96c399a873ddd142d4779b6aeb74b87">compute_ideal_colors_and_weights_2_comp</a></div><div class="ttdeci">static void compute_ideal_colors_and_weights_2_comp(const image_block &amp;blk, const partition_info &amp;pi, endpoints_and_weights &amp;ei, int component1, int component2)</div><div class="ttdoc">Compute the ideal endpoints and weights for 2 color components.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00217">astcenc_ideal_endpoints_and_weights.cpp:217</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_aa9dfc7b23c8b5e6c71e956e2e39fff74"><div class="ttname"><a href="structblock__size__descriptor.html#aa9dfc7b23c8b5e6c71e956e2e39fff74">block_size_descriptor::get_partition_info</a></div><div class="ttdeci">const partition_info &amp; get_partition_info(unsigned int partition_count, unsigned int index) const</div><div class="ttdoc">Get the partition info structure for a given partition count and seed.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00700">astcenc_internal.h:700</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a52d3985007cfc83025661e0347bc00cc_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a52d3985007cfc83025661e0347bc00cc_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a52d3985007cfc83025661e0347bc00cc_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a52d3985007cfc83025661e0347bc00cc_cgraph">
<area shape="rect" title="Compute ideal endpoint colors and weights for 2 planes of weights." alt="" coords="5,765,159,805"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a3e9812129972c73914841ecc0f6a7e71" title="Compute the ideal endpoints and weights for 1 color component." alt="" coords="215,161,369,201"/>
<area shape="poly" title=" " alt="" coords="88,764,277,213,282,214,93,765"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#ad96c399a873ddd142d4779b6aeb74b87" title="Compute the ideal endpoints and weights for 2 color components." alt="" coords="215,461,369,501"/>
<area shape="poly" title=" " alt="" coords="95,763,267,511,271,514,99,766"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a7ec20ff2556f6357cc0754c13e841262" title="Compute the ideal endpoints and weights for 3 color components." alt="" coords="215,765,369,805"/>
<area shape="poly" title=" " alt="" coords="159,782,201,782,201,787,159,787"/>
<area shape="rect" href="structblock__size__descriptor.html#aa9dfc7b23c8b5e6c71e956e2e39fff74" title="Get the partition info structure for a given partition count and seed." alt="" coords="218,1285,366,1325"/>
<area shape="poly" title=" " alt="" coords="94,804,280,1271,275,1273,89,806"/>
<area shape="rect" href="structimage__block.html#ae3c0735355d378591db6cb7a011e381a" title="Test if a single color channel is constant across the block." alt="" coords="207,879,377,919"/>
<area shape="poly" title=" " alt="" coords="121,803,244,870,241,875,119,807"/>
<area shape="rect" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e" title="Clamp a float value between 0.0f and 1.0f." alt="" coords="477,119,577,144"/>
<area shape="poly" title=" " alt="" coords="369,162,463,142,464,147,370,167"/>
<area shape="rect" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b" title="Test if a float value is a nan." alt="" coords="483,168,570,193"/>
<area shape="poly" title=" " alt="" coords="370,178,470,178,470,183,370,183"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="1090,367,1181,392"/>
<area shape="poly" title=" " alt="" coords="301,159,319,127,346,88,381,50,424,21,458,15,516,14,673,20,891,35,941,59,976,84,1005,117,1038,160,1070,211,1096,264,1129,352,1124,354,1091,266,1065,213,1034,164,1001,120,972,88,938,63,890,41,672,25,516,19,458,21,426,26,385,54,350,91,323,129,305,162"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="939,871,1036,896"/>
<area shape="poly" title=" " alt="" coords="308,159,356,111,388,87,424,69,560,23,620,9,678,3,733,8,787,25,839,56,893,104,902,121,909,147,920,225,926,325,930,438,933,654,936,735,941,783,956,822,973,857,969,860,951,825,936,784,931,736,928,655,924,438,921,325,915,225,904,148,897,123,889,108,836,60,784,29,732,13,678,8,621,14,561,28,426,74,391,91,359,115,311,162"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="487,267,567,292"/>
<area shape="poly" title=" " alt="" coords="324,198,371,226,426,253,474,267,472,272,424,258,369,231,322,203"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="489,316,565,341"/>
<area shape="poly" title=" " alt="" coords="311,199,359,251,391,279,427,302,451,313,476,319,474,324,449,318,424,307,388,283,355,255,307,203"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="425,417,628,443"/>
<area shape="poly" title=" " alt="" coords="308,199,357,270,391,312,427,352,461,382,496,407,492,412,458,386,423,356,387,315,353,273,304,202"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="755,771,812,796"/>
<area shape="poly" title=" " alt="" coords="320,158,382,120,422,100,464,84,509,73,552,71,593,81,612,90,630,104,647,127,659,157,667,193,670,234,668,327,659,429,650,530,646,625,648,666,654,703,663,734,678,758,691,769,707,776,741,782,741,788,705,781,688,773,674,761,659,736,648,704,643,667,641,625,645,530,654,428,662,327,664,234,661,194,654,159,643,130,626,108,609,95,591,86,552,77,509,79,466,89,424,105,384,125,322,163"/>
<area shape="rect" href="namespaceastc.html#a8f8b2ad23b04a389f6785bc80b61349b" title="Clamp a value value between mn and mx." alt="" coords="738,119,829,144"/>
<area shape="poly" title=" " alt="" coords="577,129,724,129,724,134,577,134"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="1094,871,1177,896"/>
<area shape="poly" title=" " alt="" coords="1036,881,1080,881,1080,886,1036,886"/>
<area shape="poly" title=" " alt="" coords="296,460,317,391,348,299,385,211,404,176,424,153,442,142,462,134,464,139,444,146,427,157,409,180,390,213,353,300,322,392,302,461"/>
<area shape="poly" title=" " alt="" coords="294,460,307,408,331,338,348,301,369,265,394,231,424,203,445,190,469,183,471,188,447,195,427,207,398,235,373,268,353,303,336,340,312,409,299,461"/>
<area shape="poly" title=" " alt="" coords="297,460,363,258,400,154,423,104,485,66,542,41,597,29,651,27,706,35,763,51,892,104,934,127,973,157,1009,191,1040,227,1091,297,1124,353,1119,355,1086,300,1036,230,1005,194,970,161,931,132,890,108,761,56,704,40,650,32,597,34,544,46,487,71,427,108,405,156,368,260,302,462"/>
<area shape="poly" title=" " alt="" coords="310,499,358,553,391,581,427,605,493,633,553,645,610,648,664,646,718,645,773,652,831,671,892,708,908,729,931,769,976,857,971,859,926,772,904,732,889,712,829,676,772,657,718,651,665,651,610,653,553,650,491,638,424,610,387,586,355,557,306,503"/>
<area shape="poly" title=" " alt="" coords="300,459,319,425,346,382,381,339,424,302,447,291,472,283,474,288,449,296,427,307,385,343,350,385,323,427,305,461"/>
<area shape="poly" title=" " alt="" coords="309,459,357,409,389,382,424,358,475,338,477,342,427,363,392,386,361,413,312,462"/>
<area shape="poly" title=" " alt="" coords="369,461,453,443,455,448,371,467"/>
<area shape="poly" title=" " alt="" coords="300,500,314,547,339,608,376,671,399,699,427,723,465,745,506,762,549,773,593,781,675,787,741,785,741,790,675,792,592,786,548,779,504,767,462,750,424,727,396,703,371,674,334,611,309,549,295,502"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a63e55f3f2ec6932357b8387f3dd82f7a" title="Compute averages and dominant directions for each partition in a 2 component texture." alt="" coords="446,822,607,862"/>
<area shape="poly" title=" " alt="" coords="299,500,310,559,333,639,349,682,371,725,396,766,427,801,442,813,439,817,423,805,392,769,366,728,345,685,327,641,304,560,293,501"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="955,745,1019,771"/>
<area shape="poly" title=" " alt="" coords="369,466,480,458,547,458,618,463,690,474,761,492,829,519,892,556,913,574,930,595,957,643,974,691,984,731,979,732,969,692,952,645,926,598,909,578,889,560,827,523,760,497,689,479,617,468,547,464,481,464,370,472"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="943,1097,1032,1123"/>
<area shape="poly" title=" " alt="" coords="302,500,365,703,402,812,428,873,483,943,534,990,595,1027,677,1064,724,1076,791,1088,929,1103,929,1108,790,1093,723,1082,675,1069,592,1032,531,995,479,946,423,875,397,814,360,705,297,502"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde" title="Factory that returns a 2 component vfloat4." alt="" coords="754,721,813,747"/>
<area shape="poly" title=" " alt="" coords="306,500,324,533,351,574,385,615,427,649,466,671,508,688,594,713,676,725,740,731,740,736,675,731,593,718,506,693,464,676,424,654,382,619,347,577,319,536,301,502"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="738,1375,829,1400"/>
<area shape="poly" title=" " alt="" coords="304,500,341,606,362,678,380,752,385,803,387,867,385,1016,386,1091,393,1160,406,1218,415,1241,427,1259,449,1280,471,1292,493,1297,517,1299,568,1298,597,1302,629,1310,746,1366,744,1371,627,1315,596,1307,568,1304,516,1304,493,1302,469,1297,446,1284,423,1262,411,1243,400,1219,387,1161,381,1092,379,1016,381,867,380,803,375,753,357,680,336,608,299,502"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="756,417,811,443"/>
<area shape="poly" title=" " alt="" coords="318,458,366,428,394,414,425,403,468,395,513,391,602,393,681,404,743,417,742,422,681,409,601,398,513,396,469,400,426,409,397,419,368,433,321,463"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4" title="Normalize a vector, returning safe if len is zero." alt="" coords="472,569,581,595"/>
<area shape="poly" title=" " alt="" coords="340,498,484,561,482,566,338,503"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a7570a31cd88cd3cdb3e6a46da056f3d3" title="Factory that returns a unit length 2 component vfloat4." alt="" coords="501,217,552,243"/>
<area shape="poly" title=" " alt="" coords="297,460,312,416,338,360,375,303,398,276,424,253,455,238,487,230,488,235,456,243,427,258,402,280,379,306,343,363,317,418,302,461"/>
<area shape="poly" title=" " alt="" coords="607,821,740,790,741,795,608,826"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="763,820,803,845"/>
<area shape="poly" title=" " alt="" coords="608,836,749,831,750,837,608,842"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="756,1223,811,1248"/>
<area shape="poly" title=" " alt="" coords="539,861,631,1081,641,1120,646,1152,655,1181,678,1209,709,1226,743,1233,742,1238,707,1231,674,1213,650,1183,641,1154,636,1121,625,1083,534,863"/>
<area shape="poly" title=" " alt="" coords="542,861,595,933,633,973,677,1006,707,1022,733,1032,780,1042,830,1048,892,1063,950,1089,948,1094,890,1069,829,1053,780,1047,731,1037,704,1027,675,1011,630,977,591,936,538,864"/>
<area shape="poly" title=" " alt="" coords="557,819,611,787,675,757,740,739,741,744,677,762,613,792,560,824"/>
<area shape="poly" title=" " alt="" coords="540,861,582,955,631,1081,644,1132,650,1173,659,1212,678,1259,697,1289,718,1317,760,1363,756,1366,714,1321,692,1292,674,1262,654,1214,645,1174,639,1133,625,1083,577,957,535,863"/>
<area shape="poly" title=" " alt="" coords="803,827,843,820,890,806,953,775,955,780,892,811,845,825,804,833"/>
<area shape="poly" title=" " alt="" coords="962,747,957,737,960,727,970,721,987,719,1008,722,1016,731,1013,735,1005,727,987,724,972,726,964,731,963,736,967,744"/>
<area shape="poly" title=" " alt="" coords="993,1096,1013,1052,1033,995,1074,821,1102,649,1120,502,1129,405,1135,406,1126,503,1108,649,1079,822,1039,996,1018,1054,998,1098"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="1084,1216,1187,1241"/>
<area shape="poly" title=" " alt="" coords="1006,1121,1109,1205,1106,1209,1003,1125"/>
<area shape="poly" title=" " alt="" coords="812,1372,1092,1245,1094,1250,814,1377"/>
<area shape="poly" title=" " alt="" coords="811,429,852,437,874,446,892,460,919,491,940,527,956,564,968,603,983,675,988,731,983,732,977,676,963,604,951,566,935,529,914,494,889,464,871,451,851,442,810,434"/>
<area shape="poly" title=" " alt="" coords="568,567,627,547,1083,394,1084,399,629,553,569,572"/>
<area shape="poly" title=" " alt="" coords="535,594,552,636,581,694,623,755,649,783,677,806,713,822,750,829,749,834,712,828,675,811,645,787,619,758,576,696,547,638,530,596"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a46b31b19ff13c14adb023db4b5df8e52" title="Return the sqrt of the lanes in the vector." alt="" coords="761,569,805,595"/>
<area shape="poly" title=" " alt="" coords="582,579,747,579,747,585,582,585"/>
<area shape="poly" title=" " alt="" coords="298,764,335,657,375,512,382,432,385,327,388,274,395,225,406,184,423,154,441,140,463,132,464,137,444,144,427,157,411,186,400,226,394,274,390,327,387,432,380,513,340,659,303,765"/>
<area shape="poly" title=" " alt="" coords="298,764,334,657,375,512,382,443,387,352,398,264,408,229,423,203,444,188,469,180,470,185,447,193,427,206,413,231,403,265,392,353,387,443,380,513,339,659,303,765"/>
<area shape="poly" title=" " alt="" coords="298,764,315,722,342,667,378,609,423,556,450,534,475,519,523,501,571,484,598,472,626,453,640,440,649,427,658,415,675,404,727,384,781,370,837,362,892,358,994,359,1076,367,1076,373,994,365,892,363,837,367,782,376,728,389,677,408,662,418,653,430,644,443,630,457,600,476,573,489,525,506,478,524,453,538,427,560,383,612,347,670,320,724,303,766"/>
<area shape="poly" title=" " alt="" coords="298,764,332,656,375,512,381,480,383,451,383,400,385,376,391,352,403,328,424,303,446,287,472,279,474,284,448,292,427,307,407,331,396,354,390,377,388,400,389,451,386,481,380,513,337,658,303,765"/>
<area shape="poly" title=" " alt="" coords="297,764,360,568,397,464,423,405,454,372,488,347,492,351,458,376,428,407,402,466,365,570,302,765"/>
<area shape="poly" title=" " alt="" coords="297,764,314,716,341,651,378,579,423,511,457,476,492,448,496,453,461,480,427,514,383,582,346,653,319,718,302,766"/>
<area shape="poly" title=" " alt="" coords="348,762,451,732,586,704,661,695,738,691,816,695,891,707,926,720,957,736,955,741,924,725,890,713,815,700,738,697,662,700,587,709,452,737,350,767"/>
<area shape="poly" title=" " alt="" coords="324,803,355,830,380,866,393,914,397,976,394,1123,393,1198,396,1266,406,1323,415,1345,427,1363,455,1377,508,1390,656,1413,806,1422,860,1419,889,1410,911,1388,923,1366,928,1342,928,1317,925,1263,927,1232,936,1198,968,1134,973,1136,941,1200,933,1233,930,1263,933,1317,933,1343,928,1367,915,1391,892,1415,861,1424,806,1427,656,1418,507,1396,453,1382,424,1367,411,1348,401,1325,390,1267,387,1198,389,1123,392,976,387,915,375,868,351,834,321,807"/>
<area shape="poly" title=" " alt="" coords="324,803,354,830,380,866,392,908,396,962,396,1092,396,1157,399,1218,409,1268,417,1287,427,1303,441,1311,468,1321,547,1341,725,1375,724,1380,546,1346,466,1326,439,1316,423,1307,412,1290,404,1269,394,1218,390,1157,390,1092,391,963,386,909,375,869,350,834,321,807"/>
<area shape="poly" title=" " alt="" coords="315,763,498,602,502,606,318,767"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a33f923c5a839af4f1d369a391183c384" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="446,1209,607,1249"/>
<area shape="poly" title=" " alt="" coords="324,803,354,830,380,866,397,914,402,959,399,1000,393,1040,388,1078,390,1116,401,1154,427,1195,436,1203,432,1207,423,1198,396,1157,384,1117,383,1078,388,1039,394,999,397,959,392,915,375,869,350,834,320,807"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07" title="Factory that returns a 3 component vfloat4." alt="" coords="958,1211,1017,1236"/>
<area shape="poly" title=" " alt="" coords="325,803,355,830,380,866,389,892,394,924,397,999,388,1177,385,1267,387,1349,392,1385,400,1416,412,1442,427,1461,440,1468,460,1472,519,1475,593,1470,675,1461,823,1439,889,1426,909,1408,927,1387,953,1338,970,1289,979,1249,985,1250,975,1291,958,1340,931,1390,913,1412,892,1431,824,1444,676,1467,594,1476,519,1480,459,1478,438,1473,424,1465,407,1445,395,1418,387,1386,382,1349,379,1267,383,1177,392,999,389,924,383,894,375,869,351,834,321,807"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="446,1094,607,1134"/>
<area shape="poly" title=" " alt="" coords="323,803,353,831,380,866,393,896,398,924,398,976,398,1000,401,1024,410,1048,427,1074,440,1085,436,1089,423,1077,405,1050,396,1025,392,1000,393,975,393,925,388,898,375,869,349,834,319,807"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477" title="Return the dot product for the bottom 3 lanes, returning scalar." alt="" coords="496,1577,557,1603"/>
<area shape="poly" title=" " alt="" coords="325,803,355,830,380,866,390,896,397,932,401,1017,398,1115,393,1220,388,1323,389,1419,394,1461,401,1499,412,1531,427,1556,439,1567,452,1575,483,1585,481,1590,450,1580,435,1571,423,1560,407,1533,396,1500,389,1462,384,1419,383,1323,387,1220,393,1115,396,1017,391,933,385,897,375,869,351,834,321,807"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e" title="Return the horizontal sum of RGB vector lanes as a scalar." alt="" coords="739,1552,828,1577"/>
<area shape="poly" title=" " alt="" coords="325,803,355,830,380,866,389,894,395,927,399,1007,390,1197,386,1293,388,1381,393,1420,401,1454,412,1483,427,1505,447,1520,477,1531,556,1548,646,1557,725,1561,725,1566,645,1562,556,1553,475,1536,445,1524,423,1509,407,1486,395,1456,388,1421,383,1381,381,1293,385,1196,394,1007,390,928,384,895,375,869,351,834,321,807"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08" title="Factory that returns a unit length 3 component vfloat4." alt="" coords="501,1159,552,1184"/>
<area shape="poly" title=" " alt="" coords="323,803,354,831,380,866,395,907,400,945,398,980,394,1014,391,1047,393,1079,404,1111,427,1144,440,1155,455,1162,488,1169,487,1174,453,1167,437,1159,423,1148,399,1113,387,1080,385,1047,389,1014,393,980,395,945,390,908,375,869,350,834,320,807"/>
<area shape="poly" title=" " alt="" coords="606,1211,626,1195,643,1170,655,1146,661,1122,663,1098,659,1050,648,1002,637,954,633,905,635,881,643,856,655,831,674,807,688,795,705,787,741,780,742,785,707,792,691,799,678,811,660,834,648,858,641,882,638,905,642,953,653,1000,664,1049,669,1098,666,1123,660,1148,648,1173,630,1199,609,1215"/>
<area shape="poly" title=" " alt="" coords="606,1211,626,1195,649,1160,659,1126,660,1092,656,1058,651,1024,649,987,655,949,674,909,690,888,709,870,750,845,752,849,713,875,694,892,678,911,660,951,654,988,656,1023,661,1058,665,1092,664,1127,654,1162,630,1198,609,1215"/>
<area shape="poly" title=" " alt="" coords="608,1228,742,1232,742,1237,608,1233"/>
<area shape="poly" title=" " alt="" coords="576,1246,642,1268,723,1283,766,1286,809,1284,850,1275,889,1259,903,1242,925,1209,970,1134,974,1136,930,1212,908,1245,892,1263,852,1280,809,1289,766,1291,722,1289,641,1273,575,1251"/>
<area shape="poly" title=" " alt="" coords="600,1247,630,1265,647,1288,654,1311,661,1333,678,1353,700,1367,725,1376,723,1381,698,1372,674,1357,656,1335,649,1313,642,1291,626,1269,597,1251"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a83cf48552a7e8225358c7c43df24fd96" title="Compute the average RGBA color of each partition." alt="" coords="676,921,891,947"/>
<area shape="poly" title=" " alt="" coords="606,1210,626,1195,645,1166,653,1136,652,1107,648,1077,644,1047,644,1017,653,987,674,958,679,953,683,956,678,961,658,990,650,1018,650,1047,654,1077,658,1107,658,1137,650,1168,630,1198,609,1214"/>
<area shape="poly" title=" " alt="" coords="590,1246,629,1265,644,1276,653,1286,663,1295,677,1302,736,1320,784,1326,831,1320,890,1302,912,1291,932,1277,965,1245,969,1249,936,1281,915,1296,892,1307,833,1326,784,1331,734,1325,675,1307,659,1299,649,1290,640,1280,627,1270,587,1251"/>
<area shape="poly" title=" " alt="" coords="835,919,924,896,926,901,836,924"/>
<area shape="poly" title=" " alt="" coords="803,919,844,891,889,856,930,817,964,780,968,783,934,821,892,860,847,896,806,924"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="939,957,1035,983"/>
<area shape="poly" title=" " alt="" coords="856,944,926,957,925,962,855,949"/>
<area shape="poly" title=" " alt="" coords="962,959,957,949,960,939,970,933,987,931,1008,934,1016,943,1013,947,1005,939,987,936,972,938,964,943,963,948,967,956"/>
<area shape="poly" title=" " alt="" coords="533,1093,593,942,634,860,655,828,674,807,706,790,740,782,742,788,708,795,678,811,659,831,639,862,598,944,538,1095"/>
<area shape="poly" title=" " alt="" coords="537,1092,592,1008,631,957,674,908,712,875,750,849,753,853,716,880,678,912,635,960,596,1011,542,1095"/>
<area shape="poly" title=" " alt="" coords="606,1132,630,1145,646,1162,654,1179,662,1195,677,1209,709,1223,742,1230,741,1236,708,1228,675,1214,658,1198,649,1181,641,1165,626,1149,603,1136"/>
<area shape="poly" title=" " alt="" coords="608,1111,929,1108,929,1113,608,1116"/>
<area shape="poly" title=" " alt="" coords="609,1131,630,1145,651,1173,659,1200,665,1228,678,1259,720,1317,761,1363,758,1367,716,1320,674,1262,660,1229,654,1201,646,1175,626,1149,606,1135"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#ac5429bc77cf39a7dba332af8fb14e093" title="Functions for finding dominant direction of a set of colors." alt="" coords="679,971,887,996"/>
<area shape="poly" title=" " alt="" coords="566,1092,743,1000,746,1005,568,1096"/>
<area shape="rect" href="structimage__block.html#a682b1ada02acb8369d6f6f30378b260e" title="Get an RGB texel value from the data." alt="" coords="714,1173,853,1199"/>
<area shape="poly" title=" " alt="" coords="599,1132,725,1167,723,1172,598,1137"/>
<area shape="poly" title=" " alt="" coords="859,968,889,957,958,903,961,907,892,962,861,973"/>
<area shape="poly" title=" " alt="" coords="871,968,889,958,972,782,977,784,893,961,874,973"/>
<area shape="poly" title=" " alt="" coords="846,994,892,1013,936,1048,970,1084,966,1088,932,1052,889,1018,844,999"/>
<area shape="poly" title=" " alt="" coords="888,974,925,971,926,977,888,979"/>
<area shape="poly" title=" " alt="" coords="798,995,968,1198,964,1201,793,998"/>
<area shape="poly" title=" " alt="" coords="853,1196,945,1213,944,1218,852,1201"/>
<area shape="poly" title=" " alt="" coords="557,1584,725,1568,726,1573,558,1590"/>
<area shape="rect" href="structvint4.html#a01e3f7debf73dc6c757fa36d585c9d17" title="Get the scalar from a single lane." alt="" coords="947,1552,1027,1577"/>
<area shape="poly" title=" " alt="" coords="828,1562,934,1562,934,1567,828,1567"/>
<area shape="rect" href="structblock__size__descriptor.html#a6d0c429d925ab011c22ab28b5807c368" title="Get the partition info table for a given partition count." alt="" coords="453,1627,601,1667"/>
<area shape="poly" title=" " alt="" coords="299,1324,310,1381,333,1459,349,1501,371,1542,396,1580,427,1613,442,1624,439,1628,424,1617,392,1583,366,1544,345,1503,328,1461,305,1382,293,1325"/>
<area shape="poly" title=" " alt="" coords="378,895,925,882,925,887,378,900"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a1fcb81537a701f246e75fa622c2dd8ee" title="True if any lanes are enabled, false otherwise." alt="" coords="505,1425,548,1451"/>
<area shape="poly" title=" " alt="" coords="300,919,358,1182,396,1326,413,1377,427,1404,441,1416,458,1424,492,1433,491,1438,456,1429,438,1420,423,1408,408,1379,391,1328,352,1183,295,920"/>
<area shape="poly" title=" " alt="" coords="542,1423,754,1255,757,1259,546,1427"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a52d3985007cfc83025661e0347bc00cc_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a52d3985007cfc83025661e0347bc00cc_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a52d3985007cfc83025661e0347bc00cc_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a52d3985007cfc83025661e0347bc00cc_icgraph">
<area shape="rect" title="Compute ideal endpoint colors and weights for 2 planes of weights." alt="" coords="1239,5,1392,45"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a7ec20ff2556f6357cc0754c13e841262" name="a7ec20ff2556f6357cc0754c13e841262"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ec20ff2556f6357cc0754c13e841262">&#9670;&#160;</a></span>compute_ideal_colors_and_weights_3_comp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compute_ideal_colors_and_weights_3_comp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ei</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>omitted_component</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the ideal endpoints and weights for 3 color components. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ei</td><td>The computed ideal endpoints and weights. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">omitted_component</td><td>The color component excluded from the calculation. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00354">354</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  359</span>  {</div>
<div class="line"><span class="lineno">  360</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  361</span>    ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a6815660d1584ae9e1fc4faebddf91658">partition_count</a> = partition_count;</div>
<div class="line"><span class="lineno">  362</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>;</div>
<div class="line"><span class="lineno">  365</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  366</span> </div>
<div class="line"><span class="lineno">  367</span>    <a class="code hl_struct" href="structpartition__metrics.html">partition_metrics</a> pms[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>    <span class="keywordtype">float</span> error_weight;</div>
<div class="line"><span class="lineno">  370</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vr = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  371</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vg = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  372</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vb = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  373</span>    <span class="keywordflow">if</span> (omitted_component == 0)</div>
<div class="line"><span class="lineno">  374</span>    {</div>
<div class="line"><span class="lineno">  375</span>        error_weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;());</div>
<div class="line"><span class="lineno">  376</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>;</div>
<div class="line"><span class="lineno">  377</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  378</span>        data_vb = blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a>;</div>
<div class="line"><span class="lineno">  379</span>    }</div>
<div class="line"><span class="lineno">  380</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (omitted_component == 1)</div>
<div class="line"><span class="lineno">  381</span>    {</div>
<div class="line"><span class="lineno">  382</span>        error_weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 2, 3&gt;());</div>
<div class="line"><span class="lineno">  383</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>;</div>
<div class="line"><span class="lineno">  384</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  385</span>        data_vb = blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a>;</div>
<div class="line"><span class="lineno">  386</span>    }</div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (omitted_component == 2)</div>
<div class="line"><span class="lineno">  388</span>    {</div>
<div class="line"><span class="lineno">  389</span>        error_weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 3&gt;());</div>
<div class="line"><span class="lineno">  390</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>;</div>
<div class="line"><span class="lineno">  391</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>;</div>
<div class="line"><span class="lineno">  392</span>        data_vb = blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a>;</div>
<div class="line"><span class="lineno">  393</span>    }</div>
<div class="line"><span class="lineno">  394</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  395</span>    {</div>
<div class="line"><span class="lineno">  396</span>        assert(omitted_component == 3);</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>        error_weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;());</div>
<div class="line"><span class="lineno">  399</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>;</div>
<div class="line"><span class="lineno">  400</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>;</div>
<div class="line"><span class="lineno">  401</span>        data_vb = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  402</span>    }</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>    error_weight = error_weight * (1.0f / 3.0f);</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span>    <span class="keywordflow">if</span> (omitted_component == 3)</div>
<div class="line"><span class="lineno">  407</span>    {</div>
<div class="line"><span class="lineno">  408</span>        <a class="code hl_function" href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253">compute_avgs_and_dirs_3_comp_rgb</a>(pi, blk, pms);</div>
<div class="line"><span class="lineno">  409</span>    }</div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  411</span>    {</div>
<div class="line"><span class="lineno">  412</span>        <a class="code hl_function" href="astcenc__averages__and__directions_8cpp.html#a33f923c5a839af4f1d369a391183c384">compute_avgs_and_dirs_3_comp</a>(pi, blk, omitted_component, pms);</div>
<div class="line"><span class="lineno">  413</span>    }</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>    <span class="keywordtype">bool</span> is_constant_wes { <span class="keyword">true</span> };</div>
<div class="line"><span class="lineno">  416</span>    <span class="keywordtype">float</span> partition0_len_sq { 0.0f };</div>
<div class="line"><span class="lineno">  417</span> </div>
<div class="line"><span class="lineno">  418</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  419</span>    {</div>
<div class="line"><span class="lineno">  420</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> dir = pms[i].<a class="code hl_variable" href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">dir</a>;</div>
<div class="line"><span class="lineno">  421</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(dir) &lt; 0.0f)</div>
<div class="line"><span class="lineno">  422</span>        {</div>
<div class="line"><span class="lineno">  423</span>            dir = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>() - dir;</div>
<div class="line"><span class="lineno">  424</span>        }</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>        <a class="code hl_struct" href="structline3.html">line3</a> line { pms[i].<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a>, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a>(dir, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08">unit3</a>()) };</div>
<div class="line"><span class="lineno">  427</span>        <span class="keywordtype">float</span> lowparam { 1e10f };</div>
<div class="line"><span class="lineno">  428</span>        <span class="keywordtype">float</span> highparam { -1e10f };</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[i];</div>
<div class="line"><span class="lineno">  431</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_texel_count; j++)</div>
<div class="line"><span class="lineno">  432</span>        {</div>
<div class="line"><span class="lineno">  433</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tix = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[i][j];</div>
<div class="line"><span class="lineno">  434</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> point = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a>(data_vr[tix], data_vg[tix], data_vb[tix]);</div>
<div class="line"><span class="lineno">  435</span>            <span class="keywordtype">float</span> param = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477">dot3_s</a>(point - line.a, line.b);</div>
<div class="line"><span class="lineno">  436</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[tix] = param;</div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>            lowparam = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(param, lowparam);</div>
<div class="line"><span class="lineno">  439</span>            highparam = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(param, highparam);</div>
<div class="line"><span class="lineno">  440</span>        }</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span>        <span class="comment">// It is possible for a uniform-color partition to produce length=0;</span></div>
<div class="line"><span class="lineno">  443</span>        <span class="comment">// this causes NaN issues so set to small value to avoid this problem</span></div>
<div class="line"><span class="lineno">  444</span>        <span class="keywordflow">if</span> (highparam &lt;= lowparam)</div>
<div class="line"><span class="lineno">  445</span>        {</div>
<div class="line"><span class="lineno">  446</span>            lowparam = 0.0f;</div>
<div class="line"><span class="lineno">  447</span>            highparam = 1e-7f;</div>
<div class="line"><span class="lineno">  448</span>        }</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>        <span class="keywordtype">float</span> length = highparam - lowparam;</div>
<div class="line"><span class="lineno">  451</span>        <span class="keywordtype">float</span> length_squared = length * length;</div>
<div class="line"><span class="lineno">  452</span>        <span class="keywordtype">float</span> scale = 1.0f / length;</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>        <span class="keywordflow">if</span> (i == 0)</div>
<div class="line"><span class="lineno">  455</span>        {</div>
<div class="line"><span class="lineno">  456</span>            partition0_len_sq = length_squared;</div>
<div class="line"><span class="lineno">  457</span>        }</div>
<div class="line"><span class="lineno">  458</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  459</span>        {</div>
<div class="line"><span class="lineno">  460</span>            is_constant_wes = is_constant_wes &amp;&amp; length_squared == partition0_len_sq;</div>
<div class="line"><span class="lineno">  461</span>        }</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_texel_count; j++)</div>
<div class="line"><span class="lineno">  464</span>        {</div>
<div class="line"><span class="lineno">  465</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tix = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[i][j];</div>
<div class="line"><span class="lineno">  466</span>            <span class="keywordtype">float</span> idx = (ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[tix] - lowparam) * scale;</div>
<div class="line"><span class="lineno">  467</span>            idx = <a class="code hl_function" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e">astc::clamp1f</a>(idx);</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[tix] = idx;</div>
<div class="line"><span class="lineno">  470</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[tix] = length_squared * error_weight;</div>
<div class="line"><span class="lineno">  471</span>            assert(!<a class="code hl_function" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b">astc::isnan</a>(ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[tix]));</div>
<div class="line"><span class="lineno">  472</span>        }</div>
<div class="line"><span class="lineno">  473</span> </div>
<div class="line"><span class="lineno">  474</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep0 = line.a + line.b * lowparam;</div>
<div class="line"><span class="lineno">  475</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep1 = line.a + line.b * highparam;</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> bmin = blk.<a class="code hl_variable" href="structimage__block.html#a4222fc6e5a97194fd342700adff483db">data_min</a>;</div>
<div class="line"><span class="lineno">  478</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> bmax = blk.<a class="code hl_variable" href="structimage__block.html#af1b03600b295cf8dc02a333db04871fc">data_max</a>;</div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>        assert(omitted_component &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#acfaa28ad6768cb0ebe7f535fc8a9e6df">BLOCK_MAX_COMPONENTS</a>);</div>
<div class="line"><span class="lineno">  481</span>        <span class="keywordflow">switch</span> (omitted_component)</div>
<div class="line"><span class="lineno">  482</span>        {</div>
<div class="line"><span class="lineno">  483</span>            <span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="lineno">  484</span>                ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(bmin.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  485</span>                ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(bmax.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  486</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  487</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">  488</span>                ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), bmin.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  489</span>                ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), bmax.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  490</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  491</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  492</span>                ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), bmin.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  493</span>                ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), bmax.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  494</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  495</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  496</span>                ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), bmin.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;());</div>
<div class="line"><span class="lineno">  497</span>                ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), bmax.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;());</div>
<div class="line"><span class="lineno">  498</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  499</span>        }</div>
<div class="line"><span class="lineno">  500</span>    }</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>    <span class="comment">// Zero initialize any SIMD over-fetch</span></div>
<div class="line"><span class="lineno">  503</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count_simd = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37">round_up_to_simd_multiple_vla</a>(texel_count);</div>
<div class="line"><span class="lineno">  504</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = texel_count; i &lt; texel_count_simd; i++)</div>
<div class="line"><span class="lineno">  505</span>    {</div>
<div class="line"><span class="lineno">  506</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[i] = 0.0f;</div>
<div class="line"><span class="lineno">  507</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[i] = 0.0f;</div>
<div class="line"><span class="lineno">  508</span>    }</div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>    ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a351e13ebfb998f06c4134c405cb5d0ec">is_constant_weight_error_scale</a> = is_constant_wes;</div>
<div class="line"><span class="lineno">  511</span>}</div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_a33f923c5a839af4f1d369a391183c384"><div class="ttname"><a href="astcenc__averages__and__directions_8cpp.html#a33f923c5a839af4f1d369a391183c384">compute_avgs_and_dirs_3_comp</a></div><div class="ttdeci">void compute_avgs_and_dirs_3_comp(const partition_info &amp;pi, const image_block &amp;blk, unsigned int omitted_component, partition_metrics pm[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">Compute averages and dominant directions for each partition in a 3 component texture.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00459">astcenc_averages_and_directions.cpp:459</a></div></div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_a73936e5cf41b74f2b8d9b137a9d64253"><div class="ttname"><a href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253">compute_avgs_and_dirs_3_comp_rgb</a></div><div class="ttdeci">void compute_avgs_and_dirs_3_comp_rgb(const partition_info &amp;pi, const image_block &amp;blk, partition_metrics pm[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">Compute averages and dominant directions for each partition in a 3 component texture.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00568">astcenc_averages_and_directions.cpp:568</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a1a2e12d78738b0b4b550f57b2dc05f07"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 vfloat3(float a, float b, float c)</div><div class="ttdoc">Factory that returns a 3 component vfloat4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00275">astcenc_vecmathlib.h:275</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a3cf3e0218d808e69f31668dbc458dc08"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08">unit3</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 unit3()</div><div class="ttdoc">Factory that returns a unit length 3 component vfloat4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00257">astcenc_vecmathlib.h:257</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_a377cafdb98d3ee38a2999ed00504f477"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477">dot3_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float dot3_s(vfloat4 a, vfloat4 b)</div><div class="ttdoc">Return the dot product for the bottom 3 lanes, returning scalar.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00321">astcenc_vecmathlib_common_4.h:321</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_a48e833d0cfdf950b6bc3431fce00507e"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE int hadd_rgb_s(vint4 a)</div><div class="ttdoc">Return the horizontal sum of RGB vector lanes as a scalar.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00127">astcenc_vecmathlib_common_4.h:127</a></div></div>
<div class="ttc" id="astructline3_html"><div class="ttname"><a href="structline3.html">line3</a></div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00457">astcenc_mathlib.h:458</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a7ec20ff2556f6357cc0754c13e841262_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a7ec20ff2556f6357cc0754c13e841262_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a7ec20ff2556f6357cc0754c13e841262_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a7ec20ff2556f6357cc0754c13e841262_cgraph">
<area shape="rect" title="Compute the ideal endpoints and weights for 3 color components." alt="" coords="5,726,160,766"/>
<area shape="rect" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e" title="Clamp a float value between 0.0f and 1.0f." alt="" coords="259,5,359,31"/>
<area shape="poly" title=" " alt="" coords="82,726,91,591,111,388,127,282,148,185,174,104,189,72,206,48,224,34,245,24,247,29,227,38,210,52,194,75,179,106,153,186,133,283,116,389,96,592,88,726"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a33f923c5a839af4f1d369a391183c384" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="229,277,390,317"/>
<area shape="poly" title=" " alt="" coords="86,725,101,668,125,587,160,495,206,406,238,362,273,324,277,328,243,365,210,409,165,497,130,589,106,669,91,726"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="738,119,802,144"/>
<area shape="poly" title=" " alt="" coords="82,725,87,645,104,525,120,458,141,390,170,324,206,263,260,195,286,171,313,151,375,119,458,91,517,77,565,74,613,80,674,91,732,110,730,115,673,97,613,85,565,79,518,82,459,97,377,124,315,155,289,175,264,199,210,266,174,327,146,392,125,460,109,526,92,646,87,726"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="725,556,815,581"/>
<area shape="poly" title=" " alt="" coords="124,723,164,707,207,693,278,678,338,672,444,673,494,673,547,669,605,658,672,636,712,614,744,589,747,593,714,618,674,640,607,663,548,674,494,679,444,678,339,678,278,684,209,698,166,712,127,728"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="873,759,963,784"/>
<area shape="poly" title=" " alt="" coords="160,748,459,765,721,771,819,771,859,771,859,776,819,777,721,777,459,770,160,754"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07" title="Factory that returns a 3 component vfloat4." alt="" coords="741,444,799,469"/>
<area shape="poly" title=" " alt="" coords="109,723,154,694,207,665,276,639,336,623,443,608,495,601,548,590,606,571,672,540,713,510,747,478,750,482,717,514,675,544,608,576,549,595,495,606,444,613,337,628,277,644,209,670,156,698,112,728"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="521,505,611,531"/>
<area shape="poly" title=" " alt="" coords="93,724,137,661,169,627,207,598,244,579,283,562,364,539,441,525,506,518,507,523,442,530,365,544,285,567,246,583,209,603,173,631,141,665,98,727"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="229,419,390,459"/>
<area shape="poly" title=" " alt="" coords="90,724,134,633,167,577,206,523,235,492,266,466,270,470,239,496,210,526,172,580,139,636,95,727"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477" title="Return the dot product for the bottom 3 lanes, returning scalar." alt="" coords="279,860,340,885"/>
<area shape="poly" title=" " alt="" coords="107,764,153,802,209,838,266,860,264,865,207,843,149,806,104,768"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e" title="Return the horizontal sum of RGB vector lanes as a scalar." alt="" coords="521,860,611,885"/>
<area shape="poly" title=" " alt="" coords="138,764,209,787,371,829,508,859,507,864,370,834,207,793,136,769"/>
<area shape="rect" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b" title="Test if a float value is a nan." alt="" coords="266,909,353,935"/>
<area shape="poly" title=" " alt="" coords="97,765,140,830,172,866,209,896,231,906,253,913,252,918,229,911,207,900,168,870,136,834,92,768"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="269,959,349,984"/>
<area shape="poly" title=" " alt="" coords="93,765,108,804,132,853,166,903,187,926,209,945,232,957,256,964,255,969,230,962,207,950,183,930,162,907,128,856,103,806,88,767"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="271,1008,347,1033"/>
<area shape="poly" title=" " alt="" coords="90,766,103,813,125,875,161,940,183,969,210,995,233,1007,258,1015,257,1020,231,1012,206,999,179,973,156,943,121,878,98,815,85,767"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4" title="Normalize a vector, returning safe if len is zero." alt="" coords="255,708,364,733"/>
<area shape="poly" title=" " alt="" coords="160,735,241,726,241,731,161,740"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="208,1057,411,1083"/>
<area shape="poly" title=" " alt="" coords="89,766,98,821,119,897,135,937,155,976,180,1013,210,1044,215,1048,212,1052,206,1048,175,1016,150,979,130,939,114,899,93,822,83,766"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08" title="Factory that returns a unit length 3 component vfloat4." alt="" coords="284,1107,335,1132"/>
<area shape="poly" title=" " alt="" coords="87,766,94,830,112,918,128,966,149,1013,176,1056,210,1093,239,1109,271,1116,270,1121,237,1114,206,1097,172,1059,144,1015,123,968,107,920,89,831,82,766"/>
<area shape="rect" href="namespaceastc.html#a8f8b2ad23b04a389f6785bc80b61349b" title="Clamp a value value between mn and mx." alt="" coords="521,5,611,31"/>
<area shape="poly" title=" " alt="" coords="360,15,507,15,507,21,360,21"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a83cf48552a7e8225358c7c43df24fd96" title="Compute the average RGBA color of each partition." alt="" coords="459,107,673,132"/>
<area shape="poly" title=" " alt="" coords="324,275,378,213,416,179,457,149,490,134,493,139,460,154,419,183,382,217,328,278"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="546,357,586,383"/>
<area shape="poly" title=" " alt="" coords="370,314,459,342,533,360,532,366,458,347,368,319"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="539,308,593,333"/>
<area shape="poly" title=" " alt="" coords="391,302,525,314,525,320,390,307"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="537,259,595,284"/>
<area shape="poly" title=" " alt="" coords="390,286,523,273,524,278,391,291"/>
<area shape="poly" title=" " alt="" coords="344,274,412,242,454,227,499,215,545,208,592,210,635,221,675,244,700,270,713,296,718,323,717,351,713,411,715,444,724,480,739,513,755,543,750,545,734,515,719,482,710,445,707,411,712,351,713,324,708,298,695,273,672,248,633,226,591,215,546,214,500,220,455,232,414,247,346,279"/>
<area shape="poly" title=" " alt="" coords="332,274,386,234,421,214,458,199,519,180,571,168,596,168,621,172,647,183,675,200,692,215,703,231,711,263,714,300,724,343,760,430,755,432,719,344,709,301,706,264,698,233,688,218,672,204,644,187,619,177,595,173,572,174,521,185,460,205,423,219,389,238,335,278"/>
<area shape="poly" title=" " alt="" coords="333,315,372,355,413,406,426,431,434,452,442,472,460,491,483,503,508,511,506,516,481,508,457,495,438,475,429,454,422,433,408,409,368,359,329,319"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="722,213,818,239"/>
<area shape="poly" title=" " alt="" coords="624,130,675,149,714,174,747,202,744,206,711,179,672,154,622,135"/>
<area shape="poly" title=" " alt="" coords="674,123,724,126,724,131,674,128"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="721,307,819,332"/>
<area shape="poly" title=" " alt="" coords="640,130,675,149,695,173,705,196,711,220,724,249,753,294,749,297,719,251,706,222,700,198,691,176,672,153,637,134"/>
<area shape="poly" title=" " alt="" coords="745,215,740,205,743,195,753,189,770,187,790,190,799,199,795,202,788,195,770,192,755,194,747,199,745,204,750,212"/>
<area shape="poly" title=" " alt="" coords="745,120,740,110,743,101,753,94,770,92,790,96,799,104,795,108,788,100,770,97,755,99,747,104,745,110,750,117"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="877,307,959,332"/>
<area shape="poly" title=" " alt="" coords="819,317,863,317,863,322,819,322"/>
<area shape="poly" title=" " alt="" coords="586,368,629,364,652,356,672,343,688,323,696,304,701,265,702,223,708,200,719,175,739,152,743,155,724,178,713,202,707,224,706,266,701,306,692,326,675,347,654,361,630,369,586,374"/>
<area shape="poly" title=" " alt="" coords="783,580,902,746,897,749,778,583"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="867,531,969,556"/>
<area shape="poly" title=" " alt="" coords="814,558,853,552,854,557,815,564"/>
<area shape="poly" title=" " alt="" coords="612,519,853,536,853,541,611,524"/>
<area shape="poly" title=" " alt="" coords="372,417,458,391,532,374,533,379,459,397,373,422"/>
<area shape="poly" title=" " alt="" coords="334,417,389,379,458,342,492,331,525,324,526,329,493,336,460,347,392,383,337,421"/>
<area shape="poly" title=" " alt="" coords="327,417,393,348,429,314,457,293,490,280,523,273,524,278,492,285,460,298,432,318,397,352,331,421"/>
<area shape="poly" title=" " alt="" coords="333,457,388,501,423,522,460,539,525,557,593,567,657,570,711,570,711,575,657,576,592,572,524,562,458,545,420,527,385,505,330,461"/>
<area shape="poly" title=" " alt="" coords="363,457,459,490,508,503,507,508,458,495,361,462"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#ac5429bc77cf39a7dba332af8fb14e093" title="Functions for finding dominant direction of a set of colors." alt="" coords="462,407,670,432"/>
<area shape="poly" title=" " alt="" coords="390,430,448,426,449,431,391,436"/>
<area shape="rect" href="structimage__block.html#a682b1ada02acb8369d6f6f30378b260e" title="Get an RGB texel value from the data." alt="" coords="497,456,635,481"/>
<area shape="poly" title=" " alt="" coords="391,446,483,457,483,462,390,451"/>
<area shape="poly" title=" " alt="" coords="651,404,672,392,691,370,700,348,706,322,719,293,748,249,753,252,724,295,711,324,705,349,696,373,675,396,654,409"/>
<area shape="poly" title=" " alt="" coords="654,405,671,392,691,367,701,342,704,317,702,291,700,237,706,207,719,175,738,151,743,155,724,178,711,209,706,237,708,291,709,317,706,343,696,369,675,396,658,409"/>
<area shape="poly" title=" " alt="" coords="639,404,672,392,711,367,744,340,747,344,714,372,675,396,640,409"/>
<area shape="poly" title=" " alt="" coords="651,430,675,441,702,464,726,490,759,542,754,545,721,493,699,467,672,446,649,434"/>
<area shape="poly" title=" " alt="" coords="637,429,728,446,727,452,636,435"/>
<area shape="poly" title=" " alt="" coords="635,462,727,456,727,462,636,467"/>
<area shape="poly" title=" " alt="" coords="340,870,507,870,507,875,340,875"/>
<area shape="rect" href="structvint4.html#a01e3f7debf73dc6c757fa36d585c9d17" title="Get the scalar from a single lane." alt="" coords="730,860,810,885"/>
<area shape="poly" title=" " alt="" coords="611,870,716,870,716,875,611,875"/>
<area shape="poly" title=" " alt="" coords="313,707,383,536,426,443,443,410,457,392,474,381,494,374,531,367,532,373,495,379,477,386,460,396,448,413,431,445,388,538,318,709"/>
<area shape="poly" title=" " alt="" coords="365,728,459,742,680,760,859,767,858,773,680,765,458,747,364,733"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a46b31b19ff13c14adb023db4b5df8e52" title="Return the sqrt of the lanes in the vector." alt="" coords="544,708,588,733"/>
<area shape="poly" title=" " alt="" coords="365,718,530,718,530,723,365,723"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a7ec20ff2556f6357cc0754c13e841262_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a7ec20ff2556f6357cc0754c13e841262_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a7ec20ff2556f6357cc0754c13e841262_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a7ec20ff2556f6357cc0754c13e841262_icgraph">
<area shape="rect" title="Compute the ideal endpoints and weights for 3 color components." alt="" coords="1440,37,1595,77"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#afa8cab65d4b6f0cbece52eec38aed523" title="Compute ideal endpoint colors and weights for 1 plane of weights." alt="" coords="1241,5,1389,45"/>
<area shape="poly" title=" " alt="" coords="1426,46,1389,40,1390,34,1427,40"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a52d3985007cfc83025661e0347bc00cc" title="Compute ideal endpoint colors and weights for 2 planes of weights." alt="" coords="1239,69,1392,109"/>
<area shape="poly" title=" " alt="" coords="1426,74,1393,80,1392,75,1426,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1228,28,1191,28,1191,23,1228,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,92,1191,92,1191,87,1225,87"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="a08aebec57ada3441207dce6a7a02797e" name="a08aebec57ada3441207dce6a7a02797e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08aebec57ada3441207dce6a7a02797e">&#9670;&#160;</a></span>compute_ideal_colors_and_weights_4_comp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compute_ideal_colors_and_weights_4_comp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ei</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the ideal endpoints and weights for 4 color components. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ei</td><td>The computed ideal endpoints and weights. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00520">520</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  524</span>  {</div>
<div class="line"><span class="lineno">  525</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> error_weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>) / 4.0f;</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  528</span> </div>
<div class="line"><span class="lineno">  529</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>;</div>
<div class="line"><span class="lineno">  530</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  531</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span>    <a class="code hl_struct" href="structpartition__metrics.html">partition_metrics</a> pms[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>    <a class="code hl_function" href="astcenc__averages__and__directions_8cpp.html#a00407861c2f0e767b64b1cb1bb7a27b6">compute_avgs_and_dirs_4_comp</a>(pi, blk, pms);</div>
<div class="line"><span class="lineno">  536</span> </div>
<div class="line"><span class="lineno">  537</span>    <span class="keywordtype">bool</span> is_constant_wes { <span class="keyword">true</span> };</div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordtype">float</span> partition0_len_sq { 0.0f };</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  541</span>    {</div>
<div class="line"><span class="lineno">  542</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> dir = pms[i].<a class="code hl_variable" href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">dir</a>;</div>
<div class="line"><span class="lineno">  543</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(dir) &lt; 0.0f)</div>
<div class="line"><span class="lineno">  544</span>        {</div>
<div class="line"><span class="lineno">  545</span>            dir = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>() - dir;</div>
<div class="line"><span class="lineno">  546</span>        }</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>        <a class="code hl_struct" href="structline4.html">line4</a> line { pms[i].<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a>, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a>(dir, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a5177e2c50f2c01a5610b2844ee3a071d">unit4</a>()) };</div>
<div class="line"><span class="lineno">  549</span>        <span class="keywordtype">float</span> lowparam { 1e10f };</div>
<div class="line"><span class="lineno">  550</span>        <span class="keywordtype">float</span> highparam { -1e10f };</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[i];</div>
<div class="line"><span class="lineno">  553</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_texel_count; j++)</div>
<div class="line"><span class="lineno">  554</span>        {</div>
<div class="line"><span class="lineno">  555</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tix = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[i][j];</div>
<div class="line"><span class="lineno">  556</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> point = blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(tix);</div>
<div class="line"><span class="lineno">  557</span>            <span class="keywordtype">float</span> param = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(point - line.a, line.b);</div>
<div class="line"><span class="lineno">  558</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[tix] = param;</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>            lowparam = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(param, lowparam);</div>
<div class="line"><span class="lineno">  561</span>            highparam = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(param, highparam);</div>
<div class="line"><span class="lineno">  562</span>        }</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>        <span class="comment">// It is possible for a uniform-color partition to produce length=0;</span></div>
<div class="line"><span class="lineno">  565</span>        <span class="comment">// this causes NaN issues so set to small value to avoid this problem</span></div>
<div class="line"><span class="lineno">  566</span>        <span class="keywordflow">if</span> (highparam &lt;= lowparam)</div>
<div class="line"><span class="lineno">  567</span>        {</div>
<div class="line"><span class="lineno">  568</span>            lowparam = 0.0f;</div>
<div class="line"><span class="lineno">  569</span>            highparam = 1e-7f;</div>
<div class="line"><span class="lineno">  570</span>        }</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span>        <span class="keywordtype">float</span> length = highparam - lowparam;</div>
<div class="line"><span class="lineno">  573</span>        <span class="keywordtype">float</span> length_squared = length * length;</div>
<div class="line"><span class="lineno">  574</span>        <span class="keywordtype">float</span> scale = 1.0f / length;</div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  576</span>        <span class="keywordflow">if</span> (i == 0)</div>
<div class="line"><span class="lineno">  577</span>        {</div>
<div class="line"><span class="lineno">  578</span>            partition0_len_sq = length_squared;</div>
<div class="line"><span class="lineno">  579</span>        }</div>
<div class="line"><span class="lineno">  580</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  581</span>        {</div>
<div class="line"><span class="lineno">  582</span>            is_constant_wes = is_constant_wes &amp;&amp; length_squared == partition0_len_sq;</div>
<div class="line"><span class="lineno">  583</span>        }</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i] = line.a + line.b * lowparam;</div>
<div class="line"><span class="lineno">  586</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a9b5a8f6a4d2bdbf5993eeba5593228c4">ep</a>.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i] = line.a + line.b * highparam;</div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; partition_texel_count; j++)</div>
<div class="line"><span class="lineno">  589</span>        {</div>
<div class="line"><span class="lineno">  590</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tix = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[i][j];</div>
<div class="line"><span class="lineno">  591</span>            <span class="keywordtype">float</span> idx = (ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[tix] - lowparam) * scale;</div>
<div class="line"><span class="lineno">  592</span>            idx = <a class="code hl_function" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e">astc::clamp1f</a>(idx);</div>
<div class="line"><span class="lineno">  593</span> </div>
<div class="line"><span class="lineno">  594</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[tix] = idx;</div>
<div class="line"><span class="lineno">  595</span>            ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[tix] = length_squared * error_weight;</div>
<div class="line"><span class="lineno">  596</span>            assert(!<a class="code hl_function" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b">astc::isnan</a>(ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[tix]));</div>
<div class="line"><span class="lineno">  597</span>        }</div>
<div class="line"><span class="lineno">  598</span>    }</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>    <span class="comment">// Zero initialize any SIMD over-fetch</span></div>
<div class="line"><span class="lineno">  601</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count_simd = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37">round_up_to_simd_multiple_vla</a>(texel_count);</div>
<div class="line"><span class="lineno">  602</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = texel_count; i &lt; texel_count_simd; i++)</div>
<div class="line"><span class="lineno">  603</span>    {</div>
<div class="line"><span class="lineno">  604</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>[i] = 0.0f;</div>
<div class="line"><span class="lineno">  605</span>        ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[i] = 0.0f;</div>
<div class="line"><span class="lineno">  606</span>    }</div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>    ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a351e13ebfb998f06c4134c405cb5d0ec">is_constant_weight_error_scale</a> = is_constant_wes;</div>
<div class="line"><span class="lineno">  609</span>}</div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_a00407861c2f0e767b64b1cb1bb7a27b6"><div class="ttname"><a href="astcenc__averages__and__directions_8cpp.html#a00407861c2f0e767b64b1cb1bb7a27b6">compute_avgs_and_dirs_4_comp</a></div><div class="ttdeci">void compute_avgs_and_dirs_4_comp(const partition_info &amp;pi, const image_block &amp;blk, partition_metrics pm[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">Compute averages and dominant directions for each partition in a 4 component texture.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00388">astcenc_averages_and_directions.cpp:388</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a5177e2c50f2c01a5610b2844ee3a071d"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a5177e2c50f2c01a5610b2844ee3a071d">unit4</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 unit4()</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00249">astcenc_vecmathlib.h:249</a></div></div>
<div class="ttc" id="astructimage__block_html_af99de7d75e1e380b31d70d131509caa9"><div class="ttname"><a href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">image_block::texel</a></div><div class="ttdeci">vfloat4 texel(unsigned int index) const</div><div class="ttdoc">Get an RGBA texel value from the data.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00804">astcenc_internal.h:804</a></div></div>
<div class="ttc" id="astructline4_html"><div class="ttname"><a href="structline4.html">line4</a></div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00463">astcenc_mathlib.h:464</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a08aebec57ada3441207dce6a7a02797e_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a08aebec57ada3441207dce6a7a02797e_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a08aebec57ada3441207dce6a7a02797e_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a08aebec57ada3441207dce6a7a02797e_cgraph">
<area shape="rect" title="Compute the ideal endpoints and weights for 4 color components." alt="" coords="5,482,160,522"/>
<area shape="rect" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e" title="Clamp a float value between 0.0f and 1.0f." alt="" coords="259,5,359,31"/>
<area shape="poly" title=" " alt="" coords="81,482,82,402,87,347,97,287,112,223,135,160,165,101,206,48,224,34,245,25,247,30,227,39,210,52,170,104,139,162,117,225,102,288,93,348,88,403,86,482"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a00407861c2f0e767b64b1cb1bb7a27b6" title="Compute averages and dominant directions for each partition in a 4 component texture." alt="" coords="229,374,390,414"/>
<area shape="poly" title=" " alt="" coords="116,480,207,430,238,417,240,422,209,435,118,484"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="741,127,805,152"/>
<area shape="poly" title=" " alt="" coords="80,482,82,409,88,361,97,308,112,254,135,202,166,156,206,117,238,97,271,82,342,63,416,56,490,60,561,70,627,86,729,119,727,124,625,91,560,76,489,65,416,61,343,68,273,87,240,102,210,121,170,159,140,205,118,256,102,309,93,362,88,410,86,482"/>
<area shape="rect" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9" title="Get an RGBA texel value from the data." alt="" coords="501,555,631,580"/>
<area shape="poly" title=" " alt="" coords="161,501,279,507,411,525,459,539,496,549,495,554,458,545,410,530,279,513,160,506"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="521,505,611,531"/>
<area shape="poly" title=" " alt="" coords="160,486,208,481,309,474,411,481,508,502,507,507,410,486,309,480,208,486,161,491"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="282,132,337,157"/>
<area shape="poly" title=" " alt="" coords="88,481,131,374,165,305,206,239,242,197,279,164,283,168,246,201,210,242,169,308,136,376,93,483"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e" title="Return the horizontal sum of RGB vector lanes as a scalar." alt="" coords="265,540,354,565"/>
<area shape="poly" title=" " alt="" coords="161,517,252,537,251,542,160,522"/>
<area shape="rect" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b" title="Test if a float value is a nan." alt="" coords="266,589,353,615"/>
<area shape="poly" title=" " alt="" coords="113,520,157,548,209,574,253,588,252,594,207,579,155,552,110,524"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="269,639,349,664"/>
<area shape="poly" title=" " alt="" coords="100,521,145,574,175,602,209,625,232,635,257,642,255,647,231,640,207,630,172,606,141,577,96,524"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="271,688,347,713"/>
<area shape="poly" title=" " alt="" coords="95,521,112,555,137,597,169,639,209,674,233,686,259,693,257,698,231,691,207,679,166,643,132,600,107,558,90,524"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4" title="Normalize a vector, returning safe if len is zero." alt="" coords="255,253,364,279"/>
<area shape="poly" title=" " alt="" coords="99,480,206,360,282,286,286,290,210,364,103,483"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#ae36622d837079b4899b971731c2dda37" title="Round a count up to the largest multiple of the SIMD width." alt="" coords="208,737,411,763"/>
<area shape="poly" title=" " alt="" coords="92,521,106,564,129,619,164,676,185,702,210,724,217,729,214,733,206,728,181,705,159,679,124,622,101,566,87,523"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a5177e2c50f2c01a5610b2844ee3a071d" title=" " alt="" coords="284,787,335,812"/>
<area shape="poly" title=" " alt="" coords="90,522,101,573,122,641,138,678,158,713,182,745,210,773,239,789,271,796,270,801,237,794,206,777,177,749,153,716,133,680,117,643,95,574,84,523"/>
<area shape="rect" href="namespaceastc.html#a8f8b2ad23b04a389f6785bc80b61349b" title="Clamp a value value between mn and mx." alt="" coords="521,5,611,31"/>
<area shape="poly" title=" " alt="" coords="360,15,507,15,507,21,360,21"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a83cf48552a7e8225358c7c43df24fd96" title="Compute the average RGBA color of each partition." alt="" coords="459,256,673,281"/>
<area shape="poly" title=" " alt="" coords="350,371,525,285,528,290,353,376"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="546,207,586,232"/>
<area shape="poly" title=" " alt="" coords="328,372,457,241,495,226,532,219,533,225,496,232,460,246,332,376"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="539,357,593,383"/>
<area shape="poly" title=" " alt="" coords="390,384,525,371,525,376,391,389"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="537,407,595,432"/>
<area shape="poly" title=" " alt="" coords="391,399,524,413,523,418,390,405"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="521,456,611,481"/>
<area shape="poly" title=" " alt="" coords="368,411,459,441,509,454,507,459,458,446,366,417"/>
<area shape="poly" title=" " alt="" coords="337,412,413,482,435,514,444,527,460,540,489,553,486,558,457,544,440,531,431,517,409,485,334,416"/>
<area shape="poly" title=" " alt="" coords="379,412,412,431,428,446,437,462,445,477,460,490,483,502,508,509,506,514,481,507,457,495,441,480,432,465,424,450,409,435,376,416"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="725,237,821,263"/>
<area shape="poly" title=" " alt="" coords="673,256,711,253,711,258,674,262"/>
<area shape="poly" title=" " alt="" coords="643,254,672,241,709,207,750,161,754,164,713,211,675,246,645,258"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="724,287,821,312"/>
<area shape="poly" title=" " alt="" coords="652,279,711,288,710,293,652,284"/>
<area shape="poly" title=" " alt="" coords="749,238,744,229,747,219,757,213,773,211,792,214,800,223,796,226,789,219,773,216,758,218,751,223,749,228,754,236"/>
<area shape="poly" title=" " alt="" coords="749,128,744,118,747,109,757,102,773,100,792,104,800,112,796,116,789,108,773,105,758,107,751,112,749,118,754,125"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="872,287,955,312"/>
<area shape="poly" title=" " alt="" coords="821,297,858,297,858,302,821,302"/>
<area shape="poly" title=" " alt="" coords="586,214,626,206,672,192,740,157,742,162,674,196,627,211,587,219"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="727,372,818,397"/>
<area shape="poly" title=" " alt="" coords="610,459,672,441,709,423,741,403,744,407,711,428,674,446,612,464"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="721,481,824,507"/>
<area shape="poly" title=" " alt="" coords="611,471,708,483,707,489,611,477"/>
<area shape="poly" title=" " alt="" coords="611,510,707,499,708,504,612,515"/>
<area shape="poly" title=" " alt="" coords="337,142,727,137,727,143,337,147"/>
<area shape="rect" href="structvint4.html#a01e3f7debf73dc6c757fa36d585c9d17" title="Get the scalar from a single lane." alt="" coords="526,604,606,629"/>
<area shape="poly" title=" " alt="" coords="355,560,411,574,459,589,513,602,512,607,458,594,410,579,353,565"/>
<area shape="poly" title=" " alt="" coords="364,253,532,223,533,228,365,259"/>
<area shape="poly" title=" " alt="" coords="365,274,530,308,674,342,732,364,730,369,673,347,529,313,363,279"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a46b31b19ff13c14adb023db4b5df8e52" title="Return the sqrt of the lanes in the vector." alt="" coords="544,157,588,183"/>
<area shape="poly" title=" " alt="" coords="332,251,388,221,458,191,530,173,531,178,460,197,390,226,334,255"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a08aebec57ada3441207dce6a7a02797e_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a08aebec57ada3441207dce6a7a02797e_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a08aebec57ada3441207dce6a7a02797e_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a08aebec57ada3441207dce6a7a02797e_icgraph">
<area shape="rect" title="Compute the ideal endpoints and weights for 4 color components." alt="" coords="1435,5,1589,45"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#afa8cab65d4b6f0cbece52eec38aed523" title="Compute ideal endpoint colors and weights for 1 plane of weights." alt="" coords="1239,5,1387,45"/>
<area shape="poly" title=" " alt="" coords="1421,28,1387,28,1387,23,1421,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="ae1b4e922c67d5349fc849709ca08178f" name="ae1b4e922c67d5349fc849709ca08178f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1b4e922c67d5349fc849709ca08178f">&#9670;&#160;</a></span>compute_ideal_weights_for_decimation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_ideal_weights_for_decimation </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structendpoints__and__weights.html">endpoints_and_weights</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ei</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>di</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>dec_weight_ideal_value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the optimal unquantized weights for a decimation table. </p>
<p>After computing ideal weights for the case for a complete weight grid, we we want to compute the ideal weights for the case where weights exist only for some texels. We do this with a steepest-descent grid solver which works as follows:</p>
<p>First, for each actual weight, perform a weighted averaging of the texels affected by the weight. Then, set step size to &lt;some initial value&gt; and attempt one step towards the original ideal weight if it helps to reduce error.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">ei</td><td>The non-decimated endpoints and weights. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">di</td><td>The selected weight decimation. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dec_weight_ideal_value</td><td>The ideal values for the decimated weight set. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00845">845</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  849</span>  {</div>
<div class="line"><span class="lineno">  850</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = di.<a class="code hl_variable" href="structdecimation__info.html#a2f6c6f84342c82092324c05035b3c9c1">texel_count</a>;</div>
<div class="line"><span class="lineno">  851</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weight_count = di.<a class="code hl_variable" href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">weight_count</a>;</div>
<div class="line"><span class="lineno">  852</span>    <span class="keywordtype">bool</span> is_direct = texel_count == weight_count;</div>
<div class="line"><span class="lineno">  853</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  854</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(weight_count &gt; 0);</div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span>    <span class="comment">// Ensure that the end of the output arrays that are used for SIMD paths later are filled so we</span></div>
<div class="line"><span class="lineno">  857</span>    <span class="comment">// can safely run SIMD elsewhere without a loop tail. Note that this is always safe as weight</span></div>
<div class="line"><span class="lineno">  858</span>    <span class="comment">// arrays always contain space for 64 elements</span></div>
<div class="line"><span class="lineno">  859</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> prev_weight_count_simd = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a63b1ecd0244123ff734e6791e33bf9ca">round_down_to_simd_multiple_vla</a>(weight_count - 1);</div>
<div class="line"><span class="lineno">  860</span>    <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(<a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat::zero</a>(), dec_weight_ideal_value + prev_weight_count_simd);</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>    <span class="comment">// If we have a 1:1 mapping just shortcut the computation. Transfer enough to also copy the</span></div>
<div class="line"><span class="lineno">  863</span>    <span class="comment">// zero-initialized SIMD over-fetch region</span></div>
<div class="line"><span class="lineno">  864</span>    <span class="keywordflow">if</span> (is_direct)</div>
<div class="line"><span class="lineno">  865</span>    {</div>
<div class="line"><span class="lineno">  866</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  867</span>        {</div>
<div class="line"><span class="lineno">  868</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight(ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a> + i);</div>
<div class="line"><span class="lineno">  869</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(weight, dec_weight_ideal_value + i);</div>
<div class="line"><span class="lineno">  870</span>        }</div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  873</span>    }</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span>    <span class="comment">// Otherwise compute an estimate and perform single refinement iteration</span></div>
<div class="line"><span class="lineno">  876</span>    <a class="code hl_define" href="astcenc__mathlib_8h.html#adf60643d2894fb1d3cd00d4f907186e8">ASTCENC_ALIGNAS</a> <span class="keywordtype">float</span> infilled_weights[<a class="code hl_variable" href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a>];</div>
<div class="line"><span class="lineno">  877</span> </div>
<div class="line"><span class="lineno">  878</span>    <span class="comment">// Compute an initial average for each decimated weight</span></div>
<div class="line"><span class="lineno">  879</span>    <span class="keywordtype">bool</span> constant_wes = ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a351e13ebfb998f06c4134c405cb5d0ec">is_constant_weight_error_scale</a>;</div>
<div class="line"><span class="lineno">  880</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight_error_scale(ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>[0]);</div>
<div class="line"><span class="lineno">  881</span> </div>
<div class="line"><span class="lineno">  882</span>    <span class="comment">// This overshoots - this is OK as we initialize the array tails in the</span></div>
<div class="line"><span class="lineno">  883</span>    <span class="comment">// decimation table structures to safe values ...</span></div>
<div class="line"><span class="lineno">  884</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; weight_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  885</span>    {</div>
<div class="line"><span class="lineno">  886</span>        <span class="comment">// Start with a small value to avoid div-by-zero later</span></div>
<div class="line"><span class="lineno">  887</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight_weight(1e-10f);</div>
<div class="line"><span class="lineno">  888</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> initial_weight = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat::zero</a>();</div>
<div class="line"><span class="lineno">  889</span> </div>
<div class="line"><span class="lineno">  890</span>        <span class="comment">// Accumulate error weighting of all the texels using this weight</span></div>
<div class="line"><span class="lineno">  891</span>        <a class="code hl_struct" href="structvint4.html">vint</a> weight_texel_count(di.<a class="code hl_variable" href="structdecimation__info.html#af8cbdbb54638ad694f845fb0bd96d007">weight_texel_count</a> + i);</div>
<div class="line"><span class="lineno">  892</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_texel_count = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a516a2f0d872381b8c7c047845a90c9a3">hmax</a>(weight_texel_count).<a class="code hl_function" href="structvint8.html#a2e1f0c785f4899e1b7912f2580b9f77c">lane</a>&lt;0&gt;();</div>
<div class="line"><span class="lineno">  893</span>        <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(max_texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  894</span> </div>
<div class="line"><span class="lineno">  895</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; max_texel_count; j++)</div>
<div class="line"><span class="lineno">  896</span>        {</div>
<div class="line"><span class="lineno">  897</span>            <a class="code hl_struct" href="structvint4.html">vint</a> texel(di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[j] + i);</div>
<div class="line"><span class="lineno">  898</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(di.<a class="code hl_variable" href="structdecimation__info.html#a8938034ba8a3eeb122662bf5d90df522">weights_texel_contribs_tr</a>[j] + i);</div>
<div class="line"><span class="lineno">  899</span> </div>
<div class="line"><span class="lineno">  900</span>            <span class="keywordflow">if</span> (!constant_wes)</div>
<div class="line"><span class="lineno">  901</span>            {</div>
<div class="line"><span class="lineno">  902</span>                weight_error_scale = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>, texel);</div>
<div class="line"><span class="lineno">  903</span>            }</div>
<div class="line"><span class="lineno">  904</span> </div>
<div class="line"><span class="lineno">  905</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> contrib_weight = weight * weight_error_scale;</div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span>            weight_weight += contrib_weight;</div>
<div class="line"><span class="lineno">  908</span>            initial_weight += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>, texel) * contrib_weight;</div>
<div class="line"><span class="lineno">  909</span>        }</div>
<div class="line"><span class="lineno">  910</span> </div>
<div class="line"><span class="lineno">  911</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(initial_weight / weight_weight, dec_weight_ideal_value + i);</div>
<div class="line"><span class="lineno">  912</span>    }</div>
<div class="line"><span class="lineno">  913</span> </div>
<div class="line"><span class="lineno">  914</span>    <span class="comment">// Populate the interpolated weight grid based on the initial average</span></div>
<div class="line"><span class="lineno">  915</span>    <span class="comment">// Process SIMD-width texel coordinates at at time while we can. Safe to</span></div>
<div class="line"><span class="lineno">  916</span>    <span class="comment">// over-process full SIMD vectors - the tail is zeroed.</span></div>
<div class="line"><span class="lineno">  917</span>    <span class="keywordflow">if</span> (di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> &lt;= 2)</div>
<div class="line"><span class="lineno">  918</span>    {</div>
<div class="line"><span class="lineno">  919</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  920</span>        {</div>
<div class="line"><span class="lineno">  921</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight = <a class="code hl_function" href="#a84286bd889620da3be77539ddfdf3b45">bilinear_infill_vla_2</a>(di, dec_weight_ideal_value, i);</div>
<div class="line"><span class="lineno">  922</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(weight, infilled_weights + i);</div>
<div class="line"><span class="lineno">  923</span>        }</div>
<div class="line"><span class="lineno">  924</span>    }</div>
<div class="line"><span class="lineno">  925</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  926</span>    {</div>
<div class="line"><span class="lineno">  927</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  928</span>        {</div>
<div class="line"><span class="lineno">  929</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight = <a class="code hl_function" href="#a617a8dec1d2168023a84f5c0fa1c20ca">bilinear_infill_vla</a>(di, dec_weight_ideal_value, i);</div>
<div class="line"><span class="lineno">  930</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(weight, infilled_weights + i);</div>
<div class="line"><span class="lineno">  931</span>        }</div>
<div class="line"><span class="lineno">  932</span>    }</div>
<div class="line"><span class="lineno">  933</span> </div>
<div class="line"><span class="lineno">  934</span>    <span class="comment">// Perform a single iteration of refinement</span></div>
<div class="line"><span class="lineno">  935</span>    <span class="comment">// Empirically determined step size; larger values don&#39;t help but smaller drops image quality</span></div>
<div class="line"><span class="lineno">  936</span>    <span class="keyword">constexpr</span> <span class="keywordtype">float</span> stepsize = 0.25f;</div>
<div class="line"><span class="lineno">  937</span>    <span class="keyword">constexpr</span> <span class="keywordtype">float</span> chd_scale = -<a class="code hl_variable" href="astcenc__internal_8h.html#a00c99c52668709ec2e60ec1eb401e55a">WEIGHTS_TEXEL_SUM</a>;</div>
<div class="line"><span class="lineno">  938</span> </div>
<div class="line"><span class="lineno">  939</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; weight_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  940</span>    {</div>
<div class="line"><span class="lineno">  941</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight_val = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(dec_weight_ideal_value + i);</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>        <span class="comment">// Accumulate error weighting of all the texels using this weight</span></div>
<div class="line"><span class="lineno">  944</span>        <span class="comment">// Start with a small value to avoid div-by-zero later</span></div>
<div class="line"><span class="lineno">  945</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error_change0(1e-10f);</div>
<div class="line"><span class="lineno">  946</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error_change1(0.0f);</div>
<div class="line"><span class="lineno">  947</span> </div>
<div class="line"><span class="lineno">  948</span>        <span class="comment">// Accumulate error weighting of all the texels using this weight</span></div>
<div class="line"><span class="lineno">  949</span>        <a class="code hl_struct" href="structvint4.html">vint</a> weight_texel_count(di.<a class="code hl_variable" href="structdecimation__info.html#af8cbdbb54638ad694f845fb0bd96d007">weight_texel_count</a> + i);</div>
<div class="line"><span class="lineno">  950</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> max_texel_count = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a516a2f0d872381b8c7c047845a90c9a3">hmax</a>(weight_texel_count).<a class="code hl_function" href="structvint8.html#a2e1f0c785f4899e1b7912f2580b9f77c">lane</a>&lt;0&gt;();</div>
<div class="line"><span class="lineno">  951</span>        <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(max_texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  952</span> </div>
<div class="line"><span class="lineno">  953</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; max_texel_count; j++)</div>
<div class="line"><span class="lineno">  954</span>        {</div>
<div class="line"><span class="lineno">  955</span>            <a class="code hl_struct" href="structvint4.html">vint</a> texel(di.<a class="code hl_variable" href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">weight_texels_tr</a>[j] + i);</div>
<div class="line"><span class="lineno">  956</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> contrib_weight = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(di.<a class="code hl_variable" href="structdecimation__info.html#a8938034ba8a3eeb122662bf5d90df522">weights_texel_contribs_tr</a>[j] + i);</div>
<div class="line"><span class="lineno">  957</span> </div>
<div class="line"><span class="lineno">  958</span>            <span class="keywordflow">if</span> (!constant_wes)</div>
<div class="line"><span class="lineno">  959</span>            {</div>
<div class="line"><span class="lineno">  960</span>                weight_error_scale = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a7e487945a9fdc482afc3015b47bc9ee7">weight_error_scale</a>, texel);</div>
<div class="line"><span class="lineno">  961</span>            }</div>
<div class="line"><span class="lineno">  962</span> </div>
<div class="line"><span class="lineno">  963</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> scale = weight_error_scale * contrib_weight;</div>
<div class="line"><span class="lineno">  964</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> old_weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(infilled_weights, texel);</div>
<div class="line"><span class="lineno">  965</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ideal_weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(ei.<a class="code hl_variable" href="structendpoints__and__weights.html#a2f7e43bbb9027b71c7b240be53251217">weights</a>, texel);</div>
<div class="line"><span class="lineno">  966</span> </div>
<div class="line"><span class="lineno">  967</span>            error_change0 += contrib_weight * scale;</div>
<div class="line"><span class="lineno">  968</span>            error_change1 += (old_weight - ideal_weight) * scale;</div>
<div class="line"><span class="lineno">  969</span>        }</div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> step = (error_change1 * chd_scale) / error_change0;</div>
<div class="line"><span class="lineno">  972</span>        step = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ae91c0bb0ebd82ed2a7fa7aa915f6e76e">clamp</a>(-stepsize, stepsize, step);</div>
<div class="line"><span class="lineno">  973</span> </div>
<div class="line"><span class="lineno">  974</span>        <span class="comment">// Update the weight; note this can store negative values</span></div>
<div class="line"><span class="lineno">  975</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(weight_val + step, dec_weight_ideal_value + i);</div>
<div class="line"><span class="lineno">  976</span>    }</div>
<div class="line"><span class="lineno">  977</span>}</div>
<div class="ttc" id="aastcenc__internal_8h_html_a00c99c52668709ec2e60ec1eb401e55a"><div class="ttname"><a href="astcenc__internal_8h.html#a00c99c52668709ec2e60ec1eb401e55a">WEIGHTS_TEXEL_SUM</a></div><div class="ttdeci">static constexpr float WEIGHTS_TEXEL_SUM</div><div class="ttdoc">The sum of quantized weights for one texel.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00111">astcenc_internal.h:111</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_ad694a8ff82a68a50b11bac439531241e"><div class="ttname"><a href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_TEXELS</div><div class="ttdoc">The maximum number of texels a block can support (6x6x6 block).</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00072">astcenc_internal.h:72</a></div></div>
<div class="ttc" id="aastcenc__mathlib_8h_html_adf60643d2894fb1d3cd00d4f907186e8"><div class="ttname"><a href="astcenc__mathlib_8h.html#adf60643d2894fb1d3cd00d4f907186e8">ASTCENC_ALIGNAS</a></div><div class="ttdeci">#define ASTCENC_ALIGNAS</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00091">astcenc_mathlib.h:91</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a63b1ecd0244123ff734e6791e33bf9ca"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a63b1ecd0244123ff734e6791e33bf9ca">round_down_to_simd_multiple_vla</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE unsigned int round_down_to_simd_multiple_vla(unsigned int count)</div><div class="ttdoc">Round a count down to the largest multiple of the SIMD width.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00190">astcenc_vecmathlib.h:190</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a516a2f0d872381b8c7c047845a90c9a3"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a516a2f0d872381b8c7c047845a90c9a3">hmax</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 hmax(vint8 a)</div><div class="ttdoc">Return the horizontal maximum of a vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00534">astcenc_vecmathlib_avx2_8.h:534</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ad4c0a7bde35d6fe9c54531e1e0652f4a"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE void storea(vint8 a, int *p)</div><div class="ttdoc">Store a vector to a 16B aligned memory address.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00549">astcenc_vecmathlib_avx2_8.h:549</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ae91c0bb0ebd82ed2a7fa7aa915f6e76e"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ae91c0bb0ebd82ed2a7fa7aa915f6e76e">clamp</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat8 clamp(float min, float max, vfloat8 a)</div><div class="ttdoc">Return the clamped value between min and max.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00781">astcenc_vecmathlib_avx2_8.h:781</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a312c1244893e84561d7d01bb43493d2e"><div class="ttname"><a href="structdecimation__info.html#a312c1244893e84561d7d01bb43493d2e">decimation_info::weight_texels_tr</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t weight_texels_tr[BLOCK_MAX_TEXELS][BLOCK_MAX_WEIGHTS]</div><div class="ttdoc">The list of texels that use a specific weight index. Stored transposed to improve vectorization.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00397">astcenc_internal.h:397</a></div></div>
<div class="ttc" id="astructdecimation__info_html_a8938034ba8a3eeb122662bf5d90df522"><div class="ttname"><a href="structdecimation__info.html#a8938034ba8a3eeb122662bf5d90df522">decimation_info::weights_texel_contribs_tr</a></div><div class="ttdeci">ASTCENC_ALIGNAS float weights_texel_contribs_tr[BLOCK_MAX_TEXELS][BLOCK_MAX_WEIGHTS]</div><div class="ttdoc">The bilinear contribution to the N texels that use each weight. Value is between 0 and 1,...</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00403">astcenc_internal.h:403</a></div></div>
<div class="ttc" id="astructdecimation__info_html_af7d0c86be805995a20a6c09f6c3ab8ca"><div class="ttname"><a href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">decimation_info::weight_count</a></div><div class="ttdeci">uint8_t weight_count</div><div class="ttdoc">The total number of weights stored.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00355">astcenc_internal.h:355</a></div></div>
<div class="ttc" id="astructdecimation__info_html_af8cbdbb54638ad694f845fb0bd96d007"><div class="ttname"><a href="structdecimation__info.html#af8cbdbb54638ad694f845fb0bd96d007">decimation_info::weight_texel_count</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t weight_texel_count[BLOCK_MAX_WEIGHTS]</div><div class="ttdoc">The number of texels that each stored weight contributes to.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00391">astcenc_internal.h:391</a></div></div>
<div class="ttc" id="astructvint8_html_a2e1f0c785f4899e1b7912f2580b9f77c"><div class="ttname"><a href="structvint8.html#a2e1f0c785f4899e1b7912f2580b9f77c">vint8::lane</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE int lane() const</div><div class="ttdoc">Get the scalar from a single lane.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00216">astcenc_vecmathlib_avx2_8.h:216</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_ae1b4e922c67d5349fc849709ca08178f_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_ae1b4e922c67d5349fc849709ca08178f_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_ae1b4e922c67d5349fc849709ca08178f_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_ae1b4e922c67d5349fc849709ca08178f_cgraph">
<area shape="rect" title="Compute the optimal unquantized weights for a decimation table." alt="" coords="5,198,163,238"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a617a8dec1d2168023a84f5c0fa1c20ca" title="Functions for computing color endpoints and texel weights." alt="" coords="225,5,340,31"/>
<area shape="poly" title=" " alt="" coords="94,196,138,126,171,85,209,48,230,34,233,39,212,52,175,88,143,129,98,199"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="423,56,485,81"/>
<area shape="poly" title=" " alt="" coords="97,196,142,142,173,114,210,92,261,74,315,64,366,61,409,62,409,67,366,67,315,70,262,79,212,96,177,118,146,146,101,200"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a84286bd889620da3be77539ddfdf3b45" title="Compute the infilled weight for N texel indices in a decimated grid." alt="" coords="219,107,347,132"/>
<area shape="poly" title=" " alt="" coords="114,195,158,168,210,141,225,134,227,139,212,146,161,173,117,200"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ae91c0bb0ebd82ed2a7fa7aa915f6e76e" title="Return the clamped value between min and max." alt="" coords="254,156,311,181"/>
<area shape="poly" title=" " alt="" coords="162,196,240,176,241,182,163,201"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a516a2f0d872381b8c7c047845a90c9a3" title="Return the horizontal maximum of a vector." alt="" coords="255,205,310,231"/>
<area shape="poly" title=" " alt="" coords="163,215,241,215,241,221,163,221"/>
<area shape="rect" href="structvint8.html#a2e1f0c785f4899e1b7912f2580b9f77c" title="Get the scalar from a single lane." alt="" coords="243,255,323,280"/>
<area shape="poly" title=" " alt="" coords="163,235,230,252,228,257,162,240"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a63b1ecd0244123ff734e6791e33bf9ca" title="Round a count down to the largest multiple of the SIMD width." alt="" coords="211,305,355,345"/>
<area shape="poly" title=" " alt="" coords="118,236,212,290,224,296,221,301,209,295,115,240"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a" title="Store a vector to a 16B aligned memory address." alt="" coords="253,369,312,395"/>
<area shape="poly" title=" " alt="" coords="101,237,146,295,177,327,212,354,241,369,239,373,209,359,174,331,142,298,97,240"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="237,419,328,444"/>
<area shape="poly" title=" " alt="" coords="96,237,113,273,138,318,171,365,212,405,226,414,223,418,209,409,167,368,133,321,108,276,91,239"/>
<area shape="poly" title=" " alt="" coords="327,28,411,53,409,58,326,33"/>
<area shape="poly" title=" " alt="" coords="326,104,409,79,411,84,327,109"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3" title="Return the max vector of two vectors." alt="" coords="431,132,477,157"/>
<area shape="poly" title=" " alt="" coords="311,162,417,147,418,152,312,167"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b" title="Return the min vector of two vectors." alt="" coords="433,181,475,207"/>
<area shape="poly" title=" " alt="" coords="312,170,420,186,419,192,311,175"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="403,419,505,444"/>
<area shape="poly" title=" " alt="" coords="328,429,389,429,389,434,328,434"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_ae1b4e922c67d5349fc849709ca08178f_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_ae1b4e922c67d5349fc849709ca08178f_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_ae1b4e922c67d5349fc849709ca08178f_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_ae1b4e922c67d5349fc849709ca08178f_icgraph">
<area shape="rect" title="Compute the optimal unquantized weights for a decimation table." alt="" coords="1239,37,1396,77"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,68"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="af42cf444db5f16e2ed4fb642acf81f4a" name="af42cf444db5f16e2ed4fb642acf81f4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af42cf444db5f16e2ed4fb642acf81f4a">&#9670;&#160;</a></span>compute_quantized_weights_for_decimation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_quantized_weights_for_decimation </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>di</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>low_bound</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>high_bound</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>dec_weight_ideal_value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>dec_weight_quant_uvalue</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>dec_weight_uquant</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a></td>          <td class="paramname"><span class="paramname"><em>quant_level</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the optimal quantized weights for a decimation table. </p>
<p>We test the two closest weight indices in the allowed quantization range and keep the weight that is the closest match.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">di</td><td>The selected weight decimation. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">low_bound</td><td>The lowest weight allowed. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">high_bound</td><td>The highest weight allowed. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">dec_weight_ideal_value</td><td>The ideal weight set. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dec_weight_quant_uvalue</td><td>The output quantized weight as a float. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dec_weight_uquant</td><td>The output quantized weight as encoded int. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">quant_level</td><td>The desired weight quant level. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l00980">980</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  988</span>  {</div>
<div class="line"><span class="lineno">  989</span>    <span class="keywordtype">int</span> weight_count = di.<a class="code hl_variable" href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">weight_count</a>;</div>
<div class="line"><span class="lineno">  990</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(weight_count &gt; 0);</div>
<div class="line"><span class="lineno">  991</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structquant__and__transfer__table.html">quant_and_transfer_table</a>&amp; qat = <a class="code hl_variable" href="astcenc__internal_8h.html#a9d58fe49f85551cd8c9ccadb5aece318">quant_and_xfer_tables</a>[quant_level];</div>
<div class="line"><span class="lineno">  992</span> </div>
<div class="line"><span class="lineno">  993</span>    <span class="comment">// The available quant levels, stored with a minus 1 bias</span></div>
<div class="line"><span class="lineno">  994</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> quant_levels_m1[12] {</div>
<div class="line"><span class="lineno">  995</span>        1.0f, 2.0f, 3.0f, 4.0f, 5.0f, 7.0f, 9.0f, 11.0f, 15.0f, 19.0f, 23.0f, 31.0f</div>
<div class="line"><span class="lineno">  996</span>    };</div>
<div class="line"><span class="lineno">  997</span> </div>
<div class="line"><span class="lineno">  998</span>    <a class="code hl_struct" href="structvint4.html">vint</a> steps_m1(<a class="code hl_function" href="astcenc__internal_8h.html#aec456deb917676d5506d91947c6d5726">get_quant_level</a>(quant_level) - 1);</div>
<div class="line"><span class="lineno">  999</span>    <span class="keywordtype">float</span> quant_level_m1 = quant_levels_m1[quant_level];</div>
<div class="line"><span class="lineno"> 1000</span> </div>
<div class="line"><span class="lineno"> 1001</span>    <span class="comment">// Quantize the weight set using both the specified low/high bounds and standard 0..1 bounds</span></div>
<div class="line"><span class="lineno"> 1002</span> </div>
<div class="line"><span class="lineno"> 1003</span>    <span class="comment">// TODO: Oddity to investigate; triggered by test in issue #265.</span></div>
<div class="line"><span class="lineno"> 1004</span>    <span class="keywordflow">if</span> (high_bound &lt;= low_bound)</div>
<div class="line"><span class="lineno"> 1005</span>    {</div>
<div class="line"><span class="lineno"> 1006</span>        low_bound = 0.0f;</div>
<div class="line"><span class="lineno"> 1007</span>        high_bound = 1.0f;</div>
<div class="line"><span class="lineno"> 1008</span>    }</div>
<div class="line"><span class="lineno"> 1009</span> </div>
<div class="line"><span class="lineno"> 1010</span>    <span class="keywordtype">float</span> rscale = high_bound - low_bound;</div>
<div class="line"><span class="lineno"> 1011</span>    <span class="keywordtype">float</span> scale = 1.0f / rscale;</div>
<div class="line"><span class="lineno"> 1012</span> </div>
<div class="line"><span class="lineno"> 1013</span>    <span class="keywordtype">float</span> scaled_low_bound = low_bound * scale;</div>
<div class="line"><span class="lineno"> 1014</span>    rscale *= 1.0f / 64.0f;</div>
<div class="line"><span class="lineno"> 1015</span> </div>
<div class="line"><span class="lineno"> 1016</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> scalev(scale);</div>
<div class="line"><span class="lineno"> 1017</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> scaled_low_boundv(scaled_low_bound);</div>
<div class="line"><span class="lineno"> 1018</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> quant_level_m1v(quant_level_m1);</div>
<div class="line"><span class="lineno"> 1019</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> rscalev(rscale);</div>
<div class="line"><span class="lineno"> 1020</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> low_boundv(low_bound);</div>
<div class="line"><span class="lineno"> 1021</span> </div>
<div class="line"><span class="lineno"> 1022</span>    <span class="comment">// This runs to the rounded-up SIMD size, which is safe as the loop tail is filled with known</span></div>
<div class="line"><span class="lineno"> 1023</span>    <span class="comment">// safe data in compute_ideal_weights_for_decimation and arrays are always 64 elements</span></div>
<div class="line"><span class="lineno"> 1024</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="astcenc__internal_8h.html#aec456deb917676d5506d91947c6d5726">get_quant_level</a>(quant_level) &lt;= 16)</div>
<div class="line"><span class="lineno"> 1025</span>    {</div>
<div class="line"><span class="lineno"> 1026</span>        <a class="code hl_struct" href="structvint4.html">vint4</a> tab0 = <a class="code hl_function" href="structvint4.html#ab899bfb3323ffa799403172941113a7e">vint4::load</a>(qat.<a class="code hl_variable" href="structquant__and__transfer__table.html#ab19e214b6fa5cc1b432419d34133fbc9">quant_to_unquant</a>);</div>
<div class="line"><span class="lineno"> 1027</span>        <a class="code hl_struct" href="structvint4.html">vint</a> tab0p;</div>
<div class="line"><span class="lineno"> 1028</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a38035a0e5616592fa235308dc60c476f">vtable_prepare</a>(tab0, tab0p);</div>
<div class="line"><span class="lineno"> 1029</span> </div>
<div class="line"><span class="lineno"> 1030</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; weight_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno"> 1031</span>        {</div>
<div class="line"><span class="lineno"> 1032</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ix = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(dec_weight_ideal_value + i) * scalev - scaled_low_boundv;</div>
<div class="line"><span class="lineno"> 1033</span>            ix = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a154fea8d8c99676fb5550ff40eed3d75">clampzo</a>(ix);</div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span>            <span class="comment">// Look up the two closest indexes and return the one that was closest</span></div>
<div class="line"><span class="lineno"> 1036</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ix1 = ix * quant_level_m1v;</div>
<div class="line"><span class="lineno"> 1037</span> </div>
<div class="line"><span class="lineno"> 1038</span>            <a class="code hl_struct" href="structvint4.html">vint</a> weightl = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#afdaab5e0b4a39a5dd28fb5b40642e57d">float_to_int</a>(ix1);</div>
<div class="line"><span class="lineno"> 1039</span>            <a class="code hl_struct" href="structvint4.html">vint</a> weighth = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b">min</a>(weightl + <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(1), steps_m1);</div>
<div class="line"><span class="lineno"> 1040</span> </div>
<div class="line"><span class="lineno"> 1041</span>            <a class="code hl_struct" href="structvint4.html">vint</a> ixli = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a2778951898aea88de4dd7881e7cd817b">vtable_8bt_32bi</a>(tab0p, weightl);</div>
<div class="line"><span class="lineno"> 1042</span>            <a class="code hl_struct" href="structvint4.html">vint</a> ixhi = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a2778951898aea88de4dd7881e7cd817b">vtable_8bt_32bi</a>(tab0p, weighth);</div>
<div class="line"><span class="lineno"> 1043</span> </div>
<div class="line"><span class="lineno"> 1044</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ixl = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7">int_to_float</a>(ixli);</div>
<div class="line"><span class="lineno"> 1045</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ixh = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7">int_to_float</a>(ixhi);</div>
<div class="line"><span class="lineno"> 1046</span> </div>
<div class="line"><span class="lineno"> 1047</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = (ixl + ixh) &lt; (<a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a>(128.0f) * ix);</div>
<div class="line"><span class="lineno"> 1048</span>            <a class="code hl_struct" href="structvint4.html">vint</a> weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ixli, ixhi, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno"> 1049</span>            ixl = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ixl, ixh, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno"> 1050</span> </div>
<div class="line"><span class="lineno"> 1051</span>            <span class="comment">// Invert the weight-scaling that was done initially</span></div>
<div class="line"><span class="lineno"> 1052</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(ixl * rscalev + low_boundv, weight_set_out + i);</div>
<div class="line"><span class="lineno"> 1053</span>            <a class="code hl_struct" href="structvint4.html">vint</a> scn = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a98f7a50685f56b5c84d1c760fa037d6d">pack_low_bytes</a>(weight);</div>
<div class="line"><span class="lineno"> 1054</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ac55f9ffdc41bee5d274cb6433809fefc">store_nbytes</a>(scn, quantized_weight_set + i);</div>
<div class="line"><span class="lineno"> 1055</span>        }</div>
<div class="line"><span class="lineno"> 1056</span>    }</div>
<div class="line"><span class="lineno"> 1057</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1058</span>    {</div>
<div class="line"><span class="lineno"> 1059</span>        <a class="code hl_struct" href="structvint4.html">vint4</a> tab0 = <a class="code hl_function" href="structvint4.html#ab899bfb3323ffa799403172941113a7e">vint4::load</a>(qat.<a class="code hl_variable" href="structquant__and__transfer__table.html#ab19e214b6fa5cc1b432419d34133fbc9">quant_to_unquant</a> +  0);</div>
<div class="line"><span class="lineno"> 1060</span>        <a class="code hl_struct" href="structvint4.html">vint4</a> tab1 = <a class="code hl_function" href="structvint4.html#ab899bfb3323ffa799403172941113a7e">vint4::load</a>(qat.<a class="code hl_variable" href="structquant__and__transfer__table.html#ab19e214b6fa5cc1b432419d34133fbc9">quant_to_unquant</a> + 16);</div>
<div class="line"><span class="lineno"> 1061</span>        <a class="code hl_struct" href="structvint4.html">vint</a> tab0p, tab1p;</div>
<div class="line"><span class="lineno"> 1062</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a38035a0e5616592fa235308dc60c476f">vtable_prepare</a>(tab0, tab1, tab0p, tab1p);</div>
<div class="line"><span class="lineno"> 1063</span> </div>
<div class="line"><span class="lineno"> 1064</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; weight_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno"> 1065</span>        {</div>
<div class="line"><span class="lineno"> 1066</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ix = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(dec_weight_ideal_value + i) * scalev - scaled_low_boundv;</div>
<div class="line"><span class="lineno"> 1067</span>            ix = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a154fea8d8c99676fb5550ff40eed3d75">clampzo</a>(ix);</div>
<div class="line"><span class="lineno"> 1068</span> </div>
<div class="line"><span class="lineno"> 1069</span>            <span class="comment">// Look up the two closest indexes and return the one that was closest</span></div>
<div class="line"><span class="lineno"> 1070</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ix1 = ix * quant_level_m1v;</div>
<div class="line"><span class="lineno"> 1071</span> </div>
<div class="line"><span class="lineno"> 1072</span>            <a class="code hl_struct" href="structvint4.html">vint</a> weightl = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#afdaab5e0b4a39a5dd28fb5b40642e57d">float_to_int</a>(ix1);</div>
<div class="line"><span class="lineno"> 1073</span>            <a class="code hl_struct" href="structvint4.html">vint</a> weighth = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b">min</a>(weightl + <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(1), steps_m1);</div>
<div class="line"><span class="lineno"> 1074</span> </div>
<div class="line"><span class="lineno"> 1075</span>            <a class="code hl_struct" href="structvint4.html">vint</a> ixli = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a2778951898aea88de4dd7881e7cd817b">vtable_8bt_32bi</a>(tab0p, tab1p, weightl);</div>
<div class="line"><span class="lineno"> 1076</span>            <a class="code hl_struct" href="structvint4.html">vint</a> ixhi = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a2778951898aea88de4dd7881e7cd817b">vtable_8bt_32bi</a>(tab0p, tab1p, weighth);</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ixl = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7">int_to_float</a>(ixli);</div>
<div class="line"><span class="lineno"> 1079</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ixh = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7">int_to_float</a>(ixhi);</div>
<div class="line"><span class="lineno"> 1080</span> </div>
<div class="line"><span class="lineno"> 1081</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = (ixl + ixh) &lt; (<a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a>(128.0f) * ix);</div>
<div class="line"><span class="lineno"> 1082</span>            <a class="code hl_struct" href="structvint4.html">vint</a> weight = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ixli, ixhi, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno"> 1083</span>            ixl = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ixl, ixh, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno"> 1084</span> </div>
<div class="line"><span class="lineno"> 1085</span>            <span class="comment">// Invert the weight-scaling that was done initially</span></div>
<div class="line"><span class="lineno"> 1086</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(ixl * rscalev + low_boundv, weight_set_out + i);</div>
<div class="line"><span class="lineno"> 1087</span>            <a class="code hl_struct" href="structvint4.html">vint</a> scn = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a98f7a50685f56b5c84d1c760fa037d6d">pack_low_bytes</a>(weight);</div>
<div class="line"><span class="lineno"> 1088</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ac55f9ffdc41bee5d274cb6433809fefc">store_nbytes</a>(scn, quantized_weight_set + i);</div>
<div class="line"><span class="lineno"> 1089</span>        }</div>
<div class="line"><span class="lineno"> 1090</span>    }</div>
<div class="line"><span class="lineno"> 1091</span>}</div>
<div class="ttc" id="aastcenc__internal_8h_html_a9d58fe49f85551cd8c9ccadb5aece318"><div class="ttname"><a href="astcenc__internal_8h.html#a9d58fe49f85551cd8c9ccadb5aece318">quant_and_xfer_tables</a></div><div class="ttdeci">const quant_and_transfer_table quant_and_xfer_tables[12]</div><div class="ttdoc">The precomputed quant and transfer table.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__weight__quant__xfer__tables_8cpp_source.html#l00026">astcenc_weight_quant_xfer_tables.cpp:26</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_aec456deb917676d5506d91947c6d5726"><div class="ttname"><a href="astcenc__internal_8h.html#aec456deb917676d5506d91947c6d5726">get_quant_level</a></div><div class="ttdeci">static unsigned int get_quant_level(quant_method method)</div><div class="ttdoc">The number of levels use by an ASTC quantization method.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00235">astcenc_internal.h:235</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a3a29c3b15144cf0836ca0f4740b73d00"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a></div><div class="ttdeci">vfloat4 vfloat</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00148">astcenc_vecmathlib.h:148</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a154fea8d8c99676fb5550ff40eed3d75"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a154fea8d8c99676fb5550ff40eed3d75">clampzo</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat8 clampzo(vfloat8 a)</div><div class="ttdoc">Return a clamped value between 0.0f and 1.0f.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00807">astcenc_vecmathlib_avx2_8.h:807</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a165b3db4e7ced1551e1880a01a01150b"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b">min</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 min(vint8 a, vint8 b)</div><div class="ttdoc">Return the min vector of two vectors.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00503">astcenc_vecmathlib_avx2_8.h:503</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a2778951898aea88de4dd7881e7cd817b"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a2778951898aea88de4dd7881e7cd817b">vtable_8bt_32bi</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 vtable_8bt_32bi(vint8 t0, vint8 idx)</div><div class="ttdoc">Perform an 8-bit 16-entry table lookup, with 32-bit indexes.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l01095">astcenc_vecmathlib_avx2_8.h:1095</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a38035a0e5616592fa235308dc60c476f"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a38035a0e5616592fa235308dc60c476f">vtable_prepare</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE void vtable_prepare(vint4 t0, vint8 &amp;t0p)</div><div class="ttdoc">Prepare a vtable lookup table for use with the native SIMD size.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l01051">astcenc_vecmathlib_avx2_8.h:1051</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a3a2ce0fb403294db7fe126a6b3e87ab7"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7">int_to_float</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat8 int_to_float(vint8 a)</div><div class="ttdoc">Return a float value for an integer vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l01019">astcenc_vecmathlib_avx2_8.h:1019</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a98f7a50685f56b5c84d1c760fa037d6d"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a98f7a50685f56b5c84d1c760fa037d6d">pack_low_bytes</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 pack_low_bytes(vint8 v)</div><div class="ttdoc">Pack low 8 bits of N (vector width) lanes into bottom of vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00584">astcenc_vecmathlib_avx2_8.h:584</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ac55f9ffdc41bee5d274cb6433809fefc"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ac55f9ffdc41bee5d274cb6433809fefc">store_nbytes</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE void store_nbytes(vint8 a, uint8_t *p)</div><div class="ttdoc">Store lowest N (vector width) bytes into an unaligned address.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00565">astcenc_vecmathlib_avx2_8.h:565</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ad922a3ed6098767968916265154b6f82"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE unsigned int mask(vmask8 a)</div><div class="ttdoc">Return a 8-bit mask code indicating mask status.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00355">astcenc_vecmathlib_avx2_8.h:355</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_afdaab5e0b4a39a5dd28fb5b40642e57d"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#afdaab5e0b4a39a5dd28fb5b40642e57d">float_to_int</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 float_to_int(vfloat8 a)</div><div class="ttdoc">Return a integer value for a float vector, using truncation.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l01001">astcenc_vecmathlib_avx2_8.h:1001</a></div></div>
<div class="ttc" id="astructquant__and__transfer__table_html"><div class="ttname"><a href="structquant__and__transfer__table.html">quant_and_transfer_table</a></div><div class="ttdoc">Weight quantization transfer table.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01031">astcenc_internal.h:1032</a></div></div>
<div class="ttc" id="astructquant__and__transfer__table_html_ab19e214b6fa5cc1b432419d34133fbc9"><div class="ttname"><a href="structquant__and__transfer__table.html#ab19e214b6fa5cc1b432419d34133fbc9">quant_and_transfer_table::quant_to_unquant</a></div><div class="ttdeci">uint8_t quant_to_unquant[32]</div><div class="ttdoc">The unscrambled unquantized value.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01034">astcenc_internal.h:1034</a></div></div>
<div class="ttc" id="astructvint4_html_ab899bfb3323ffa799403172941113a7e"><div class="ttname"><a href="structvint4.html#ab899bfb3323ffa799403172941113a7e">vint4::load</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vint4 load(const uint8_t *p)</div><div class="ttdoc">Factory that returns a vector loaded from unaligned memory.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00276">astcenc_vecmathlib_neon_4.h:276</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_af42cf444db5f16e2ed4fb642acf81f4a_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_af42cf444db5f16e2ed4fb642acf81f4a_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_af42cf444db5f16e2ed4fb642acf81f4a_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_af42cf444db5f16e2ed4fb642acf81f4a_cgraph">
<area shape="rect" title="Compute the optimal quantized weights for a decimation table." alt="" coords="5,294,192,334"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a154fea8d8c99676fb5550ff40eed3d75" title="Return a clamped value between 0.0f and 1.0f." alt="" coords="262,5,333,31"/>
<area shape="poly" title=" " alt="" coords="103,293,119,243,146,176,185,104,210,70,238,40,248,32,252,37,242,44,214,74,190,107,151,178,124,245,108,294"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#afdaab5e0b4a39a5dd28fb5b40642e57d" title="Return a integer value for a float vector, using truncation." alt="" coords="255,55,340,80"/>
<area shape="poly" title=" " alt="" coords="105,293,124,251,152,197,191,140,238,89,244,85,247,89,242,93,195,143,157,200,128,254,110,295"/>
<area shape="rect" href="astcenc__internal_8h.html#aec456deb917676d5506d91947c6d5726" title="The number of levels use by an ASTC quantization method." alt="" coords="242,104,353,129"/>
<area shape="poly" title=" " alt="" coords="110,292,160,219,196,176,238,139,245,134,248,138,242,143,200,180,164,222,114,295"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7" title="Return a float value for an integer vector." alt="" coords="255,153,340,179"/>
<area shape="poly" title=" " alt="" coords="117,292,169,241,239,188,248,182,250,187,241,192,173,245,121,296"/>
<area shape="rect" href="structvint4.html#ab899bfb3323ffa799403172941113a7e" title="Factory that returns a vector loaded from unaligned memory." alt="" coords="257,203,337,228"/>
<area shape="poly" title=" " alt="" coords="135,291,239,237,251,231,254,236,241,242,137,296"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="270,252,325,277"/>
<area shape="poly" title=" " alt="" coords="179,291,256,272,257,277,180,297"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b" title="Return the min vector of two vectors." alt="" coords="276,301,319,327"/>
<area shape="poly" title=" " alt="" coords="192,311,262,311,262,317,192,317"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a98f7a50685f56b5c84d1c760fa037d6d" title="Pack low 8 bits of N (vector width) lanes into bottom of vector." alt="" coords="240,351,355,376"/>
<area shape="poly" title=" " alt="" coords="180,331,233,345,232,350,179,337"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="269,400,326,425"/>
<area shape="poly" title=" " alt="" coords="138,332,241,385,257,393,255,397,239,390,136,337"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ac55f9ffdc41bee5d274cb6433809fefc" title="Store lowest N (vector width) bytes into an unaligned address." alt="" coords="249,449,346,475"/>
<area shape="poly" title=" " alt="" coords="121,332,173,382,241,434,252,441,250,445,239,439,170,386,118,336"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a" title="Store a vector to a 16B aligned memory address." alt="" coords="268,499,327,524"/>
<area shape="poly" title=" " alt="" coords="114,333,165,405,201,447,242,484,257,494,254,498,238,488,197,450,160,408,110,336"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a2778951898aea88de4dd7881e7cd817b" title="Perform an 8&#45;bit 16&#45;entry table lookup, with 32&#45;bit indexes." alt="" coords="242,548,353,573"/>
<area shape="poly" title=" " alt="" coords="111,333,129,374,158,427,195,483,242,533,249,539,246,543,238,537,191,487,153,430,124,377,106,336"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a38035a0e5616592fa235308dc60c476f" title="Prepare a vtable lookup table for use with the native SIMD size." alt="" coords="245,597,350,623"/>
<area shape="poly" title=" " alt="" coords="108,333,124,383,151,449,190,520,214,553,242,583,248,588,245,592,238,587,210,556,186,523,146,451,119,384,103,335"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_af42cf444db5f16e2ed4fb642acf81f4a_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_af42cf444db5f16e2ed4fb642acf81f4a_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_af42cf444db5f16e2ed4fb642acf81f4a_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_af42cf444db5f16e2ed4fb642acf81f4a_icgraph">
<area shape="rect" title="Compute the optimal quantized weights for a decimation table." alt="" coords="1239,37,1425,77"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,45,1191,40,1191,35,1226,40"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1226,75,1191,80,1191,74,1225,70"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="a55d08b4feda289df7cbcfa6e1ed0b80c" name="a55d08b4feda289df7cbcfa6e1ed0b80c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55d08b4feda289df7cbcfa6e1ed0b80c">&#9670;&#160;</a></span>compute_rgbo_vector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structvfloat4.html">vfloat4</a> compute_rgbo_vector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>rgba_weight_sum</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>weight_weight_sum</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>rgbq_sum</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>psum</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the RGB + offset for a HDR endpoint mode #7. </p>
<p>Since the matrix needed has a regular structure we can simplify the inverse calculation. This gives us ~24 multiplications vs. 96 for a generic inverse.</p>
<p>mat[0] = <a class="el" href="structvfloat4.html" title="4x32-bit vectors, implemented using Armv8-A NEON.">vfloat4</a>(rgba_ws.x, 0.0f, 0.0f, wght_ws.x); mat[1] = <a class="el" href="structvfloat4.html" title="4x32-bit vectors, implemented using Armv8-A NEON.">vfloat4</a>( 0.0f, rgba_ws.y, 0.0f, wght_ws.y); mat[2] = <a class="el" href="structvfloat4.html" title="4x32-bit vectors, implemented using Armv8-A NEON.">vfloat4</a>( 0.0f, 0.0f, rgba_ws.z, wght_ws.z); mat[3] = <a class="el" href="structvfloat4.html" title="4x32-bit vectors, implemented using Armv8-A NEON.">vfloat4</a>(wght_ws.x, wght_ws.y, wght_ws.z, psum); mat = invert(mat);</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramname">rgba_weight_sum</td><td>Sum of partition component error weights. </td></tr>
    <tr><td class="paramname">weight_weight_sum</td><td>Sum of partition component error weights * texel weight. </td></tr>
    <tr><td class="paramname">rgbq_sum</td><td>Sum of partition component error weights * texel weight * color data. </td></tr>
    <tr><td class="paramname">psum</td><td>Sum of RGB color weights * texel weight^2. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l01110">1110</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1115</span>  {</div>
<div class="line"><span class="lineno"> 1116</span>    <span class="keywordtype">float</span> X = rgba_weight_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;();</div>
<div class="line"><span class="lineno"> 1117</span>    <span class="keywordtype">float</span> Y = rgba_weight_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;();</div>
<div class="line"><span class="lineno"> 1118</span>    <span class="keywordtype">float</span> Z = rgba_weight_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;();</div>
<div class="line"><span class="lineno"> 1119</span>    <span class="keywordtype">float</span> P = weight_weight_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;();</div>
<div class="line"><span class="lineno"> 1120</span>    <span class="keywordtype">float</span> Q = weight_weight_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;();</div>
<div class="line"><span class="lineno"> 1121</span>    <span class="keywordtype">float</span> R = weight_weight_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;();</div>
<div class="line"><span class="lineno"> 1122</span>    <span class="keywordtype">float</span> S = psum;</div>
<div class="line"><span class="lineno"> 1123</span> </div>
<div class="line"><span class="lineno"> 1124</span>    <span class="keywordtype">float</span> PP = P * P;</div>
<div class="line"><span class="lineno"> 1125</span>    <span class="keywordtype">float</span> QQ = Q * Q;</div>
<div class="line"><span class="lineno"> 1126</span>    <span class="keywordtype">float</span> RR = R * R;</div>
<div class="line"><span class="lineno"> 1127</span> </div>
<div class="line"><span class="lineno"> 1128</span>    <span class="keywordtype">float</span> SZmRR = S * Z - RR;</div>
<div class="line"><span class="lineno"> 1129</span>    <span class="keywordtype">float</span> DT = SZmRR * Y - Z * QQ;</div>
<div class="line"><span class="lineno"> 1130</span>    <span class="keywordtype">float</span> YP = Y * P;</div>
<div class="line"><span class="lineno"> 1131</span>    <span class="keywordtype">float</span> QX = Q * X;</div>
<div class="line"><span class="lineno"> 1132</span>    <span class="keywordtype">float</span> YX = Y * X;</div>
<div class="line"><span class="lineno"> 1133</span>    <span class="keywordtype">float</span> mZYP = -Z * YP;</div>
<div class="line"><span class="lineno"> 1134</span>    <span class="keywordtype">float</span> mZQX = -Z * QX;</div>
<div class="line"><span class="lineno"> 1135</span>    <span class="keywordtype">float</span> mRYX = -R * YX;</div>
<div class="line"><span class="lineno"> 1136</span>    <span class="keywordtype">float</span> ZQP = Z * Q * P;</div>
<div class="line"><span class="lineno"> 1137</span>    <span class="keywordtype">float</span> RYP = R * YP;</div>
<div class="line"><span class="lineno"> 1138</span>    <span class="keywordtype">float</span> RQX = R * QX;</div>
<div class="line"><span class="lineno"> 1139</span> </div>
<div class="line"><span class="lineno"> 1140</span>    <span class="comment">// Compute the reciprocal of matrix determinant</span></div>
<div class="line"><span class="lineno"> 1141</span>    <span class="keywordtype">float</span> rdet = 1.0f / (DT * X + mZYP * P);</div>
<div class="line"><span class="lineno"> 1142</span> </div>
<div class="line"><span class="lineno"> 1143</span>    <span class="comment">// Actually compute the adjugate, and then apply 1/det separately</span></div>
<div class="line"><span class="lineno"> 1144</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> mat0(DT, ZQP, RYP, mZYP);</div>
<div class="line"><span class="lineno"> 1145</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> mat1(ZQP, SZmRR * X - Z * PP, RQX, mZQX);</div>
<div class="line"><span class="lineno"> 1146</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> mat2(RYP, RQX, (S * Y - QQ) * X - Y * PP, mRYX);</div>
<div class="line"><span class="lineno"> 1147</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> mat3(mZYP, mZQX, mRYX, Z * YX);</div>
<div class="line"><span class="lineno"> 1148</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> vect = rgbq_sum * rdet;</div>
<div class="line"><span class="lineno"> 1149</span> </div>
<div class="line"><span class="lineno"> 1150</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(<a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(mat0, vect),</div>
<div class="line"><span class="lineno"> 1151</span>                   <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(mat1, vect),</div>
<div class="line"><span class="lineno"> 1152</span>                   <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(mat2, vect),</div>
<div class="line"><span class="lineno"> 1153</span>                   <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(mat3, vect));</div>
<div class="line"><span class="lineno"> 1154</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a55d08b4feda289df7cbcfa6e1ed0b80c_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a55d08b4feda289df7cbcfa6e1ed0b80c_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a55d08b4feda289df7cbcfa6e1ed0b80c_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a55d08b4feda289df7cbcfa6e1ed0b80c_cgraph">
<area shape="rect" title="Compute the RGB + offset for a HDR endpoint mode #7." alt="" coords="5,55,151,80"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="217,29,271,55"/>
<area shape="poly" title=" " alt="" coords="151,54,203,46,203,51,151,59"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="199,79,289,104"/>
<area shape="poly" title=" " alt="" coords="151,75,185,80,184,85,151,80"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="337,29,401,55"/>
<area shape="poly" title=" " alt="" coords="271,39,324,39,324,45,271,45"/>
<area shape="poly" title=" " alt="" coords="348,30,343,21,346,11,355,5,369,3,387,6,394,14,390,18,384,11,369,8,357,10,350,14,349,20,352,28"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a55d08b4feda289df7cbcfa6e1ed0b80c_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a55d08b4feda289df7cbcfa6e1ed0b80c_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a55d08b4feda289df7cbcfa6e1ed0b80c_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a55d08b4feda289df7cbcfa6e1ed0b80c_icgraph">
<area shape="rect" title="Compute the RGB + offset for a HDR endpoint mode #7." alt="" coords="1445,45,1591,70"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a02bcad94240678ee727ccf2f0fbfb5d3" title="For a given 1 plane weight set recompute the endpoint colors." alt="" coords="1239,5,1397,45"/>
<area shape="poly" title=" " alt="" coords="1431,46,1397,41,1398,35,1432,41"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#afb3c455470bef24f48d7815bb78bb569" title="For a given 2 plane weight set recompute the endpoint colors." alt="" coords="1239,69,1397,109"/>
<area shape="poly" title=" " alt="" coords="1432,74,1398,79,1397,74,1431,68"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,92,1191,92,1191,87,1225,87"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="a02bcad94240678ee727ccf2f0fbfb5d3" name="a02bcad94240678ee727ccf2f0fbfb5d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02bcad94240678ee727ccf2f0fbfb5d3">&#9670;&#160;</a></span>recompute_ideal_colors_1plane()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void recompute_ideal_colors_1plane </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>di</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>dec_weights_uquant</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structendpoints.html">endpoints</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ep</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>rgbs_vectors</em></span>[BLOCK_MAX_PARTITIONS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>rgbo_vectors</em></span>[BLOCK_MAX_PARTITIONS]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For a given 1 plane weight set recompute the endpoint colors. </p>
<p>As we quantize and decimate weights the optimal endpoint colors may change slightly, so we must recompute the ideal colors for a specific weight set.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">di</td><td>The weight grid decimation table. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">dec_weights_uquant</td><td>The quantized weight set. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ep</td><td>The color endpoints (modifed in place). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rgbs_vectors</td><td>The RGB+scale vectors for LDR blocks. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rgbo_vectors</td><td>The RGB+offset vectors for HDR blocks. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l01157">1157</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1165</span>  {</div>
<div class="line"><span class="lineno"> 1166</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weight_count = di.<a class="code hl_variable" href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">weight_count</a>;</div>
<div class="line"><span class="lineno"> 1167</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> total_texel_count = blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>;</div>
<div class="line"><span class="lineno"> 1168</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno"> 1169</span> </div>
<div class="line"><span class="lineno"> 1170</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(weight_count &gt; 0);</div>
<div class="line"><span class="lineno"> 1171</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(total_texel_count &gt; 0);</div>
<div class="line"><span class="lineno"> 1172</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno"> 1173</span> </div>
<div class="line"><span class="lineno"> 1174</span>    <a class="code hl_define" href="astcenc__mathlib_8h.html#adf60643d2894fb1d3cd00d4f907186e8">ASTCENC_ALIGNAS</a> <span class="keywordtype">float</span> dec_weight[<a class="code hl_variable" href="astcenc__internal_8h.html#aa069d5d400baafe528bce4778aba6c45">BLOCK_MAX_WEIGHTS</a>];</div>
<div class="line"><span class="lineno"> 1175</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; weight_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno"> 1176</span>    {</div>
<div class="line"><span class="lineno"> 1177</span>        <a class="code hl_struct" href="structvint4.html">vint</a> unquant_value(dec_weights_uquant + i);</div>
<div class="line"><span class="lineno"> 1178</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> unquant_valuef = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7">int_to_float</a>(unquant_value) * <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a>(1.0f / 64.0f);</div>
<div class="line"><span class="lineno"> 1179</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(unquant_valuef, dec_weight + i);</div>
<div class="line"><span class="lineno"> 1180</span>    }</div>
<div class="line"><span class="lineno"> 1181</span> </div>
<div class="line"><span class="lineno"> 1182</span>    <a class="code hl_define" href="astcenc__mathlib_8h.html#adf60643d2894fb1d3cd00d4f907186e8">ASTCENC_ALIGNAS</a> <span class="keywordtype">float</span> undec_weight[<a class="code hl_variable" href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a>];</div>
<div class="line"><span class="lineno"> 1183</span>    <span class="keywordtype">float</span>* undec_weight_ref;</div>
<div class="line"><span class="lineno"> 1184</span>    <span class="keywordflow">if</span> (di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> == 1)</div>
<div class="line"><span class="lineno"> 1185</span>    {</div>
<div class="line"><span class="lineno"> 1186</span>        undec_weight_ref = dec_weight;</div>
<div class="line"><span class="lineno"> 1187</span>    }</div>
<div class="line"><span class="lineno"> 1188</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> &lt;= 2)</div>
<div class="line"><span class="lineno"> 1189</span>    {</div>
<div class="line"><span class="lineno"> 1190</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; total_texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno"> 1191</span>        {</div>
<div class="line"><span class="lineno"> 1192</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight = <a class="code hl_function" href="#a84286bd889620da3be77539ddfdf3b45">bilinear_infill_vla_2</a>(di, dec_weight, i);</div>
<div class="line"><span class="lineno"> 1193</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(weight, undec_weight + i);</div>
<div class="line"><span class="lineno"> 1194</span>        }</div>
<div class="line"><span class="lineno"> 1195</span> </div>
<div class="line"><span class="lineno"> 1196</span>        undec_weight_ref = undec_weight;</div>
<div class="line"><span class="lineno"> 1197</span>    }</div>
<div class="line"><span class="lineno"> 1198</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1199</span>    {</div>
<div class="line"><span class="lineno"> 1200</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; total_texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno"> 1201</span>        {</div>
<div class="line"><span class="lineno"> 1202</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight = <a class="code hl_function" href="#a617a8dec1d2168023a84f5c0fa1c20ca">bilinear_infill_vla</a>(di, dec_weight, i);</div>
<div class="line"><span class="lineno"> 1203</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(weight, undec_weight + i);</div>
<div class="line"><span class="lineno"> 1204</span>        }</div>
<div class="line"><span class="lineno"> 1205</span> </div>
<div class="line"><span class="lineno"> 1206</span>        undec_weight_ref = undec_weight;</div>
<div class="line"><span class="lineno"> 1207</span>    }</div>
<div class="line"><span class="lineno"> 1208</span> </div>
<div class="line"><span class="lineno"> 1209</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> rgba_sum(blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a> * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>));</div>
<div class="line"><span class="lineno"> 1210</span> </div>
<div class="line"><span class="lineno"> 1211</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno"> 1212</span>    {</div>
<div class="line"><span class="lineno"> 1213</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[i];</div>
<div class="line"><span class="lineno"> 1214</span>        <span class="keyword">const</span> uint8_t *texel_indexes = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[i];</div>
<div class="line"><span class="lineno"> 1215</span> </div>
<div class="line"><span class="lineno"> 1216</span>        <span class="comment">// Only compute a partition mean if more than one partition</span></div>
<div class="line"><span class="lineno"> 1217</span>        <span class="keywordflow">if</span> (partition_count &gt; 1)</div>
<div class="line"><span class="lineno"> 1218</span>        {</div>
<div class="line"><span class="lineno"> 1219</span>            rgba_sum = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno"> 1220</span>            <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno"> 1221</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; texel_count; j++)</div>
<div class="line"><span class="lineno"> 1222</span>            {</div>
<div class="line"><span class="lineno"> 1223</span>                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tix = texel_indexes[j];</div>
<div class="line"><span class="lineno"> 1224</span>                rgba_sum += blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(tix);</div>
<div class="line"><span class="lineno"> 1225</span>            }</div>
<div class="line"><span class="lineno"> 1226</span>        }</div>
<div class="line"><span class="lineno"> 1227</span> </div>
<div class="line"><span class="lineno"> 1228</span>        rgba_sum = rgba_sum * blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>;</div>
<div class="line"><span class="lineno"> 1229</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> rgba_weight_sum = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3">max</a>(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a> * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(texel_count), 1e-17f);</div>
<div class="line"><span class="lineno"> 1230</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> scale_dir = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a48bcfcd0946caec9323acbf4bf1126ce">normalize</a>((rgba_sum / rgba_weight_sum).swz&lt;0, 1, 2&gt;());</div>
<div class="line"><span class="lineno"> 1231</span> </div>
<div class="line"><span class="lineno"> 1232</span>        <span class="keywordtype">float</span> scale_max = 0.0f;</div>
<div class="line"><span class="lineno"> 1233</span>        <span class="keywordtype">float</span> scale_min = 1e10f;</div>
<div class="line"><span class="lineno"> 1234</span> </div>
<div class="line"><span class="lineno"> 1235</span>        <span class="keywordtype">float</span> wmin1 = 1.0f;</div>
<div class="line"><span class="lineno"> 1236</span>        <span class="keywordtype">float</span> wmax1 = 0.0f;</div>
<div class="line"><span class="lineno"> 1237</span> </div>
<div class="line"><span class="lineno"> 1238</span>        <span class="keywordtype">float</span> left_sum_s = 0.0f;</div>
<div class="line"><span class="lineno"> 1239</span>        <span class="keywordtype">float</span> middle_sum_s = 0.0f;</div>
<div class="line"><span class="lineno"> 1240</span>        <span class="keywordtype">float</span> right_sum_s = 0.0f;</div>
<div class="line"><span class="lineno"> 1241</span> </div>
<div class="line"><span class="lineno"> 1242</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_vec_x = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno"> 1243</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_vec_y = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno"> 1244</span> </div>
<div class="line"><span class="lineno"> 1245</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> scale_vec = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno"> 1246</span> </div>
<div class="line"><span class="lineno"> 1247</span>        <span class="keywordtype">float</span> weight_weight_sum_s = 1e-17f;</div>
<div class="line"><span class="lineno"> 1248</span> </div>
<div class="line"><span class="lineno"> 1249</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_weight = blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>;</div>
<div class="line"><span class="lineno"> 1250</span>        <span class="keywordtype">float</span> ls_weight = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(color_weight);</div>
<div class="line"><span class="lineno"> 1251</span> </div>
<div class="line"><span class="lineno"> 1252</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; texel_count; j++)</div>
<div class="line"><span class="lineno"> 1253</span>        {</div>
<div class="line"><span class="lineno"> 1254</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tix = texel_indexes[j];</div>
<div class="line"><span class="lineno"> 1255</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> rgba = blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(tix);</div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span>            <span class="keywordtype">float</span> idx0 = undec_weight_ref[tix];</div>
<div class="line"><span class="lineno"> 1258</span> </div>
<div class="line"><span class="lineno"> 1259</span>            <span class="keywordtype">float</span> om_idx0 = 1.0f - idx0;</div>
<div class="line"><span class="lineno"> 1260</span>            wmin1 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(idx0, wmin1);</div>
<div class="line"><span class="lineno"> 1261</span>            wmax1 = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(idx0, wmax1);</div>
<div class="line"><span class="lineno"> 1262</span> </div>
<div class="line"><span class="lineno"> 1263</span>            <span class="keywordtype">float</span> scale = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477">dot3_s</a>(scale_dir, rgba);</div>
<div class="line"><span class="lineno"> 1264</span>            scale_min = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(scale, scale_min);</div>
<div class="line"><span class="lineno"> 1265</span>            scale_max = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(scale, scale_max);</div>
<div class="line"><span class="lineno"> 1266</span> </div>
<div class="line"><span class="lineno"> 1267</span>            left_sum_s   += om_idx0 * om_idx0;</div>
<div class="line"><span class="lineno"> 1268</span>            middle_sum_s += om_idx0 * idx0;</div>
<div class="line"><span class="lineno"> 1269</span>            right_sum_s  += idx0 * idx0;</div>
<div class="line"><span class="lineno"> 1270</span>            weight_weight_sum_s += idx0;</div>
<div class="line"><span class="lineno"> 1271</span> </div>
<div class="line"><span class="lineno"> 1272</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_idx(idx0);</div>
<div class="line"><span class="lineno"> 1273</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> cwprod = rgba;</div>
<div class="line"><span class="lineno"> 1274</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> cwiprod = cwprod * color_idx;</div>
<div class="line"><span class="lineno"> 1275</span> </div>
<div class="line"><span class="lineno"> 1276</span>            color_vec_y += cwiprod;</div>
<div class="line"><span class="lineno"> 1277</span>            color_vec_x += cwprod - cwiprod;</div>
<div class="line"><span class="lineno"> 1278</span> </div>
<div class="line"><span class="lineno"> 1279</span>            scale_vec += <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde">vfloat2</a>(om_idx0, idx0) * (scale * ls_weight);</div>
<div class="line"><span class="lineno"> 1280</span>        }</div>
<div class="line"><span class="lineno"> 1281</span> </div>
<div class="line"><span class="lineno"> 1282</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> left_sum   = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(left_sum_s) * color_weight;</div>
<div class="line"><span class="lineno"> 1283</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> middle_sum = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(middle_sum_s) * color_weight;</div>
<div class="line"><span class="lineno"> 1284</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> right_sum  = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(right_sum_s) * color_weight;</div>
<div class="line"><span class="lineno"> 1285</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> lmrs_sum   = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a>(left_sum_s, middle_sum_s, right_sum_s) * ls_weight;</div>
<div class="line"><span class="lineno"> 1286</span> </div>
<div class="line"><span class="lineno"> 1287</span>        color_vec_x = color_vec_x * color_weight;</div>
<div class="line"><span class="lineno"> 1288</span>        color_vec_y = color_vec_y * color_weight;</div>
<div class="line"><span class="lineno"> 1289</span> </div>
<div class="line"><span class="lineno"> 1290</span>        <span class="comment">// Initialize the luminance and scale vectors with a reasonable default</span></div>
<div class="line"><span class="lineno"> 1291</span>        <span class="keywordtype">float</span> scalediv = scale_min / <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(scale_max, 1e-10f);</div>
<div class="line"><span class="lineno"> 1292</span>        scalediv = <a class="code hl_function" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e">astc::clamp1f</a>(scalediv);</div>
<div class="line"><span class="lineno"> 1293</span> </div>
<div class="line"><span class="lineno"> 1294</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sds = scale_dir * scale_max;</div>
<div class="line"><span class="lineno"> 1295</span> </div>
<div class="line"><span class="lineno"> 1296</span>        rgbs_vectors[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), scalediv);</div>
<div class="line"><span class="lineno"> 1297</span> </div>
<div class="line"><span class="lineno"> 1298</span>        <span class="keywordflow">if</span> (wmin1 &gt;= wmax1 * 0.999f)</div>
<div class="line"><span class="lineno"> 1299</span>        {</div>
<div class="line"><span class="lineno"> 1300</span>            <span class="comment">// If all weights in the partition were equal, then just take average of all colors in</span></div>
<div class="line"><span class="lineno"> 1301</span>            <span class="comment">// the partition and use that as both endpoint colors</span></div>
<div class="line"><span class="lineno"> 1302</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> avg = (color_vec_x + color_vec_y) / rgba_weight_sum;</div>
<div class="line"><span class="lineno"> 1303</span> </div>
<div class="line"><span class="lineno"> 1304</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> notnan_mask = avg == avg;</div>
<div class="line"><span class="lineno"> 1305</span>            ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i], avg, notnan_mask);</div>
<div class="line"><span class="lineno"> 1306</span>            ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i], avg, notnan_mask);</div>
<div class="line"><span class="lineno"> 1307</span> </div>
<div class="line"><span class="lineno"> 1308</span>            rgbs_vectors[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), 1.0f);</div>
<div class="line"><span class="lineno"> 1309</span>        }</div>
<div class="line"><span class="lineno"> 1310</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1311</span>        {</div>
<div class="line"><span class="lineno"> 1312</span>            <span class="comment">// Otherwise, complete the analytic calculation of ideal-endpoint-values for the given</span></div>
<div class="line"><span class="lineno"> 1313</span>            <span class="comment">// set of texel weights and pixel colors</span></div>
<div class="line"><span class="lineno"> 1314</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_det1 = (left_sum * right_sum) - (middle_sum * middle_sum);</div>
<div class="line"><span class="lineno"> 1315</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_rdet1 = 1.0f / color_det1;</div>
<div class="line"><span class="lineno"> 1316</span> </div>
<div class="line"><span class="lineno"> 1317</span>            <span class="keywordtype">float</span> ls_det1  = (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;()) - (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno"> 1318</span>            <span class="keywordtype">float</span> ls_rdet1 = 1.0f / ls_det1;</div>
<div class="line"><span class="lineno"> 1319</span> </div>
<div class="line"><span class="lineno"> 1320</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_mss1 = (left_sum * left_sum)</div>
<div class="line"><span class="lineno"> 1321</span>                               + (2.0f * middle_sum * middle_sum)</div>
<div class="line"><span class="lineno"> 1322</span>                               + (right_sum * right_sum);</div>
<div class="line"><span class="lineno"> 1323</span> </div>
<div class="line"><span class="lineno"> 1324</span>            <span class="keywordtype">float</span> ls_mss1 = (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;())</div>
<div class="line"><span class="lineno"> 1325</span>                          + (2.0f * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;())</div>
<div class="line"><span class="lineno"> 1326</span>                          + (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;() * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno"> 1327</span> </div>
<div class="line"><span class="lineno"> 1328</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep0 = (right_sum * color_vec_x - middle_sum * color_vec_y) * color_rdet1;</div>
<div class="line"><span class="lineno"> 1329</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep1 = (left_sum * color_vec_y - middle_sum * color_vec_x) * color_rdet1;</div>
<div class="line"><span class="lineno"> 1330</span> </div>
<div class="line"><span class="lineno"> 1331</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> det_mask = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c">abs</a>(color_det1) &gt; (color_mss1 * 1e-4f);</div>
<div class="line"><span class="lineno"> 1332</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> notnan_mask = (ep0 == ep0) &amp; (ep1 == ep1);</div>
<div class="line"><span class="lineno"> 1333</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> full_mask = det_mask &amp; notnan_mask;</div>
<div class="line"><span class="lineno"> 1334</span> </div>
<div class="line"><span class="lineno"> 1335</span>            ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i], ep0, full_mask);</div>
<div class="line"><span class="lineno"> 1336</span>            ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i], ep1, full_mask);</div>
<div class="line"><span class="lineno"> 1337</span> </div>
<div class="line"><span class="lineno"> 1338</span>            <span class="keywordtype">float</span> scale_ep0 = (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;() * scale_vec.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() - lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() * scale_vec.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;()) * ls_rdet1;</div>
<div class="line"><span class="lineno"> 1339</span>            <span class="keywordtype">float</span> scale_ep1 = (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() * scale_vec.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() - lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() * scale_vec.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;()) * ls_rdet1;</div>
<div class="line"><span class="lineno"> 1340</span> </div>
<div class="line"><span class="lineno"> 1341</span>            <span class="keywordflow">if</span> (fabsf(ls_det1) &gt; (ls_mss1 * 1e-4f) &amp;&amp; scale_ep0 == scale_ep0 &amp;&amp; scale_ep1 == scale_ep1 &amp;&amp; scale_ep0 &lt; scale_ep1)</div>
<div class="line"><span class="lineno"> 1342</span>            {</div>
<div class="line"><span class="lineno"> 1343</span>                <span class="keywordtype">float</span> scalediv2 = scale_ep0 / scale_ep1;</div>
<div class="line"><span class="lineno"> 1344</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sdsm = scale_dir * scale_ep1;</div>
<div class="line"><span class="lineno"> 1345</span>                rgbs_vectors[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(sdsm.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), sdsm.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), sdsm.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), scalediv2);</div>
<div class="line"><span class="lineno"> 1346</span>            }</div>
<div class="line"><span class="lineno"> 1347</span>        }</div>
<div class="line"><span class="lineno"> 1348</span> </div>
<div class="line"><span class="lineno"> 1349</span>        <span class="comment">// Calculations specific to mode #7, the HDR RGB-scale mode - skip if known LDR</span></div>
<div class="line"><span class="lineno"> 1350</span>        <span class="keywordflow">if</span> (blk.<a class="code hl_variable" href="structimage__block.html#af1a9e601f3d03dc488993b81258058e0">rgb_lns</a>[0] || blk.<a class="code hl_variable" href="structimage__block.html#ade6f78d73e016d4e9222cbe89f5b1eec">alpha_lns</a>[0])</div>
<div class="line"><span class="lineno"> 1351</span>        {</div>
<div class="line"><span class="lineno"> 1352</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> weight_weight_sum = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(weight_weight_sum_s) * color_weight;</div>
<div class="line"><span class="lineno"> 1353</span>            <span class="keywordtype">float</span> psum = right_sum_s * <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(color_weight);</div>
<div class="line"><span class="lineno"> 1354</span> </div>
<div class="line"><span class="lineno"> 1355</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> rgbq_sum = color_vec_x + color_vec_y;</div>
<div class="line"><span class="lineno"> 1356</span>            rgbq_sum.<a class="code hl_function" href="structvfloat4.html#a2168231efa1e514fd41b3603e57be297">set_lane</a>&lt;3&gt;(<a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(color_vec_y));</div>
<div class="line"><span class="lineno"> 1357</span> </div>
<div class="line"><span class="lineno"> 1358</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> rgbovec = <a class="code hl_function" href="#a55d08b4feda289df7cbcfa6e1ed0b80c">compute_rgbo_vector</a>(rgba_weight_sum, weight_weight_sum, rgbq_sum, psum);</div>
<div class="line"><span class="lineno"> 1359</span>            rgbo_vectors[i] = rgbovec;</div>
<div class="line"><span class="lineno"> 1360</span> </div>
<div class="line"><span class="lineno"> 1361</span>            <span class="comment">// We can get a failure due to the use of a singular (non-invertible) matrix</span></div>
<div class="line"><span class="lineno"> 1362</span>            <span class="comment">// If it failed, compute rgbo_vectors[] with a different method ...</span></div>
<div class="line"><span class="lineno"> 1363</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b">astc::isnan</a>(<a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(rgbovec, rgbovec)))</div>
<div class="line"><span class="lineno"> 1364</span>            {</div>
<div class="line"><span class="lineno"> 1365</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> v0 = ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i];</div>
<div class="line"><span class="lineno"> 1366</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> v1 = ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i];</div>
<div class="line"><span class="lineno"> 1367</span> </div>
<div class="line"><span class="lineno"> 1368</span>                <span class="keywordtype">float</span> avgdif = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(v1 - v0) * (1.0f / 3.0f);</div>
<div class="line"><span class="lineno"> 1369</span>                avgdif = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(avgdif, 0.0f);</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> avg = (v0 + v1) * 0.5f;</div>
<div class="line"><span class="lineno"> 1372</span>                <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep0 = avg - <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(avgdif) * 0.5f;</div>
<div class="line"><span class="lineno"> 1373</span>                rgbo_vectors[i] = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), avgdif);</div>
<div class="line"><span class="lineno"> 1374</span>            }</div>
<div class="line"><span class="lineno"> 1375</span>        }</div>
<div class="line"><span class="lineno"> 1376</span>    }</div>
<div class="line"><span class="lineno"> 1377</span>}</div>
<div class="ttc" id="aastcenc__ideal__endpoints__and__weights_8cpp_html_a55d08b4feda289df7cbcfa6e1ed0b80c"><div class="ttname"><a href="#a55d08b4feda289df7cbcfa6e1ed0b80c">compute_rgbo_vector</a></div><div class="ttdeci">static vfloat4 compute_rgbo_vector(vfloat4 rgba_weight_sum, vfloat4 weight_weight_sum, vfloat4 rgbq_sum, float psum)</div><div class="ttdoc">Compute the RGB + offset for a HDR endpoint mode #7.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l01110">astcenc_ideal_endpoints_and_weights.cpp:1110</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_aa069d5d400baafe528bce4778aba6c45"><div class="ttname"><a href="astcenc__internal_8h.html#aa069d5d400baafe528bce4778aba6c45">BLOCK_MAX_WEIGHTS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_WEIGHTS</div><div class="ttdoc">The maximum number of weights a block can support.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00087">astcenc_internal.h:87</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a48bcfcd0946caec9323acbf4bf1126ce"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a48bcfcd0946caec9323acbf4bf1126ce">normalize</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 normalize(vfloat4 a)</div><div class="ttdoc">Normalize a non-zero length vector to unit length.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00291">astcenc_vecmathlib.h:291</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aa162915c044e97cc1f6d630338761fd3"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3">max</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 max(vint8 a, vint8 b)</div><div class="ttdoc">Return the max vector of two vectors.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00511">astcenc_vecmathlib_avx2_8.h:511</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aeac50750508168aeab5115733d3ee63c"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c">abs</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat8 abs(vfloat8 a)</div><div class="ttdoc">Return the absolute value of the float vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00817">astcenc_vecmathlib_avx2_8.h:817</a></div></div>
<div class="ttc" id="astructimage__block_html_ac6bd4890338be887b61f857e37d23459"><div class="ttname"><a href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">image_block::data_mean</a></div><div class="ttdeci">vfloat4 data_mean</div><div class="ttdoc">The mean component value of all texels in the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00768">astcenc_internal.h:768</a></div></div>
<div class="ttc" id="astructimage__block_html_ade6f78d73e016d4e9222cbe89f5b1eec"><div class="ttname"><a href="structimage__block.html#ade6f78d73e016d4e9222cbe89f5b1eec">image_block::alpha_lns</a></div><div class="ttdeci">uint8_t alpha_lns[BLOCK_MAX_TEXELS]</div><div class="ttdoc">Set to 1 if a texel is using HDR alpha endpoints (decompression only).</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00786">astcenc_internal.h:786</a></div></div>
<div class="ttc" id="astructimage__block_html_af1a9e601f3d03dc488993b81258058e0"><div class="ttname"><a href="structimage__block.html#af1a9e601f3d03dc488993b81258058e0">image_block::rgb_lns</a></div><div class="ttdeci">uint8_t rgb_lns[BLOCK_MAX_TEXELS]</div><div class="ttdoc">Set to 1 if a texel is using HDR RGB endpoints (decompression only).</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00783">astcenc_internal.h:783</a></div></div>
<div class="ttc" id="astructvfloat4_html_a2168231efa1e514fd41b3603e57be297"><div class="ttname"><a href="structvfloat4.html#a2168231efa1e514fd41b3603e57be297">vfloat4::set_lane</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE void set_lane(float a)</div><div class="ttdoc">Set the scalar value of a single lane.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00108">astcenc_vecmathlib_neon_4.h:108</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a02bcad94240678ee727ccf2f0fbfb5d3_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a02bcad94240678ee727ccf2f0fbfb5d3_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a02bcad94240678ee727ccf2f0fbfb5d3_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a02bcad94240678ee727ccf2f0fbfb5d3_cgraph">
<area shape="rect" title="For a given 1 plane weight set recompute the endpoint colors." alt="" coords="5,522,164,562"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c" title="Return the absolute value of the float vector." alt="" coords="263,5,306,31"/>
<area shape="poly" title=" " alt="" coords="86,521,100,421,126,277,144,203,163,135,185,79,210,40,228,27,249,20,251,25,231,32,214,44,190,81,168,137,149,204,132,278,106,422,91,522"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a617a8dec1d2168023a84f5c0fa1c20ca" title="Functions for computing color endpoints and texel weights." alt="" coords="227,55,342,80"/>
<area shape="poly" title=" " alt="" coords="83,522,85,443,91,388,100,328,116,264,139,201,170,142,210,90,214,86,218,90,214,93,174,145,144,204,121,266,106,329,96,389,90,443,88,522"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a84286bd889620da3be77539ddfdf3b45" title="Compute the infilled weight for N texel indices in a decimated grid." alt="" coords="221,104,349,129"/>
<area shape="poly" title=" " alt="" coords="84,522,89,450,106,348,122,292,144,237,173,185,210,139,214,135,218,139,214,142,178,188,149,239,127,294,112,349,94,451,89,522"/>
<area shape="rect" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e" title="Clamp a float value between 0.0f and 1.0f." alt="" coords="235,153,335,179"/>
<area shape="poly" title=" " alt="" coords="85,521,95,460,116,374,132,327,153,280,179,236,210,196,227,183,230,187,214,200,183,239,158,283,137,329,121,375,100,461,91,522"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a55d08b4feda289df7cbcfa6e1ed0b80c" title="Compute the RGB + offset for a HDR endpoint mode #7." alt="" coords="212,255,357,280"/>
<area shape="poly" title=" " alt="" coords="89,521,104,476,128,417,164,354,185,324,210,297,229,284,232,288,214,301,190,327,168,357,133,419,109,478,94,523"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="429,232,484,257"/>
<area shape="poly" title=" " alt="" coords="85,522,92,463,112,385,128,343,149,304,177,269,211,240,235,227,262,219,318,213,371,219,416,229,415,234,370,224,318,219,263,224,237,232,213,244,181,272,154,307,133,346,117,386,97,464,90,522"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="411,281,502,307"/>
<area shape="poly" title=" " alt="" coords="90,521,106,482,131,433,166,383,187,360,211,341,256,317,305,302,354,294,397,291,398,296,354,299,306,307,258,322,213,346,190,364,170,386,135,436,111,484,95,523"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477" title="Return the dot product for the bottom 3 lanes, returning scalar." alt="" coords="254,405,315,431"/>
<area shape="poly" title=" " alt="" coords="105,520,151,480,211,440,240,427,242,432,213,444,155,484,108,524"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e" title="Return the horizontal sum of RGB vector lanes as a scalar." alt="" coords="412,555,501,580"/>
<area shape="poly" title=" " alt="" coords="98,561,116,591,141,627,174,661,213,686,252,701,285,707,318,702,356,686,385,667,408,642,442,591,446,594,413,646,388,671,359,691,319,707,285,712,251,707,211,691,171,665,137,630,112,594,94,564"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7" title="Return a float value for an integer vector." alt="" coords="242,455,327,480"/>
<area shape="poly" title=" " alt="" coords="133,519,211,489,230,482,232,487,213,494,135,524"/>
<area shape="rect" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b" title="Test if a float value is a nan." alt="" coords="241,504,328,529"/>
<area shape="poly" title=" " alt="" coords="164,529,227,521,228,526,165,535"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="245,553,325,579"/>
<area shape="poly" title=" " alt="" coords="165,549,231,557,231,562,164,554"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3" title="Return the max vector of two vectors." alt="" coords="261,603,308,628"/>
<area shape="poly" title=" " alt="" coords="139,560,213,587,249,600,247,605,211,593,137,565"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="247,652,323,677"/>
<area shape="poly" title=" " alt="" coords="109,560,156,599,213,637,235,647,233,652,211,642,152,603,106,564"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a48bcfcd0946caec9323acbf4bf1126ce" title="Normalize a non&#45;zero length vector to unit length." alt="" coords="245,356,324,381"/>
<area shape="poly" title=" " alt="" coords="96,520,141,457,173,421,211,390,231,380,234,384,213,395,177,425,145,460,100,523"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="256,753,313,779"/>
<area shape="poly" title=" " alt="" coords="97,561,140,642,173,690,214,732,245,751,242,755,210,736,169,693,135,645,92,563"/>
<area shape="rect" href="structvfloat4.html#a2168231efa1e514fd41b3603e57be297" title="Set the scalar value of a single lane." alt="" coords="227,803,342,828"/>
<area shape="poly" title=" " alt="" coords="93,561,107,608,130,669,166,734,188,763,214,789,219,794,216,798,210,793,184,767,161,737,125,671,102,610,88,563"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a" title="Store a vector to a 16B aligned memory address." alt="" coords="255,852,314,877"/>
<area shape="poly" title=" " alt="" coords="91,562,102,617,124,691,140,731,160,770,185,807,214,839,227,848,243,855,241,860,225,853,210,843,180,810,156,773,135,733,119,693,97,618,86,563"/>
<area shape="rect" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9" title="Get an RGBA texel value from the data." alt="" coords="219,901,350,927"/>
<area shape="poly" title=" " alt="" coords="90,562,98,624,118,712,134,759,155,806,181,850,214,888,218,892,215,896,210,892,177,853,150,808,129,761,113,713,93,625,85,562"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde" title="Factory that returns a 2 component vfloat4." alt="" coords="255,951,314,976"/>
<area shape="poly" title=" " alt="" coords="89,562,94,632,112,733,128,788,149,842,178,893,214,937,227,947,243,954,241,959,225,952,210,941,173,896,145,844,123,789,107,734,89,633,84,562"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07" title="Factory that returns a 3 component vfloat4." alt="" coords="255,1000,314,1025"/>
<area shape="poly" title=" " alt="" coords="88,562,91,640,96,694,106,754,122,816,144,877,174,936,214,987,227,997,243,1004,241,1009,225,1002,210,991,170,938,139,880,117,817,101,755,91,695,85,640,83,562"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="239,1049,330,1075"/>
<area shape="poly" title=" " alt="" coords="91,562,106,661,132,804,149,877,168,944,190,999,214,1036,228,1047,225,1051,210,1040,186,1001,163,946,144,878,127,805,100,662,86,562"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="426,80,487,105"/>
<area shape="poly" title=" " alt="" coords="343,73,413,84,412,89,342,78"/>
<area shape="poly" title=" " alt="" coords="349,105,412,96,413,101,349,110"/>
<area shape="rect" href="namespaceastc.html#a8f8b2ad23b04a389f6785bc80b61349b" title="Clamp a value value between mn and mx." alt="" coords="411,153,502,179"/>
<area shape="poly" title=" " alt="" coords="335,163,397,163,397,169,335,169"/>
<area shape="poly" title=" " alt="" coords="357,255,415,247,416,253,358,260"/>
<area shape="poly" title=" " alt="" coords="358,276,398,282,397,288,357,281"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="564,281,628,307"/>
<area shape="poly" title=" " alt="" coords="485,252,552,276,550,281,483,257"/>
<area shape="poly" title=" " alt="" coords="572,282,567,273,570,263,580,257,596,255,615,258,624,267,620,270,613,263,596,260,582,262,574,267,573,272,577,280"/>
<area shape="poly" title=" " alt="" coords="316,421,338,429,359,440,386,463,410,490,444,541,440,544,405,493,382,467,356,444,336,433,315,426"/>
<area shape="rect" href="structvint4.html#a01e3f7debf73dc6c757fa36d585c9d17" title="Get the scalar from a single lane." alt="" coords="556,555,636,580"/>
<area shape="poly" title=" " alt="" coords="502,565,542,565,542,570,502,570"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="437,331,477,356"/>
<area shape="poly" title=" " alt="" coords="324,360,422,346,423,351,324,366"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a46b31b19ff13c14adb023db4b5df8e52" title="Return the sqrt of the lanes in the vector." alt="" coords="435,380,479,405"/>
<area shape="poly" title=" " alt="" coords="324,371,421,385,421,390,324,377"/>
<area shape="poly" title=" " alt="" coords="476,334,550,307,552,312,478,339"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="405,1049,508,1075"/>
<area shape="poly" title=" " alt="" coords="330,1059,391,1059,391,1065,330,1065"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_a02bcad94240678ee727ccf2f0fbfb5d3_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_a02bcad94240678ee727ccf2f0fbfb5d3_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_a02bcad94240678ee727ccf2f0fbfb5d3_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_a02bcad94240678ee727ccf2f0fbfb5d3_icgraph">
<area shape="rect" title="For a given 1 plane weight set recompute the endpoint colors." alt="" coords="1239,5,1397,45"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="afb3c455470bef24f48d7815bb78bb569" name="afb3c455470bef24f48d7815bb78bb569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb3c455470bef24f48d7815bb78bb569">&#9670;&#160;</a></span>recompute_ideal_colors_2planes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void recompute_ideal_colors_2planes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdecimation__info.html">decimation_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>di</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>dec_weights_uquant_plane1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>dec_weights_uquant_plane2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structendpoints.html">endpoints</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ep</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>rgbs_vector</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>rgbo_vector</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>plane2_component</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For a given 2 plane weight set recompute the endpoint colors. </p>
<p>As we quantize and decimate weights the optimal endpoint colors may change slightly, so we must recompute the ideal colors for a specific weight set.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bsd</td><td>The block_size descriptor. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">di</td><td>The weight grid decimation table. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">dec_weights_uquant_plane1</td><td>The quantized weight set for plane 1. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">dec_weights_uquant_plane2</td><td>The quantized weight set for plane 2. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ep</td><td>The color endpoints (modifed in place). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rgbs_vector</td><td>The RGB+scale color for LDR blocks. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rgbo_vector</td><td>The RGB+offset color for HDR blocks. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">plane2_component</td><td>The component assigned to plane 2. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html">astcenc_ideal_endpoints_and_weights.cpp</a> 파일의 <a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp_source.html#l01380">1380</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1390</span>  {</div>
<div class="line"><span class="lineno"> 1391</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> weight_count = di.<a class="code hl_variable" href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">weight_count</a>;</div>
<div class="line"><span class="lineno"> 1392</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> total_texel_count = blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>;</div>
<div class="line"><span class="lineno"> 1393</span> </div>
<div class="line"><span class="lineno"> 1394</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(total_texel_count &gt; 0);</div>
<div class="line"><span class="lineno"> 1395</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(weight_count &gt; 0);</div>
<div class="line"><span class="lineno"> 1396</span> </div>
<div class="line"><span class="lineno"> 1397</span>    <a class="code hl_define" href="astcenc__mathlib_8h.html#adf60643d2894fb1d3cd00d4f907186e8">ASTCENC_ALIGNAS</a> <span class="keywordtype">float</span> dec_weight_plane1[<a class="code hl_variable" href="astcenc__internal_8h.html#a4135969a5d69e8805250b420dcccf460">BLOCK_MAX_WEIGHTS_2PLANE</a>];</div>
<div class="line"><span class="lineno"> 1398</span>    <a class="code hl_define" href="astcenc__mathlib_8h.html#adf60643d2894fb1d3cd00d4f907186e8">ASTCENC_ALIGNAS</a> <span class="keywordtype">float</span> dec_weight_plane2[<a class="code hl_variable" href="astcenc__internal_8h.html#a4135969a5d69e8805250b420dcccf460">BLOCK_MAX_WEIGHTS_2PLANE</a>];</div>
<div class="line"><span class="lineno"> 1399</span> </div>
<div class="line"><span class="lineno"> 1400</span>    assert(weight_count &lt;= <a class="code hl_variable" href="astcenc__internal_8h.html#a4135969a5d69e8805250b420dcccf460">BLOCK_MAX_WEIGHTS_2PLANE</a>);</div>
<div class="line"><span class="lineno"> 1401</span> </div>
<div class="line"><span class="lineno"> 1402</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; weight_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno"> 1403</span>    {</div>
<div class="line"><span class="lineno"> 1404</span>        <a class="code hl_struct" href="structvint4.html">vint</a> unquant_value1(dec_weights_uquant_plane1 + i);</div>
<div class="line"><span class="lineno"> 1405</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> unquant_value1f = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7">int_to_float</a>(unquant_value1) * <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a>(1.0f / 64.0f);</div>
<div class="line"><span class="lineno"> 1406</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(unquant_value1f, dec_weight_plane1 + i);</div>
<div class="line"><span class="lineno"> 1407</span> </div>
<div class="line"><span class="lineno"> 1408</span>        <a class="code hl_struct" href="structvint4.html">vint</a> unquant_value2(dec_weights_uquant_plane2 + i);</div>
<div class="line"><span class="lineno"> 1409</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> unquant_value2f = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7">int_to_float</a>(unquant_value2) * <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a>(1.0f / 64.0f);</div>
<div class="line"><span class="lineno"> 1410</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(unquant_value2f, dec_weight_plane2 + i);</div>
<div class="line"><span class="lineno"> 1411</span>    }</div>
<div class="line"><span class="lineno"> 1412</span> </div>
<div class="line"><span class="lineno"> 1413</span>    <a class="code hl_define" href="astcenc__mathlib_8h.html#adf60643d2894fb1d3cd00d4f907186e8">ASTCENC_ALIGNAS</a> <span class="keywordtype">float</span> undec_weight_plane1[<a class="code hl_variable" href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a>];</div>
<div class="line"><span class="lineno"> 1414</span>    <a class="code hl_define" href="astcenc__mathlib_8h.html#adf60643d2894fb1d3cd00d4f907186e8">ASTCENC_ALIGNAS</a> <span class="keywordtype">float</span> undec_weight_plane2[<a class="code hl_variable" href="astcenc__internal_8h.html#ad694a8ff82a68a50b11bac439531241e">BLOCK_MAX_TEXELS</a>];</div>
<div class="line"><span class="lineno"> 1415</span> </div>
<div class="line"><span class="lineno"> 1416</span>    <span class="keywordtype">float</span>* undec_weight_plane1_ref;</div>
<div class="line"><span class="lineno"> 1417</span>    <span class="keywordtype">float</span>* undec_weight_plane2_ref;</div>
<div class="line"><span class="lineno"> 1418</span> </div>
<div class="line"><span class="lineno"> 1419</span>    <span class="keywordflow">if</span> (di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> == 1)</div>
<div class="line"><span class="lineno"> 1420</span>    {</div>
<div class="line"><span class="lineno"> 1421</span>        undec_weight_plane1_ref = dec_weight_plane1;</div>
<div class="line"><span class="lineno"> 1422</span>        undec_weight_plane2_ref = dec_weight_plane2;</div>
<div class="line"><span class="lineno"> 1423</span>    }</div>
<div class="line"><span class="lineno"> 1424</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (di.<a class="code hl_variable" href="structdecimation__info.html#a1419dcd0f618164042315f80527d3f4f">max_texel_weight_count</a> &lt;= 2)</div>
<div class="line"><span class="lineno"> 1425</span>    {</div>
<div class="line"><span class="lineno"> 1426</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; total_texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno"> 1427</span>        {</div>
<div class="line"><span class="lineno"> 1428</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight = <a class="code hl_function" href="#a84286bd889620da3be77539ddfdf3b45">bilinear_infill_vla_2</a>(di, dec_weight_plane1, i);</div>
<div class="line"><span class="lineno"> 1429</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(weight, undec_weight_plane1 + i);</div>
<div class="line"><span class="lineno"> 1430</span> </div>
<div class="line"><span class="lineno"> 1431</span>            weight = <a class="code hl_function" href="#a84286bd889620da3be77539ddfdf3b45">bilinear_infill_vla_2</a>(di, dec_weight_plane2, i);</div>
<div class="line"><span class="lineno"> 1432</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(weight, undec_weight_plane2 + i);</div>
<div class="line"><span class="lineno"> 1433</span>        }</div>
<div class="line"><span class="lineno"> 1434</span> </div>
<div class="line"><span class="lineno"> 1435</span>        undec_weight_plane1_ref = undec_weight_plane1;</div>
<div class="line"><span class="lineno"> 1436</span>        undec_weight_plane2_ref = undec_weight_plane2;</div>
<div class="line"><span class="lineno"> 1437</span>    }</div>
<div class="line"><span class="lineno"> 1438</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1439</span>    {</div>
<div class="line"><span class="lineno"> 1440</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; total_texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno"> 1441</span>        {</div>
<div class="line"><span class="lineno"> 1442</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> weight = <a class="code hl_function" href="#a617a8dec1d2168023a84f5c0fa1c20ca">bilinear_infill_vla</a>(di, dec_weight_plane1, i);</div>
<div class="line"><span class="lineno"> 1443</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(weight, undec_weight_plane1 + i);</div>
<div class="line"><span class="lineno"> 1444</span> </div>
<div class="line"><span class="lineno"> 1445</span>            weight = <a class="code hl_function" href="#a617a8dec1d2168023a84f5c0fa1c20ca">bilinear_infill_vla</a>(di, dec_weight_plane2, i);</div>
<div class="line"><span class="lineno"> 1446</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(weight, undec_weight_plane2 + i);</div>
<div class="line"><span class="lineno"> 1447</span>        }</div>
<div class="line"><span class="lineno"> 1448</span> </div>
<div class="line"><span class="lineno"> 1449</span>        undec_weight_plane1_ref = undec_weight_plane1;</div>
<div class="line"><span class="lineno"> 1450</span>        undec_weight_plane2_ref = undec_weight_plane2;</div>
<div class="line"><span class="lineno"> 1451</span>    }</div>
<div class="line"><span class="lineno"> 1452</span> </div>
<div class="line"><span class="lineno"> 1453</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">texel_count</a>;</div>
<div class="line"><span class="lineno"> 1454</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> rgba_weight_sum = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3">max</a>(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a> * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(texel_count), 1e-17f);</div>
<div class="line"><span class="lineno"> 1455</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> scale_dir = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a48bcfcd0946caec9323acbf4bf1126ce">normalize</a>(blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;());</div>
<div class="line"><span class="lineno"> 1456</span> </div>
<div class="line"><span class="lineno"> 1457</span>    <span class="keywordtype">float</span> scale_max = 0.0f;</div>
<div class="line"><span class="lineno"> 1458</span>    <span class="keywordtype">float</span> scale_min = 1e10f;</div>
<div class="line"><span class="lineno"> 1459</span> </div>
<div class="line"><span class="lineno"> 1460</span>    <span class="keywordtype">float</span> wmin1 = 1.0f;</div>
<div class="line"><span class="lineno"> 1461</span>    <span class="keywordtype">float</span> wmax1 = 0.0f;</div>
<div class="line"><span class="lineno"> 1462</span> </div>
<div class="line"><span class="lineno"> 1463</span>    <span class="keywordtype">float</span> wmin2 = 1.0f;</div>
<div class="line"><span class="lineno"> 1464</span>    <span class="keywordtype">float</span> wmax2 = 0.0f;</div>
<div class="line"><span class="lineno"> 1465</span> </div>
<div class="line"><span class="lineno"> 1466</span>    <span class="keywordtype">float</span> left1_sum_s = 0.0f;</div>
<div class="line"><span class="lineno"> 1467</span>    <span class="keywordtype">float</span> middle1_sum_s = 0.0f;</div>
<div class="line"><span class="lineno"> 1468</span>    <span class="keywordtype">float</span> right1_sum_s = 0.0f;</div>
<div class="line"><span class="lineno"> 1469</span> </div>
<div class="line"><span class="lineno"> 1470</span>    <span class="keywordtype">float</span> left2_sum_s = 0.0f;</div>
<div class="line"><span class="lineno"> 1471</span>    <span class="keywordtype">float</span> middle2_sum_s = 0.0f;</div>
<div class="line"><span class="lineno"> 1472</span>    <span class="keywordtype">float</span> right2_sum_s = 0.0f;</div>
<div class="line"><span class="lineno"> 1473</span> </div>
<div class="line"><span class="lineno"> 1474</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_vec_x = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno"> 1475</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_vec_y = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno"> 1476</span> </div>
<div class="line"><span class="lineno"> 1477</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> scale_vec = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno"> 1478</span> </div>
<div class="line"><span class="lineno"> 1479</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> weight_weight_sum = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(1e-17f);</div>
<div class="line"><span class="lineno"> 1480</span> </div>
<div class="line"><span class="lineno"> 1481</span>    <a class="code hl_struct" href="structvmask4.html">vmask4</a> p2_mask = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint4::lane_id</a>() == <a class="code hl_struct" href="structvint4.html">vint4</a>(plane2_component);</div>
<div class="line"><span class="lineno"> 1482</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_weight = blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>;</div>
<div class="line"><span class="lineno"> 1483</span>    <span class="keywordtype">float</span> ls_weight = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(color_weight);</div>
<div class="line"><span class="lineno"> 1484</span> </div>
<div class="line"><span class="lineno"> 1485</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; texel_count; j++)</div>
<div class="line"><span class="lineno"> 1486</span>    {</div>
<div class="line"><span class="lineno"> 1487</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> rgba = blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(j);</div>
<div class="line"><span class="lineno"> 1488</span> </div>
<div class="line"><span class="lineno"> 1489</span>        <span class="keywordtype">float</span> idx0 = undec_weight_plane1_ref[j];</div>
<div class="line"><span class="lineno"> 1490</span> </div>
<div class="line"><span class="lineno"> 1491</span>        <span class="keywordtype">float</span> om_idx0 = 1.0f - idx0;</div>
<div class="line"><span class="lineno"> 1492</span>        wmin1 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(idx0, wmin1);</div>
<div class="line"><span class="lineno"> 1493</span>        wmax1 = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(idx0, wmax1);</div>
<div class="line"><span class="lineno"> 1494</span> </div>
<div class="line"><span class="lineno"> 1495</span>        <span class="keywordtype">float</span> scale = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477">dot3_s</a>(scale_dir, rgba);</div>
<div class="line"><span class="lineno"> 1496</span>        scale_min = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(scale, scale_min);</div>
<div class="line"><span class="lineno"> 1497</span>        scale_max = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(scale, scale_max);</div>
<div class="line"><span class="lineno"> 1498</span> </div>
<div class="line"><span class="lineno"> 1499</span>        left1_sum_s   += om_idx0 * om_idx0;</div>
<div class="line"><span class="lineno"> 1500</span>        middle1_sum_s += om_idx0 * idx0;</div>
<div class="line"><span class="lineno"> 1501</span>        right1_sum_s  += idx0 * idx0;</div>
<div class="line"><span class="lineno"> 1502</span> </div>
<div class="line"><span class="lineno"> 1503</span>        <span class="keywordtype">float</span> idx1 = undec_weight_plane2_ref[j];</div>
<div class="line"><span class="lineno"> 1504</span> </div>
<div class="line"><span class="lineno"> 1505</span>        <span class="keywordtype">float</span> om_idx1 = 1.0f - idx1;</div>
<div class="line"><span class="lineno"> 1506</span>        wmin2 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(idx1, wmin2);</div>
<div class="line"><span class="lineno"> 1507</span>        wmax2 = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(idx1, wmax2);</div>
<div class="line"><span class="lineno"> 1508</span> </div>
<div class="line"><span class="lineno"> 1509</span>        left2_sum_s   += om_idx1 * om_idx1;</div>
<div class="line"><span class="lineno"> 1510</span>        middle2_sum_s += om_idx1 * idx1;</div>
<div class="line"><span class="lineno"> 1511</span>        right2_sum_s  += idx1 * idx1;</div>
<div class="line"><span class="lineno"> 1512</span> </div>
<div class="line"><span class="lineno"> 1513</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_idx = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(<a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(idx0), <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(idx1), p2_mask);</div>
<div class="line"><span class="lineno"> 1514</span> </div>
<div class="line"><span class="lineno"> 1515</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> cwprod = rgba;</div>
<div class="line"><span class="lineno"> 1516</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> cwiprod = cwprod * color_idx;</div>
<div class="line"><span class="lineno"> 1517</span> </div>
<div class="line"><span class="lineno"> 1518</span>        color_vec_y += cwiprod;</div>
<div class="line"><span class="lineno"> 1519</span>        color_vec_x += cwprod - cwiprod;</div>
<div class="line"><span class="lineno"> 1520</span> </div>
<div class="line"><span class="lineno"> 1521</span>        scale_vec += <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde">vfloat2</a>(om_idx0, idx0) * (ls_weight * scale);</div>
<div class="line"><span class="lineno"> 1522</span>        weight_weight_sum += color_idx;</div>
<div class="line"><span class="lineno"> 1523</span>    }</div>
<div class="line"><span class="lineno"> 1524</span> </div>
<div class="line"><span class="lineno"> 1525</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> left1_sum   = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(left1_sum_s) * color_weight;</div>
<div class="line"><span class="lineno"> 1526</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> middle1_sum = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(middle1_sum_s) * color_weight;</div>
<div class="line"><span class="lineno"> 1527</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> right1_sum  = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(right1_sum_s) * color_weight;</div>
<div class="line"><span class="lineno"> 1528</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> lmrs_sum    = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a>(left1_sum_s, middle1_sum_s, right1_sum_s) * ls_weight;</div>
<div class="line"><span class="lineno"> 1529</span> </div>
<div class="line"><span class="lineno"> 1530</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> left2_sum   = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(left2_sum_s) * color_weight;</div>
<div class="line"><span class="lineno"> 1531</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> middle2_sum = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(middle2_sum_s) * color_weight;</div>
<div class="line"><span class="lineno"> 1532</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> right2_sum  = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(right2_sum_s) * color_weight;</div>
<div class="line"><span class="lineno"> 1533</span> </div>
<div class="line"><span class="lineno"> 1534</span>    color_vec_x = color_vec_x * color_weight;</div>
<div class="line"><span class="lineno"> 1535</span>    color_vec_y = color_vec_y * color_weight;</div>
<div class="line"><span class="lineno"> 1536</span> </div>
<div class="line"><span class="lineno"> 1537</span>    <span class="comment">// Initialize the luminance and scale vectors with a reasonable default</span></div>
<div class="line"><span class="lineno"> 1538</span>    <span class="keywordtype">float</span> scalediv = scale_min / <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(scale_max, 1e-10f);</div>
<div class="line"><span class="lineno"> 1539</span>    scalediv = <a class="code hl_function" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e">astc::clamp1f</a>(scalediv);</div>
<div class="line"><span class="lineno"> 1540</span> </div>
<div class="line"><span class="lineno"> 1541</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sds = scale_dir * scale_max;</div>
<div class="line"><span class="lineno"> 1542</span> </div>
<div class="line"><span class="lineno"> 1543</span>    rgbs_vector = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), scalediv);</div>
<div class="line"><span class="lineno"> 1544</span> </div>
<div class="line"><span class="lineno"> 1545</span>    <span class="keywordflow">if</span> (wmin1 &gt;= wmax1 * 0.999f)</div>
<div class="line"><span class="lineno"> 1546</span>    {</div>
<div class="line"><span class="lineno"> 1547</span>        <span class="comment">// If all weights in the partition were equal, then just take average of all colors in</span></div>
<div class="line"><span class="lineno"> 1548</span>        <span class="comment">// the partition and use that as both endpoint colors</span></div>
<div class="line"><span class="lineno"> 1549</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> avg = (color_vec_x + color_vec_y) / rgba_weight_sum;</div>
<div class="line"><span class="lineno"> 1550</span> </div>
<div class="line"><span class="lineno"> 1551</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> p1_mask = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint4::lane_id</a>() != <a class="code hl_struct" href="structvint4.html">vint4</a>(plane2_component);</div>
<div class="line"><span class="lineno"> 1552</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> notnan_mask = avg == avg;</div>
<div class="line"><span class="lineno"> 1553</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> full_mask = p1_mask &amp; notnan_mask;</div>
<div class="line"><span class="lineno"> 1554</span> </div>
<div class="line"><span class="lineno"> 1555</span>        ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[0] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[0], avg, full_mask);</div>
<div class="line"><span class="lineno"> 1556</span>        ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[0] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[0], avg, full_mask);</div>
<div class="line"><span class="lineno"> 1557</span> </div>
<div class="line"><span class="lineno"> 1558</span>        rgbs_vector = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), sds.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), 1.0f);</div>
<div class="line"><span class="lineno"> 1559</span>    }</div>
<div class="line"><span class="lineno"> 1560</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1561</span>    {</div>
<div class="line"><span class="lineno"> 1562</span>        <span class="comment">// Otherwise, complete the analytic calculation of ideal-endpoint-values for the given</span></div>
<div class="line"><span class="lineno"> 1563</span>        <span class="comment">// set of texel weights and pixel colors</span></div>
<div class="line"><span class="lineno"> 1564</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_det1 = (left1_sum * right1_sum) - (middle1_sum * middle1_sum);</div>
<div class="line"><span class="lineno"> 1565</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_rdet1 = 1.0f / color_det1;</div>
<div class="line"><span class="lineno"> 1566</span> </div>
<div class="line"><span class="lineno"> 1567</span>        <span class="keywordtype">float</span> ls_det1  = (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;()) - (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno"> 1568</span>        <span class="keywordtype">float</span> ls_rdet1 = 1.0f / ls_det1;</div>
<div class="line"><span class="lineno"> 1569</span> </div>
<div class="line"><span class="lineno"> 1570</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_mss1 = (left1_sum * left1_sum)</div>
<div class="line"><span class="lineno"> 1571</span>                           + (2.0f * middle1_sum * middle1_sum)</div>
<div class="line"><span class="lineno"> 1572</span>                           + (right1_sum * right1_sum);</div>
<div class="line"><span class="lineno"> 1573</span> </div>
<div class="line"><span class="lineno"> 1574</span>        <span class="keywordtype">float</span> ls_mss1 = (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;())</div>
<div class="line"><span class="lineno"> 1575</span>                      + (2.0f * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;())</div>
<div class="line"><span class="lineno"> 1576</span>                      + (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;() * lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno"> 1577</span> </div>
<div class="line"><span class="lineno"> 1578</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep0 = (right1_sum * color_vec_x - middle1_sum * color_vec_y) * color_rdet1;</div>
<div class="line"><span class="lineno"> 1579</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep1 = (left1_sum * color_vec_y - middle1_sum * color_vec_x) * color_rdet1;</div>
<div class="line"><span class="lineno"> 1580</span> </div>
<div class="line"><span class="lineno"> 1581</span>        <span class="keywordtype">float</span> scale_ep0 = (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;() * scale_vec.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() - lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() * scale_vec.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;()) * ls_rdet1;</div>
<div class="line"><span class="lineno"> 1582</span>        <span class="keywordtype">float</span> scale_ep1 = (lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() * scale_vec.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() - lmrs_sum.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() * scale_vec.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;()) * ls_rdet1;</div>
<div class="line"><span class="lineno"> 1583</span> </div>
<div class="line"><span class="lineno"> 1584</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> p1_mask = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint4::lane_id</a>() != <a class="code hl_struct" href="structvint4.html">vint4</a>(plane2_component);</div>
<div class="line"><span class="lineno"> 1585</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> det_mask = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c">abs</a>(color_det1) &gt; (color_mss1 * 1e-4f);</div>
<div class="line"><span class="lineno"> 1586</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> notnan_mask = (ep0 == ep0) &amp; (ep1 == ep1);</div>
<div class="line"><span class="lineno"> 1587</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> full_mask = p1_mask &amp; det_mask &amp; notnan_mask;</div>
<div class="line"><span class="lineno"> 1588</span> </div>
<div class="line"><span class="lineno"> 1589</span>        ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[0] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[0], ep0, full_mask);</div>
<div class="line"><span class="lineno"> 1590</span>        ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[0] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[0], ep1, full_mask);</div>
<div class="line"><span class="lineno"> 1591</span> </div>
<div class="line"><span class="lineno"> 1592</span>        <span class="keywordflow">if</span> (fabsf(ls_det1) &gt; (ls_mss1 * 1e-4f) &amp;&amp; scale_ep0 == scale_ep0 &amp;&amp; scale_ep1 == scale_ep1 &amp;&amp; scale_ep0 &lt; scale_ep1)</div>
<div class="line"><span class="lineno"> 1593</span>        {</div>
<div class="line"><span class="lineno"> 1594</span>            <span class="keywordtype">float</span> scalediv2 = scale_ep0 / scale_ep1;</div>
<div class="line"><span class="lineno"> 1595</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sdsm = scale_dir * scale_ep1;</div>
<div class="line"><span class="lineno"> 1596</span>            rgbs_vector = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(sdsm.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), sdsm.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), sdsm.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), scalediv2);</div>
<div class="line"><span class="lineno"> 1597</span>        }</div>
<div class="line"><span class="lineno"> 1598</span>    }</div>
<div class="line"><span class="lineno"> 1599</span> </div>
<div class="line"><span class="lineno"> 1600</span>    <span class="keywordflow">if</span> (wmin2 &gt;= wmax2 * 0.999f)</div>
<div class="line"><span class="lineno"> 1601</span>    {</div>
<div class="line"><span class="lineno"> 1602</span>        <span class="comment">// If all weights in the partition were equal, then just take average of all colors in</span></div>
<div class="line"><span class="lineno"> 1603</span>        <span class="comment">// the partition and use that as both endpoint colors</span></div>
<div class="line"><span class="lineno"> 1604</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> avg = (color_vec_x + color_vec_y) / rgba_weight_sum;</div>
<div class="line"><span class="lineno"> 1605</span> </div>
<div class="line"><span class="lineno"> 1606</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> notnan_mask = avg == avg;</div>
<div class="line"><span class="lineno"> 1607</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> full_mask = p2_mask &amp; notnan_mask;</div>
<div class="line"><span class="lineno"> 1608</span> </div>
<div class="line"><span class="lineno"> 1609</span>        ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[0] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[0], avg, full_mask);</div>
<div class="line"><span class="lineno"> 1610</span>        ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[0] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[0], avg, full_mask);</div>
<div class="line"><span class="lineno"> 1611</span>    }</div>
<div class="line"><span class="lineno"> 1612</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1613</span>    {</div>
<div class="line"><span class="lineno"> 1614</span>        <span class="comment">// Otherwise, complete the analytic calculation of ideal-endpoint-values for the given</span></div>
<div class="line"><span class="lineno"> 1615</span>        <span class="comment">// set of texel weights and pixel colors</span></div>
<div class="line"><span class="lineno"> 1616</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_det2 = (left2_sum * right2_sum) - (middle2_sum * middle2_sum);</div>
<div class="line"><span class="lineno"> 1617</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_rdet2 = 1.0f / color_det2;</div>
<div class="line"><span class="lineno"> 1618</span> </div>
<div class="line"><span class="lineno"> 1619</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> color_mss2 = (left2_sum * left2_sum)</div>
<div class="line"><span class="lineno"> 1620</span>                           + (2.0f * middle2_sum * middle2_sum)</div>
<div class="line"><span class="lineno"> 1621</span>                           + (right2_sum * right2_sum);</div>
<div class="line"><span class="lineno"> 1622</span> </div>
<div class="line"><span class="lineno"> 1623</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep0 = (right2_sum * color_vec_x - middle2_sum * color_vec_y) * color_rdet2;</div>
<div class="line"><span class="lineno"> 1624</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep1 = (left2_sum * color_vec_y - middle2_sum * color_vec_x) * color_rdet2;</div>
<div class="line"><span class="lineno"> 1625</span> </div>
<div class="line"><span class="lineno"> 1626</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> det_mask = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c">abs</a>(color_det2) &gt; (color_mss2 * 1e-4f);</div>
<div class="line"><span class="lineno"> 1627</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> notnan_mask = (ep0 == ep0) &amp; (ep1 == ep1);</div>
<div class="line"><span class="lineno"> 1628</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> full_mask = p2_mask &amp; det_mask &amp; notnan_mask;</div>
<div class="line"><span class="lineno"> 1629</span> </div>
<div class="line"><span class="lineno"> 1630</span>        ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[0] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[0], ep0, full_mask);</div>
<div class="line"><span class="lineno"> 1631</span>        ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[0] = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[0], ep1, full_mask);</div>
<div class="line"><span class="lineno"> 1632</span>    }</div>
<div class="line"><span class="lineno"> 1633</span> </div>
<div class="line"><span class="lineno"> 1634</span>    <span class="comment">// Calculations specific to mode #7, the HDR RGB-scale mode - skip if known LDR</span></div>
<div class="line"><span class="lineno"> 1635</span>    <span class="keywordflow">if</span> (blk.<a class="code hl_variable" href="structimage__block.html#af1a9e601f3d03dc488993b81258058e0">rgb_lns</a>[0] || blk.<a class="code hl_variable" href="structimage__block.html#ade6f78d73e016d4e9222cbe89f5b1eec">alpha_lns</a>[0])</div>
<div class="line"><span class="lineno"> 1636</span>    {</div>
<div class="line"><span class="lineno"> 1637</span>        weight_weight_sum = weight_weight_sum * color_weight;</div>
<div class="line"><span class="lineno"> 1638</span>        <span class="keywordtype">float</span> psum = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477">dot3_s</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(right1_sum, right2_sum, p2_mask), color_weight);</div>
<div class="line"><span class="lineno"> 1639</span> </div>
<div class="line"><span class="lineno"> 1640</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> rgbq_sum = color_vec_x + color_vec_y;</div>
<div class="line"><span class="lineno"> 1641</span>        rgbq_sum.<a class="code hl_function" href="structvfloat4.html#a2168231efa1e514fd41b3603e57be297">set_lane</a>&lt;3&gt;(<a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(color_vec_y));</div>
<div class="line"><span class="lineno"> 1642</span> </div>
<div class="line"><span class="lineno"> 1643</span>        rgbo_vector = <a class="code hl_function" href="#a55d08b4feda289df7cbcfa6e1ed0b80c">compute_rgbo_vector</a>(rgba_weight_sum, weight_weight_sum, rgbq_sum, psum);</div>
<div class="line"><span class="lineno"> 1644</span> </div>
<div class="line"><span class="lineno"> 1645</span>        <span class="comment">// We can get a failure due to the use of a singular (non-invertible) matrix</span></div>
<div class="line"><span class="lineno"> 1646</span>        <span class="comment">// If it failed, compute rgbo_vectors[] with a different method ...</span></div>
<div class="line"><span class="lineno"> 1647</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b">astc::isnan</a>(<a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac">dot_s</a>(rgbo_vector, rgbo_vector)))</div>
<div class="line"><span class="lineno"> 1648</span>        {</div>
<div class="line"><span class="lineno"> 1649</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> v0 = ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[0];</div>
<div class="line"><span class="lineno"> 1650</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> v1 = ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[0];</div>
<div class="line"><span class="lineno"> 1651</span> </div>
<div class="line"><span class="lineno"> 1652</span>            <span class="keywordtype">float</span> avgdif = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(v1 - v0) * (1.0f / 3.0f);</div>
<div class="line"><span class="lineno"> 1653</span>            avgdif = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(avgdif, 0.0f);</div>
<div class="line"><span class="lineno"> 1654</span> </div>
<div class="line"><span class="lineno"> 1655</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> avg = (v0 + v1) * 0.5f;</div>
<div class="line"><span class="lineno"> 1656</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep0 = avg - <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(avgdif) * 0.5f;</div>
<div class="line"><span class="lineno"> 1657</span> </div>
<div class="line"><span class="lineno"> 1658</span>            rgbo_vector = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;(), ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;(), avgdif);</div>
<div class="line"><span class="lineno"> 1659</span>        }</div>
<div class="line"><span class="lineno"> 1660</span>    }</div>
<div class="line"><span class="lineno"> 1661</span>}</div>
<div class="ttc" id="aastcenc__internal_8h_html_a4135969a5d69e8805250b420dcccf460"><div class="ttname"><a href="astcenc__internal_8h.html#a4135969a5d69e8805250b420dcccf460">BLOCK_MAX_WEIGHTS_2PLANE</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_WEIGHTS_2PLANE</div><div class="ttdoc">The maximum number of weights a block can support per plane in 2 plane mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00090">astcenc_internal.h:90</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a0df466b2eda6958f2e5f8a4f147367e4"><div class="ttname"><a href="structblock__size__descriptor.html#a0df466b2eda6958f2e5f8a4f147367e4">block_size_descriptor::texel_count</a></div><div class="ttdeci">uint8_t texel_count</div><div class="ttdoc">The block total texel count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00542">astcenc_internal.h:542</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_afb3c455470bef24f48d7815bb78bb569_cgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_afb3c455470bef24f48d7815bb78bb569_cgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_afb3c455470bef24f48d7815bb78bb569_cgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_afb3c455470bef24f48d7815bb78bb569_cgraph">
<area shape="rect" title="For a given 2 plane weight set recompute the endpoint colors." alt="" coords="5,574,164,614"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c" title="Return the absolute value of the float vector." alt="" coords="263,5,306,31"/>
<area shape="poly" title=" " alt="" coords="85,573,98,464,123,304,140,222,160,146,183,83,210,40,228,27,249,20,250,25,231,32,214,44,188,86,165,148,145,223,128,305,104,464,91,574"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a617a8dec1d2168023a84f5c0fa1c20ca" title="Functions for computing color endpoints and texel weights." alt="" coords="227,55,342,80"/>
<area shape="poly" title=" " alt="" coords="86,573,100,472,126,328,143,253,163,185,185,128,210,90,214,86,218,90,214,93,190,131,168,187,149,254,131,329,105,473,91,574"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a84286bd889620da3be77539ddfdf3b45" title="Compute the infilled weight for N texel indices in a decimated grid." alt="" coords="221,104,349,129"/>
<area shape="poly" title=" " alt="" coords="83,574,85,494,90,439,100,378,116,315,138,251,169,192,210,139,214,135,218,139,214,142,174,195,143,254,121,316,105,379,96,440,90,495,88,574"/>
<area shape="rect" href="namespaceastc.html#ac60307af42a98d70a956170894e29e9e" title="Clamp a float value between 0.0f and 1.0f." alt="" coords="235,153,335,179"/>
<area shape="poly" title=" " alt="" coords="84,573,89,502,106,399,122,343,144,287,173,235,210,188,221,180,224,184,214,192,177,237,149,289,127,344,111,400,94,502,89,574"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a55d08b4feda289df7cbcfa6e1ed0b80c" title="Compute the RGB + offset for a HDR endpoint mode #7." alt="" coords="212,304,357,329"/>
<area shape="poly" title=" " alt="" coords="89,573,103,528,128,468,163,404,185,374,210,347,229,333,232,338,214,351,189,377,168,407,133,470,108,529,94,575"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a53a7d8285fd42b50cf3600a004db34ac" title="Return the dot product for the full 4 lanes, returning scalar." alt="" coords="429,301,484,327"/>
<area shape="poly" title=" " alt="" coords="85,573,92,515,112,435,128,394,149,354,176,318,211,289,235,276,262,269,290,267,319,268,372,279,417,294,416,299,371,284,318,273,290,272,263,274,237,281,213,294,180,322,154,357,133,396,117,437,97,516,90,574"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="411,355,502,380"/>
<area shape="poly" title=" " alt="" coords="90,573,104,533,129,482,164,431,186,409,211,390,256,370,306,359,354,356,398,357,398,362,355,361,307,364,258,375,213,395,189,413,168,435,134,485,109,535,95,575"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477" title="Return the dot product for the bottom 3 lanes, returning scalar." alt="" coords="254,556,315,581"/>
<area shape="poly" title=" " alt="" coords="164,581,240,572,240,577,165,587"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e" title="Return the horizontal sum of RGB vector lanes as a scalar." alt="" coords="412,531,501,556"/>
<area shape="poly" title=" " alt="" coords="124,571,165,554,211,541,260,534,310,532,399,535,398,540,310,537,261,539,213,546,167,559,126,576"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a3a2ce0fb403294db7fe126a6b3e87ab7" title="Return a float value for an integer vector." alt="" coords="242,605,327,631"/>
<area shape="poly" title=" " alt="" coords="165,601,228,609,228,614,164,606"/>
<area shape="rect" href="namespaceastc.html#aa80ae2eee0ffb5b754bdf0bb08b8759b" title="Test if a float value is a nan." alt="" coords="241,655,328,680"/>
<area shape="poly" title=" " alt="" coords="139,612,213,639,235,647,233,652,211,645,137,617"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="236,704,333,729"/>
<area shape="poly" title=" " alt="" coords="109,612,156,651,213,689,229,697,227,701,211,694,152,655,106,616"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="245,753,325,779"/>
<area shape="poly" title=" " alt="" coords="101,613,146,675,178,709,213,738,233,749,231,754,211,743,174,713,142,678,96,616"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3" title="Return the max vector of two vectors." alt="" coords="261,803,308,828"/>
<area shape="poly" title=" " alt="" coords="96,613,113,650,138,697,172,746,214,788,230,798,249,805,247,810,228,803,210,792,168,749,134,700,108,653,91,615"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="247,852,323,877"/>
<area shape="poly" title=" " alt="" coords="93,614,107,659,131,719,166,783,189,812,214,837,235,850,232,855,210,841,184,815,162,785,126,722,102,661,88,615"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a48bcfcd0946caec9323acbf4bf1126ce" title="Normalize a non&#45;zero length vector to unit length." alt="" coords="245,203,324,228"/>
<area shape="poly" title=" " alt="" coords="85,574,94,512,115,425,132,378,153,331,178,286,210,245,231,230,234,234,214,249,183,289,157,333,137,380,121,427,100,513,91,574"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="256,901,313,927"/>
<area shape="poly" title=" " alt="" coords="92,614,103,668,125,741,141,780,161,819,185,855,214,887,228,897,244,903,242,908,225,901,210,891,181,858,156,821,136,782,120,743,98,669,86,615"/>
<area shape="rect" href="structvfloat4.html#a2168231efa1e514fd41b3603e57be297" title="Set the scalar value of a single lane." alt="" coords="227,951,342,976"/>
<area shape="poly" title=" " alt="" coords="90,614,99,676,119,762,135,809,156,855,182,898,214,936,220,941,217,945,210,940,177,901,151,857,130,811,114,764,93,677,85,615"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a" title="Store a vector to a 16B aligned memory address." alt="" coords="255,1000,314,1025"/>
<area shape="poly" title=" " alt="" coords="89,614,95,684,113,783,129,837,150,891,178,941,214,985,227,996,243,1003,241,1007,225,1000,210,989,174,944,146,893,124,839,108,784,90,684,84,615"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="240,405,329,431"/>
<area shape="poly" title=" " alt="" coords="95,572,140,507,173,471,210,440,226,431,228,436,214,444,177,475,145,511,100,575"/>
<area shape="rect" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9" title="Get an RGBA texel value from the data." alt="" coords="219,1049,350,1075"/>
<area shape="poly" title=" " alt="" coords="88,614,91,692,97,745,107,804,123,865,145,926,175,984,214,1035,220,1040,216,1044,210,1038,170,987,140,928,118,867,102,805,92,745,86,692,83,614"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde" title="Factory that returns a 2 component vfloat4." alt="" coords="255,1099,314,1124"/>
<area shape="poly" title=" " alt="" coords="91,614,106,713,132,854,150,927,169,993,191,1047,214,1084,227,1095,243,1102,241,1107,225,1099,210,1088,186,1050,164,995,144,928,127,855,101,714,86,615"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07" title="Factory that returns a 3 component vfloat4." alt="" coords="255,1148,314,1173"/>
<area shape="poly" title=" " alt="" coords="91,614,104,721,129,877,146,958,166,1032,189,1092,214,1134,227,1144,243,1151,241,1156,224,1149,210,1137,184,1095,161,1033,141,959,124,878,99,722,85,614"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="239,455,330,480"/>
<area shape="poly" title=" " alt="" coords="108,572,154,535,211,497,237,483,239,488,213,502,157,539,111,576"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="426,80,487,105"/>
<area shape="poly" title=" " alt="" coords="343,73,413,84,412,89,342,78"/>
<area shape="poly" title=" " alt="" coords="349,105,412,96,413,101,349,110"/>
<area shape="rect" href="namespaceastc.html#a8f8b2ad23b04a389f6785bc80b61349b" title="Clamp a value value between mn and mx." alt="" coords="411,153,502,179"/>
<area shape="poly" title=" " alt="" coords="335,163,397,163,397,169,335,169"/>
<area shape="poly" title=" " alt="" coords="358,313,415,312,415,317,358,318"/>
<area shape="poly" title=" " alt="" coords="329,327,400,348,399,353,328,332"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="564,252,628,277"/>
<area shape="poly" title=" " alt="" coords="483,302,550,278,552,283,485,307"/>
<area shape="poly" title=" " alt="" coords="572,253,567,244,570,234,580,228,596,225,615,229,624,237,620,241,613,234,596,231,582,233,574,237,573,243,577,251"/>
<area shape="poly" title=" " alt="" coords="315,562,398,549,399,554,316,567"/>
<area shape="rect" href="structvint4.html#a01e3f7debf73dc6c757fa36d585c9d17" title="Get the scalar from a single lane." alt="" coords="556,531,636,556"/>
<area shape="poly" title=" " alt="" coords="502,541,542,541,542,546,502,546"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="415,704,498,729"/>
<area shape="poly" title=" " alt="" coords="334,714,401,714,401,719,334,719"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="437,203,477,228"/>
<area shape="poly" title=" " alt="" coords="324,213,423,213,423,218,324,218"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a46b31b19ff13c14adb023db4b5df8e52" title="Return the sqrt of the lanes in the vector." alt="" coords="435,252,479,277"/>
<area shape="poly" title=" " alt="" coords="325,224,422,252,421,257,323,229"/>
<area shape="poly" title=" " alt="" coords="478,220,552,246,550,251,476,225"/>
<area shape="poly" title=" " alt="" coords="328,403,399,381,400,387,329,408"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="405,431,508,456"/>
<area shape="poly" title=" " alt="" coords="330,422,392,431,392,436,329,427"/>
<area shape="poly" title=" " alt="" coords="330,458,391,450,392,455,330,464"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__ideal__endpoints__and__weights_8cpp_afb3c455470bef24f48d7815bb78bb569_icgraph.png" border="0" usemap="#aastcenc__ideal__endpoints__and__weights_8cpp_afb3c455470bef24f48d7815bb78bb569_icgraph" alt=""/></div>
<map name="aastcenc__ideal__endpoints__and__weights_8cpp_afb3c455470bef24f48d7815bb78bb569_icgraph" id="aastcenc__ideal__endpoints__and__weights_8cpp_afb3c455470bef24f48d7815bb78bb569_icgraph">
<area shape="rect" title="For a given 2 plane weight set recompute the endpoint colors." alt="" coords="1239,5,1397,45"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_211b531afad3b7391864460492782af6.html">astc-encoder-main</a></li><li class="navelem"><a class="el" href="dir_7df889ea08e038e0b05c337eccc30153.html">Source</a></li><li class="navelem"><a class="el" href="astcenc__ideal__endpoints__and__weights_8cpp.html">astcenc_ideal_endpoints_and_weights.cpp</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
