<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project1: C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-encoder-main/Source/astcenc_averages_and_directions.cpp 파일 참조</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Project1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('astcenc__averages__and__directions_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">함수</a>  </div>
  <div class="headertitle"><div class="title">astcenc_averages_and_directions.cpp 파일 참조</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="astcenc__internal_8h_source.html">astcenc_internal.h</a>&quot;</code><br />
<code>#include &lt;cassert&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
astcenc_averages_and_directions.cpp에 대한 include 의존 그래프</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp__incl.png" border="0" usemap="#a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__averages__and__directions_8cpp" alt=""/></div>
<map name="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__averages__and__directions_8cpp" id="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__averages__and__directions_8cpp">
<area shape="rect" title=" " alt="" coords="121,5,296,89"/>
<area shape="rect" href="astcenc__internal_8h.html" title=" " alt="" coords="321,137,449,163"/>
<area shape="poly" title=" " alt="" coords="282,87,354,128,352,133,279,92"/>
<area shape="rect" title=" " alt="" coords="5,284,71,309"/>
<area shape="poly" title=" " alt="" coords="183,91,56,274,52,271,178,88"/>
<area shape="rect" title=" " alt="" coords="530,445,605,471"/>
<area shape="poly" title=" " alt="" coords="449,158,539,178,577,192,601,209,617,236,625,266,626,297,622,329,604,388,583,434,578,432,599,386,617,328,621,297,620,267,612,238,597,212,574,197,537,183,448,163"/>
<area shape="rect" title=" " alt="" coords="527,284,591,309"/>
<area shape="poly" title=" " alt="" coords="449,150,484,155,520,166,553,183,580,209,587,225,587,241,576,273,571,271,582,241,582,226,576,212,550,188,518,171,483,160,448,155"/>
<area shape="rect" title=" " alt="" coords="418,284,479,309"/>
<area shape="poly" title=" " alt="" coords="396,162,426,210,446,269,441,271,421,212,391,164"/>
<area shape="rect" title=" " alt="" coords="273,211,333,236"/>
<area shape="poly" title=" " alt="" coords="373,165,329,204,325,200,370,161"/>
<area shape="rect" title=" " alt="" coords="358,211,411,236"/>
<area shape="poly" title=" " alt="" coords="387,163,387,197,382,197,382,163"/>
<area shape="rect" href="astcenc_8h.html" title=" " alt="" coords="487,211,565,236"/>
<area shape="poly" title=" " alt="" coords="409,160,492,202,490,207,406,165"/>
<area shape="rect" href="astcenc__mathlib_8h.html" title=" " alt="" coords="121,211,249,236"/>
<area shape="poly" title=" " alt="" coords="353,165,231,208,230,203,352,160"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html" title=" " alt="" coords="101,284,247,309"/>
<area shape="poly" title=" " alt="" coords="321,159,261,166,198,176,143,192,124,202,111,212,106,228,112,244,126,260,144,274,141,279,123,264,107,247,100,228,106,209,121,197,142,187,196,171,260,160,320,153"/>
<area shape="poly" title=" " alt="" coords="534,235,551,271,546,273,529,237"/>
<area shape="poly" title=" " alt="" coords="515,238,473,276,470,273,512,234"/>
<area shape="poly" title=" " alt="" coords="228,233,406,281,404,286,226,239"/>
<area shape="poly" title=" " alt="" coords="162,238,75,280,73,276,160,234"/>
<area shape="rect" title=" " alt="" coords="271,284,330,309"/>
<area shape="poly" title=" " alt="" coords="205,234,271,274,269,279,202,238"/>
<area shape="poly" title=" " alt="" coords="186,237,180,271,175,270,180,236"/>
<area shape="rect" href="astcenc__vecmathlib__none__4_8h.html" title=" " alt="" coords="266,357,402,397"/>
<area shape="poly" title=" " alt="" coords="198,307,284,349,282,353,196,312"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html" title=" " alt="" coords="106,357,242,397"/>
<area shape="poly" title=" " alt="" coords="177,310,177,344,171,344,171,310"/>
<area shape="poly" title=" " alt="" coords="391,395,521,438,519,443,389,400"/>
<area shape="rect" title=" " alt="" coords="183,445,240,471"/>
<area shape="poly" title=" " alt="" coords="306,400,242,440,240,436,303,395"/>
<area shape="rect" title=" " alt="" coords="283,445,345,471"/>
<area shape="poly" title=" " alt="" coords="332,398,323,432,318,431,327,397"/>
<area shape="rect" title=" " alt="" coords="369,445,419,471"/>
<area shape="poly" title=" " alt="" coords="351,396,379,433,375,436,346,399"/>
<area shape="poly" title=" " alt="" coords="185,396,202,432,198,434,181,399"/>
</map>
</div>
</div>
<p><a href="astcenc__averages__and__directions_8cpp_source.html">이 파일의 소스 코드 페이지로 가기</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
함수</h2></td></tr>
<tr class="memitem:ac5429bc77cf39a7dba332af8fb14e093" id="r_ac5429bc77cf39a7dba332af8fb14e093"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac5429bc77cf39a7dba332af8fb14e093">compute_partition_averages_rgb</a> (const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, <a class="el" href="structvfloat4.html">vfloat4</a> averages[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>])</td></tr>
<tr class="memdesc:ac5429bc77cf39a7dba332af8fb14e093"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions for finding dominant direction of a set of colors.  <br /></td></tr>
<tr class="separator:ac5429bc77cf39a7dba332af8fb14e093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83cf48552a7e8225358c7c43df24fd96" id="r_a83cf48552a7e8225358c7c43df24fd96"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83cf48552a7e8225358c7c43df24fd96">compute_partition_averages_rgba</a> (const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, <a class="el" href="structvfloat4.html">vfloat4</a> averages[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>])</td></tr>
<tr class="memdesc:a83cf48552a7e8225358c7c43df24fd96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the average RGBA color of each partition.  <br /></td></tr>
<tr class="separator:a83cf48552a7e8225358c7c43df24fd96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00407861c2f0e767b64b1cb1bb7a27b6" id="r_a00407861c2f0e767b64b1cb1bb7a27b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00407861c2f0e767b64b1cb1bb7a27b6">compute_avgs_and_dirs_4_comp</a> (const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, <a class="el" href="structpartition__metrics.html">partition_metrics</a> pm[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>])</td></tr>
<tr class="memdesc:a00407861c2f0e767b64b1cb1bb7a27b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute averages and dominant directions for each partition in a 4 component texture.  <br /></td></tr>
<tr class="separator:a00407861c2f0e767b64b1cb1bb7a27b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33f923c5a839af4f1d369a391183c384" id="r_a33f923c5a839af4f1d369a391183c384"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a33f923c5a839af4f1d369a391183c384">compute_avgs_and_dirs_3_comp</a> (const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, unsigned int omitted_component, <a class="el" href="structpartition__metrics.html">partition_metrics</a> pm[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>])</td></tr>
<tr class="memdesc:a33f923c5a839af4f1d369a391183c384"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute averages and dominant directions for each partition in a 3 component texture.  <br /></td></tr>
<tr class="separator:a33f923c5a839af4f1d369a391183c384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73936e5cf41b74f2b8d9b137a9d64253" id="r_a73936e5cf41b74f2b8d9b137a9d64253"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a73936e5cf41b74f2b8d9b137a9d64253">compute_avgs_and_dirs_3_comp_rgb</a> (const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, <a class="el" href="structpartition__metrics.html">partition_metrics</a> pm[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>])</td></tr>
<tr class="memdesc:a73936e5cf41b74f2b8d9b137a9d64253"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute averages and dominant directions for each partition in a 3 component texture.  <br /></td></tr>
<tr class="separator:a73936e5cf41b74f2b8d9b137a9d64253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63e55f3f2ec6932357b8387f3dd82f7a" id="r_a63e55f3f2ec6932357b8387f3dd82f7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a63e55f3f2ec6932357b8387f3dd82f7a">compute_avgs_and_dirs_2_comp</a> (const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pt, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, unsigned int component1, unsigned int component2, <a class="el" href="structpartition__metrics.html">partition_metrics</a> pm[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>])</td></tr>
<tr class="memdesc:a63e55f3f2ec6932357b8387f3dd82f7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute averages and dominant directions for each partition in a 2 component texture.  <br /></td></tr>
<tr class="separator:a63e55f3f2ec6932357b8387f3dd82f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dec702033b002eaf4090eb47ce4ad21" id="r_a2dec702033b002eaf4090eb47ce4ad21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2dec702033b002eaf4090eb47ce4ad21">compute_error_squared_rgba</a> (const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structprocessed__line4.html">processed_line4</a> uncor_plines[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>], const <a class="el" href="structprocessed__line4.html">processed_line4</a> samec_plines[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>], float line_lengths[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>], float &amp;uncor_error, float &amp;samec_error)</td></tr>
<tr class="memdesc:a2dec702033b002eaf4090eb47ce4ad21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the RGBA error for uncorrelated and same chroma projections.  <br /></td></tr>
<tr class="separator:a2dec702033b002eaf4090eb47ce4ad21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4a96475fb0074ef3fd0f08ea66de75e" id="r_ac4a96475fb0074ef3fd0f08ea66de75e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac4a96475fb0074ef3fd0f08ea66de75e">compute_error_squared_rgb</a> (const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, <a class="el" href="structpartition__lines3.html">partition_lines3</a> plines[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>], float &amp;uncor_error, float &amp;samec_error)</td></tr>
<tr class="memdesc:ac4a96475fb0074ef3fd0f08ea66de75e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the RGB error for uncorrelated and same chroma projections.  <br /></td></tr>
<tr class="separator:ac4a96475fb0074ef3fd0f08ea66de75e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">함수 문서화</h2>
<a id="a63e55f3f2ec6932357b8387f3dd82f7a" name="a63e55f3f2ec6932357b8387f3dd82f7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63e55f3f2ec6932357b8387f3dd82f7a">&#9670;&#160;</a></span>compute_avgs_and_dirs_2_comp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_avgs_and_dirs_2_comp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>component1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>component2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpartition__metrics.html">partition_metrics</a></td>          <td class="paramname"><span class="paramname"><em>pm</em></span>[BLOCK_MAX_PARTITIONS]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute averages and dominant directions for each partition in a 2 component texture. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to be compressed. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">component1</td><td>The first component included in the analysis. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">component2</td><td>The second component included in the analysis. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pm</td><td>The output partition metrics.<ul>
<li>Only pi.partition_count array entries actually get initialized.</li>
<li>Direction vectors <code>pm.dir</code> are not normalized. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__averages__and__directions_8cpp_source.html">astcenc_averages_and_directions.cpp</a> 파일의 <a class="el" href="astcenc__averages__and__directions_8cpp_source.html#l00631">631</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  637</span>  {</div>
<div class="line"><span class="lineno">  638</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> average;</div>
<div class="line"><span class="lineno">  639</span> </div>
<div class="line"><span class="lineno">  640</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vr = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  641</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vg = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  642</span> </div>
<div class="line"><span class="lineno">  643</span>    <span class="keywordflow">if</span> (component1 == 0 &amp;&amp; component2 == 1)</div>
<div class="line"><span class="lineno">  644</span>    {</div>
<div class="line"><span class="lineno">  645</span>        average = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1&gt;();</div>
<div class="line"><span class="lineno">  646</span> </div>
<div class="line"><span class="lineno">  647</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>;</div>
<div class="line"><span class="lineno">  648</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>;</div>
<div class="line"><span class="lineno">  649</span>    }</div>
<div class="line"><span class="lineno">  650</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (component1 == 0 &amp;&amp; component2 == 2)</div>
<div class="line"><span class="lineno">  651</span>    {</div>
<div class="line"><span class="lineno">  652</span>        average = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 2&gt;();</div>
<div class="line"><span class="lineno">  653</span> </div>
<div class="line"><span class="lineno">  654</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>;</div>
<div class="line"><span class="lineno">  655</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  656</span>    }</div>
<div class="line"><span class="lineno">  657</span>    <span class="keywordflow">else</span> <span class="comment">// (component1 == 1 &amp;&amp; component2 == 2)</span></div>
<div class="line"><span class="lineno">  658</span>    {</div>
<div class="line"><span class="lineno">  659</span>        assert(component1 == 1 &amp;&amp; component2 == 2);</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>        average = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;1, 2&gt;();</div>
<div class="line"><span class="lineno">  662</span> </div>
<div class="line"><span class="lineno">  663</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>;</div>
<div class="line"><span class="lineno">  664</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  665</span>    }</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pt.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  668</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition = 0; partition &lt; partition_count; partition++)</div>
<div class="line"><span class="lineno">  671</span>    {</div>
<div class="line"><span class="lineno">  672</span>        <span class="keyword">const</span> uint8_t *texel_indexes = pt.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[partition];</div>
<div class="line"><span class="lineno">  673</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = pt.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[partition];</div>
<div class="line"><span class="lineno">  674</span>        <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  675</span> </div>
<div class="line"><span class="lineno">  676</span>        <span class="comment">// Only compute a partition mean if more than one partition</span></div>
<div class="line"><span class="lineno">  677</span>        <span class="keywordflow">if</span> (partition_count &gt; 1)</div>
<div class="line"><span class="lineno">  678</span>        {</div>
<div class="line"><span class="lineno">  679</span>            average = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  680</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i++)</div>
<div class="line"><span class="lineno">  681</span>            {</div>
<div class="line"><span class="lineno">  682</span>                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iwt = texel_indexes[i];</div>
<div class="line"><span class="lineno">  683</span>                average += <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde">vfloat2</a>(data_vr[iwt], data_vg[iwt]);</div>
<div class="line"><span class="lineno">  684</span>            }</div>
<div class="line"><span class="lineno">  685</span> </div>
<div class="line"><span class="lineno">  686</span>            average = average / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(texel_count);</div>
<div class="line"><span class="lineno">  687</span>        }</div>
<div class="line"><span class="lineno">  688</span> </div>
<div class="line"><span class="lineno">  689</span>        pm[partition].<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a> = average;</div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_xp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  692</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_yp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i++)</div>
<div class="line"><span class="lineno">  695</span>        {</div>
<div class="line"><span class="lineno">  696</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iwt = texel_indexes[i];</div>
<div class="line"><span class="lineno">  697</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> texel_datum = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde">vfloat2</a>(data_vr[iwt], data_vg[iwt]);</div>
<div class="line"><span class="lineno">  698</span>            texel_datum = texel_datum - average;</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> zero = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm0 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0,0,0,0&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  703</span>            sum_xp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm0);</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm1 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;1,1,1,1&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  706</span>            sum_yp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm1);</div>
<div class="line"><span class="lineno">  707</span>        }</div>
<div class="line"><span class="lineno">  708</span> </div>
<div class="line"><span class="lineno">  709</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_xp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_xp, sum_xp);</div>
<div class="line"><span class="lineno">  710</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_yp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_yp, sum_yp);</div>
<div class="line"><span class="lineno">  711</span> </div>
<div class="line"><span class="lineno">  712</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> best_vector = sum_xp;</div>
<div class="line"><span class="lineno">  713</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> best_sum = prod_xp;</div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = prod_yp &gt; best_sum;</div>
<div class="line"><span class="lineno">  716</span>        best_vector = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_vector, sum_yp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  717</span> </div>
<div class="line"><span class="lineno">  718</span>        pm[partition].<a class="code hl_variable" href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">dir</a> = best_vector;</div>
<div class="line"><span class="lineno">  719</span>    }</div>
<div class="line"><span class="lineno">  720</span>}</div>
<div class="ttc" id="aastcenc__internal_8h_html_a2cce51c3362aa0b5040437ac0e7f8969"><div class="ttname"><a href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a></div><div class="ttdeci">#define promise(cond)</div><div class="ttdoc">Functions and data declarations.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00061">astcenc_internal.h:61</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a4750532a1dbacf2063927a027725afde"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde">vfloat2</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 vfloat2(float a, float b)</div><div class="ttdoc">Factory that returns a 2 component vfloat4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00283">astcenc_vecmathlib.h:283</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a844ab5b69b84569f033be33bf5fb9fbc"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 select(vint8 a, vint8 b, vmask8 cond)</div><div class="ttdoc">Return lanes from b if cond is set, else a.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00602">astcenc_vecmathlib_avx2_8.h:602</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ad922a3ed6098767968916265154b6f82"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE unsigned int mask(vmask8 a)</div><div class="ttdoc">Return a 8-bit mask code indicating mask status.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00355">astcenc_vecmathlib_avx2_8.h:355</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_a6d7561f8f0ebee752b0e217101d9d5f3"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat4 dot(vfloat4 a, vfloat4 b)</div><div class="ttdoc">Return the dot product for the full 4 lanes, returning vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00312">astcenc_vecmathlib_common_4.h:312</a></div></div>
<div class="ttc" id="astructimage__block_html_a298273079b0de525a0c12ced8bf98d13"><div class="ttname"><a href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">image_block::data_b</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_b[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the blue color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00753">astcenc_internal.h:753</a></div></div>
<div class="ttc" id="astructimage__block_html_abc5bc97aed6bb644726f952818ec74b5"><div class="ttname"><a href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">image_block::data_g</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_g[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the green color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00750">astcenc_internal.h:750</a></div></div>
<div class="ttc" id="astructimage__block_html_ac6bd4890338be887b61f857e37d23459"><div class="ttname"><a href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">image_block::data_mean</a></div><div class="ttdeci">vfloat4 data_mean</div><div class="ttdoc">The mean component value of all texels in the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00768">astcenc_internal.h:768</a></div></div>
<div class="ttc" id="astructimage__block_html_acd4ea54654959c7b325efe9d02aaeacc"><div class="ttname"><a href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">image_block::data_r</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_r[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the red color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00747">astcenc_internal.h:747</a></div></div>
<div class="ttc" id="astructpartition__info_html_a1ffb0fdd4d560f536d6118f032fba4f3"><div class="ttname"><a href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_info::partition_count</a></div><div class="ttdeci">uint16_t partition_count</div><div class="ttdoc">The number of partitions in this partitioning.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00315">astcenc_internal.h:315</a></div></div>
<div class="ttc" id="astructpartition__info_html_a92b324c921407ee30e6052426e00e0f6"><div class="ttname"><a href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_info::partition_texel_count</a></div><div class="ttdeci">uint8_t partition_texel_count[BLOCK_MAX_PARTITIONS]</div><div class="ttdoc">The number of texels in each partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00326">astcenc_internal.h:326</a></div></div>
<div class="ttc" id="astructpartition__info_html_af0987713fff05a82c3230d9400c6e1e7"><div class="ttname"><a href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">partition_info::texels_of_partition</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t texels_of_partition[BLOCK_MAX_PARTITIONS][BLOCK_MAX_TEXELS]</div><div class="ttdoc">The list of texels in each partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00332">astcenc_internal.h:332</a></div></div>
<div class="ttc" id="astructpartition__metrics_html_a5a05f959255774e848e83001f9b7bd37"><div class="ttname"><a href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">partition_metrics::dir</a></div><div class="ttdeci">vfloat4 dir</div><div class="ttdoc">The dominant error-weighted direction in the partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00275">astcenc_internal.h:275</a></div></div>
<div class="ttc" id="astructpartition__metrics_html_a81851ed35dd9dc3ce09a74b8167f5846"><div class="ttname"><a href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">partition_metrics::avg</a></div><div class="ttdeci">vfloat4 avg</div><div class="ttdoc">The error-weighted average color in the partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00272">astcenc_internal.h:272</a></div></div>
<div class="ttc" id="astructvfloat4_html"><div class="ttname"><a href="structvfloat4.html">vfloat4</a></div><div class="ttdoc">4x32-bit vectors, implemented using Armv8-A NEON.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00050">astcenc_vecmathlib_neon_4.h:51</a></div></div>
<div class="ttc" id="astructvfloat4_html_a04b5f338012dab6be0b2bd7910fcbcae"><div class="ttname"><a href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 zero()</div><div class="ttdoc">Factory that returns a vector of zeros.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00116">astcenc_vecmathlib_neon_4.h:116</a></div></div>
<div class="ttc" id="astructvfloat4_html_a0a3e390831722cc8e54f29155699f3a5"><div class="ttname"><a href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">vfloat4::swz</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat4 swz() const</div><div class="ttdoc">Return a swizzled float 2.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00149">astcenc_vecmathlib_neon_4.h:149</a></div></div>
<div class="ttc" id="astructvmask4_html"><div class="ttname"><a href="structvmask4.html">vmask4</a></div><div class="ttdoc">Data type for 4-wide control plane masks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00313">astcenc_vecmathlib_neon_4.h:314</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a63e55f3f2ec6932357b8387f3dd82f7a_cgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a63e55f3f2ec6932357b8387f3dd82f7a_cgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a63e55f3f2ec6932357b8387f3dd82f7a_cgraph" id="aastcenc__averages__and__directions_8cpp_a63e55f3f2ec6932357b8387f3dd82f7a_cgraph">
<area shape="rect" title="Compute averages and dominant directions for each partition in a 2 component texture." alt="" coords="5,146,167,186"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="240,29,280,55"/>
<area shape="poly" title=" " alt="" coords="109,144,156,105,213,64,227,56,229,60,216,68,159,110,112,148"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="233,79,287,104"/>
<area shape="poly" title=" " alt="" coords="132,144,219,106,221,111,134,148"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="231,128,289,153"/>
<area shape="poly" title=" " alt="" coords="167,152,218,144,218,149,167,157"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="215,177,305,203"/>
<area shape="poly" title=" " alt="" coords="167,175,202,179,202,185,167,180"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a4750532a1dbacf2063927a027725afde" title="Factory that returns a 2 component vfloat4." alt="" coords="231,227,289,252"/>
<area shape="poly" title=" " alt="" coords="135,184,219,220,217,224,133,188"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="215,276,305,301"/>
<area shape="poly" title=" " alt="" coords="113,184,216,261,225,267,222,271,213,266,110,188"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="373,29,437,55"/>
<area shape="poly" title=" " alt="" coords="280,39,359,39,359,45,280,45"/>
<area shape="poly" title=" " alt="" coords="380,30,375,21,378,11,388,5,405,3,425,6,433,15,429,18,422,11,405,8,390,10,382,15,380,20,385,28"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="359,177,450,203"/>
<area shape="poly" title=" " alt="" coords="305,187,346,187,346,193,305,193"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="353,251,456,276"/>
<area shape="poly" title=" " alt="" coords="287,200,368,242,365,247,285,205"/>
<area shape="poly" title=" " alt="" coords="305,278,339,272,340,277,306,283"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a63e55f3f2ec6932357b8387f3dd82f7a_icgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a63e55f3f2ec6932357b8387f3dd82f7a_icgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a63e55f3f2ec6932357b8387f3dd82f7a_icgraph" id="aastcenc__averages__and__directions_8cpp_a63e55f3f2ec6932357b8387f3dd82f7a_icgraph">
<area shape="rect" title="Compute averages and dominant directions for each partition in a 2 component texture." alt="" coords="1643,5,1804,45"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#ad96c399a873ddd142d4779b6aeb74b87" title="Compute the ideal endpoints and weights for 2 color components." alt="" coords="1440,5,1595,45"/>
<area shape="poly" title=" " alt="" coords="1629,28,1595,28,1595,23,1629,23"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a52d3985007cfc83025661e0347bc00cc" title="Compute ideal endpoint colors and weights for 2 planes of weights." alt="" coords="1239,5,1392,45"/>
<area shape="poly" title=" " alt="" coords="1426,28,1393,28,1393,23,1426,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a33f923c5a839af4f1d369a391183c384" name="a33f923c5a839af4f1d369a391183c384"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33f923c5a839af4f1d369a391183c384">&#9670;&#160;</a></span>compute_avgs_and_dirs_3_comp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_avgs_and_dirs_3_comp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>omitted_component</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpartition__metrics.html">partition_metrics</a></td>          <td class="paramname"><span class="paramname"><em>pm</em></span>[BLOCK_MAX_PARTITIONS]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute averages and dominant directions for each partition in a 3 component texture. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to be compressed. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">omitted_component</td><td>The component excluded from the analysis. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pm</td><td>The output partition metrics.<ul>
<li>Only pi.partition_count array entries actually get initialized.</li>
<li>Direction vectors <code>pm.dir</code> are not normalized. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__averages__and__directions_8cpp_source.html">astcenc_averages_and_directions.cpp</a> 파일의 <a class="el" href="astcenc__averages__and__directions_8cpp_source.html#l00459">459</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  464</span>  {</div>
<div class="line"><span class="lineno">  465</span>    <span class="comment">// Pre-compute partition_averages</span></div>
<div class="line"><span class="lineno">  466</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> partition_averages[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  467</span>    <a class="code hl_function" href="#a83cf48552a7e8225358c7c43df24fd96">compute_partition_averages_rgba</a>(pi, blk, partition_averages);</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vr = blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>;</div>
<div class="line"><span class="lineno">  470</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vg = blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>;</div>
<div class="line"><span class="lineno">  471</span>    <span class="keyword">const</span> <span class="keywordtype">float</span>* data_vb = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>    <span class="comment">// TODO: Data-driven permute would be useful to avoid this ...</span></div>
<div class="line"><span class="lineno">  474</span>    <span class="keywordflow">if</span> (omitted_component == 0)</div>
<div class="line"><span class="lineno">  475</span>    {</div>
<div class="line"><span class="lineno">  476</span>        partition_averages[0] = partition_averages[0].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;1, 2, 3&gt;();</div>
<div class="line"><span class="lineno">  477</span>        partition_averages[1] = partition_averages[1].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;1, 2, 3&gt;();</div>
<div class="line"><span class="lineno">  478</span>        partition_averages[2] = partition_averages[2].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;1, 2, 3&gt;();</div>
<div class="line"><span class="lineno">  479</span>        partition_averages[3] = partition_averages[3].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;1, 2, 3&gt;();</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>        data_vr = blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>;</div>
<div class="line"><span class="lineno">  482</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  483</span>        data_vb = blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a>;</div>
<div class="line"><span class="lineno">  484</span>    }</div>
<div class="line"><span class="lineno">  485</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (omitted_component == 1)</div>
<div class="line"><span class="lineno">  486</span>    {</div>
<div class="line"><span class="lineno">  487</span>        partition_averages[0] = partition_averages[0].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 2, 3&gt;();</div>
<div class="line"><span class="lineno">  488</span>        partition_averages[1] = partition_averages[1].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 2, 3&gt;();</div>
<div class="line"><span class="lineno">  489</span>        partition_averages[2] = partition_averages[2].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 2, 3&gt;();</div>
<div class="line"><span class="lineno">  490</span>        partition_averages[3] = partition_averages[3].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 2, 3&gt;();</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>        data_vg = blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>;</div>
<div class="line"><span class="lineno">  493</span>        data_vb = blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a>;</div>
<div class="line"><span class="lineno">  494</span>    }</div>
<div class="line"><span class="lineno">  495</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (omitted_component == 2)</div>
<div class="line"><span class="lineno">  496</span>    {</div>
<div class="line"><span class="lineno">  497</span>        partition_averages[0] = partition_averages[0].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 3&gt;();</div>
<div class="line"><span class="lineno">  498</span>        partition_averages[1] = partition_averages[1].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 3&gt;();</div>
<div class="line"><span class="lineno">  499</span>        partition_averages[2] = partition_averages[2].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 3&gt;();</div>
<div class="line"><span class="lineno">  500</span>        partition_averages[3] = partition_averages[3].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 3&gt;();</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>        data_vb = blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a>;</div>
<div class="line"><span class="lineno">  503</span>    }</div>
<div class="line"><span class="lineno">  504</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  505</span>    {</div>
<div class="line"><span class="lineno">  506</span>        partition_averages[0] = partition_averages[0].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;();</div>
<div class="line"><span class="lineno">  507</span>        partition_averages[1] = partition_averages[1].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;();</div>
<div class="line"><span class="lineno">  508</span>        partition_averages[2] = partition_averages[2].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;();</div>
<div class="line"><span class="lineno">  509</span>        partition_averages[3] = partition_averages[3].<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;();</div>
<div class="line"><span class="lineno">  510</span>    }</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  513</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  514</span> </div>
<div class="line"><span class="lineno">  515</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition = 0; partition &lt; partition_count; partition++)</div>
<div class="line"><span class="lineno">  516</span>    {</div>
<div class="line"><span class="lineno">  517</span>        <span class="keyword">const</span> uint8_t *texel_indexes = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[partition];</div>
<div class="line"><span class="lineno">  518</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[partition];</div>
<div class="line"><span class="lineno">  519</span>        <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> average = partition_averages[partition];</div>
<div class="line"><span class="lineno">  522</span>        pm[partition].<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a> = average;</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_xp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  525</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_yp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  526</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_zp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i++)</div>
<div class="line"><span class="lineno">  529</span>        {</div>
<div class="line"><span class="lineno">  530</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iwt = texel_indexes[i];</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> texel_datum = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a>(data_vr[iwt],</div>
<div class="line"><span class="lineno">  533</span>                                          data_vg[iwt],</div>
<div class="line"><span class="lineno">  534</span>                                          data_vb[iwt]);</div>
<div class="line"><span class="lineno">  535</span>            texel_datum = texel_datum - average;</div>
<div class="line"><span class="lineno">  536</span> </div>
<div class="line"><span class="lineno">  537</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> zero = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm0 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0,0,0,0&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  540</span>            sum_xp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm0);</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm1 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;1,1,1,1&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  543</span>            sum_yp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm1);</div>
<div class="line"><span class="lineno">  544</span> </div>
<div class="line"><span class="lineno">  545</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm2 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;2,2,2,2&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  546</span>            sum_zp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm2);</div>
<div class="line"><span class="lineno">  547</span>        }</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_xp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_xp, sum_xp);</div>
<div class="line"><span class="lineno">  550</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_yp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_yp, sum_yp);</div>
<div class="line"><span class="lineno">  551</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_zp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_zp, sum_zp);</div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> best_vector = sum_xp;</div>
<div class="line"><span class="lineno">  554</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> best_sum = prod_xp;</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = prod_yp &gt; best_sum;</div>
<div class="line"><span class="lineno">  557</span>        best_vector = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_vector, sum_yp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  558</span>        best_sum = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_sum, prod_yp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = prod_zp &gt; best_sum;</div>
<div class="line"><span class="lineno">  561</span>        best_vector = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_vector, sum_zp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>        pm[partition].<a class="code hl_variable" href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">dir</a> = best_vector;</div>
<div class="line"><span class="lineno">  564</span>    }</div>
<div class="line"><span class="lineno">  565</span>}</div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_a83cf48552a7e8225358c7c43df24fd96"><div class="ttname"><a href="#a83cf48552a7e8225358c7c43df24fd96">compute_partition_averages_rgba</a></div><div class="ttdeci">static void compute_partition_averages_rgba(const partition_info &amp;pi, const image_block &amp;blk, vfloat4 averages[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">Compute the average RGBA color of each partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00218">astcenc_averages_and_directions.cpp:218</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a31f42bb3da7abe95be4b6960feead130"><div class="ttname"><a href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_PARTITIONS</div><div class="ttdoc">The maximum number of partitions a block can support.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00078">astcenc_internal.h:78</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a1a2e12d78738b0b4b550f57b2dc05f07"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 vfloat3(float a, float b, float c)</div><div class="ttdoc">Factory that returns a 3 component vfloat4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00275">astcenc_vecmathlib.h:275</a></div></div>
<div class="ttc" id="astructimage__block_html_a602c8c88dc1ceef33e833f6d6cbc09ea"><div class="ttname"><a href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">image_block::data_a</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_a[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the alpha color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00756">astcenc_internal.h:756</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a33f923c5a839af4f1d369a391183c384_cgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a33f923c5a839af4f1d369a391183c384_cgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a33f923c5a839af4f1d369a391183c384_cgraph" id="aastcenc__averages__and__directions_8cpp_a33f923c5a839af4f1d369a391183c384_cgraph">
<area shape="rect" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="5,237,167,277"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a83cf48552a7e8225358c7c43df24fd96" title="Compute the average RGBA color of each partition." alt="" coords="215,84,429,109"/>
<area shape="poly" title=" " alt="" coords="101,234,148,183,179,155,213,130,255,111,257,116,216,135,183,159,152,187,105,238"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="302,145,342,171"/>
<area shape="poly" title=" " alt="" coords="114,234,160,206,214,180,252,168,288,160,289,165,253,173,216,184,162,211,117,239"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="295,195,349,220"/>
<area shape="poly" title=" " alt="" coords="166,237,281,213,282,218,168,242"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="293,244,351,269"/>
<area shape="poly" title=" " alt="" coords="167,254,280,254,280,259,167,259"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="277,293,367,319"/>
<area shape="poly" title=" " alt="" coords="168,271,264,291,263,297,166,276"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07" title="Factory that returns a 3 component vfloat4." alt="" coords="293,343,351,368"/>
<area shape="poly" title=" " alt="" coords="117,275,162,303,216,329,280,346,278,352,214,334,160,307,114,279"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="277,392,367,417"/>
<area shape="poly" title=" " alt="" coords="104,275,150,328,181,355,216,378,239,388,264,395,262,400,237,393,213,383,178,359,146,331,100,279"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="481,29,577,55"/>
<area shape="poly" title=" " alt="" coords="370,81,467,55,468,61,371,87"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="497,152,561,177"/>
<area shape="poly" title=" " alt="" coords="363,107,484,147,483,153,361,112"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="480,79,577,104"/>
<area shape="poly" title=" " alt="" coords="429,91,466,90,466,96,430,97"/>
<area shape="poly" title=" " alt="" coords="505,30,500,21,503,11,513,5,529,3,548,6,556,15,552,18,545,11,529,8,514,10,507,15,505,20,510,28"/>
<area shape="poly" title=" " alt="" coords="505,153,500,144,503,134,513,128,529,125,548,129,556,137,552,141,545,134,529,131,514,133,507,137,505,143,510,151"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="628,79,711,104"/>
<area shape="poly" title=" " alt="" coords="577,89,614,89,614,94,577,94"/>
<area shape="poly" title=" " alt="" coords="342,156,483,161,483,166,342,161"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="483,293,574,319"/>
<area shape="poly" title=" " alt="" coords="367,303,470,303,470,309,367,309"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="477,367,580,392"/>
<area shape="poly" title=" " alt="" coords="367,312,430,329,494,358,492,363,428,334,366,317"/>
<area shape="poly" title=" " alt="" coords="367,397,463,385,464,390,368,402"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a33f923c5a839af4f1d369a391183c384_icgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a33f923c5a839af4f1d369a391183c384_icgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a33f923c5a839af4f1d369a391183c384_icgraph" id="aastcenc__averages__and__directions_8cpp_a33f923c5a839af4f1d369a391183c384_icgraph">
<area shape="rect" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="1643,37,1804,77"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a7ec20ff2556f6357cc0754c13e841262" title="Compute the ideal endpoints and weights for 3 color components." alt="" coords="1440,37,1595,77"/>
<area shape="poly" title=" " alt="" coords="1629,60,1595,60,1595,55,1629,55"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#afa8cab65d4b6f0cbece52eec38aed523" title="Compute ideal endpoint colors and weights for 1 plane of weights." alt="" coords="1241,5,1389,45"/>
<area shape="poly" title=" " alt="" coords="1426,46,1389,40,1390,34,1427,40"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a52d3985007cfc83025661e0347bc00cc" title="Compute ideal endpoint colors and weights for 2 planes of weights." alt="" coords="1239,69,1392,109"/>
<area shape="poly" title=" " alt="" coords="1426,74,1393,80,1392,75,1426,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1228,28,1191,28,1191,23,1228,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,92,1191,92,1191,87,1225,87"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="a73936e5cf41b74f2b8d9b137a9d64253" name="a73936e5cf41b74f2b8d9b137a9d64253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73936e5cf41b74f2b8d9b137a9d64253">&#9670;&#160;</a></span>compute_avgs_and_dirs_3_comp_rgb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_avgs_and_dirs_3_comp_rgb </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpartition__metrics.html">partition_metrics</a></td>          <td class="paramname"><span class="paramname"><em>pm</em></span>[BLOCK_MAX_PARTITIONS]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute averages and dominant directions for each partition in a 3 component texture. </p>
<p>This is a specialization of <code>compute_avgs_and_dirs_3_comp</code> where the omitted component is always alpha, a common case during partition search.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to be compressed. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pm</td><td>The output partition metrics.<ul>
<li>Only pi.partition_count array entries actually get initialized.</li>
<li>Direction vectors <code>pm.dir</code> are not normalized. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__averages__and__directions_8cpp_source.html">astcenc_averages_and_directions.cpp</a> 파일의 <a class="el" href="astcenc__averages__and__directions_8cpp_source.html#l00568">568</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  572</span>  {</div>
<div class="line"><span class="lineno">  573</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  574</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  576</span>    <span class="comment">// Pre-compute partition_averages</span></div>
<div class="line"><span class="lineno">  577</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> partition_averages[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  578</span>    <a class="code hl_function" href="#ac5429bc77cf39a7dba332af8fb14e093">compute_partition_averages_rgb</a>(pi, blk, partition_averages);</div>
<div class="line"><span class="lineno">  579</span> </div>
<div class="line"><span class="lineno">  580</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition = 0; partition &lt; partition_count; partition++)</div>
<div class="line"><span class="lineno">  581</span>    {</div>
<div class="line"><span class="lineno">  582</span>        <span class="keyword">const</span> uint8_t *texel_indexes = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[partition];</div>
<div class="line"><span class="lineno">  583</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[partition];</div>
<div class="line"><span class="lineno">  584</span>        <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  585</span> </div>
<div class="line"><span class="lineno">  586</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> average = partition_averages[partition];</div>
<div class="line"><span class="lineno">  587</span>        pm[partition].<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a> = average;</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_xp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  590</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_yp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  591</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_zp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i++)</div>
<div class="line"><span class="lineno">  594</span>        {</div>
<div class="line"><span class="lineno">  595</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iwt = texel_indexes[i];</div>
<div class="line"><span class="lineno">  596</span> </div>
<div class="line"><span class="lineno">  597</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> texel_datum = blk.<a class="code hl_function" href="structimage__block.html#a682b1ada02acb8369d6f6f30378b260e">texel3</a>(iwt);</div>
<div class="line"><span class="lineno">  598</span>            texel_datum = texel_datum - average;</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> zero = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm0 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0,0,0,0&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  603</span>            sum_xp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm0);</div>
<div class="line"><span class="lineno">  604</span> </div>
<div class="line"><span class="lineno">  605</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm1 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;1,1,1,1&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  606</span>            sum_yp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm1);</div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm2 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;2,2,2,2&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  609</span>            sum_zp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm2);</div>
<div class="line"><span class="lineno">  610</span>        }</div>
<div class="line"><span class="lineno">  611</span> </div>
<div class="line"><span class="lineno">  612</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_xp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_xp, sum_xp);</div>
<div class="line"><span class="lineno">  613</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_yp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_yp, sum_yp);</div>
<div class="line"><span class="lineno">  614</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_zp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_zp, sum_zp);</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> best_vector = sum_xp;</div>
<div class="line"><span class="lineno">  617</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> best_sum = prod_xp;</div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = prod_yp &gt; best_sum;</div>
<div class="line"><span class="lineno">  620</span>        best_vector = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_vector, sum_yp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  621</span>        best_sum = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_sum, prod_yp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = prod_zp &gt; best_sum;</div>
<div class="line"><span class="lineno">  624</span>        best_vector = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_vector, sum_zp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>        pm[partition].<a class="code hl_variable" href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">dir</a> = best_vector;</div>
<div class="line"><span class="lineno">  627</span>    }</div>
<div class="line"><span class="lineno">  628</span>}</div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_ac5429bc77cf39a7dba332af8fb14e093"><div class="ttname"><a href="#ac5429bc77cf39a7dba332af8fb14e093">compute_partition_averages_rgb</a></div><div class="ttdeci">static void compute_partition_averages_rgb(const partition_info &amp;pi, const image_block &amp;blk, vfloat4 averages[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">Functions for finding dominant direction of a set of colors.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00047">astcenc_averages_and_directions.cpp:47</a></div></div>
<div class="ttc" id="astructimage__block_html_a682b1ada02acb8369d6f6f30378b260e"><div class="ttname"><a href="structimage__block.html#a682b1ada02acb8369d6f6f30378b260e">image_block::texel3</a></div><div class="ttdeci">vfloat4 texel3(unsigned int index) const</div><div class="ttdoc">Get an RGB texel value from the data.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00819">astcenc_internal.h:819</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a73936e5cf41b74f2b8d9b137a9d64253_cgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a73936e5cf41b74f2b8d9b137a9d64253_cgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a73936e5cf41b74f2b8d9b137a9d64253_cgraph" id="aastcenc__averages__and__directions_8cpp_a73936e5cf41b74f2b8d9b137a9d64253_cgraph">
<area shape="rect" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="5,243,167,283"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#ac5429bc77cf39a7dba332af8fb14e093" title="Functions for finding dominant direction of a set of colors." alt="" coords="215,149,423,175"/>
<area shape="poly" title=" " alt="" coords="119,241,163,216,214,192,256,176,257,181,216,196,165,221,121,246"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="475,201,564,227"/>
<area shape="poly" title=" " alt="" coords="166,243,214,235,347,221,461,214,461,219,347,227,215,241,167,249"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="299,64,339,89"/>
<area shape="poly" title=" " alt="" coords="103,241,150,191,213,135,250,110,285,90,288,94,253,114,216,139,154,194,106,245"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="291,352,346,377"/>
<area shape="poly" title=" " alt="" coords="121,281,165,306,216,330,279,352,277,357,214,335,163,311,119,286"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="290,401,347,427"/>
<area shape="poly" title=" " alt="" coords="104,282,150,335,181,364,216,388,246,400,277,407,276,412,244,405,213,392,178,368,146,339,100,285"/>
<area shape="rect" href="structimage__block.html#a682b1ada02acb8369d6f6f30378b260e" title="Get an RGB texel value from the data." alt="" coords="249,251,388,276"/>
<area shape="poly" title=" " alt="" coords="167,261,236,261,236,266,167,266"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="474,301,565,327"/>
<area shape="poly" title=" " alt="" coords="167,277,215,285,347,299,460,308,460,313,346,305,214,290,167,282"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="471,103,567,128"/>
<area shape="poly" title=" " alt="" coords="373,147,457,127,458,132,375,152"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="487,29,551,55"/>
<area shape="poly" title=" " alt="" coords="341,147,421,98,469,64,477,59,480,64,472,68,424,103,344,151"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="471,152,568,177"/>
<area shape="poly" title=" " alt="" coords="423,161,457,161,457,167,423,166"/>
<area shape="poly" title=" " alt="" coords="369,172,462,196,460,202,368,177"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07" title="Factory that returns a 3 component vfloat4." alt="" coords="490,251,549,276"/>
<area shape="poly" title=" " alt="" coords="346,172,482,242,480,247,344,177"/>
<area shape="poly" title=" " alt="" coords="494,104,489,94,492,85,502,78,519,76,540,80,548,88,545,92,537,84,519,81,504,83,496,88,495,94,499,101"/>
<area shape="poly" title=" " alt="" coords="494,31,489,21,492,11,502,5,519,3,540,6,548,15,545,18,537,11,519,8,504,10,496,15,495,20,499,28"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="626,152,709,177"/>
<area shape="poly" title=" " alt="" coords="568,162,612,162,612,167,568,167"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="622,201,713,227"/>
<area shape="poly" title=" " alt="" coords="564,211,608,211,608,217,564,217"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="616,276,719,301"/>
<area shape="poly" title=" " alt="" coords="547,224,569,236,631,267,628,272,567,240,545,229"/>
<area shape="poly" title=" " alt="" coords="339,71,473,47,474,52,339,76"/>
<area shape="poly" title=" " alt="" coords="388,261,476,261,476,266,388,266"/>
<area shape="poly" title=" " alt="" coords="565,304,602,297,603,302,566,309"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a73936e5cf41b74f2b8d9b137a9d64253_icgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a73936e5cf41b74f2b8d9b137a9d64253_icgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a73936e5cf41b74f2b8d9b137a9d64253_icgraph" id="aastcenc__averages__and__directions_8cpp_a73936e5cf41b74f2b8d9b137a9d64253_icgraph">
<area shape="rect" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="1673,101,1835,141"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#affc96d3eeffef962cd64307bf0b85590" title="For a given set of input colors and partitioning determine endpoint encode errors." alt="" coords="1449,21,1625,61"/>
<area shape="poly" title=" " alt="" coords="1685,99,1591,64,1593,59,1687,94"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a7ec20ff2556f6357cc0754c13e841262" title="Compute the ideal endpoints and weights for 3 color components." alt="" coords="1460,101,1615,141"/>
<area shape="poly" title=" " alt="" coords="1659,124,1615,124,1615,119,1659,119"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1039,191,1166,231"/>
<area shape="poly" title=" " alt="" coords="1666,147,1626,156,1499,177,1371,193,1167,210,1166,205,1371,187,1498,172,1625,151,1665,142"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,5,1401,45"/>
<area shape="poly" title=" " alt="" coords="1436,37,1401,34,1402,29,1436,31"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,63,1191,103"/>
<area shape="poly" title=" " alt="" coords="1231,51,1180,65,1178,60,1230,46"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,127,1191,167"/>
<area shape="poly" title=" " alt="" coords="1248,54,1240,59,1226,74,1217,88,1208,102,1192,117,1171,129,1168,124,1189,113,1204,99,1213,85,1222,70,1237,55,1245,50"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,134,967,159"/>
<area shape="poly" title=" " alt="" coords="1029,110,948,136,947,131,1027,104"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,134,801,159"/>
<area shape="poly" title=" " alt="" coords="835,149,802,149,802,144,835,144"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,134,632,159"/>
<area shape="poly" title=" " alt="" coords="666,149,632,149,632,144,666,144"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,134,207,159"/>
<area shape="poly" title=" " alt="" coords="444,146,409,145,255,145,207,147,207,142,255,140,409,140,444,141"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,155,409,195"/>
<area shape="poly" title=" " alt="" coords="444,163,410,167,409,162,443,157"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,134,56,159"/>
<area shape="poly" title=" " alt="" coords="90,149,57,149,57,144,90,144"/>
<area shape="poly" title=" " alt="" coords="241,163,206,157,207,152,242,158"/>
<area shape="poly" title=" " alt="" coords="1001,149,967,149,967,144,1001,144"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#afa8cab65d4b6f0cbece52eec38aed523" title="Compute ideal endpoint colors and weights for 1 plane of weights." alt="" coords="1246,69,1394,109"/>
<area shape="poly" title=" " alt="" coords="1446,111,1394,103,1395,98,1447,105"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a52d3985007cfc83025661e0347bc00cc" title="Compute ideal endpoint colors and weights for 2 planes of weights." alt="" coords="1243,133,1397,173"/>
<area shape="poly" title=" " alt="" coords="1447,137,1397,145,1397,139,1446,132"/>
<area shape="poly" title=" " alt="" coords="1232,89,1191,88,1191,83,1233,84"/>
<area shape="poly" title=" " alt="" coords="1229,153,1191,152,1191,147,1229,148"/>
<area shape="poly" title=" " alt="" coords="1027,189,947,162,948,157,1029,184"/>
</map>
</div>

</div>
</div>
<a id="a00407861c2f0e767b64b1cb1bb7a27b6" name="a00407861c2f0e767b64b1cb1bb7a27b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00407861c2f0e767b64b1cb1bb7a27b6">&#9670;&#160;</a></span>compute_avgs_and_dirs_4_comp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_avgs_and_dirs_4_comp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpartition__metrics.html">partition_metrics</a></td>          <td class="paramname"><span class="paramname"><em>pm</em></span>[BLOCK_MAX_PARTITIONS]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute averages and dominant directions for each partition in a 4 component texture. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to be compressed. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pm</td><td>The output partition metrics.<ul>
<li>Only pi.partition_count array entries actually get initialized.</li>
<li>Direction vectors <code>pm.dir</code> are not normalized. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__averages__and__directions_8cpp_source.html">astcenc_averages_and_directions.cpp</a> 파일의 <a class="el" href="astcenc__averages__and__directions_8cpp_source.html#l00388">388</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  392</span>  {</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  394</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>    <span class="comment">// Pre-compute partition_averages</span></div>
<div class="line"><span class="lineno">  397</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> partition_averages[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  398</span>    <a class="code hl_function" href="#a83cf48552a7e8225358c7c43df24fd96">compute_partition_averages_rgba</a>(pi, blk, partition_averages);</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> partition = 0; partition &lt; partition_count; partition++)</div>
<div class="line"><span class="lineno">  401</span>    {</div>
<div class="line"><span class="lineno">  402</span>        <span class="keyword">const</span> uint8_t *texel_indexes = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[partition];</div>
<div class="line"><span class="lineno">  403</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[partition];</div>
<div class="line"><span class="lineno">  404</span>        <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> average = partition_averages[partition];</div>
<div class="line"><span class="lineno">  407</span>        pm[partition].<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a> = average;</div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_xp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  410</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_yp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  411</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_zp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  412</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_wp = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i++)</div>
<div class="line"><span class="lineno">  415</span>        {</div>
<div class="line"><span class="lineno">  416</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iwt = texel_indexes[i];</div>
<div class="line"><span class="lineno">  417</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> texel_datum = blk.<a class="code hl_function" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">texel</a>(iwt);</div>
<div class="line"><span class="lineno">  418</span>            texel_datum = texel_datum - average;</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> zero = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm0 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0,0,0,0&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  423</span>            sum_xp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm0);</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm1 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;1,1,1,1&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  426</span>            sum_yp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm1);</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm2 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;2,2,2,2&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  429</span>            sum_zp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm2);</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>            <a class="code hl_struct" href="structvmask4.html">vmask4</a> tdm3 = texel_datum.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;3,3,3,3&gt;() &gt; zero;</div>
<div class="line"><span class="lineno">  432</span>            sum_wp += <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(zero, texel_datum, tdm3);</div>
<div class="line"><span class="lineno">  433</span>        }</div>
<div class="line"><span class="lineno">  434</span> </div>
<div class="line"><span class="lineno">  435</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_xp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_xp, sum_xp);</div>
<div class="line"><span class="lineno">  436</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_yp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_yp, sum_yp);</div>
<div class="line"><span class="lineno">  437</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_zp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_zp, sum_zp);</div>
<div class="line"><span class="lineno">  438</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prod_wp = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3">dot</a>(sum_wp, sum_wp);</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> best_vector = sum_xp;</div>
<div class="line"><span class="lineno">  441</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> best_sum = prod_xp;</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = prod_yp &gt; best_sum;</div>
<div class="line"><span class="lineno">  444</span>        best_vector = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_vector, sum_yp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  445</span>        best_sum = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_sum, prod_yp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = prod_zp &gt; best_sum;</div>
<div class="line"><span class="lineno">  448</span>        best_vector = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_vector, sum_zp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  449</span>        best_sum = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_sum, prod_zp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = prod_wp &gt; best_sum;</div>
<div class="line"><span class="lineno">  452</span>        best_vector = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(best_vector, sum_wp, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>        pm[partition].<a class="code hl_variable" href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">dir</a> = best_vector;</div>
<div class="line"><span class="lineno">  455</span>    }</div>
<div class="line"><span class="lineno">  456</span>}</div>
<div class="ttc" id="astructimage__block_html_af99de7d75e1e380b31d70d131509caa9"><div class="ttname"><a href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9">image_block::texel</a></div><div class="ttdeci">vfloat4 texel(unsigned int index) const</div><div class="ttdoc">Get an RGBA texel value from the data.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00804">astcenc_internal.h:804</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a00407861c2f0e767b64b1cb1bb7a27b6_cgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a00407861c2f0e767b64b1cb1bb7a27b6_cgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a00407861c2f0e767b64b1cb1bb7a27b6_cgraph" id="aastcenc__averages__and__directions_8cpp_a00407861c2f0e767b64b1cb1bb7a27b6_cgraph">
<area shape="rect" title="Compute averages and dominant directions for each partition in a 4 component texture." alt="" coords="5,237,167,277"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a83cf48552a7e8225358c7c43df24fd96" title="Compute the average RGBA color of each partition." alt="" coords="215,84,429,109"/>
<area shape="poly" title=" " alt="" coords="101,234,148,183,179,155,213,130,255,111,257,116,216,135,183,159,152,187,105,238"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="302,145,342,171"/>
<area shape="poly" title=" " alt="" coords="114,234,160,206,214,180,252,168,288,160,289,165,253,173,216,184,162,211,117,239"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="295,195,349,220"/>
<area shape="poly" title=" " alt="" coords="166,237,281,213,282,218,168,242"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="293,244,351,269"/>
<area shape="poly" title=" " alt="" coords="167,254,280,254,280,259,167,259"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="277,293,367,319"/>
<area shape="poly" title=" " alt="" coords="168,271,264,291,263,297,166,276"/>
<area shape="rect" href="structimage__block.html#af99de7d75e1e380b31d70d131509caa9" title="Get an RGBA texel value from the data." alt="" coords="257,343,387,368"/>
<area shape="poly" title=" " alt="" coords="117,275,162,303,216,329,244,338,242,343,214,334,160,307,114,279"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="277,392,367,417"/>
<area shape="poly" title=" " alt="" coords="104,275,150,328,181,355,216,378,239,388,264,395,262,400,237,393,213,383,178,359,146,331,100,279"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="481,29,577,55"/>
<area shape="poly" title=" " alt="" coords="370,81,467,55,468,61,371,87"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="497,152,561,177"/>
<area shape="poly" title=" " alt="" coords="363,107,484,147,483,153,361,112"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="480,79,577,104"/>
<area shape="poly" title=" " alt="" coords="429,91,466,90,466,96,430,97"/>
<area shape="poly" title=" " alt="" coords="505,30,500,21,503,11,513,5,529,3,548,6,556,15,552,18,545,11,529,8,514,10,507,15,505,20,510,28"/>
<area shape="poly" title=" " alt="" coords="505,153,500,144,503,134,513,128,529,125,548,129,556,137,552,141,545,134,529,131,514,133,507,137,505,143,510,151"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="628,79,711,104"/>
<area shape="poly" title=" " alt="" coords="577,89,614,89,614,94,577,94"/>
<area shape="poly" title=" " alt="" coords="342,156,483,161,483,166,342,161"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="483,293,574,319"/>
<area shape="poly" title=" " alt="" coords="367,303,470,303,470,309,367,309"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="477,367,580,392"/>
<area shape="poly" title=" " alt="" coords="367,312,430,329,494,358,492,363,428,334,366,317"/>
<area shape="poly" title=" " alt="" coords="367,397,463,385,464,390,368,402"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a00407861c2f0e767b64b1cb1bb7a27b6_icgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a00407861c2f0e767b64b1cb1bb7a27b6_icgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a00407861c2f0e767b64b1cb1bb7a27b6_icgraph" id="aastcenc__averages__and__directions_8cpp_a00407861c2f0e767b64b1cb1bb7a27b6_icgraph">
<area shape="rect" title="Compute averages and dominant directions for each partition in a 4 component texture." alt="" coords="1637,37,1799,77"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a08aebec57ada3441207dce6a7a02797e" title="Compute the ideal endpoints and weights for 4 color components." alt="" coords="1435,8,1589,48"/>
<area shape="poly" title=" " alt="" coords="1623,47,1589,42,1590,36,1624,41"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1249,69,1376,109"/>
<area shape="poly" title=" " alt="" coords="1624,67,1376,87,1376,82,1624,62"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#afa8cab65d4b6f0cbece52eec38aed523" title="Compute ideal endpoint colors and weights for 1 plane of weights." alt="" coords="1239,5,1387,45"/>
<area shape="poly" title=" " alt="" coords="1421,29,1387,29,1387,24,1421,24"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,8,1191,48"/>
<area shape="poly" title=" " alt="" coords="1225,29,1191,30,1191,24,1225,24"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,46,967,51,967,46,1001,41"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1235,86,967,65,967,59,1236,81"/>
</map>
</div>

</div>
</div>
<a id="ac4a96475fb0074ef3fd0f08ea66de75e" name="ac4a96475fb0074ef3fd0f08ea66de75e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4a96475fb0074ef3fd0f08ea66de75e">&#9670;&#160;</a></span>compute_error_squared_rgb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_error_squared_rgb </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpartition__lines3.html">partition_lines3</a></td>          <td class="paramname"><span class="paramname"><em>plines</em></span>[BLOCK_MAX_PARTITIONS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;</td>          <td class="paramname"><span class="paramname"><em>uncor_error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;</td>          <td class="paramname"><span class="paramname"><em>samec_error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the RGB error for uncorrelated and same chroma projections. </p>
<p>The output of compute averages and dirs is post processed to define two lines, both of which go through the mean-color-value. One line has a direction defined by the dominant direction; this is used to assess the error from using an uncorrelated color representation. The other line goes through (0,0,0) and is used to assess the error from using an RGBS color representation.</p>
<p>This function computes the squared error when using these two representations.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to be compressed. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">plines</td><td>Processed line inputs, and line length outputs. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">uncor_error</td><td>The cumulative error for using the uncorrelated line. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">samec_error</td><td>The cumulative error for using the same chroma line. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__averages__and__directions_8cpp_source.html">astcenc_averages_and_directions.cpp</a> 파일의 <a class="el" href="astcenc__averages__and__directions_8cpp_source.html#l00843">843</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  849</span>  {</div>
<div class="line"><span class="lineno">  850</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  851</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  852</span> </div>
<div class="line"><span class="lineno">  853</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> uncor_errorsumv = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">  854</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> samec_errorsumv = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition = 0; partition &lt; partition_count; partition++)</div>
<div class="line"><span class="lineno">  857</span>    {</div>
<div class="line"><span class="lineno">  858</span>        <a class="code hl_struct" href="structpartition__lines3.html">partition_lines3</a>&amp; pl = plines[partition];</div>
<div class="line"><span class="lineno">  859</span>        <span class="keyword">const</span> uint8_t *texel_indexes = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[partition];</div>
<div class="line"><span class="lineno">  860</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[partition];</div>
<div class="line"><span class="lineno">  861</span>        <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  862</span> </div>
<div class="line"><span class="lineno">  863</span>        <a class="code hl_struct" href="structprocessed__line3.html">processed_line3</a> l_uncor = pl.<a class="code hl_variable" href="structpartition__lines3.html#a859723c79cd27cb1428b2e87d00f21fe">uncor_pline</a>;</div>
<div class="line"><span class="lineno">  864</span>        <a class="code hl_struct" href="structprocessed__line3.html">processed_line3</a> l_samec = pl.<a class="code hl_variable" href="structpartition__lines3.html#a3d911509177415a3401db5040aea3fae">samec_pline</a>;</div>
<div class="line"><span class="lineno">  865</span> </div>
<div class="line"><span class="lineno">  866</span>        <span class="comment">// Vectorize some useful scalar inputs</span></div>
<div class="line"><span class="lineno">  867</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_bs0(l_uncor.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  868</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_bs1(l_uncor.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  869</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_bs2(l_uncor.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  870</span> </div>
<div class="line"><span class="lineno">  871</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_amod0(l_uncor.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  872</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_amod1(l_uncor.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  873</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_amod2(l_uncor.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_samec_bs0(l_samec.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  876</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_samec_bs1(l_samec.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  877</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_samec_bs2(l_samec.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span>        assert(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad93dff3341cbbeed568d4bd6dc4ef87c">all</a>(l_samec.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a> == <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(0.0f)));</div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_loparamv(1e10f);</div>
<div class="line"><span class="lineno">  882</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_hiparamv(-1e10f);</div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ew_r(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  885</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ew_g(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  886</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ew_b(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  887</span> </div>
<div class="line"><span class="lineno">  888</span>        <span class="comment">// This implementation over-shoots, but this is safe as we initialize the weights array</span></div>
<div class="line"><span class="lineno">  889</span>        <span class="comment">// to extend the last value. This means min/max are not impacted, but we need to mask</span></div>
<div class="line"><span class="lineno">  890</span>        <span class="comment">// out the dummy values when we compute the line weighting.</span></div>
<div class="line"><span class="lineno">  891</span>        <a class="code hl_struct" href="structvint4.html">vint</a> lane_ids = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint::lane_id</a>();</div>
<div class="line"><span class="lineno">  892</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  893</span>        {</div>
<div class="line"><span class="lineno">  894</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = lane_ids &lt; <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(texel_count);</div>
<div class="line"><span class="lineno">  895</span>            <a class="code hl_struct" href="structvint4.html">vint</a> texel_idxs(texel_indexes + i);</div>
<div class="line"><span class="lineno">  896</span> </div>
<div class="line"><span class="lineno">  897</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_r = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>, texel_idxs);</div>
<div class="line"><span class="lineno">  898</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_g = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>, texel_idxs);</div>
<div class="line"><span class="lineno">  899</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_b = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>, texel_idxs);</div>
<div class="line"><span class="lineno">  900</span> </div>
<div class="line"><span class="lineno">  901</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_param = (data_r * l_uncor_bs0)</div>
<div class="line"><span class="lineno">  902</span>                               + (data_g * l_uncor_bs1)</div>
<div class="line"><span class="lineno">  903</span>                               + (data_b * l_uncor_bs2);</div>
<div class="line"><span class="lineno">  904</span> </div>
<div class="line"><span class="lineno">  905</span>            uncor_loparamv = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b">min</a>(uncor_param, uncor_loparamv);</div>
<div class="line"><span class="lineno">  906</span>            uncor_hiparamv = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3">max</a>(uncor_param, uncor_hiparamv);</div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_dist0 = (l_uncor_amod0 - data_r)</div>
<div class="line"><span class="lineno">  909</span>                               + (uncor_param * l_uncor_bs0);</div>
<div class="line"><span class="lineno">  910</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_dist1 = (l_uncor_amod1 - data_g)</div>
<div class="line"><span class="lineno">  911</span>                               + (uncor_param * l_uncor_bs1);</div>
<div class="line"><span class="lineno">  912</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_dist2 = (l_uncor_amod2 - data_b)</div>
<div class="line"><span class="lineno">  913</span>                               + (uncor_param * l_uncor_bs2);</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_err = (ew_r * uncor_dist0 * uncor_dist0)</div>
<div class="line"><span class="lineno">  916</span>                             + (ew_g * uncor_dist1 * uncor_dist1)</div>
<div class="line"><span class="lineno">  917</span>                             + (ew_b * uncor_dist2 * uncor_dist2);</div>
<div class="line"><span class="lineno">  918</span> </div>
<div class="line"><span class="lineno">  919</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(uncor_errorsumv, uncor_err, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span>            <span class="comment">// Process samechroma data</span></div>
<div class="line"><span class="lineno">  922</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_param = (data_r * l_samec_bs0)</div>
<div class="line"><span class="lineno">  923</span>                               + (data_g * l_samec_bs1)</div>
<div class="line"><span class="lineno">  924</span>                               + (data_b * l_samec_bs2);</div>
<div class="line"><span class="lineno">  925</span> </div>
<div class="line"><span class="lineno">  926</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_dist0 = samec_param * l_samec_bs0 - data_r;</div>
<div class="line"><span class="lineno">  927</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_dist1 = samec_param * l_samec_bs1 - data_g;</div>
<div class="line"><span class="lineno">  928</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_dist2 = samec_param * l_samec_bs2 - data_b;</div>
<div class="line"><span class="lineno">  929</span> </div>
<div class="line"><span class="lineno">  930</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_err = (ew_r * samec_dist0 * samec_dist0)</div>
<div class="line"><span class="lineno">  931</span>                             + (ew_g * samec_dist1 * samec_dist1)</div>
<div class="line"><span class="lineno">  932</span>                             + (ew_b * samec_dist2 * samec_dist2);</div>
<div class="line"><span class="lineno">  933</span> </div>
<div class="line"><span class="lineno">  934</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(samec_errorsumv, samec_err, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  935</span> </div>
<div class="line"><span class="lineno">  936</span>            lane_ids += <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(<a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>);</div>
<div class="line"><span class="lineno">  937</span>        }</div>
<div class="line"><span class="lineno">  938</span> </div>
<div class="line"><span class="lineno">  939</span>        <span class="comment">// Turn very small numbers and NaNs into a small number</span></div>
<div class="line"><span class="lineno">  940</span>        <span class="keywordtype">float</span> uncor_linelen = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a5d1b09f64af83d5171e4b9580f62ac71">hmax_s</a>(uncor_hiparamv) - <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a5618d81f875c0158284ccc9923d83dab">hmin_s</a>(uncor_loparamv);</div>
<div class="line"><span class="lineno">  941</span>        pl.<a class="code hl_variable" href="structpartition__lines3.html#aab1e76d822bfde8b007da4dd65714ff2">line_length</a> = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(uncor_linelen, 1e-7f);</div>
<div class="line"><span class="lineno">  942</span>    }</div>
<div class="line"><span class="lineno">  943</span> </div>
<div class="line"><span class="lineno">  944</span>    uncor_error = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(uncor_errorsumv);</div>
<div class="line"><span class="lineno">  945</span>    samec_error = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(samec_errorsumv);</div>
<div class="line"><span class="lineno">  946</span>}</div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a1d994704cca1a088c460bd5a3058e3bc"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a></div><div class="ttdeci">vint4 vint</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00150">astcenc_vecmathlib.h:150</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_aaf679f3389069313db808a4ebd6af8ad"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a></div><div class="ttdeci">#define ASTCENC_SIMD_WIDTH</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00146">astcenc_vecmathlib.h:146</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a165b3db4e7ced1551e1880a01a01150b"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b">min</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 min(vint8 a, vint8 b)</div><div class="ttdoc">Return the min vector of two vectors.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00503">astcenc_vecmathlib_avx2_8.h:503</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a5618d81f875c0158284ccc9923d83dab"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a5618d81f875c0158284ccc9923d83dab">hmin_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float hmin_s(vfloat8 a)</div><div class="ttdoc">Return the horizontal minimum of a vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00858">astcenc_vecmathlib_avx2_8.h:858</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a5d1b09f64af83d5171e4b9580f62ac71"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a5d1b09f64af83d5171e4b9580f62ac71">hmax_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float hmax_s(vfloat8 a)</div><div class="ttdoc">Return the horizontal maximum of a vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00888">astcenc_vecmathlib_avx2_8.h:888</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aa162915c044e97cc1f6d630338761fd3"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3">max</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 max(vint8 a, vint8 b)</div><div class="ttdoc">Return the max vector of two vectors.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00511">astcenc_vecmathlib_avx2_8.h:511</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aaa291a197219a09a2e1103aec6945b3c"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE void haccumulate(vfloat4 &amp;accum, vfloat8 a)</div><div class="ttdoc">Accumulate lane-wise sums for a vector, folded 4-wide.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00925">astcenc_vecmathlib_avx2_8.h:925</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aacd26478e4fe1f97a5d47e8adaacc898"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float hadd_s(vfloat8 a)</div><div class="ttdoc">Return the horizontal sum of a vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00896">astcenc_vecmathlib_avx2_8.h:896</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aae2f99eb48f3cde0f4739b894e8ca29f"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat8 gatherf(const float *base, vint8 indices)</div><div class="ttdoc">Load a vector of gathered results from an array;</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00977">astcenc_vecmathlib_avx2_8.h:977</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ad93dff3341cbbeed568d4bd6dc4ef87c"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ad93dff3341cbbeed568d4bd6dc4ef87c">all</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE bool all(vmask8 a)</div><div class="ttdoc">True if all lanes are enabled, false otherwise.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00371">astcenc_vecmathlib_avx2_8.h:371</a></div></div>
<div class="ttc" id="anamespaceastc_html_a83a55552d03399cdff6cf2fed8312c9f"><div class="ttname"><a href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a></div><div class="ttdeci">static T max(T p, T q)</div><div class="ttdoc">Return the maximum of two values.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00210">astcenc_mathlib.h:210</a></div></div>
<div class="ttc" id="astructimage__block_html_a6fd749c93e25e5e96748a10387c24a77"><div class="ttname"><a href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">image_block::channel_weight</a></div><div class="ttdeci">vfloat4 channel_weight</div><div class="ttdoc">The relative error significance of the color channels.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00774">astcenc_internal.h:774</a></div></div>
<div class="ttc" id="astructpartition__lines3_html"><div class="ttname"><a href="structpartition__lines3.html">partition_lines3</a></div><div class="ttdoc">Computed lines for a a three component analysis.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00281">astcenc_internal.h:282</a></div></div>
<div class="ttc" id="astructpartition__lines3_html_a3d911509177415a3401db5040aea3fae"><div class="ttname"><a href="structpartition__lines3.html#a3d911509177415a3401db5040aea3fae">partition_lines3::samec_pline</a></div><div class="ttdeci">processed_line3 samec_pline</div><div class="ttdoc">Post-processed line for correlated chroma, passing though the origin.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00293">astcenc_internal.h:293</a></div></div>
<div class="ttc" id="astructpartition__lines3_html_a859723c79cd27cb1428b2e87d00f21fe"><div class="ttname"><a href="structpartition__lines3.html#a859723c79cd27cb1428b2e87d00f21fe">partition_lines3::uncor_pline</a></div><div class="ttdeci">processed_line3 uncor_pline</div><div class="ttdoc">Post-processed line for uncorrelated chroma.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00290">astcenc_internal.h:290</a></div></div>
<div class="ttc" id="astructpartition__lines3_html_aab1e76d822bfde8b007da4dd65714ff2"><div class="ttname"><a href="structpartition__lines3.html#aab1e76d822bfde8b007da4dd65714ff2">partition_lines3::line_length</a></div><div class="ttdeci">float line_length</div><div class="ttdoc">The length of the line for uncorrelated chroma.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00301">astcenc_internal.h:301</a></div></div>
<div class="ttc" id="astructprocessed__line3_html"><div class="ttname"><a href="structprocessed__line3.html">processed_line3</a></div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00476">astcenc_mathlib.h:477</a></div></div>
<div class="ttc" id="astructprocessed__line3_html_aa87031817df0c101f16e5e0a7687f10d"><div class="ttname"><a href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">processed_line3::bs</a></div><div class="ttdeci">vfloat4 bs</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00479">astcenc_mathlib.h:479</a></div></div>
<div class="ttc" id="astructprocessed__line3_html_ab2637ed29af1632d3181cd1bc7d7cef0"><div class="ttname"><a href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">processed_line3::amod</a></div><div class="ttdeci">vfloat4 amod</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00478">astcenc_mathlib.h:478</a></div></div>
<div class="ttc" id="astructvfloat4_html_a04462a7815432c6bc3ce1b5e5d11e4fc"><div class="ttname"><a href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">vfloat4::lane</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float lane() const</div><div class="ttdoc">Get the scalar value of a single lane.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00100">astcenc_vecmathlib_neon_4.h:100</a></div></div>
<div class="ttc" id="astructvint4_html"><div class="ttname"><a href="structvint4.html">vint4</a></div><div class="ttdoc">Data type for 4-wide ints.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00183">astcenc_vecmathlib_neon_4.h:184</a></div></div>
<div class="ttc" id="astructvint4_html_a21e3d111e37da1aaaeb5ba21a831c863"><div class="ttname"><a href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint4::lane_id</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vint4 lane_id()</div><div class="ttdoc">Factory that returns a vector containing the lane IDs.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00294">astcenc_vecmathlib_neon_4.h:294</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_ac4a96475fb0074ef3fd0f08ea66de75e_cgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_ac4a96475fb0074ef3fd0f08ea66de75e_cgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_ac4a96475fb0074ef3fd0f08ea66de75e_cgraph" id="aastcenc__averages__and__directions_8cpp_ac4a96475fb0074ef3fd0f08ea66de75e_cgraph">
<area shape="rect" title="Compute the RGB error for uncorrelated and same chroma projections." alt="" coords="5,352,188,377"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad93dff3341cbbeed568d4bd6dc4ef87c" title="True if all lanes are enabled, false otherwise." alt="" coords="265,5,304,31"/>
<area shape="poly" title=" " alt="" coords="98,351,112,299,139,220,179,131,205,88,234,48,252,32,256,36,238,52,209,91,184,134,144,222,117,300,103,353"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="405,31,460,56"/>
<area shape="poly" title=" " alt="" coords="98,351,111,302,136,232,155,194,177,157,203,122,234,92,272,69,314,54,355,46,392,42,392,47,356,51,315,59,274,74,238,96,207,125,181,160,159,196,141,234,116,304,103,352"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="254,107,315,132"/>
<area shape="poly" title=" " alt="" coords="101,350,118,311,147,256,186,196,234,141,241,136,244,140,238,145,190,199,151,259,123,313,106,353"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="237,180,333,205"/>
<area shape="poly" title=" " alt="" coords="105,350,157,288,194,250,234,215,241,210,244,214,238,219,197,253,161,291,110,353"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="253,253,317,279"/>
<area shape="poly" title=" " alt="" coords="120,349,235,288,245,283,247,287,237,292,123,354"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a5d1b09f64af83d5171e4b9580f62ac71" title="Return the horizontal maximum of a vector." alt="" coords="251,303,319,328"/>
<area shape="poly" title=" " alt="" coords="145,349,237,325,238,330,146,355"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a5618d81f875c0158284ccc9923d83dab" title="Return the horizontal minimum of a vector." alt="" coords="253,352,317,377"/>
<area shape="poly" title=" " alt="" coords="188,362,239,362,239,367,188,367"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="239,401,330,427"/>
<area shape="poly" title=" " alt="" coords="146,375,227,396,225,401,145,380"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="236,451,333,476"/>
<area shape="poly" title=" " alt="" coords="123,375,237,437,247,442,245,447,235,442,120,380"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="245,500,325,525"/>
<area shape="poly" title=" " alt="" coords="112,376,164,427,238,487,244,491,242,495,234,491,161,431,108,379"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3" title="Return the max vector of two vectors." alt="" coords="261,549,308,575"/>
<area shape="poly" title=" " alt="" coords="108,376,157,449,195,495,238,536,250,545,247,549,234,540,191,498,153,453,103,379"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b" title="Return the min vector of two vectors." alt="" coords="263,599,306,624"/>
<area shape="poly" title=" " alt="" coords="105,376,123,416,151,471,190,531,238,585,252,596,249,600,234,589,185,534,146,473,118,418,101,378"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="239,648,330,673"/>
<area shape="poly" title=" " alt="" coords="104,377,119,424,146,492,185,567,210,603,238,635,242,638,238,642,234,639,206,606,181,570,141,494,114,426,99,379"/>
<area shape="poly" title=" " alt="" coords="305,19,393,34,392,39,304,24"/>
<area shape="poly" title=" " alt="" coords="260,181,255,172,257,162,268,156,285,153,305,157,314,165,310,169,302,162,285,159,269,161,262,165,260,171,264,179"/>
<area shape="poly" title=" " alt="" coords="260,255,255,245,257,235,268,229,285,227,305,230,314,239,310,242,302,235,285,232,269,234,262,239,260,244,264,252"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a516a2f0d872381b8c7c047845a90c9a3" title="Return the horizontal maximum of a vector." alt="" coords="405,279,460,304"/>
<area shape="poly" title=" " alt="" coords="319,307,391,295,392,300,319,313"/>
<area shape="rect" href="structvint8.html#a2e1f0c785f4899e1b7912f2580b9f77c" title="Get the scalar from a single lane." alt="" coords="393,328,473,353"/>
<area shape="poly" title=" " alt="" coords="319,318,379,329,378,334,319,324"/>
<area shape="poly" title=" " alt="" coords="316,357,379,347,379,352,317,362"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ae7ff255b24f24f8d2a31e6849f4b1250" title="Return the horizontal minimum of a vector." alt="" coords="407,377,458,403"/>
<area shape="poly" title=" " alt="" coords="317,367,395,381,394,386,316,373"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="391,451,474,476"/>
<area shape="poly" title=" " alt="" coords="334,461,378,461,378,466,334,466"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="381,648,484,673"/>
<area shape="poly" title=" " alt="" coords="330,658,368,658,368,663,330,663"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_ac4a96475fb0074ef3fd0f08ea66de75e_icgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_ac4a96475fb0074ef3fd0f08ea66de75e_icgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_ac4a96475fb0074ef3fd0f08ea66de75e_icgraph" id="aastcenc__averages__and__directions_8cpp_ac4a96475fb0074ef3fd0f08ea66de75e_icgraph">
<area shape="rect" title="Compute the RGB error for uncorrelated and same chroma projections." alt="" coords="1189,13,1372,38"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1176,28,1141,28,1141,23,1176,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="a2dec702033b002eaf4090eb47ce4ad21" name="a2dec702033b002eaf4090eb47ce4ad21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dec702033b002eaf4090eb47ce4ad21">&#9670;&#160;</a></span>compute_error_squared_rgba()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void compute_error_squared_rgba </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structprocessed__line4.html">processed_line4</a></td>          <td class="paramname"><span class="paramname"><em>uncor_plines</em></span>[BLOCK_MAX_PARTITIONS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structprocessed__line4.html">processed_line4</a></td>          <td class="paramname"><span class="paramname"><em>samec_plines</em></span>[BLOCK_MAX_PARTITIONS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>line_lengths</em></span>[BLOCK_MAX_PARTITIONS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;</td>          <td class="paramname"><span class="paramname"><em>uncor_error</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;</td>          <td class="paramname"><span class="paramname"><em>samec_error</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the RGBA error for uncorrelated and same chroma projections. </p>
<p>The output of compute averages and dirs is post processed to define two lines, both of which go through the mean-color-value. One line has a direction defined by the dominant direction; this is used to assess the error from using an uncorrelated color representation. The other line goes through (0,0,0,1) and is used to assess the error from using an RGBS color representation.</p>
<p>This function computes the squared error when using these two representations.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to be compressed. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">uncor_plines</td><td>Processed uncorrelated partition lines for each partition. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">samec_plines</td><td>Processed same chroma partition lines for each partition. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">line_lengths</td><td>The length of each components deviation from the line. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">uncor_error</td><td>The cumulative error for using the uncorrelated line. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">samec_error</td><td>The cumulative error for using the same chroma line. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__averages__and__directions_8cpp_source.html">astcenc_averages_and_directions.cpp</a> 파일의 <a class="el" href="astcenc__averages__and__directions_8cpp_source.html#l00723">723</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  731</span>  {</div>
<div class="line"><span class="lineno">  732</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  733</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  734</span> </div>
<div class="line"><span class="lineno">  735</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> uncor_errorsumv = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">  736</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> samec_errorsumv = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">  737</span> </div>
<div class="line"><span class="lineno">  738</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition = 0; partition &lt; partition_count; partition++)</div>
<div class="line"><span class="lineno">  739</span>    {</div>
<div class="line"><span class="lineno">  740</span>        <span class="keyword">const</span> uint8_t *texel_indexes = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[partition];</div>
<div class="line"><span class="lineno">  741</span> </div>
<div class="line"><span class="lineno">  742</span>        <a class="code hl_struct" href="structprocessed__line4.html">processed_line4</a> l_uncor = uncor_plines[partition];</div>
<div class="line"><span class="lineno">  743</span>        <a class="code hl_struct" href="structprocessed__line4.html">processed_line4</a> l_samec = samec_plines[partition];</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[partition];</div>
<div class="line"><span class="lineno">  746</span>        <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>        <span class="comment">// Vectorize some useful scalar inputs</span></div>
<div class="line"><span class="lineno">  749</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_bs0(l_uncor.<a class="code hl_variable" href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  750</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_bs1(l_uncor.<a class="code hl_variable" href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  751</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_bs2(l_uncor.<a class="code hl_variable" href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  752</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_bs3(l_uncor.<a class="code hl_variable" href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;());</div>
<div class="line"><span class="lineno">  753</span> </div>
<div class="line"><span class="lineno">  754</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_amod0(l_uncor.<a class="code hl_variable" href="structprocessed__line4.html#a15d23ed62e7f387dde80641c087fa578">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  755</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_amod1(l_uncor.<a class="code hl_variable" href="structprocessed__line4.html#a15d23ed62e7f387dde80641c087fa578">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  756</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_amod2(l_uncor.<a class="code hl_variable" href="structprocessed__line4.html#a15d23ed62e7f387dde80641c087fa578">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  757</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_uncor_amod3(l_uncor.<a class="code hl_variable" href="structprocessed__line4.html#a15d23ed62e7f387dde80641c087fa578">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;());</div>
<div class="line"><span class="lineno">  758</span> </div>
<div class="line"><span class="lineno">  759</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_samec_bs0(l_samec.<a class="code hl_variable" href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  760</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_samec_bs1(l_samec.<a class="code hl_variable" href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  761</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_samec_bs2(l_samec.<a class="code hl_variable" href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  762</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_samec_bs3(l_samec.<a class="code hl_variable" href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;());</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>        assert(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad93dff3341cbbeed568d4bd6dc4ef87c">all</a>(l_samec.<a class="code hl_variable" href="structprocessed__line4.html#a15d23ed62e7f387dde80641c087fa578">amod</a> == <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(0.0f)));</div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_loparamv(1e10f);</div>
<div class="line"><span class="lineno">  767</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_hiparamv(-1e10f);</div>
<div class="line"><span class="lineno">  768</span> </div>
<div class="line"><span class="lineno">  769</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ew_r(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  770</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ew_g(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  771</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ew_b(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  772</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> ew_a(blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;());</div>
<div class="line"><span class="lineno">  773</span> </div>
<div class="line"><span class="lineno">  774</span>        <span class="comment">// This implementation over-shoots, but this is safe as we initialize the texel_indexes</span></div>
<div class="line"><span class="lineno">  775</span>        <span class="comment">// array to extend the last value. This means min/max are not impacted, but we need to mask</span></div>
<div class="line"><span class="lineno">  776</span>        <span class="comment">// out the dummy values when we compute the line weighting.</span></div>
<div class="line"><span class="lineno">  777</span>        <a class="code hl_struct" href="structvint4.html">vint</a> lane_ids = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint::lane_id</a>();</div>
<div class="line"><span class="lineno">  778</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  779</span>        {</div>
<div class="line"><span class="lineno">  780</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = lane_ids &lt; <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(texel_count);</div>
<div class="line"><span class="lineno">  781</span>            <a class="code hl_struct" href="structvint4.html">vint</a> texel_idxs(texel_indexes + i);</div>
<div class="line"><span class="lineno">  782</span> </div>
<div class="line"><span class="lineno">  783</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_r = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>, texel_idxs);</div>
<div class="line"><span class="lineno">  784</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_g = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>, texel_idxs);</div>
<div class="line"><span class="lineno">  785</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_b = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>, texel_idxs);</div>
<div class="line"><span class="lineno">  786</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_a = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a>, texel_idxs);</div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_param = (data_r * l_uncor_bs0)</div>
<div class="line"><span class="lineno">  789</span>                               + (data_g * l_uncor_bs1)</div>
<div class="line"><span class="lineno">  790</span>                               + (data_b * l_uncor_bs2)</div>
<div class="line"><span class="lineno">  791</span>                               + (data_a * l_uncor_bs3);</div>
<div class="line"><span class="lineno">  792</span> </div>
<div class="line"><span class="lineno">  793</span>            uncor_loparamv = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b">min</a>(uncor_param, uncor_loparamv);</div>
<div class="line"><span class="lineno">  794</span>            uncor_hiparamv = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3">max</a>(uncor_param, uncor_hiparamv);</div>
<div class="line"><span class="lineno">  795</span> </div>
<div class="line"><span class="lineno">  796</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_dist0 = (l_uncor_amod0 - data_r)</div>
<div class="line"><span class="lineno">  797</span>                               + (uncor_param * l_uncor_bs0);</div>
<div class="line"><span class="lineno">  798</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_dist1 = (l_uncor_amod1 - data_g)</div>
<div class="line"><span class="lineno">  799</span>                               + (uncor_param * l_uncor_bs1);</div>
<div class="line"><span class="lineno">  800</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_dist2 = (l_uncor_amod2 - data_b)</div>
<div class="line"><span class="lineno">  801</span>                               + (uncor_param * l_uncor_bs2);</div>
<div class="line"><span class="lineno">  802</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_dist3 = (l_uncor_amod3 - data_a)</div>
<div class="line"><span class="lineno">  803</span>                               + (uncor_param * l_uncor_bs3);</div>
<div class="line"><span class="lineno">  804</span> </div>
<div class="line"><span class="lineno">  805</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_err = (ew_r * uncor_dist0 * uncor_dist0)</div>
<div class="line"><span class="lineno">  806</span>                             + (ew_g * uncor_dist1 * uncor_dist1)</div>
<div class="line"><span class="lineno">  807</span>                             + (ew_b * uncor_dist2 * uncor_dist2)</div>
<div class="line"><span class="lineno">  808</span>                             + (ew_a * uncor_dist3 * uncor_dist3);</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(uncor_errorsumv, uncor_err, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  811</span> </div>
<div class="line"><span class="lineno">  812</span>            <span class="comment">// Process samechroma data</span></div>
<div class="line"><span class="lineno">  813</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_param = (data_r * l_samec_bs0)</div>
<div class="line"><span class="lineno">  814</span>                               + (data_g * l_samec_bs1)</div>
<div class="line"><span class="lineno">  815</span>                               + (data_b * l_samec_bs2)</div>
<div class="line"><span class="lineno">  816</span>                               + (data_a * l_samec_bs3);</div>
<div class="line"><span class="lineno">  817</span> </div>
<div class="line"><span class="lineno">  818</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_dist0 = samec_param * l_samec_bs0 - data_r;</div>
<div class="line"><span class="lineno">  819</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_dist1 = samec_param * l_samec_bs1 - data_g;</div>
<div class="line"><span class="lineno">  820</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_dist2 = samec_param * l_samec_bs2 - data_b;</div>
<div class="line"><span class="lineno">  821</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_dist3 = samec_param * l_samec_bs3 - data_a;</div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_err = (ew_r * samec_dist0 * samec_dist0)</div>
<div class="line"><span class="lineno">  824</span>                             + (ew_g * samec_dist1 * samec_dist1)</div>
<div class="line"><span class="lineno">  825</span>                             + (ew_b * samec_dist2 * samec_dist2)</div>
<div class="line"><span class="lineno">  826</span>                             + (ew_a * samec_dist3 * samec_dist3);</div>
<div class="line"><span class="lineno">  827</span> </div>
<div class="line"><span class="lineno">  828</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(samec_errorsumv, samec_err, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  829</span> </div>
<div class="line"><span class="lineno">  830</span>            lane_ids += <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(<a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>);</div>
<div class="line"><span class="lineno">  831</span>        }</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>        <span class="comment">// Turn very small numbers and NaNs into a small number</span></div>
<div class="line"><span class="lineno">  834</span>        <span class="keywordtype">float</span> uncor_linelen = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a5d1b09f64af83d5171e4b9580f62ac71">hmax_s</a>(uncor_hiparamv) - <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a5618d81f875c0158284ccc9923d83dab">hmin_s</a>(uncor_loparamv);</div>
<div class="line"><span class="lineno">  835</span>        line_lengths[partition] = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(uncor_linelen, 1e-7f);</div>
<div class="line"><span class="lineno">  836</span>    }</div>
<div class="line"><span class="lineno">  837</span> </div>
<div class="line"><span class="lineno">  838</span>    uncor_error = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(uncor_errorsumv);</div>
<div class="line"><span class="lineno">  839</span>    samec_error = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(samec_errorsumv);</div>
<div class="line"><span class="lineno">  840</span>}</div>
<div class="ttc" id="astructprocessed__line4_html"><div class="ttname"><a href="structprocessed__line4.html">processed_line4</a></div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00482">astcenc_mathlib.h:483</a></div></div>
<div class="ttc" id="astructprocessed__line4_html_a0e2bff0306a32a7f07e0f127ff13febc"><div class="ttname"><a href="structprocessed__line4.html#a0e2bff0306a32a7f07e0f127ff13febc">processed_line4::bs</a></div><div class="ttdeci">vfloat4 bs</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00485">astcenc_mathlib.h:485</a></div></div>
<div class="ttc" id="astructprocessed__line4_html_a15d23ed62e7f387dde80641c087fa578"><div class="ttname"><a href="structprocessed__line4.html#a15d23ed62e7f387dde80641c087fa578">processed_line4::amod</a></div><div class="ttdeci">vfloat4 amod</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00484">astcenc_mathlib.h:484</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a2dec702033b002eaf4090eb47ce4ad21_cgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a2dec702033b002eaf4090eb47ce4ad21_cgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a2dec702033b002eaf4090eb47ce4ad21_cgraph" id="aastcenc__averages__and__directions_8cpp_a2dec702033b002eaf4090eb47ce4ad21_cgraph">
<area shape="rect" title="Compute the RGBA error for uncorrelated and same chroma projections." alt="" coords="5,352,196,377"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad93dff3341cbbeed568d4bd6dc4ef87c" title="True if all lanes are enabled, false otherwise." alt="" coords="273,5,312,31"/>
<area shape="poly" title=" " alt="" coords="102,351,117,299,145,220,186,131,212,88,242,48,260,32,263,36,246,52,217,91,191,134,150,222,122,300,108,353"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="413,31,468,56"/>
<area shape="poly" title=" " alt="" coords="102,351,116,302,142,232,161,194,184,156,211,122,242,92,280,69,322,54,363,46,400,42,400,47,364,51,324,59,283,74,246,96,215,125,188,159,166,196,147,234,121,304,107,352"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="262,107,323,132"/>
<area shape="poly" title=" " alt="" coords="105,350,123,311,153,256,193,196,242,141,249,136,252,140,246,145,197,199,157,259,128,313,110,353"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="245,180,341,205"/>
<area shape="poly" title=" " alt="" coords="110,350,163,288,201,250,242,215,249,210,252,214,246,219,204,254,167,291,114,354"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="261,253,325,279"/>
<area shape="poly" title=" " alt="" coords="125,350,243,288,253,283,255,287,245,292,127,354"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a5d1b09f64af83d5171e4b9580f62ac71" title="Return the horizontal maximum of a vector." alt="" coords="259,303,327,328"/>
<area shape="poly" title=" " alt="" coords="150,349,245,325,246,330,151,355"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a5618d81f875c0158284ccc9923d83dab" title="Return the horizontal minimum of a vector." alt="" coords="261,352,325,377"/>
<area shape="poly" title=" " alt="" coords="196,362,247,362,247,367,196,367"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="247,401,338,427"/>
<area shape="poly" title=" " alt="" coords="151,375,235,397,234,402,150,380"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="244,451,341,476"/>
<area shape="poly" title=" " alt="" coords="127,375,245,437,255,442,253,447,243,442,125,380"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="253,500,333,525"/>
<area shape="poly" title=" " alt="" coords="116,376,170,427,246,486,252,491,250,495,242,491,167,431,113,379"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3" title="Return the max vector of two vectors." alt="" coords="269,549,316,575"/>
<area shape="poly" title=" " alt="" coords="112,376,163,449,202,495,246,536,258,545,255,549,242,540,198,498,159,452,108,379"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b" title="Return the min vector of two vectors." alt="" coords="271,599,314,624"/>
<area shape="poly" title=" " alt="" coords="110,376,128,415,157,471,197,531,246,585,260,596,257,600,242,589,193,534,152,473,123,418,105,378"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="247,648,338,673"/>
<area shape="poly" title=" " alt="" coords="108,377,124,424,152,492,192,567,217,603,246,635,250,638,246,642,242,639,213,606,188,570,147,494,119,426,103,379"/>
<area shape="poly" title=" " alt="" coords="313,19,401,34,400,39,312,24"/>
<area shape="poly" title=" " alt="" coords="268,181,263,172,265,162,276,156,293,153,313,157,322,165,318,169,310,162,293,159,277,161,270,165,268,171,272,179"/>
<area shape="poly" title=" " alt="" coords="268,255,263,245,265,235,276,229,293,227,313,230,322,239,318,242,310,235,293,232,277,234,270,239,268,244,272,252"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a516a2f0d872381b8c7c047845a90c9a3" title="Return the horizontal maximum of a vector." alt="" coords="413,279,468,304"/>
<area shape="poly" title=" " alt="" coords="327,307,399,295,400,300,327,313"/>
<area shape="rect" href="structvint8.html#a2e1f0c785f4899e1b7912f2580b9f77c" title="Get the scalar from a single lane." alt="" coords="401,328,481,353"/>
<area shape="poly" title=" " alt="" coords="327,318,387,329,386,334,327,324"/>
<area shape="poly" title=" " alt="" coords="324,357,387,347,387,352,325,362"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ae7ff255b24f24f8d2a31e6849f4b1250" title="Return the horizontal minimum of a vector." alt="" coords="415,377,466,403"/>
<area shape="poly" title=" " alt="" coords="325,367,403,381,402,386,324,373"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="399,451,482,476"/>
<area shape="poly" title=" " alt="" coords="342,461,386,461,386,466,342,466"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="389,648,492,673"/>
<area shape="poly" title=" " alt="" coords="338,658,376,658,376,663,338,663"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a2dec702033b002eaf4090eb47ce4ad21_icgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a2dec702033b002eaf4090eb47ce4ad21_icgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a2dec702033b002eaf4090eb47ce4ad21_icgraph" id="aastcenc__averages__and__directions_8cpp_a2dec702033b002eaf4090eb47ce4ad21_icgraph">
<area shape="rect" title="Compute the RGBA error for uncorrelated and same chroma projections." alt="" coords="1189,13,1380,38"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1015,5,1141,45"/>
<area shape="poly" title=" " alt="" coords="1176,28,1142,28,1142,23,1176,23"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,13,967,38"/>
<area shape="poly" title=" " alt="" coords="1001,28,967,28,967,23,1001,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,13,801,38"/>
<area shape="poly" title=" " alt="" coords="835,28,802,28,802,23,835,23"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,13,632,38"/>
<area shape="poly" title=" " alt="" coords="666,28,632,28,632,23,666,23"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,13,207,38"/>
<area shape="poly" title=" " alt="" coords="444,25,409,24,255,24,207,26,207,20,255,19,409,19,444,19"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,33,409,73"/>
<area shape="poly" title=" " alt="" coords="444,41,410,46,409,41,443,36"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,13,56,38"/>
<area shape="poly" title=" " alt="" coords="90,28,57,28,57,23,90,23"/>
<area shape="poly" title=" " alt="" coords="241,42,206,36,207,31,242,36"/>
</map>
</div>

</div>
</div>
<a id="ac5429bc77cf39a7dba332af8fb14e093" name="ac5429bc77cf39a7dba332af8fb14e093"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5429bc77cf39a7dba332af8fb14e093">&#9670;&#160;</a></span>compute_partition_averages_rgb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compute_partition_averages_rgb </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>averages</em></span>[BLOCK_MAX_PARTITIONS]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Functions for finding dominant direction of a set of colors. </p>
<p>Compute the average RGB color of each partition.</p>
<p>The algorithm here uses a vectorized sequential scan and per-partition color accumulators, using <a class="el" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a.">select()</a> to mask texel lanes in other partitions.</p>
<p>We only accumulate sums for N-1 partitions during the scan; the value for the last partition can be computed given that we know the block-wide average already.</p>
<p>Because of this we could reduce the loop iteration count so it "just" spans the max texel index needed for the N-1 partitions, which could need fewer iterations than the full block texel count. However, this makes the loop count erratic and causes more branch mispredictions so is a net loss.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partitioning to use. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The block data to process. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">averages</td><td>The output averages. Unused partition indices will not be initialized, and lane&lt;3&gt; will be zero. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__averages__and__directions_8cpp_source.html">astcenc_averages_and_directions.cpp</a> 파일의 <a class="el" href="astcenc__averages__and__directions_8cpp_source.html#l00047">47</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">   51</span>  {</div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">   53</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>;</div>
<div class="line"><span class="lineno">   54</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>    <span class="comment">// For 1 partition just use the precomputed mean</span></div>
<div class="line"><span class="lineno">   57</span>    <span class="keywordflow">if</span> (partition_count == 1)</div>
<div class="line"><span class="lineno">   58</span>    {</div>
<div class="line"><span class="lineno">   59</span>        averages[0] = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;();</div>
<div class="line"><span class="lineno">   60</span>    }</div>
<div class="line"><span class="lineno">   61</span>    <span class="comment">// For 2 partitions scan results for partition 0, compute partition 1</span></div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (partition_count == 2)</div>
<div class="line"><span class="lineno">   63</span>    {</div>
<div class="line"><span class="lineno">   64</span>        <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> pp_avg_rgb[3] {};</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>        <a class="code hl_struct" href="structvint4.html">vint</a> lane_id = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint::lane_id</a>();</div>
<div class="line"><span class="lineno">   67</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">   68</span>        {</div>
<div class="line"><span class="lineno">   69</span>            <a class="code hl_struct" href="structvint4.html">vint</a> texel_partition(pi.<a class="code hl_variable" href="structpartition__info.html#ad9cde9216bbe8865a4660a6c955a6793">partition_of_texel</a> + i);</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> lane_mask = lane_id &lt; <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(texel_count);</div>
<div class="line"><span class="lineno">   72</span>            lane_id += <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(<a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>);</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p0_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(0));</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_r = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a> + i);</div>
<div class="line"><span class="lineno">   77</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[0], data_r, p0_mask);</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_g = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a> + i);</div>
<div class="line"><span class="lineno">   80</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[1], data_g, p0_mask);</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_b = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a> + i);</div>
<div class="line"><span class="lineno">   83</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[2], data_b, p0_mask);</div>
<div class="line"><span class="lineno">   84</span>        }</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> block_total = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;() * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>);</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p0_total = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[0]),</div>
<div class="line"><span class="lineno">   89</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[1]),</div>
<div class="line"><span class="lineno">   90</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[2]));</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p1_total = block_total - p0_total;</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>        averages[0] = p0_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[0]);</div>
<div class="line"><span class="lineno">   95</span>        averages[1] = p1_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[1]);</div>
<div class="line"><span class="lineno">   96</span>    }</div>
<div class="line"><span class="lineno">   97</span>    <span class="comment">// For 3 partitions scan results for partition 0/1, compute partition 2</span></div>
<div class="line"><span class="lineno">   98</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (partition_count == 3)</div>
<div class="line"><span class="lineno">   99</span>    {</div>
<div class="line"><span class="lineno">  100</span>        <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> pp_avg_rgb[2][3] {};</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>        <a class="code hl_struct" href="structvint4.html">vint</a> lane_id = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint::lane_id</a>();</div>
<div class="line"><span class="lineno">  103</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  104</span>        {</div>
<div class="line"><span class="lineno">  105</span>            <a class="code hl_struct" href="structvint4.html">vint</a> texel_partition(pi.<a class="code hl_variable" href="structpartition__info.html#ad9cde9216bbe8865a4660a6c955a6793">partition_of_texel</a> + i);</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> lane_mask = lane_id &lt; <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(texel_count);</div>
<div class="line"><span class="lineno">  108</span>            lane_id += <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(<a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>);</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p0_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(0));</div>
<div class="line"><span class="lineno">  111</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p1_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(1));</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_r = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a> + i);</div>
<div class="line"><span class="lineno">  114</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[0][0], data_r, p0_mask);</div>
<div class="line"><span class="lineno">  115</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[1][0], data_r, p1_mask);</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_g = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a> + i);</div>
<div class="line"><span class="lineno">  118</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[0][1], data_g, p0_mask);</div>
<div class="line"><span class="lineno">  119</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[1][1], data_g, p1_mask);</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_b = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a> + i);</div>
<div class="line"><span class="lineno">  122</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[0][2], data_b, p0_mask);</div>
<div class="line"><span class="lineno">  123</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[1][2], data_b, p1_mask);</div>
<div class="line"><span class="lineno">  124</span>        }</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> block_total = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;() * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p0_total = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[0][0]),</div>
<div class="line"><span class="lineno">  129</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[0][1]),</div>
<div class="line"><span class="lineno">  130</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[0][2]));</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p1_total = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[1][0]),</div>
<div class="line"><span class="lineno">  133</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[1][1]),</div>
<div class="line"><span class="lineno">  134</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[1][2]));</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p2_total = block_total - p0_total - p1_total;</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>        averages[0] = p0_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[0]);</div>
<div class="line"><span class="lineno">  139</span>        averages[1] = p1_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[1]);</div>
<div class="line"><span class="lineno">  140</span>        averages[2] = p2_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[2]);</div>
<div class="line"><span class="lineno">  141</span>    }</div>
<div class="line"><span class="lineno">  142</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  143</span>    {</div>
<div class="line"><span class="lineno">  144</span>        <span class="comment">// For 4 partitions scan results for partition 0/1/2, compute partition 3</span></div>
<div class="line"><span class="lineno">  145</span>        <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> pp_avg_rgb[3][3] {};</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>        <a class="code hl_struct" href="structvint4.html">vint</a> lane_id = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint::lane_id</a>();</div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  149</span>        {</div>
<div class="line"><span class="lineno">  150</span>            <a class="code hl_struct" href="structvint4.html">vint</a> texel_partition(pi.<a class="code hl_variable" href="structpartition__info.html#ad9cde9216bbe8865a4660a6c955a6793">partition_of_texel</a> + i);</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> lane_mask = lane_id &lt; <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(texel_count);</div>
<div class="line"><span class="lineno">  153</span>            lane_id += <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(<a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>);</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p0_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(0));</div>
<div class="line"><span class="lineno">  156</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p1_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(1));</div>
<div class="line"><span class="lineno">  157</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p2_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(2));</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_r = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a> + i);</div>
<div class="line"><span class="lineno">  160</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[0][0], data_r, p0_mask);</div>
<div class="line"><span class="lineno">  161</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[1][0], data_r, p1_mask);</div>
<div class="line"><span class="lineno">  162</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[2][0], data_r, p2_mask);</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_g = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a> + i);</div>
<div class="line"><span class="lineno">  165</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[0][1], data_g, p0_mask);</div>
<div class="line"><span class="lineno">  166</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[1][1], data_g, p1_mask);</div>
<div class="line"><span class="lineno">  167</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[2][1], data_g, p2_mask);</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_b = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a> + i);</div>
<div class="line"><span class="lineno">  170</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[0][2], data_b, p0_mask);</div>
<div class="line"><span class="lineno">  171</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[1][2], data_b, p1_mask);</div>
<div class="line"><span class="lineno">  172</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgb[2][2], data_b, p2_mask);</div>
<div class="line"><span class="lineno">  173</span>        }</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> block_total = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a>.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;() * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>);</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p0_total = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[0][0]),</div>
<div class="line"><span class="lineno">  178</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[0][1]),</div>
<div class="line"><span class="lineno">  179</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[0][2]));</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p1_total = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[1][0]),</div>
<div class="line"><span class="lineno">  182</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[1][1]),</div>
<div class="line"><span class="lineno">  183</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[1][2]));</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p2_total = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07">vfloat3</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[2][0]),</div>
<div class="line"><span class="lineno">  186</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[2][1]),</div>
<div class="line"><span class="lineno">  187</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgb[2][2]));</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p3_total = block_total - p0_total - p1_total- p2_total;</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>        averages[0] = p0_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[0]);</div>
<div class="line"><span class="lineno">  192</span>        averages[1] = p1_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[1]);</div>
<div class="line"><span class="lineno">  193</span>        averages[2] = p2_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[2]);</div>
<div class="line"><span class="lineno">  194</span>        averages[3] = p3_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[3]);</div>
<div class="line"><span class="lineno">  195</span>    }</div>
<div class="line"><span class="lineno">  196</span>}</div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a535908f39a759651e1adb70d750a96f7"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a></div><div class="ttdeci">constexpr auto loada</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00153">astcenc_vecmathlib.h:153</a></div></div>
<div class="ttc" id="astructimage__block_html_a05174b1db0b9131ad61fc49f3aa74676"><div class="ttname"><a href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">image_block::texel_count</a></div><div class="ttdeci">uint8_t texel_count</div><div class="ttdoc">The number of texels in the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00759">astcenc_internal.h:759</a></div></div>
<div class="ttc" id="astructpartition__info_html_ad9cde9216bbe8865a4660a6c955a6793"><div class="ttname"><a href="structpartition__info.html#ad9cde9216bbe8865a4660a6c955a6793">partition_info::partition_of_texel</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t partition_of_texel[BLOCK_MAX_TEXELS]</div><div class="ttdoc">The partition of each texel in the block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00329">astcenc_internal.h:329</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_ac5429bc77cf39a7dba332af8fb14e093_cgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_ac5429bc77cf39a7dba332af8fb14e093_cgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_ac5429bc77cf39a7dba332af8fb14e093_cgraph" id="aastcenc__averages__and__directions_8cpp_ac5429bc77cf39a7dba332af8fb14e093_cgraph">
<area shape="rect" title="Functions for finding dominant direction of a set of colors." alt="" coords="5,152,213,177"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="262,29,358,55"/>
<area shape="poly" title=" " alt="" coords="127,150,186,110,260,64,269,59,272,63,263,68,189,115,130,154"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="278,103,342,128"/>
<area shape="poly" title=" " alt="" coords="161,149,264,124,265,129,162,155"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="261,152,359,177"/>
<area shape="poly" title=" " alt="" coords="214,162,247,162,247,167,214,167"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="265,201,355,227"/>
<area shape="poly" title=" " alt="" coords="162,175,253,197,252,203,161,180"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07" title="Factory that returns a 3 component vfloat4." alt="" coords="281,251,339,276"/>
<area shape="poly" title=" " alt="" coords="137,175,272,242,269,247,135,180"/>
<area shape="poly" title=" " alt="" coords="285,31,280,21,283,11,293,5,310,3,330,6,339,15,335,18,328,11,310,8,295,10,287,15,285,20,290,28"/>
<area shape="poly" title=" " alt="" coords="285,104,280,94,283,85,293,78,310,76,330,80,339,88,335,92,328,84,310,81,295,83,287,88,285,94,290,101"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="417,152,499,177"/>
<area shape="poly" title=" " alt="" coords="359,162,403,162,403,167,359,167"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="413,201,503,227"/>
<area shape="poly" title=" " alt="" coords="355,211,399,211,399,217,355,217"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="407,251,509,276"/>
<area shape="poly" title=" " alt="" coords="350,224,407,244,405,249,348,229"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_ac5429bc77cf39a7dba332af8fb14e093_icgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_ac5429bc77cf39a7dba332af8fb14e093_icgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_ac5429bc77cf39a7dba332af8fb14e093_icgraph" id="aastcenc__averages__and__directions_8cpp_ac5429bc77cf39a7dba332af8fb14e093_icgraph">
<area shape="rect" title="Functions for finding dominant direction of a set of colors." alt="" coords="1883,109,2091,134"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="1673,101,1835,141"/>
<area shape="poly" title=" " alt="" coords="1869,124,1835,124,1835,119,1869,119"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#affc96d3eeffef962cd64307bf0b85590" title="For a given set of input colors and partitioning determine endpoint encode errors." alt="" coords="1449,21,1625,61"/>
<area shape="poly" title=" " alt="" coords="1685,99,1591,64,1593,59,1687,94"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a7ec20ff2556f6357cc0754c13e841262" title="Compute the ideal endpoints and weights for 3 color components." alt="" coords="1460,101,1615,141"/>
<area shape="poly" title=" " alt="" coords="1659,124,1615,124,1615,119,1659,119"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1039,191,1166,231"/>
<area shape="poly" title=" " alt="" coords="1666,147,1626,156,1499,177,1371,193,1167,210,1166,205,1371,187,1498,172,1625,151,1665,142"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,5,1401,45"/>
<area shape="poly" title=" " alt="" coords="1436,37,1401,34,1402,29,1436,31"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,63,1191,103"/>
<area shape="poly" title=" " alt="" coords="1231,51,1180,65,1178,60,1230,46"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,127,1191,167"/>
<area shape="poly" title=" " alt="" coords="1248,54,1240,59,1226,74,1217,88,1208,102,1192,117,1171,129,1168,124,1189,113,1204,99,1213,85,1222,70,1237,55,1245,50"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,134,967,159"/>
<area shape="poly" title=" " alt="" coords="1029,110,948,136,947,131,1027,104"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,134,801,159"/>
<area shape="poly" title=" " alt="" coords="835,149,802,149,802,144,835,144"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,134,632,159"/>
<area shape="poly" title=" " alt="" coords="666,149,632,149,632,144,666,144"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,134,207,159"/>
<area shape="poly" title=" " alt="" coords="444,146,409,145,255,145,207,147,207,142,255,140,409,140,444,141"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,155,409,195"/>
<area shape="poly" title=" " alt="" coords="444,163,410,167,409,162,443,157"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,134,56,159"/>
<area shape="poly" title=" " alt="" coords="90,149,57,149,57,144,90,144"/>
<area shape="poly" title=" " alt="" coords="241,163,206,157,207,152,242,158"/>
<area shape="poly" title=" " alt="" coords="1001,149,967,149,967,144,1001,144"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#afa8cab65d4b6f0cbece52eec38aed523" title="Compute ideal endpoint colors and weights for 1 plane of weights." alt="" coords="1246,69,1394,109"/>
<area shape="poly" title=" " alt="" coords="1446,111,1394,103,1395,98,1447,105"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a52d3985007cfc83025661e0347bc00cc" title="Compute ideal endpoint colors and weights for 2 planes of weights." alt="" coords="1243,133,1397,173"/>
<area shape="poly" title=" " alt="" coords="1447,137,1397,145,1397,139,1446,132"/>
<area shape="poly" title=" " alt="" coords="1232,89,1191,88,1191,83,1233,84"/>
<area shape="poly" title=" " alt="" coords="1229,153,1191,152,1191,147,1229,148"/>
<area shape="poly" title=" " alt="" coords="1027,189,947,162,948,157,1029,184"/>
</map>
</div>

</div>
</div>
<a id="a83cf48552a7e8225358c7c43df24fd96" name="a83cf48552a7e8225358c7c43df24fd96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83cf48552a7e8225358c7c43df24fd96">&#9670;&#160;</a></span>compute_partition_averages_rgba()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compute_partition_averages_rgba </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>averages</em></span>[BLOCK_MAX_PARTITIONS]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the average RGBA color of each partition. </p>
<p>The algorithm here uses a vectorized sequential scan and per-partition color accumulators, using <a class="el" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a.">select()</a> to mask texel lanes in other partitions.</p>
<p>We only accumulate sums for N-1 partitions during the scan; the value for the last partition can be computed given that we know the block-wide average already.</p>
<p>Because of this we could reduce the loop iteration count so it "just" spans the max texel index needed for the N-1 partitions, which could need fewer iterations than the full block texel count. However, this makes the loop count erratic and causes more branch mispredictions so is a net loss.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partitioning to use. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The block data to process. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">averages</td><td>The output averages. Unused partition indices will not be initialized. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__averages__and__directions_8cpp_source.html">astcenc_averages_and_directions.cpp</a> 파일의 <a class="el" href="astcenc__averages__and__directions_8cpp_source.html#l00218">218</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  222</span>  {</div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>;</div>
<div class="line"><span class="lineno">  225</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>    <span class="comment">// For 1 partition just use the precomputed mean</span></div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">if</span> (partition_count == 1)</div>
<div class="line"><span class="lineno">  229</span>    {</div>
<div class="line"><span class="lineno">  230</span>        averages[0] = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a>;</div>
<div class="line"><span class="lineno">  231</span>    }</div>
<div class="line"><span class="lineno">  232</span>    <span class="comment">// For 2 partitions scan results for partition 0, compute partition 1</span></div>
<div class="line"><span class="lineno">  233</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (partition_count == 2)</div>
<div class="line"><span class="lineno">  234</span>    {</div>
<div class="line"><span class="lineno">  235</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> pp_avg_rgba[4] {};</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>        <a class="code hl_struct" href="structvint4.html">vint</a> lane_id = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint::lane_id</a>();</div>
<div class="line"><span class="lineno">  238</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  239</span>        {</div>
<div class="line"><span class="lineno">  240</span>            <a class="code hl_struct" href="structvint4.html">vint</a> texel_partition(pi.<a class="code hl_variable" href="structpartition__info.html#ad9cde9216bbe8865a4660a6c955a6793">partition_of_texel</a> + i);</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> lane_mask = lane_id &lt; <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(texel_count);</div>
<div class="line"><span class="lineno">  243</span>            lane_id += <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(<a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>);</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p0_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(0));</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_r = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a> + i);</div>
<div class="line"><span class="lineno">  248</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[0], data_r, p0_mask);</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_g = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a> + i);</div>
<div class="line"><span class="lineno">  251</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[1], data_g, p0_mask);</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_b = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a> + i);</div>
<div class="line"><span class="lineno">  254</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[2], data_b, p0_mask);</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_a = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a> + i);</div>
<div class="line"><span class="lineno">  257</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[3], data_a, p0_mask);</div>
<div class="line"><span class="lineno">  258</span>        }</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> block_total = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a> * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>);</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p0_total = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[0]),</div>
<div class="line"><span class="lineno">  263</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[1]),</div>
<div class="line"><span class="lineno">  264</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[2]),</div>
<div class="line"><span class="lineno">  265</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[3]));</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p1_total = block_total - p0_total;</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>        averages[0] = p0_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[0]);</div>
<div class="line"><span class="lineno">  270</span>        averages[1] = p1_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[1]);</div>
<div class="line"><span class="lineno">  271</span>    }</div>
<div class="line"><span class="lineno">  272</span>    <span class="comment">// For 3 partitions scan results for partition 0/1, compute partition 2</span></div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (partition_count == 3)</div>
<div class="line"><span class="lineno">  274</span>    {</div>
<div class="line"><span class="lineno">  275</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> pp_avg_rgba[2][4] {};</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>        <a class="code hl_struct" href="structvint4.html">vint</a> lane_id = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint::lane_id</a>();</div>
<div class="line"><span class="lineno">  278</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  279</span>        {</div>
<div class="line"><span class="lineno">  280</span>            <a class="code hl_struct" href="structvint4.html">vint</a> texel_partition(pi.<a class="code hl_variable" href="structpartition__info.html#ad9cde9216bbe8865a4660a6c955a6793">partition_of_texel</a> + i);</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> lane_mask = lane_id &lt; <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(texel_count);</div>
<div class="line"><span class="lineno">  283</span>            lane_id += <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(<a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>);</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p0_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(0));</div>
<div class="line"><span class="lineno">  286</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p1_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(1));</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_r = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a> + i);</div>
<div class="line"><span class="lineno">  289</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[0][0], data_r, p0_mask);</div>
<div class="line"><span class="lineno">  290</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[1][0], data_r, p1_mask);</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_g = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a> + i);</div>
<div class="line"><span class="lineno">  293</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[0][1], data_g, p0_mask);</div>
<div class="line"><span class="lineno">  294</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[1][1], data_g, p1_mask);</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_b = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a> + i);</div>
<div class="line"><span class="lineno">  297</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[0][2], data_b, p0_mask);</div>
<div class="line"><span class="lineno">  298</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[1][2], data_b, p1_mask);</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_a = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a> + i);</div>
<div class="line"><span class="lineno">  301</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[0][3], data_a, p0_mask);</div>
<div class="line"><span class="lineno">  302</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[1][3], data_a, p1_mask);</div>
<div class="line"><span class="lineno">  303</span>        }</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> block_total = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a> * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>);</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p0_total = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[0][0]),</div>
<div class="line"><span class="lineno">  308</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[0][1]),</div>
<div class="line"><span class="lineno">  309</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[0][2]),</div>
<div class="line"><span class="lineno">  310</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[0][3]));</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p1_total = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[1][0]),</div>
<div class="line"><span class="lineno">  313</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[1][1]),</div>
<div class="line"><span class="lineno">  314</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[1][2]),</div>
<div class="line"><span class="lineno">  315</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[1][3]));</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p2_total = block_total - p0_total - p1_total;</div>
<div class="line"><span class="lineno">  318</span> </div>
<div class="line"><span class="lineno">  319</span>        averages[0] = p0_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[0]);</div>
<div class="line"><span class="lineno">  320</span>        averages[1] = p1_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[1]);</div>
<div class="line"><span class="lineno">  321</span>        averages[2] = p2_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[2]);</div>
<div class="line"><span class="lineno">  322</span>    }</div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  324</span>    {</div>
<div class="line"><span class="lineno">  325</span>        <span class="comment">// For 4 partitions scan results for partition 0/1/2, compute partition 3</span></div>
<div class="line"><span class="lineno">  326</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> pp_avg_rgba[3][4] {};</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>        <a class="code hl_struct" href="structvint4.html">vint</a> lane_id = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint::lane_id</a>();</div>
<div class="line"><span class="lineno">  329</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  330</span>        {</div>
<div class="line"><span class="lineno">  331</span>            <a class="code hl_struct" href="structvint4.html">vint</a> texel_partition(pi.<a class="code hl_variable" href="structpartition__info.html#ad9cde9216bbe8865a4660a6c955a6793">partition_of_texel</a> + i);</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> lane_mask = lane_id &lt; <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(texel_count);</div>
<div class="line"><span class="lineno">  334</span>            lane_id += <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(<a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>);</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p0_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(0));</div>
<div class="line"><span class="lineno">  337</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p1_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(1));</div>
<div class="line"><span class="lineno">  338</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> p2_mask = lane_mask &amp; (texel_partition == <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(2));</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_r = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a> + i);</div>
<div class="line"><span class="lineno">  341</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[0][0], data_r, p0_mask);</div>
<div class="line"><span class="lineno">  342</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[1][0], data_r, p1_mask);</div>
<div class="line"><span class="lineno">  343</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[2][0], data_r, p2_mask);</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_g = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a> + i);</div>
<div class="line"><span class="lineno">  346</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[0][1], data_g, p0_mask);</div>
<div class="line"><span class="lineno">  347</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[1][1], data_g, p1_mask);</div>
<div class="line"><span class="lineno">  348</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[2][1], data_g, p2_mask);</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_b = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a> + i);</div>
<div class="line"><span class="lineno">  351</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[0][2], data_b, p0_mask);</div>
<div class="line"><span class="lineno">  352</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[1][2], data_b, p1_mask);</div>
<div class="line"><span class="lineno">  353</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[2][2], data_b, p2_mask);</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_a = <a class="code hl_variable" href="astcenc__vecmathlib_8h.html#a535908f39a759651e1adb70d750a96f7">loada</a>(blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a> + i);</div>
<div class="line"><span class="lineno">  356</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[0][3], data_a, p0_mask);</div>
<div class="line"><span class="lineno">  357</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[1][3], data_a, p1_mask);</div>
<div class="line"><span class="lineno">  358</span>            <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(pp_avg_rgba[2][3], data_a, p2_mask);</div>
<div class="line"><span class="lineno">  359</span>        }</div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> block_total = blk.<a class="code hl_variable" href="structimage__block.html#ac6bd4890338be887b61f857e37d23459">data_mean</a> * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(blk.<a class="code hl_variable" href="structimage__block.html#a05174b1db0b9131ad61fc49f3aa74676">texel_count</a>);</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p0_total = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[0][0]),</div>
<div class="line"><span class="lineno">  364</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[0][1]),</div>
<div class="line"><span class="lineno">  365</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[0][2]),</div>
<div class="line"><span class="lineno">  366</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[0][3]));</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p1_total = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[1][0]),</div>
<div class="line"><span class="lineno">  369</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[1][1]),</div>
<div class="line"><span class="lineno">  370</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[1][2]),</div>
<div class="line"><span class="lineno">  371</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[1][3]));</div>
<div class="line"><span class="lineno">  372</span> </div>
<div class="line"><span class="lineno">  373</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p2_total = <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[2][0]),</div>
<div class="line"><span class="lineno">  374</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[2][1]),</div>
<div class="line"><span class="lineno">  375</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[2][2]),</div>
<div class="line"><span class="lineno">  376</span>                                   <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(pp_avg_rgba[2][3]));</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> p3_total = block_total - p0_total - p1_total- p2_total;</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>        averages[0] = p0_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[0]);</div>
<div class="line"><span class="lineno">  381</span>        averages[1] = p1_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[1]);</div>
<div class="line"><span class="lineno">  382</span>        averages[2] = p2_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[2]);</div>
<div class="line"><span class="lineno">  383</span>        averages[3] = p3_total / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[3]);</div>
<div class="line"><span class="lineno">  384</span>    }</div>
<div class="line"><span class="lineno">  385</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a83cf48552a7e8225358c7c43df24fd96_cgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a83cf48552a7e8225358c7c43df24fd96_cgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a83cf48552a7e8225358c7c43df24fd96_cgraph" id="aastcenc__averages__and__directions_8cpp_a83cf48552a7e8225358c7c43df24fd96_cgraph">
<area shape="rect" title="Compute the average RGBA color of each partition." alt="" coords="5,103,220,128"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="269,29,365,55"/>
<area shape="poly" title=" " alt="" coords="148,100,267,57,268,62,150,105"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="285,103,349,128"/>
<area shape="poly" title=" " alt="" coords="221,113,271,113,271,118,221,118"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="268,152,365,177"/>
<area shape="poly" title=" " alt="" coords="166,125,255,147,254,152,165,131"/>
<area shape="poly" title=" " alt="" coords="293,30,289,21,291,11,301,5,317,3,335,6,344,14,340,18,333,11,317,8,303,10,295,15,294,20,298,28"/>
<area shape="poly" title=" " alt="" coords="293,104,289,94,291,85,301,78,317,76,335,79,344,88,340,91,333,84,317,81,303,83,295,88,294,94,298,101"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="413,152,496,177"/>
<area shape="poly" title=" " alt="" coords="366,162,400,162,400,167,366,167"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__averages__and__directions_8cpp_a83cf48552a7e8225358c7c43df24fd96_icgraph.png" border="0" usemap="#aastcenc__averages__and__directions_8cpp_a83cf48552a7e8225358c7c43df24fd96_icgraph" alt=""/></div>
<map name="aastcenc__averages__and__directions_8cpp_a83cf48552a7e8225358c7c43df24fd96_icgraph" id="aastcenc__averages__and__directions_8cpp_a83cf48552a7e8225358c7c43df24fd96_icgraph">
<area shape="rect" title="Compute the average RGBA color of each partition." alt="" coords="1852,47,2067,73"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a33f923c5a839af4f1d369a391183c384" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="1643,8,1804,48"/>
<area shape="poly" title=" " alt="" coords="1852,48,1804,42,1805,36,1852,43"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a00407861c2f0e767b64b1cb1bb7a27b6" title="Compute averages and dominant directions for each partition in a 4 component texture." alt="" coords="1643,72,1804,112"/>
<area shape="poly" title=" " alt="" coords="1852,77,1805,84,1804,78,1852,72"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a7ec20ff2556f6357cc0754c13e841262" title="Compute the ideal endpoints and weights for 3 color components." alt="" coords="1440,8,1595,48"/>
<area shape="poly" title=" " alt="" coords="1629,31,1595,31,1595,25,1629,25"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#afa8cab65d4b6f0cbece52eec38aed523" title="Compute ideal endpoint colors and weights for 1 plane of weights." alt="" coords="1241,69,1389,109"/>
<area shape="poly" title=" " alt="" coords="1438,55,1383,72,1381,67,1437,50"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a52d3985007cfc83025661e0347bc00cc" title="Compute ideal endpoint colors and weights for 2 planes of weights." alt="" coords="1239,5,1392,45"/>
<area shape="poly" title=" " alt="" coords="1426,29,1393,29,1393,24,1426,24"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1228,92,1191,92,1191,87,1228,87"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,77,967,102"/>
<area shape="poly" title=" " alt="" coords="1001,92,967,92,967,87,1001,87"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,77,801,102"/>
<area shape="poly" title=" " alt="" coords="835,92,802,92,802,87,835,87"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,77,632,102"/>
<area shape="poly" title=" " alt="" coords="666,92,632,92,632,87,666,87"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,77,207,102"/>
<area shape="poly" title=" " alt="" coords="444,89,409,88,255,88,207,90,207,84,255,83,409,83,444,83"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,97,409,137"/>
<area shape="poly" title=" " alt="" coords="444,105,410,110,409,105,443,100"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,77,56,102"/>
<area shape="poly" title=" " alt="" coords="90,92,57,92,57,87,90,87"/>
<area shape="poly" title=" " alt="" coords="241,106,206,100,207,95,242,100"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,28,1191,28,1191,23,1225,23"/>
<area shape="poly" title=" " alt="" coords="1029,52,948,79,947,74,1027,47"/>
<area shape="rect" href="astcenc__ideal__endpoints__and__weights_8cpp.html#a08aebec57ada3441207dce6a7a02797e" title="Compute the ideal endpoints and weights for 4 color components." alt="" coords="1440,72,1595,112"/>
<area shape="poly" title=" " alt="" coords="1629,95,1595,95,1595,89,1629,89"/>
<area shape="rect" href="astcenc__find__best__partitioning_8cpp.html#a7577b3047a3f9f0fe44fd579f5450630" title="Find the best set of partitions to trial for a given block." alt="" coords="1252,133,1379,173"/>
<area shape="poly" title=" " alt="" coords="1637,118,1595,127,1481,143,1379,152,1379,147,1480,137,1594,121,1636,113"/>
<area shape="poly" title=" " alt="" coords="1426,93,1389,93,1389,88,1426,88"/>
<area shape="poly" title=" " alt="" coords="1238,152,1132,142,1014,124,945,105,946,100,1015,119,1132,137,1238,147"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_211b531afad3b7391864460492782af6.html">astc-encoder-main</a></li><li class="navelem"><a class="el" href="dir_7df889ea08e038e0b05c337eccc30153.html">Source</a></li><li class="navelem"><a class="el" href="astcenc__averages__and__directions_8cpp.html">astcenc_averages_and_directions.cpp</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
