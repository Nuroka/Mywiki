<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project1: C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-encoder-main/Source/astcenc_pick_best_endpoint_format.cpp 파일 참조</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Project1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('astcenc__pick__best__endpoint__format_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">함수</a>  </div>
  <div class="headertitle"><div class="title">astcenc_pick_best_endpoint_format.cpp 파일 참조</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="astcenc__internal_8h_source.html">astcenc_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="astcenc__vecmathlib_8h_source.html">astcenc_vecmathlib.h</a>&quot;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
astcenc_pick_best_endpoint_format.cpp에 대한 include 의존 그래프</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp__incl.png" border="0" usemap="#a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__pick__best__endpoint__format_8cpp" alt=""/></div>
<map name="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__pick__best__endpoint__format_8cpp" id="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__pick__best__endpoint__format_8cpp">
<area shape="rect" title=" " alt="" coords="299,5,479,89"/>
<area shape="rect" href="astcenc__internal_8h.html" title=" " alt="" coords="325,137,453,163"/>
<area shape="poly" title=" " alt="" coords="392,89,392,124,387,124,387,89"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html" title=" " alt="" coords="5,284,152,309"/>
<area shape="poly" title=" " alt="" coords="300,82,251,105,199,134,150,170,107,212,92,241,84,271,79,269,87,239,103,209,146,166,196,129,248,100,298,77"/>
<area shape="rect" title=" " alt="" coords="477,137,547,163"/>
<area shape="poly" title=" " alt="" coords="441,87,489,127,486,131,438,91"/>
<area shape="rect" title=" " alt="" coords="508,445,583,471"/>
<area shape="poly" title=" " alt="" coords="454,159,578,182,629,196,657,209,672,238,675,270,668,303,653,335,612,393,570,438,567,434,608,390,649,332,663,301,670,270,667,240,653,213,627,201,577,187,453,164"/>
<area shape="rect" title=" " alt="" coords="435,284,499,309"/>
<area shape="poly" title=" " alt="" coords="404,161,423,182,442,209,456,240,464,270,459,271,451,242,438,212,419,186,400,165"/>
<area shape="rect" title=" " alt="" coords="349,284,411,309"/>
<area shape="poly" title=" " alt="" coords="377,165,356,185,340,212,338,227,342,243,360,272,356,275,337,245,332,228,335,210,352,182,373,161"/>
<area shape="rect" title=" " alt="" coords="505,211,565,236"/>
<area shape="poly" title=" " alt="" coords="414,160,500,202,498,207,412,165"/>
<area shape="rect" title=" " alt="" coords="589,211,643,236"/>
<area shape="poly" title=" " alt="" coords="427,160,577,207,576,212,425,165"/>
<area shape="rect" href="astcenc_8h.html" title=" " alt="" coords="350,211,429,236"/>
<area shape="poly" title=" " alt="" coords="392,163,392,197,387,197,387,163"/>
<area shape="rect" href="astcenc__mathlib_8h.html" title=" " alt="" coords="147,211,275,236"/>
<area shape="poly" title=" " alt="" coords="362,165,253,208,251,203,360,160"/>
<area shape="poly" title=" " alt="" coords="325,156,280,161,231,172,182,188,136,213,109,241,91,272,86,269,105,237,133,209,179,183,230,166,280,156,325,151"/>
<area shape="poly" title=" " alt="" coords="404,234,446,273,442,276,400,238"/>
<area shape="poly" title=" " alt="" coords="390,237,386,271,381,270,385,236"/>
<area shape="poly" title=" " alt="" coords="239,234,341,276,339,281,237,238"/>
<area shape="rect" title=" " alt="" coords="259,284,325,309"/>
<area shape="poly" title=" " alt="" coords="225,234,270,273,267,277,222,238"/>
<area shape="rect" title=" " alt="" coords="176,284,235,309"/>
<area shape="poly" title=" " alt="" coords="212,237,210,271,205,270,207,236"/>
<area shape="poly" title=" " alt="" coords="191,238,113,280,111,275,188,234"/>
<area shape="rect" href="astcenc__vecmathlib__none__4_8h.html" title=" " alt="" coords="171,357,307,397"/>
<area shape="poly" title=" " alt="" coords="103,307,189,349,186,353,101,312"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html" title=" " alt="" coords="11,357,147,397"/>
<area shape="poly" title=" " alt="" coords="81,310,81,344,76,344,76,310"/>
<area shape="poly" title=" " alt="" coords="307,393,495,441,494,446,306,399"/>
<area shape="rect" title=" " alt="" coords="91,445,149,471"/>
<area shape="poly" title=" " alt="" coords="211,400,150,440,147,436,208,395"/>
<area shape="rect" title=" " alt="" coords="248,445,309,471"/>
<area shape="poly" title=" " alt="" coords="251,396,269,432,264,434,246,399"/>
<area shape="rect" title=" " alt="" coords="173,445,224,471"/>
<area shape="poly" title=" " alt="" coords="231,399,213,434,208,432,227,396"/>
<area shape="poly" title=" " alt="" coords="91,396,110,432,105,434,86,399"/>
</map>
</div>
</div>
<p><a href="astcenc__pick__best__endpoint__format_8cpp_source.html">이 파일의 소스 코드 페이지로 가기</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
함수</h2></td></tr>
<tr class="memitem:a118e8a2374bfd56b522a03f938b0f367" id="r_a118e8a2374bfd56b522a03f938b0f367"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a118e8a2374bfd56b522a03f938b0f367">compute_error_squared_rgb_single_partition</a> (const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, int partition_index, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structprocessed__line3.html">processed_line3</a> &amp;uncor_pline, float &amp;uncor_err, const <a class="el" href="structprocessed__line3.html">processed_line3</a> &amp;samec_pline, float &amp;samec_err, const <a class="el" href="structprocessed__line3.html">processed_line3</a> &amp;rgbl_pline, float &amp;rgbl_err, const <a class="el" href="structprocessed__line3.html">processed_line3</a> &amp;l_pline, float &amp;l_err, float &amp;a_drop_err)</td></tr>
<tr class="memdesc:a118e8a2374bfd56b522a03f938b0f367"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions for finding best endpoint format.  <br /></td></tr>
<tr class="separator:a118e8a2374bfd56b522a03f938b0f367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affc96d3eeffef962cd64307bf0b85590" id="r_affc96d3eeffef962cd64307bf0b85590"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#affc96d3eeffef962cd64307bf0b85590">compute_encoding_choice_errors</a> (const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structendpoints.html">endpoints</a> &amp;ep, <a class="el" href="structencoding__choice__errors.html">encoding_choice_errors</a> eci[<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>])</td></tr>
<tr class="memdesc:affc96d3eeffef962cd64307bf0b85590"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a given set of input colors and partitioning determine endpoint encode errors.  <br /></td></tr>
<tr class="separator:affc96d3eeffef962cd64307bf0b85590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a163a7d0cf020b6f86049745807912ec1" id="r_a163a7d0cf020b6f86049745807912ec1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a163a7d0cf020b6f86049745807912ec1">compute_color_error_for_every_integer_count_and_quant_level</a> (bool encode_hdr_rgb, bool encode_hdr_alpha, int partition_index, const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structencoding__choice__errors.html">encoding_choice_errors</a> &amp;eci, const <a class="el" href="structendpoints.html">endpoints</a> &amp;ep, <a class="el" href="structvfloat4.html">vfloat4</a> error_weight, float best_error[21][4], uint8_t format_of_choice[21][4])</td></tr>
<tr class="memdesc:a163a7d0cf020b6f86049745807912ec1"><td class="mdescLeft">&#160;</td><td class="mdescRight">For a given partition compute the error for every endpoint integer count and quant level.  <br /></td></tr>
<tr class="separator:a163a7d0cf020b6f86049745807912ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0bf4253790d6b09132c02f57fcbe32" id="r_a4a0bf4253790d6b09132c02f57fcbe32"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a0bf4253790d6b09132c02f57fcbe32">one_partition_find_best_combination_for_bitcount</a> (const float best_combined_error[21][4], const uint8_t best_combined_format[21][4], int bits_available, uint8_t &amp;best_quant_level, uint8_t &amp;best_format)</td></tr>
<tr class="memdesc:a4a0bf4253790d6b09132c02f57fcbe32"><td class="mdescLeft">&#160;</td><td class="mdescRight">For one partition compute the best format and quantization for a given bit count.  <br /></td></tr>
<tr class="separator:a4a0bf4253790d6b09132c02f57fcbe32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac317754d4bbd795d6f29b331883e8eb3" id="r_ac317754d4bbd795d6f29b331883e8eb3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac317754d4bbd795d6f29b331883e8eb3">two_partitions_find_best_combination_for_every_quantization_and_integer_count</a> (const float best_error[2][21][4], const uint8_t best_format[2][21][4], float best_combined_error[21][7], uint8_t best_combined_format[21][7][2])</td></tr>
<tr class="memdesc:ac317754d4bbd795d6f29b331883e8eb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">For 2 partitions compute the best format combinations for every pair of quant mode and integer count.  <br /></td></tr>
<tr class="separator:ac317754d4bbd795d6f29b331883e8eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c74518d7a68796ba962179901f805ae" id="r_a5c74518d7a68796ba962179901f805ae"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c74518d7a68796ba962179901f805ae">two_partitions_find_best_combination_for_bitcount</a> (float best_combined_error[21][7], uint8_t best_combined_format[21][7][2], int bits_available, uint8_t &amp;best_quant_level, uint8_t &amp;best_quant_level_mod, uint8_t *best_formats)</td></tr>
<tr class="memdesc:a5c74518d7a68796ba962179901f805ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">For 2 partitions compute the best format and quantization for a given bit count.  <br /></td></tr>
<tr class="separator:a5c74518d7a68796ba962179901f805ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab08ff5ed53a05a876dc8e90c05aeef72" id="r_ab08ff5ed53a05a876dc8e90c05aeef72"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab08ff5ed53a05a876dc8e90c05aeef72">three_partitions_find_best_combination_for_every_quantization_and_integer_count</a> (const float best_error[3][21][4], const uint8_t best_format[3][21][4], float best_combined_error[21][10], uint8_t best_combined_format[21][10][3])</td></tr>
<tr class="memdesc:ab08ff5ed53a05a876dc8e90c05aeef72"><td class="mdescLeft">&#160;</td><td class="mdescRight">For 3 partitions compute the best format combinations for every pair of quant mode and integer count.  <br /></td></tr>
<tr class="separator:ab08ff5ed53a05a876dc8e90c05aeef72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7681b157ce5786accf05034e1facbdbe" id="r_a7681b157ce5786accf05034e1facbdbe"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7681b157ce5786accf05034e1facbdbe">three_partitions_find_best_combination_for_bitcount</a> (const float best_combined_error[21][10], const uint8_t best_combined_format[21][10][3], int bits_available, uint8_t &amp;best_quant_level, uint8_t &amp;best_quant_level_mod, uint8_t *best_formats)</td></tr>
<tr class="memdesc:a7681b157ce5786accf05034e1facbdbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">For 3 partitions compute the best format and quantization for a given bit count.  <br /></td></tr>
<tr class="separator:a7681b157ce5786accf05034e1facbdbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a806d3ce88e28226224c6b929b69f2fda" id="r_a806d3ce88e28226224c6b929b69f2fda"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a806d3ce88e28226224c6b929b69f2fda">four_partitions_find_best_combination_for_every_quantization_and_integer_count</a> (const float best_error[4][21][4], const uint8_t best_format[4][21][4], float best_combined_error[21][13], uint8_t best_combined_format[21][13][4])</td></tr>
<tr class="memdesc:a806d3ce88e28226224c6b929b69f2fda"><td class="mdescLeft">&#160;</td><td class="mdescRight">For 4 partitions compute the best format combinations for every pair of quant mode and integer count.  <br /></td></tr>
<tr class="separator:a806d3ce88e28226224c6b929b69f2fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa54b7e3566c1445d292b8ff7cf6f5e28" id="r_aa54b7e3566c1445d292b8ff7cf6f5e28"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa54b7e3566c1445d292b8ff7cf6f5e28">four_partitions_find_best_combination_for_bitcount</a> (const float best_combined_error[21][13], const uint8_t best_combined_format[21][13][4], int bits_available, uint8_t &amp;best_quant_level, uint8_t &amp;best_quant_level_mod, uint8_t *best_formats)</td></tr>
<tr class="memdesc:aa54b7e3566c1445d292b8ff7cf6f5e28"><td class="mdescLeft">&#160;</td><td class="mdescRight">For 4 partitions compute the best format and quantization for a given bit count.  <br /></td></tr>
<tr class="separator:aa54b7e3566c1445d292b8ff7cf6f5e28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81c7b68e8c7b82a5ff718f21bd4f3c35" id="r_a81c7b68e8c7b82a5ff718f21bd4f3c35"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a81c7b68e8c7b82a5ff718f21bd4f3c35">compute_ideal_endpoint_formats</a> (const <a class="el" href="structpartition__info.html">partition_info</a> &amp;pi, const <a class="el" href="structimage__block.html">image_block</a> &amp;blk, const <a class="el" href="structendpoints.html">endpoints</a> &amp;ep, const int8_t *qwt_bitcounts, const float *qwt_errors, unsigned int tune_candidate_limit, unsigned int start_block_mode, unsigned int end_block_mode, uint8_t partition_format_specifiers[<a class="el" href="astcenc__internal_8h.html#a0f2aba262e65e945037f4ed5dda3f2f9">TUNE_MAX_TRIAL_CANDIDATES</a>][<a class="el" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>], int <a class="el" href="structblock__mode.html">block_mode</a>[<a class="el" href="astcenc__internal_8h.html#a0f2aba262e65e945037f4ed5dda3f2f9">TUNE_MAX_TRIAL_CANDIDATES</a>], <a class="el" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a> quant_level[<a class="el" href="astcenc__internal_8h.html#a0f2aba262e65e945037f4ed5dda3f2f9">TUNE_MAX_TRIAL_CANDIDATES</a>], <a class="el" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a> quant_level_mod[<a class="el" href="astcenc__internal_8h.html#a0f2aba262e65e945037f4ed5dda3f2f9">TUNE_MAX_TRIAL_CANDIDATES</a>], <a class="el" href="structcompression__working__buffers.html">compression_working_buffers</a> &amp;tmpbuf)</td></tr>
<tr class="memdesc:a81c7b68e8c7b82a5ff718f21bd4f3c35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identify, for each mode, which set of color endpoint produces the best result.  <br /></td></tr>
<tr class="separator:a81c7b68e8c7b82a5ff718f21bd4f3c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">함수 문서화</h2>
<a id="a163a7d0cf020b6f86049745807912ec1" name="a163a7d0cf020b6f86049745807912ec1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a163a7d0cf020b6f86049745807912ec1">&#9670;&#160;</a></span>compute_color_error_for_every_integer_count_and_quant_level()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compute_color_error_for_every_integer_count_and_quant_level </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>encode_hdr_rgb</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>encode_hdr_alpha</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>partition_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structencoding__choice__errors.html">encoding_choice_errors</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>eci</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structendpoints.html">endpoints</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ep</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvfloat4.html">vfloat4</a></td>          <td class="paramname"><span class="paramname"><em>error_weight</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>best_error</em></span>[21][4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>format_of_choice</em></span>[21][4]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For a given partition compute the error for every endpoint integer count and quant level. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">encode_hdr_rgb</td><td><code>true</code> if using HDR for RGB, <code>false</code> for LDR. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">encode_hdr_alpha</td><td><code>true</code> if using HDR for alpha, <code>false</code> for LDR. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_index</td><td>The partition index. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">eci</td><td>The encoding choice error metrics. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ep</td><td>The idealized endpoints. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">error_weight</td><td>The resulting encoding choice error metrics. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_error</td><td>The best error for each integer count and quant level. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">format_of_choice</td><td>The preferred endpoint format for each integer count and quant level. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00315">315</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  325</span>  {</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordtype">int</span> partition_size = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[partition_index];</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> baseline_quant_error[21 - <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>] {</div>
<div class="line"><span class="lineno">  329</span>        (65536.0f * 65536.0f / 18.0f) / (5 * 5),</div>
<div class="line"><span class="lineno">  330</span>        (65536.0f * 65536.0f / 18.0f) / (7 * 7),</div>
<div class="line"><span class="lineno">  331</span>        (65536.0f * 65536.0f / 18.0f) / (9 * 9),</div>
<div class="line"><span class="lineno">  332</span>        (65536.0f * 65536.0f / 18.0f) / (11 * 11),</div>
<div class="line"><span class="lineno">  333</span>        (65536.0f * 65536.0f / 18.0f) / (15 * 15),</div>
<div class="line"><span class="lineno">  334</span>        (65536.0f * 65536.0f / 18.0f) / (19 * 19),</div>
<div class="line"><span class="lineno">  335</span>        (65536.0f * 65536.0f / 18.0f) / (23 * 23),</div>
<div class="line"><span class="lineno">  336</span>        (65536.0f * 65536.0f / 18.0f) / (31 * 31),</div>
<div class="line"><span class="lineno">  337</span>        (65536.0f * 65536.0f / 18.0f) / (39 * 39),</div>
<div class="line"><span class="lineno">  338</span>        (65536.0f * 65536.0f / 18.0f) / (47 * 47),</div>
<div class="line"><span class="lineno">  339</span>        (65536.0f * 65536.0f / 18.0f) / (63 * 63),</div>
<div class="line"><span class="lineno">  340</span>        (65536.0f * 65536.0f / 18.0f) / (79 * 79),</div>
<div class="line"><span class="lineno">  341</span>        (65536.0f * 65536.0f / 18.0f) / (95 * 95),</div>
<div class="line"><span class="lineno">  342</span>        (65536.0f * 65536.0f / 18.0f) / (127 * 127),</div>
<div class="line"><span class="lineno">  343</span>        (65536.0f * 65536.0f / 18.0f) / (159 * 159),</div>
<div class="line"><span class="lineno">  344</span>        (65536.0f * 65536.0f / 18.0f) / (191 * 191),</div>
<div class="line"><span class="lineno">  345</span>        (65536.0f * 65536.0f / 18.0f) / (255 * 255)</div>
<div class="line"><span class="lineno">  346</span>    };</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep0 = ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[partition_index];</div>
<div class="line"><span class="lineno">  349</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep1 = ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[partition_index];</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    <span class="keywordtype">float</span> ep1_min = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#ac8652a0d90b3378db8fa8a8d2c4a434c">hmin_rgb_s</a>(ep1);</div>
<div class="line"><span class="lineno">  352</span>    ep1_min = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(ep1_min, 0.0f);</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>    <span class="keywordtype">float</span> error_weight_rgbsum = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(error_weight);</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>    <span class="keywordtype">float</span> range_upper_limit_rgb = encode_hdr_rgb ? 61440.0f : 65535.0f;</div>
<div class="line"><span class="lineno">  357</span>    <span class="keywordtype">float</span> range_upper_limit_alpha = encode_hdr_alpha ? 61440.0f : 65535.0f;</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>    <span class="comment">// It is possible to get endpoint colors significantly outside [0,upper-limit] even if the</span></div>
<div class="line"><span class="lineno">  360</span>    <span class="comment">// input data are safely contained in [0,upper-limit]; we need to add an error term for this</span></div>
<div class="line"><span class="lineno">  361</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> offset(range_upper_limit_rgb, range_upper_limit_rgb, range_upper_limit_rgb, range_upper_limit_alpha);</div>
<div class="line"><span class="lineno">  362</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep0_range_error_high = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3">max</a>(ep0 - offset, 0.0f);</div>
<div class="line"><span class="lineno">  363</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep1_range_error_high = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3">max</a>(ep1 - offset, 0.0f);</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep0_range_error_low = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b">min</a>(ep0, 0.0f);</div>
<div class="line"><span class="lineno">  366</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ep1_range_error_low = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b">min</a>(ep1, 0.0f);</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> sum_range_error =</div>
<div class="line"><span class="lineno">  369</span>        (ep0_range_error_low * ep0_range_error_low) +</div>
<div class="line"><span class="lineno">  370</span>        (ep1_range_error_low * ep1_range_error_low) +</div>
<div class="line"><span class="lineno">  371</span>        (ep0_range_error_high * ep0_range_error_high) +</div>
<div class="line"><span class="lineno">  372</span>        (ep1_range_error_high * ep1_range_error_high);</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordtype">float</span> rgb_range_error = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477">dot3_s</a>(sum_range_error, error_weight)</div>
<div class="line"><span class="lineno">  375</span>                          * 0.5f * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(partition_size);</div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordtype">float</span> alpha_range_error = sum_range_error.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;() * error_weight.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;()</div>
<div class="line"><span class="lineno">  377</span>                            * 0.5f * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(partition_size);</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">if</span> (encode_hdr_rgb)</div>
<div class="line"><span class="lineno">  380</span>    {</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>        <span class="comment">// Collect some statistics</span></div>
<div class="line"><span class="lineno">  383</span>        <span class="keywordtype">float</span> af, cf;</div>
<div class="line"><span class="lineno">  384</span>        <span class="keywordflow">if</span> (ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() &gt; ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() &amp;&amp; ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() &gt; ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;())</div>
<div class="line"><span class="lineno">  385</span>        {</div>
<div class="line"><span class="lineno">  386</span>            af = ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;();</div>
<div class="line"><span class="lineno">  387</span>            cf = ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;() - ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;();</div>
<div class="line"><span class="lineno">  388</span>        }</div>
<div class="line"><span class="lineno">  389</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() &gt; ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;())</div>
<div class="line"><span class="lineno">  390</span>        {</div>
<div class="line"><span class="lineno">  391</span>            af = ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;();</div>
<div class="line"><span class="lineno">  392</span>            cf = ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;() - ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;();</div>
<div class="line"><span class="lineno">  393</span>        }</div>
<div class="line"><span class="lineno">  394</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  395</span>        {</div>
<div class="line"><span class="lineno">  396</span>            af = ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;();</div>
<div class="line"><span class="lineno">  397</span>            cf = ep1.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;() - ep0.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;();</div>
<div class="line"><span class="lineno">  398</span>        }</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>        <span class="comment">// Estimate of color-component spread in high endpoint color</span></div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordtype">float</span> bf = af - ep1_min;</div>
<div class="line"><span class="lineno">  402</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> prd = (ep1 - <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(cf)).swz&lt;0, 1, 2&gt;();</div>
<div class="line"><span class="lineno">  403</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> pdif = prd - ep0.<a class="code hl_function" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">swz</a>&lt;0, 1, 2&gt;();</div>
<div class="line"><span class="lineno">  404</span>        <span class="comment">// Estimate of color-component spread in low endpoint color</span></div>
<div class="line"><span class="lineno">  405</span>        <span class="keywordtype">float</span> df = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a5d1b09f64af83d5171e4b9580f62ac71">hmax_s</a>(<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c">abs</a>(pdif));</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>        <span class="keywordtype">int</span> b = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(bf);</div>
<div class="line"><span class="lineno">  408</span>        <span class="keywordtype">int</span> c = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(cf);</div>
<div class="line"><span class="lineno">  409</span>        <span class="keywordtype">int</span> d = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(df);</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>        <span class="comment">// Determine which one of the 6 submodes is likely to be used in case of an RGBO-mode</span></div>
<div class="line"><span class="lineno">  412</span>        <span class="keywordtype">int</span> rgbo_mode = 5;      <span class="comment">// 7 bits per component</span></div>
<div class="line"><span class="lineno">  413</span>        <span class="comment">// mode 4: 8 7 6</span></div>
<div class="line"><span class="lineno">  414</span>        <span class="keywordflow">if</span> (b &lt; 32768 &amp;&amp; c &lt; 16384)</div>
<div class="line"><span class="lineno">  415</span>        {</div>
<div class="line"><span class="lineno">  416</span>            rgbo_mode = 4;</div>
<div class="line"><span class="lineno">  417</span>        }</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span>        <span class="comment">// mode 3: 9 6 7</span></div>
<div class="line"><span class="lineno">  420</span>        <span class="keywordflow">if</span> (b &lt; 8192 &amp;&amp; c &lt; 16384)</div>
<div class="line"><span class="lineno">  421</span>        {</div>
<div class="line"><span class="lineno">  422</span>            rgbo_mode = 3;</div>
<div class="line"><span class="lineno">  423</span>        }</div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>        <span class="comment">// mode 2: 10 5 8</span></div>
<div class="line"><span class="lineno">  426</span>        <span class="keywordflow">if</span> (b &lt; 2048 &amp;&amp; c &lt; 16384)</div>
<div class="line"><span class="lineno">  427</span>        {</div>
<div class="line"><span class="lineno">  428</span>            rgbo_mode = 2;</div>
<div class="line"><span class="lineno">  429</span>        }</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>        <span class="comment">// mode 1: 11 6 5</span></div>
<div class="line"><span class="lineno">  432</span>        <span class="keywordflow">if</span> (b &lt; 2048 &amp;&amp; c &lt; 1024)</div>
<div class="line"><span class="lineno">  433</span>        {</div>
<div class="line"><span class="lineno">  434</span>            rgbo_mode = 1;</div>
<div class="line"><span class="lineno">  435</span>        }</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>        <span class="comment">// mode 0: 11 5 7</span></div>
<div class="line"><span class="lineno">  438</span>        <span class="keywordflow">if</span> (b &lt; 1024 &amp;&amp; c &lt; 4096)</div>
<div class="line"><span class="lineno">  439</span>        {</div>
<div class="line"><span class="lineno">  440</span>            rgbo_mode = 0;</div>
<div class="line"><span class="lineno">  441</span>        }</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>        <span class="comment">// Determine which one of the 9 submodes is likely to be used in case of an RGB-mode.</span></div>
<div class="line"><span class="lineno">  444</span>        <span class="keywordtype">int</span> rgb_mode = 8;       <span class="comment">// 8 bits per component, except 7 bits for blue</span></div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>        <span class="comment">// mode 0: 9 7 6 7</span></div>
<div class="line"><span class="lineno">  447</span>        <span class="keywordflow">if</span> (b &lt; 16384 &amp;&amp; c &lt; 8192 &amp;&amp; d &lt; 8192)</div>
<div class="line"><span class="lineno">  448</span>        {</div>
<div class="line"><span class="lineno">  449</span>            rgb_mode = 0;</div>
<div class="line"><span class="lineno">  450</span>        }</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>        <span class="comment">// mode 1: 9 8 6 6</span></div>
<div class="line"><span class="lineno">  453</span>        <span class="keywordflow">if</span> (b &lt; 32768 &amp;&amp; c &lt; 8192 &amp;&amp; d &lt; 4096)</div>
<div class="line"><span class="lineno">  454</span>        {</div>
<div class="line"><span class="lineno">  455</span>            rgb_mode = 1;</div>
<div class="line"><span class="lineno">  456</span>        }</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>        <span class="comment">// mode 2: 10 6 7 7</span></div>
<div class="line"><span class="lineno">  459</span>        <span class="keywordflow">if</span> (b &lt; 4096 &amp;&amp; c &lt; 8192 &amp;&amp; d &lt; 4096)</div>
<div class="line"><span class="lineno">  460</span>        {</div>
<div class="line"><span class="lineno">  461</span>            rgb_mode = 2;</div>
<div class="line"><span class="lineno">  462</span>        }</div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>        <span class="comment">// mode 3: 10 7 7 6</span></div>
<div class="line"><span class="lineno">  465</span>        <span class="keywordflow">if</span> (b &lt; 8192 &amp;&amp; c &lt; 8192 &amp;&amp; d &lt; 2048)</div>
<div class="line"><span class="lineno">  466</span>        {</div>
<div class="line"><span class="lineno">  467</span>            rgb_mode = 3;</div>
<div class="line"><span class="lineno">  468</span>        }</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>        <span class="comment">// mode 4: 11 8 6 5</span></div>
<div class="line"><span class="lineno">  471</span>        <span class="keywordflow">if</span> (b &lt; 8192 &amp;&amp; c &lt; 2048 &amp;&amp; d &lt; 512)</div>
<div class="line"><span class="lineno">  472</span>        {</div>
<div class="line"><span class="lineno">  473</span>            rgb_mode = 4;</div>
<div class="line"><span class="lineno">  474</span>        }</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>        <span class="comment">// mode 5: 11 6 8 6</span></div>
<div class="line"><span class="lineno">  477</span>        <span class="keywordflow">if</span> (b &lt; 2048 &amp;&amp; c &lt; 8192 &amp;&amp; d &lt; 1024)</div>
<div class="line"><span class="lineno">  478</span>        {</div>
<div class="line"><span class="lineno">  479</span>            rgb_mode = 5;</div>
<div class="line"><span class="lineno">  480</span>        }</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span>        <span class="comment">// mode 6: 12 7 7 5</span></div>
<div class="line"><span class="lineno">  483</span>        <span class="keywordflow">if</span> (b &lt; 2048 &amp;&amp; c &lt; 2048 &amp;&amp; d &lt; 256)</div>
<div class="line"><span class="lineno">  484</span>        {</div>
<div class="line"><span class="lineno">  485</span>            rgb_mode = 6;</div>
<div class="line"><span class="lineno">  486</span>        }</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span>        <span class="comment">// mode 7: 12 6 7 6</span></div>
<div class="line"><span class="lineno">  489</span>        <span class="keywordflow">if</span> (b &lt; 1024 &amp;&amp; c &lt; 2048 &amp;&amp; d &lt; 512)</div>
<div class="line"><span class="lineno">  490</span>        {</div>
<div class="line"><span class="lineno">  491</span>            rgb_mode = 7;</div>
<div class="line"><span class="lineno">  492</span>        }</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> rgbo_error_scales[6] { 4.0f, 4.0f, 16.0f, 64.0f, 256.0f, 1024.0f };</div>
<div class="line"><span class="lineno">  495</span>        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> rgb_error_scales[9] { 64.0f, 64.0f, 16.0f, 16.0f, 4.0f, 4.0f, 1.0f, 1.0f, 384.0f };</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>        <span class="keywordtype">float</span> mode7mult = rgbo_error_scales[rgbo_mode] * 0.0015f;  <span class="comment">// Empirically determined ....</span></div>
<div class="line"><span class="lineno">  498</span>        <span class="keywordtype">float</span> mode11mult = rgb_error_scales[rgb_mode] * 0.010f;    <span class="comment">// Empirically determined ....</span></div>
<div class="line"><span class="lineno">  499</span> </div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>        <span class="keywordtype">float</span> lum_high = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(ep1) * (1.0f / 3.0f);</div>
<div class="line"><span class="lineno">  502</span>        <span class="keywordtype">float</span> lum_low = <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a>(ep0) * (1.0f / 3.0f);</div>
<div class="line"><span class="lineno">  503</span>        <span class="keywordtype">float</span> lumdif = lum_high - lum_low;</div>
<div class="line"><span class="lineno">  504</span>        <span class="keywordtype">float</span> mode23mult = lumdif &lt; 960 ? 4.0f : lumdif &lt; 3968 ? 16.0f : 128.0f;</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span>        mode23mult *= 0.0005f;  <span class="comment">// Empirically determined ....</span></div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>        <span class="comment">// Pick among the available HDR endpoint modes</span></div>
<div class="line"><span class="lineno">  509</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75aad7b37039e6f1b7dc45712dac09dd8f7">QUANT_2</a>; i &lt; <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75af823c34e4b97aef67fa3e347a3e987d9">QUANT_16</a>; i++)</div>
<div class="line"><span class="lineno">  510</span>        {</div>
<div class="line"><span class="lineno">  511</span>            best_error[i][3] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  512</span>            best_error[i][2] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  513</span>            best_error[i][1] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  514</span>            best_error[i][0] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>            format_of_choice[i][3] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(encode_hdr_alpha ? <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba2eedd102b26e73b95994d07cb26d9602">FMT_HDR_RGBA</a> : <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4bab4f3b7d71ebdba2ff3cf00ddde4f40b2">FMT_HDR_RGB_LDR_ALPHA</a>);</div>
<div class="line"><span class="lineno">  517</span>            format_of_choice[i][2] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baf476d1d6ba5e210a3565182063c3d5a7">FMT_HDR_RGB</a>;</div>
<div class="line"><span class="lineno">  518</span>            format_of_choice[i][1] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba39d39129318d58a44698af7789887045">FMT_HDR_RGB_SCALE</a>;</div>
<div class="line"><span class="lineno">  519</span>            format_of_choice[i][0] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba47ede19ba8704c3c0494b1c8143d8db0">FMT_HDR_LUMINANCE_LARGE_RANGE</a>;</div>
<div class="line"><span class="lineno">  520</span>        }</div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75af823c34e4b97aef67fa3e347a3e987d9">QUANT_16</a>; i &lt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a>; i++)</div>
<div class="line"><span class="lineno">  523</span>        {</div>
<div class="line"><span class="lineno">  524</span>            <span class="comment">// The base_quant_error should depend on the scale-factor that would be used during</span></div>
<div class="line"><span class="lineno">  525</span>            <span class="comment">// actual encode of the color value</span></div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>            <span class="keywordtype">float</span> base_quant_error = baseline_quant_error[i - <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>] * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(partition_size);</div>
<div class="line"><span class="lineno">  528</span>            <span class="keywordtype">float</span> rgb_quantization_error = error_weight_rgbsum * base_quant_error * 2.0f;</div>
<div class="line"><span class="lineno">  529</span>            <span class="keywordtype">float</span> alpha_quantization_error = error_weight.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;() * base_quant_error * 2.0f;</div>
<div class="line"><span class="lineno">  530</span>            <span class="keywordtype">float</span> rgba_quantization_error = rgb_quantization_error + alpha_quantization_error;</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>            <span class="comment">// For 8 integers, we have two encodings: one with HDR A and another one with LDR A</span></div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>            <span class="keywordtype">float</span> full_hdr_rgba_error = rgba_quantization_error + rgb_range_error + alpha_range_error;</div>
<div class="line"><span class="lineno">  535</span>            best_error[i][3] = full_hdr_rgba_error;</div>
<div class="line"><span class="lineno">  536</span>            format_of_choice[i][3] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(encode_hdr_alpha ? <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba2eedd102b26e73b95994d07cb26d9602">FMT_HDR_RGBA</a> : <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4bab4f3b7d71ebdba2ff3cf00ddde4f40b2">FMT_HDR_RGB_LDR_ALPHA</a>);</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>            <span class="comment">// For 6 integers, we have one HDR-RGB encoding</span></div>
<div class="line"><span class="lineno">  539</span>            <span class="keywordtype">float</span> full_hdr_rgb_error = (rgb_quantization_error * mode11mult) + rgb_range_error + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a9f732b537213a9c5caddca5af4d0c15c">alpha_drop_error</a>;</div>
<div class="line"><span class="lineno">  540</span>            best_error[i][2] = full_hdr_rgb_error;</div>
<div class="line"><span class="lineno">  541</span>            format_of_choice[i][2] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baf476d1d6ba5e210a3565182063c3d5a7">FMT_HDR_RGB</a>;</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span>            <span class="comment">// For 4 integers, we have one HDR-RGB-Scale encoding</span></div>
<div class="line"><span class="lineno">  544</span>            <span class="keywordtype">float</span> hdr_rgb_scale_error = (rgb_quantization_error * mode7mult) + rgb_range_error + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a9f732b537213a9c5caddca5af4d0c15c">alpha_drop_error</a> + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a5db32b77467b23beb70562840f173a54">rgb_luma_error</a>;</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span>            best_error[i][1] = hdr_rgb_scale_error;</div>
<div class="line"><span class="lineno">  547</span>            format_of_choice[i][1] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba39d39129318d58a44698af7789887045">FMT_HDR_RGB_SCALE</a>;</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>            <span class="comment">// For 2 integers, we assume luminance-with-large-range</span></div>
<div class="line"><span class="lineno">  550</span>            <span class="keywordtype">float</span> hdr_luminance_error = (rgb_quantization_error * mode23mult) + rgb_range_error + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a9f732b537213a9c5caddca5af4d0c15c">alpha_drop_error</a> + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#ad6cf09c5032d45a8e61b750969ff4c27">luminance_error</a>;</div>
<div class="line"><span class="lineno">  551</span>            best_error[i][0] = hdr_luminance_error;</div>
<div class="line"><span class="lineno">  552</span>            format_of_choice[i][0] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba47ede19ba8704c3c0494b1c8143d8db0">FMT_HDR_LUMINANCE_LARGE_RANGE</a>;</div>
<div class="line"><span class="lineno">  553</span>        }</div>
<div class="line"><span class="lineno">  554</span>    }</div>
<div class="line"><span class="lineno">  555</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  556</span>    {</div>
<div class="line"><span class="lineno">  557</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75aad7b37039e6f1b7dc45712dac09dd8f7">QUANT_2</a>; i &lt; <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>; i++)</div>
<div class="line"><span class="lineno">  558</span>        {</div>
<div class="line"><span class="lineno">  559</span>            best_error[i][3] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  560</span>            best_error[i][2] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  561</span>            best_error[i][1] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  562</span>            best_error[i][0] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>            format_of_choice[i][3] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baeba2a33f74db0bf71dccc86a6f50b509">FMT_RGBA</a>;</div>
<div class="line"><span class="lineno">  565</span>            format_of_choice[i][2] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba13dd2b80554659b29a91a1749a1d90a9">FMT_RGB</a>;</div>
<div class="line"><span class="lineno">  566</span>            format_of_choice[i][1] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba878884827236165e75e7989a8e6f7757">FMT_RGB_SCALE</a>;</div>
<div class="line"><span class="lineno">  567</span>            format_of_choice[i][0] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baf29afed4fcc815780d85789b8a095a22">FMT_LUMINANCE</a>;</div>
<div class="line"><span class="lineno">  568</span>        }</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>        <span class="keywordtype">float</span> base_quant_error_rgb = error_weight_rgbsum * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(partition_size);</div>
<div class="line"><span class="lineno">  571</span>        <span class="keywordtype">float</span> base_quant_error_a = error_weight.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;() * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(partition_size);</div>
<div class="line"><span class="lineno">  572</span>        <span class="keywordtype">float</span> base_quant_error_rgba = base_quant_error_rgb + base_quant_error_a;</div>
<div class="line"><span class="lineno">  573</span> </div>
<div class="line"><span class="lineno">  574</span>        <span class="keywordtype">float</span> error_scale_bc_rgba = eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a296ff4def93117aadb093f02532b5244">can_blue_contract</a> ? 0.625f : 1.0f;</div>
<div class="line"><span class="lineno">  575</span>        <span class="keywordtype">float</span> error_scale_oe_rgba = eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a4ed3d3a0fa3f83ac3a48067030ac49fd">can_offset_encode</a> ? 0.5f : 1.0f;</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>        <span class="keywordtype">float</span> error_scale_bc_rgb = eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a296ff4def93117aadb093f02532b5244">can_blue_contract</a> ? 0.5f : 1.0f;</div>
<div class="line"><span class="lineno">  578</span>        <span class="keywordtype">float</span> error_scale_oe_rgb = eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a4ed3d3a0fa3f83ac3a48067030ac49fd">can_offset_encode</a> ? 0.25f : 1.0f;</div>
<div class="line"><span class="lineno">  579</span> </div>
<div class="line"><span class="lineno">  580</span>        <span class="comment">// Pick among the available LDR endpoint modes</span></div>
<div class="line"><span class="lineno">  581</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>; i &lt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a>; i++)</div>
<div class="line"><span class="lineno">  582</span>        {</div>
<div class="line"><span class="lineno">  583</span>            <span class="comment">// Offset encoding not possible at higher quant levels</span></div>
<div class="line"><span class="lineno">  584</span>            <span class="keywordflow">if</span> (i &gt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75adc290425933beb9aee88043c00969b58">QUANT_192</a>)</div>
<div class="line"><span class="lineno">  585</span>            {</div>
<div class="line"><span class="lineno">  586</span>                error_scale_oe_rgba = 1.0f;</div>
<div class="line"><span class="lineno">  587</span>                error_scale_oe_rgb = 1.0f;</div>
<div class="line"><span class="lineno">  588</span>            }</div>
<div class="line"><span class="lineno">  589</span> </div>
<div class="line"><span class="lineno">  590</span>            <span class="keywordtype">float</span> base_quant_error = baseline_quant_error[i - <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>];</div>
<div class="line"><span class="lineno">  591</span>            <span class="keywordtype">float</span> quant_error_rgb  = base_quant_error_rgb * base_quant_error;</div>
<div class="line"><span class="lineno">  592</span>            <span class="keywordtype">float</span> quant_error_rgba = base_quant_error_rgba * base_quant_error;</div>
<div class="line"><span class="lineno">  593</span> </div>
<div class="line"><span class="lineno">  594</span>            <span class="comment">// 8 integers can encode as RGBA+RGBA</span></div>
<div class="line"><span class="lineno">  595</span>            <span class="keywordtype">float</span> full_ldr_rgba_error = quant_error_rgba</div>
<div class="line"><span class="lineno">  596</span>                                      * error_scale_bc_rgba</div>
<div class="line"><span class="lineno">  597</span>                                      * error_scale_oe_rgba</div>
<div class="line"><span class="lineno">  598</span>                                      + rgb_range_error</div>
<div class="line"><span class="lineno">  599</span>                                      + alpha_range_error;</div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span>            best_error[i][3] = full_ldr_rgba_error;</div>
<div class="line"><span class="lineno">  602</span>            format_of_choice[i][3] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baeba2a33f74db0bf71dccc86a6f50b509">FMT_RGBA</a>;</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>            <span class="comment">// 6 integers can encode as RGB+RGB or RGBS+AA</span></div>
<div class="line"><span class="lineno">  605</span>            <span class="keywordtype">float</span> full_ldr_rgb_error = quant_error_rgb</div>
<div class="line"><span class="lineno">  606</span>                                     * error_scale_bc_rgb</div>
<div class="line"><span class="lineno">  607</span>                                     * error_scale_oe_rgb</div>
<div class="line"><span class="lineno">  608</span>                                     + rgb_range_error</div>
<div class="line"><span class="lineno">  609</span>                                     + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a9f732b537213a9c5caddca5af4d0c15c">alpha_drop_error</a>;</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>            <span class="keywordtype">float</span> rgbs_alpha_error = quant_error_rgba</div>
<div class="line"><span class="lineno">  612</span>                                   + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a7833d66ba6360569a3cbad8a9d4c743f">rgb_scale_error</a></div>
<div class="line"><span class="lineno">  613</span>                                   + rgb_range_error</div>
<div class="line"><span class="lineno">  614</span>                                   + alpha_range_error;</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>            <span class="keywordflow">if</span> (rgbs_alpha_error &lt; full_ldr_rgb_error)</div>
<div class="line"><span class="lineno">  617</span>            {</div>
<div class="line"><span class="lineno">  618</span>                best_error[i][2] = rgbs_alpha_error;</div>
<div class="line"><span class="lineno">  619</span>                format_of_choice[i][2] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba0fad0c63bb0dafc3f4146915dcff64ba">FMT_RGB_SCALE_ALPHA</a>;</div>
<div class="line"><span class="lineno">  620</span>            }</div>
<div class="line"><span class="lineno">  621</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  622</span>            {</div>
<div class="line"><span class="lineno">  623</span>                best_error[i][2] = full_ldr_rgb_error;</div>
<div class="line"><span class="lineno">  624</span>                format_of_choice[i][2] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba13dd2b80554659b29a91a1749a1d90a9">FMT_RGB</a>;</div>
<div class="line"><span class="lineno">  625</span>            }</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>            <span class="comment">// 4 integers can encode as RGBS or LA+LA</span></div>
<div class="line"><span class="lineno">  628</span>            <span class="keywordtype">float</span> ldr_rgbs_error = quant_error_rgb</div>
<div class="line"><span class="lineno">  629</span>                                 + rgb_range_error</div>
<div class="line"><span class="lineno">  630</span>                                 + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a9f732b537213a9c5caddca5af4d0c15c">alpha_drop_error</a></div>
<div class="line"><span class="lineno">  631</span>                                 + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a7833d66ba6360569a3cbad8a9d4c743f">rgb_scale_error</a>;</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>            <span class="keywordtype">float</span> lum_alpha_error = quant_error_rgba</div>
<div class="line"><span class="lineno">  634</span>                                  + rgb_range_error</div>
<div class="line"><span class="lineno">  635</span>                                  + alpha_range_error</div>
<div class="line"><span class="lineno">  636</span>                                  + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#ad6cf09c5032d45a8e61b750969ff4c27">luminance_error</a>;</div>
<div class="line"><span class="lineno">  637</span> </div>
<div class="line"><span class="lineno">  638</span>            <span class="keywordflow">if</span> (ldr_rgbs_error &lt; lum_alpha_error)</div>
<div class="line"><span class="lineno">  639</span>            {</div>
<div class="line"><span class="lineno">  640</span>                best_error[i][1] = ldr_rgbs_error;</div>
<div class="line"><span class="lineno">  641</span>                format_of_choice[i][1] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba878884827236165e75e7989a8e6f7757">FMT_RGB_SCALE</a>;</div>
<div class="line"><span class="lineno">  642</span>            }</div>
<div class="line"><span class="lineno">  643</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  644</span>            {</div>
<div class="line"><span class="lineno">  645</span>                best_error[i][1] = lum_alpha_error;</div>
<div class="line"><span class="lineno">  646</span>                format_of_choice[i][1] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba6aa2cddee1e7329a888c3fa729cb66f1">FMT_LUMINANCE_ALPHA</a>;</div>
<div class="line"><span class="lineno">  647</span>            }</div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>            <span class="comment">// 2 integers can encode as L+L</span></div>
<div class="line"><span class="lineno">  650</span>            <span class="keywordtype">float</span> luminance_error = quant_error_rgb</div>
<div class="line"><span class="lineno">  651</span>                                  + rgb_range_error</div>
<div class="line"><span class="lineno">  652</span>                                  + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#a9f732b537213a9c5caddca5af4d0c15c">alpha_drop_error</a></div>
<div class="line"><span class="lineno">  653</span>                                  + eci.<a class="code hl_variable" href="structencoding__choice__errors.html#ad6cf09c5032d45a8e61b750969ff4c27">luminance_error</a>;</div>
<div class="line"><span class="lineno">  654</span> </div>
<div class="line"><span class="lineno">  655</span>            best_error[i][0] = luminance_error;</div>
<div class="line"><span class="lineno">  656</span>            format_of_choice[i][0] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baf29afed4fcc815780d85789b8a095a22">FMT_LUMINANCE</a>;</div>
<div class="line"><span class="lineno">  657</span>        }</div>
<div class="line"><span class="lineno">  658</span>    }</div>
<div class="line"><span class="lineno">  659</span>}</div>
<div class="ttc" id="aastcenc__internal_8h_html_a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f"><div class="ttname"><a href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a></div><div class="ttdeci">@ QUANT_256</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00226">astcenc_internal.h:225</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a"><div class="ttname"><a href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a></div><div class="ttdeci">@ QUANT_6</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00209">astcenc_internal.h:209</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a806a5b8001942a6fa06d788ffec45a75aad7b37039e6f1b7dc45712dac09dd8f7"><div class="ttname"><a href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75aad7b37039e6f1b7dc45712dac09dd8f7">QUANT_2</a></div><div class="ttdeci">@ QUANT_2</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00205">astcenc_internal.h:205</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a806a5b8001942a6fa06d788ffec45a75adc290425933beb9aee88043c00969b58"><div class="ttname"><a href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75adc290425933beb9aee88043c00969b58">QUANT_192</a></div><div class="ttdeci">@ QUANT_192</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00224">astcenc_internal.h:224</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a806a5b8001942a6fa06d788ffec45a75af823c34e4b97aef67fa3e347a3e987d9"><div class="ttname"><a href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75af823c34e4b97aef67fa3e347a3e987d9">QUANT_16</a></div><div class="ttdeci">@ QUANT_16</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00213">astcenc_internal.h:213</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4ba0fad0c63bb0dafc3f4146915dcff64ba"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba0fad0c63bb0dafc3f4146915dcff64ba">FMT_RGB_SCALE_ALPHA</a></div><div class="ttdeci">@ FMT_RGB_SCALE_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00190">astcenc_internal.h:190</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4ba13dd2b80554659b29a91a1749a1d90a9"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba13dd2b80554659b29a91a1749a1d90a9">FMT_RGB</a></div><div class="ttdeci">@ FMT_RGB</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00188">astcenc_internal.h:188</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4ba2eedd102b26e73b95994d07cb26d9602"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba2eedd102b26e73b95994d07cb26d9602">FMT_HDR_RGBA</a></div><div class="ttdeci">@ FMT_HDR_RGBA</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00196">astcenc_internal.h:195</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4ba39d39129318d58a44698af7789887045"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba39d39129318d58a44698af7789887045">FMT_HDR_RGB_SCALE</a></div><div class="ttdeci">@ FMT_HDR_RGB_SCALE</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00187">astcenc_internal.h:187</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4ba47ede19ba8704c3c0494b1c8143d8db0"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba47ede19ba8704c3c0494b1c8143d8db0">FMT_HDR_LUMINANCE_LARGE_RANGE</a></div><div class="ttdeci">@ FMT_HDR_LUMINANCE_LARGE_RANGE</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00182">astcenc_internal.h:182</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4ba6aa2cddee1e7329a888c3fa729cb66f1"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba6aa2cddee1e7329a888c3fa729cb66f1">FMT_LUMINANCE_ALPHA</a></div><div class="ttdeci">@ FMT_LUMINANCE_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00184">astcenc_internal.h:184</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4ba878884827236165e75e7989a8e6f7757"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4ba878884827236165e75e7989a8e6f7757">FMT_RGB_SCALE</a></div><div class="ttdeci">@ FMT_RGB_SCALE</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00186">astcenc_internal.h:186</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4bab4f3b7d71ebdba2ff3cf00ddde4f40b2"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4bab4f3b7d71ebdba2ff3cf00ddde4f40b2">FMT_HDR_RGB_LDR_ALPHA</a></div><div class="ttdeci">@ FMT_HDR_RGB_LDR_ALPHA</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00194">astcenc_internal.h:194</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4baeba2a33f74db0bf71dccc86a6f50b509"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baeba2a33f74db0bf71dccc86a6f50b509">FMT_RGBA</a></div><div class="ttdeci">@ FMT_RGBA</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00192">astcenc_internal.h:192</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4baf29afed4fcc815780d85789b8a095a22"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baf29afed4fcc815780d85789b8a095a22">FMT_LUMINANCE</a></div><div class="ttdeci">@ FMT_LUMINANCE</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00180">astcenc_internal.h:180</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a961094c83b018837fe95bef26926cb4baf476d1d6ba5e210a3565182063c3d5a7"><div class="ttname"><a href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baf476d1d6ba5e210a3565182063c3d5a7">FMT_HDR_RGB</a></div><div class="ttdeci">@ FMT_HDR_RGB</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00191">astcenc_internal.h:191</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_aaa341023bf98401423daebc6795e2c83"><div class="ttname"><a href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a></div><div class="ttdeci">static constexpr float ERROR_CALC_DEFAULT</div><div class="ttdoc">The high default error used to initialize error trackers.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00120">astcenc_internal.h:120</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a165b3db4e7ced1551e1880a01a01150b"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b">min</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 min(vint8 a, vint8 b)</div><div class="ttdoc">Return the min vector of two vectors.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00503">astcenc_vecmathlib_avx2_8.h:503</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a5d1b09f64af83d5171e4b9580f62ac71"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a5d1b09f64af83d5171e4b9580f62ac71">hmax_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float hmax_s(vfloat8 a)</div><div class="ttdoc">Return the horizontal maximum of a vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00888">astcenc_vecmathlib_avx2_8.h:888</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aa162915c044e97cc1f6d630338761fd3"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3">max</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 max(vint8 a, vint8 b)</div><div class="ttdoc">Return the max vector of two vectors.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00511">astcenc_vecmathlib_avx2_8.h:511</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aeac50750508168aeab5115733d3ee63c"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c">abs</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat8 abs(vfloat8 a)</div><div class="ttdoc">Return the absolute value of the float vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00817">astcenc_vecmathlib_avx2_8.h:817</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_a377cafdb98d3ee38a2999ed00504f477"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477">dot3_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float dot3_s(vfloat4 a, vfloat4 b)</div><div class="ttdoc">Return the dot product for the bottom 3 lanes, returning scalar.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00321">astcenc_vecmathlib_common_4.h:321</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_a48e833d0cfdf950b6bc3431fce00507e"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e">hadd_rgb_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE int hadd_rgb_s(vint4 a)</div><div class="ttdoc">Return the horizontal sum of RGB vector lanes as a scalar.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00127">astcenc_vecmathlib_common_4.h:127</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_ac8652a0d90b3378db8fa8a8d2c4a434c"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#ac8652a0d90b3378db8fa8a8d2c4a434c">hmin_rgb_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float hmin_rgb_s(vfloat4 a)</div><div class="ttdoc">Return the horizontal min of RGB vector lanes as a scalar.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00259">astcenc_vecmathlib_common_4.h:259</a></div></div>
<div class="ttc" id="anamespaceastc_html_a83a55552d03399cdff6cf2fed8312c9f"><div class="ttname"><a href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a></div><div class="ttdeci">static T max(T p, T q)</div><div class="ttdoc">Return the maximum of two values.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00210">astcenc_mathlib.h:210</a></div></div>
<div class="ttc" id="astructencoding__choice__errors_html_a296ff4def93117aadb093f02532b5244"><div class="ttname"><a href="structencoding__choice__errors.html#a296ff4def93117aadb093f02532b5244">encoding_choice_errors::can_blue_contract</a></div><div class="ttdeci">bool can_blue_contract</div><div class="ttdoc">Can we use blue contraction encoding?</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00935">astcenc_internal.h:935</a></div></div>
<div class="ttc" id="astructencoding__choice__errors_html_a4ed3d3a0fa3f83ac3a48067030ac49fd"><div class="ttname"><a href="structencoding__choice__errors.html#a4ed3d3a0fa3f83ac3a48067030ac49fd">encoding_choice_errors::can_offset_encode</a></div><div class="ttdeci">bool can_offset_encode</div><div class="ttdoc">Can we use delta offset encoding?</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00932">astcenc_internal.h:932</a></div></div>
<div class="ttc" id="astructencoding__choice__errors_html_a5db32b77467b23beb70562840f173a54"><div class="ttname"><a href="structencoding__choice__errors.html#a5db32b77467b23beb70562840f173a54">encoding_choice_errors::rgb_luma_error</a></div><div class="ttdeci">float rgb_luma_error</div><div class="ttdoc">Error of using HDR RGB-scale instead of complete endpoints.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00923">astcenc_internal.h:923</a></div></div>
<div class="ttc" id="astructencoding__choice__errors_html_a7833d66ba6360569a3cbad8a9d4c743f"><div class="ttname"><a href="structencoding__choice__errors.html#a7833d66ba6360569a3cbad8a9d4c743f">encoding_choice_errors::rgb_scale_error</a></div><div class="ttdeci">float rgb_scale_error</div><div class="ttdoc">Error of using LDR RGB-scale instead of complete endpoints.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00920">astcenc_internal.h:920</a></div></div>
<div class="ttc" id="astructencoding__choice__errors_html_a9f732b537213a9c5caddca5af4d0c15c"><div class="ttname"><a href="structencoding__choice__errors.html#a9f732b537213a9c5caddca5af4d0c15c">encoding_choice_errors::alpha_drop_error</a></div><div class="ttdeci">float alpha_drop_error</div><div class="ttdoc">Error of discarding alpha and using a constant 1.0 alpha.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00929">astcenc_internal.h:929</a></div></div>
<div class="ttc" id="astructencoding__choice__errors_html_ad6cf09c5032d45a8e61b750969ff4c27"><div class="ttname"><a href="structencoding__choice__errors.html#ad6cf09c5032d45a8e61b750969ff4c27">encoding_choice_errors::luminance_error</a></div><div class="ttdeci">float luminance_error</div><div class="ttdoc">Error of using luminance instead of RGB.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00926">astcenc_internal.h:926</a></div></div>
<div class="ttc" id="astructendpoints_html_a2a084800ec101a03de2b8deb0d926263"><div class="ttname"><a href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpoints::endpt0</a></div><div class="ttdeci">vfloat4 endpt0[BLOCK_MAX_PARTITIONS]</div><div class="ttdoc">The colors for endpoint 0.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00890">astcenc_internal.h:890</a></div></div>
<div class="ttc" id="astructendpoints_html_a89660f637b681eaea32e7db6b9d9def2"><div class="ttname"><a href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpoints::endpt1</a></div><div class="ttdeci">vfloat4 endpt1[BLOCK_MAX_PARTITIONS]</div><div class="ttdoc">The colors for endpoint 1.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00893">astcenc_internal.h:893</a></div></div>
<div class="ttc" id="astructpartition__info_html_a92b324c921407ee30e6052426e00e0f6"><div class="ttname"><a href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_info::partition_texel_count</a></div><div class="ttdeci">uint8_t partition_texel_count[BLOCK_MAX_PARTITIONS]</div><div class="ttdoc">The number of texels in each partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00326">astcenc_internal.h:326</a></div></div>
<div class="ttc" id="astructvfloat4_html"><div class="ttname"><a href="structvfloat4.html">vfloat4</a></div><div class="ttdoc">4x32-bit vectors, implemented using Armv8-A NEON.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00050">astcenc_vecmathlib_neon_4.h:51</a></div></div>
<div class="ttc" id="astructvfloat4_html_a04462a7815432c6bc3ce1b5e5d11e4fc"><div class="ttname"><a href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">vfloat4::lane</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float lane() const</div><div class="ttdoc">Get the scalar value of a single lane.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00100">astcenc_vecmathlib_neon_4.h:100</a></div></div>
<div class="ttc" id="astructvfloat4_html_a0a3e390831722cc8e54f29155699f3a5"><div class="ttname"><a href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5">vfloat4::swz</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat4 swz() const</div><div class="ttdoc">Return a swizzled float 2.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00149">astcenc_vecmathlib_neon_4.h:149</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a163a7d0cf020b6f86049745807912ec1_cgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a163a7d0cf020b6f86049745807912ec1_cgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a163a7d0cf020b6f86049745807912ec1_cgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a163a7d0cf020b6f86049745807912ec1_cgraph">
<area shape="rect" title="For a given partition compute the error for every endpoint integer count and quant level." alt="" coords="5,216,171,271"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c" title="Return the absolute value of the float vector." alt="" coords="242,5,285,31"/>
<area shape="poly" title=" " alt="" coords="99,215,144,131,178,84,217,40,228,31,231,36,220,44,182,87,149,134,104,217"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477" title="Return the dot product for the bottom 3 lanes, returning scalar." alt="" coords="233,55,294,80"/>
<area shape="poly" title=" " alt="" coords="109,214,157,158,217,97,230,86,233,90,220,101,161,162,113,218"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e" title="Return the horizontal sum of RGB vector lanes as a scalar." alt="" coords="369,55,458,80"/>
<area shape="poly" title=" " alt="" coords="118,214,164,177,217,141,288,107,356,82,358,87,290,112,220,146,167,181,122,218"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a5d1b09f64af83d5171e4b9580f62ac71" title="Return the horizontal maximum of a vector." alt="" coords="229,156,297,181"/>
<area shape="poly" title=" " alt="" coords="152,214,219,184,221,189,154,218"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#ac8652a0d90b3378db8fa8a8d2c4a434c" title="Return the horizontal min of RGB vector lanes as a scalar." alt="" coords="219,205,308,231"/>
<area shape="poly" title=" " alt="" coords="171,229,205,224,206,229,172,234"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="368,304,459,329"/>
<area shape="poly" title=" " alt="" coords="171,259,355,301,354,306,170,264"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="223,307,303,332"/>
<area shape="poly" title=" " alt="" coords="153,268,221,299,219,303,151,273"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3" title="Return the max vector of two vectors." alt="" coords="240,356,287,381"/>
<area shape="poly" title=" " alt="" coords="123,269,220,342,230,348,227,353,217,347,120,273"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b" title="Return the min vector of two vectors." alt="" coords="242,405,285,431"/>
<area shape="poly" title=" " alt="" coords="110,269,157,329,188,362,220,392,231,400,228,404,217,396,184,366,153,333,106,273"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="219,455,308,480"/>
<area shape="poly" title=" " alt="" coords="104,270,149,352,182,399,221,441,224,445,221,449,217,445,178,402,145,355,99,272"/>
<area shape="poly" title=" " alt="" coords="294,65,355,65,355,70,294,70"/>
<area shape="rect" href="structvint4.html#a01e3f7debf73dc6c757fa36d585c9d17" title="Get the scalar from a single lane." alt="" coords="519,55,599,80"/>
<area shape="poly" title=" " alt="" coords="458,65,505,65,505,70,458,70"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a516a2f0d872381b8c7c047845a90c9a3" title="Return the horizontal maximum of a vector." alt="" coords="386,104,441,129"/>
<area shape="poly" title=" " alt="" coords="296,155,372,128,374,133,298,160"/>
<area shape="rect" href="structvint8.html#a2e1f0c785f4899e1b7912f2580b9f77c" title="Get the scalar from a single lane." alt="" coords="519,155,599,180"/>
<area shape="poly" title=" " alt="" coords="298,166,505,165,505,170,298,171"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#ac4a641bfa34d9f961fddf927fbb939da" title="Return the horizontal minimum of a vector." alt="" coords="381,205,445,231"/>
<area shape="poly" title=" " alt="" coords="308,215,367,215,367,221,308,221"/>
<area shape="poly" title=" " alt="" coords="284,229,310,248,333,270,358,290,366,296,364,300,354,295,330,274,306,252,281,233"/>
<area shape="rect" href="structvfloat4.html#a2168231efa1e514fd41b3603e57be297" title="Set the scalar value of a single lane." alt="" coords="356,255,471,280"/>
<area shape="poly" title=" " alt="" coords="303,228,362,248,360,253,302,233"/>
<area shape="poly" title=" " alt="" coords="445,204,508,182,510,187,447,210"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ae7ff255b24f24f8d2a31e6849f4b1250" title="Return the horizontal minimum of a vector." alt="" coords="533,205,584,231"/>
<area shape="poly" title=" " alt="" coords="446,215,520,215,520,221,446,221"/>
<area shape="poly" title=" " alt="" coords="290,452,306,441,357,389,394,339,399,342,361,393,310,445,293,457"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="362,455,465,480"/>
<area shape="poly" title=" " alt="" coords="308,465,348,465,348,470,308,470"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a163a7d0cf020b6f86049745807912ec1_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a163a7d0cf020b6f86049745807912ec1_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a163a7d0cf020b6f86049745807912ec1_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a163a7d0cf020b6f86049745807912ec1_icgraph">
<area shape="rect" title="For a given partition compute the error for every endpoint integer count and quant level." alt="" coords="1449,30,1615,85"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="poly" title=" " alt="" coords="1435,60,1402,60,1402,55,1435,55"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="affc96d3eeffef962cd64307bf0b85590" name="affc96d3eeffef962cd64307bf0b85590"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affc96d3eeffef962cd64307bf0b85590">&#9670;&#160;</a></span>compute_encoding_choice_errors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compute_encoding_choice_errors </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structendpoints.html">endpoints</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ep</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structencoding__choice__errors.html">encoding_choice_errors</a></td>          <td class="paramname"><span class="paramname"><em>eci</em></span>[BLOCK_MAX_PARTITIONS]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For a given set of input colors and partitioning determine endpoint encode errors. </p>
<p>This function determines the color error that results from RGB-scale encoding (LDR only), RGB-lumashift encoding (HDR only), luminance-encoding, and alpha drop. Also determines whether the endpoints are eligible for offset encoding or blue-contraction</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info data. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ep</td><td>The idealized endpoints. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">eci</td><td>The resulting encoding choice error metrics. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00222">222</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  227</span>{</div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno">  229</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <a class="code hl_struct" href="structpartition__metrics.html">partition_metrics</a> pms[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>    <a class="code hl_function" href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253">compute_avgs_and_dirs_3_comp_rgb</a>(pi, blk, pms);</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  236</span>    {</div>
<div class="line"><span class="lineno">  237</span>        <a class="code hl_struct" href="structpartition__metrics.html">partition_metrics</a>&amp; pm = pms[i];</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>        <a class="code hl_struct" href="structline3.html">line3</a> uncor_rgb_lines;</div>
<div class="line"><span class="lineno">  240</span>        <a class="code hl_struct" href="structline3.html">line3</a> samec_rgb_lines;  <span class="comment">// for LDR-RGB-scale</span></div>
<div class="line"><span class="lineno">  241</span>        <a class="code hl_struct" href="structline3.html">line3</a> rgb_luma_lines;   <span class="comment">// for HDR-RGB-scale</span></div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>        <a class="code hl_struct" href="structprocessed__line3.html">processed_line3</a> uncor_rgb_plines;</div>
<div class="line"><span class="lineno">  244</span>        <a class="code hl_struct" href="structprocessed__line3.html">processed_line3</a> samec_rgb_plines;</div>
<div class="line"><span class="lineno">  245</span>        <a class="code hl_struct" href="structprocessed__line3.html">processed_line3</a> rgb_luma_plines;</div>
<div class="line"><span class="lineno">  246</span>        <a class="code hl_struct" href="structprocessed__line3.html">processed_line3</a> luminance_plines;</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>        <span class="keywordtype">float</span> uncorr_rgb_error;</div>
<div class="line"><span class="lineno">  249</span>        <span class="keywordtype">float</span> samechroma_rgb_error;</div>
<div class="line"><span class="lineno">  250</span>        <span class="keywordtype">float</span> rgb_luma_error;</div>
<div class="line"><span class="lineno">  251</span>        <span class="keywordtype">float</span> luminance_rgb_error;</div>
<div class="line"><span class="lineno">  252</span>        <span class="keywordtype">float</span> alpha_drop_error;</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>        uncor_rgb_lines.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a> = pm.<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a>;</div>
<div class="line"><span class="lineno">  255</span>        uncor_rgb_lines.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a> = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a>(pm.<a class="code hl_variable" href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">dir</a>, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08">unit3</a>());</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>        samec_rgb_lines.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a> = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  258</span>        samec_rgb_lines.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a> = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a>(pm.<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a>, <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08">unit3</a>());</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>        rgb_luma_lines.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a> = pm.<a class="code hl_variable" href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">avg</a>;</div>
<div class="line"><span class="lineno">  261</span>        rgb_luma_lines.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a> = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08">unit3</a>();</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>        uncor_rgb_plines.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a> = uncor_rgb_lines.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a> - uncor_rgb_lines.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a> * <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#ae36c7167bc89ff2bf984c1a912526dcb">dot3</a>(uncor_rgb_lines.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a>, uncor_rgb_lines.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a>);</div>
<div class="line"><span class="lineno">  264</span>        uncor_rgb_plines.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>   = uncor_rgb_lines.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a>;</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>        <span class="comment">// Same chroma always goes though zero, so this is simpler than the others</span></div>
<div class="line"><span class="lineno">  267</span>        samec_rgb_plines.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a> = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  268</span>        samec_rgb_plines.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>   = samec_rgb_lines.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a>;</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>        rgb_luma_plines.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a> = rgb_luma_lines.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a> - rgb_luma_lines.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a> * <a class="code hl_function" href="astcenc__vecmathlib__common__4_8h.html#ae36c7167bc89ff2bf984c1a912526dcb">dot3</a>(rgb_luma_lines.<a class="code hl_variable" href="structline3.html#a9f31b902a534755efedc7f07672353c3">a</a>, rgb_luma_lines.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a>);</div>
<div class="line"><span class="lineno">  271</span>        rgb_luma_plines.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>   = rgb_luma_lines.<a class="code hl_variable" href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">b</a>;</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>        <span class="comment">// Luminance always goes though zero, so this is simpler than the others</span></div>
<div class="line"><span class="lineno">  274</span>        luminance_plines.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a> = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a>();</div>
<div class="line"><span class="lineno">  275</span>        luminance_plines.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>   = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08">unit3</a>();</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>        <a class="code hl_function" href="#a118e8a2374bfd56b522a03f938b0f367">compute_error_squared_rgb_single_partition</a>(</div>
<div class="line"><span class="lineno">  278</span>            pi, i, blk,</div>
<div class="line"><span class="lineno">  279</span>            uncor_rgb_plines, uncorr_rgb_error,</div>
<div class="line"><span class="lineno">  280</span>            samec_rgb_plines, samechroma_rgb_error,</div>
<div class="line"><span class="lineno">  281</span>            rgb_luma_plines,  rgb_luma_error,</div>
<div class="line"><span class="lineno">  282</span>            luminance_plines, luminance_rgb_error,</div>
<div class="line"><span class="lineno">  283</span>                              alpha_drop_error);</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>        <span class="comment">// Determine if we can offset encode RGB lanes</span></div>
<div class="line"><span class="lineno">  286</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> endpt0 = ep.<a class="code hl_variable" href="structendpoints.html#a2a084800ec101a03de2b8deb0d926263">endpt0</a>[i];</div>
<div class="line"><span class="lineno">  287</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> endpt1 = ep.<a class="code hl_variable" href="structendpoints.html#a89660f637b681eaea32e7db6b9d9def2">endpt1</a>[i];</div>
<div class="line"><span class="lineno">  288</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> endpt_diff = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c">abs</a>(endpt1 - endpt0);</div>
<div class="line"><span class="lineno">  289</span>        <a class="code hl_struct" href="structvmask4.html">vmask4</a> endpt_can_offset = endpt_diff &lt; <a class="code hl_struct" href="structvfloat4.html">vfloat4</a>(0.12f * 65535.0f);</div>
<div class="line"><span class="lineno">  290</span>        <span class="keywordtype">bool</span> can_offset_encode = (<a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>(endpt_can_offset) &amp; 0x7) == 0x7;</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>        <span class="comment">// Store out the settings</span></div>
<div class="line"><span class="lineno">  293</span>        eci[i].<a class="code hl_variable" href="structencoding__choice__errors.html#a7833d66ba6360569a3cbad8a9d4c743f">rgb_scale_error</a> = (samechroma_rgb_error - uncorr_rgb_error) * 0.7f;  <span class="comment">// empirical</span></div>
<div class="line"><span class="lineno">  294</span>        eci[i].<a class="code hl_variable" href="structencoding__choice__errors.html#a5db32b77467b23beb70562840f173a54">rgb_luma_error</a>  = (rgb_luma_error - uncorr_rgb_error) * 1.5f;        <span class="comment">// wild guess</span></div>
<div class="line"><span class="lineno">  295</span>        eci[i].<a class="code hl_variable" href="structencoding__choice__errors.html#ad6cf09c5032d45a8e61b750969ff4c27">luminance_error</a> = (luminance_rgb_error - uncorr_rgb_error) * 3.0f;   <span class="comment">// empirical</span></div>
<div class="line"><span class="lineno">  296</span>        eci[i].<a class="code hl_variable" href="structencoding__choice__errors.html#a9f732b537213a9c5caddca5af4d0c15c">alpha_drop_error</a> = alpha_drop_error * 3.0f;</div>
<div class="line"><span class="lineno">  297</span>        eci[i].<a class="code hl_variable" href="structencoding__choice__errors.html#a4ed3d3a0fa3f83ac3a48067030ac49fd">can_offset_encode</a> = can_offset_encode;</div>
<div class="line"><span class="lineno">  298</span>        eci[i].<a class="code hl_variable" href="structencoding__choice__errors.html#a296ff4def93117aadb093f02532b5244">can_blue_contract</a> = !blk.<a class="code hl_function" href="structimage__block.html#ac3e154e58086017c6e405b8cc7e52c9f">is_luminance</a>();</div>
<div class="line"><span class="lineno">  299</span>    }</div>
<div class="line"><span class="lineno">  300</span>}</div>
<div class="ttc" id="aastcenc__averages__and__directions_8cpp_html_a73936e5cf41b74f2b8d9b137a9d64253"><div class="ttname"><a href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253">compute_avgs_and_dirs_3_comp_rgb</a></div><div class="ttdeci">void compute_avgs_and_dirs_3_comp_rgb(const partition_info &amp;pi, const image_block &amp;blk, partition_metrics pm[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">Compute averages and dominant directions for each partition in a 3 component texture.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__averages__and__directions_8cpp_source.html#l00568">astcenc_averages_and_directions.cpp:568</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a2cce51c3362aa0b5040437ac0e7f8969"><div class="ttname"><a href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a></div><div class="ttdeci">#define promise(cond)</div><div class="ttdoc">Functions and data declarations.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00061">astcenc_internal.h:61</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a31f42bb3da7abe95be4b6960feead130"><div class="ttname"><a href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_PARTITIONS</div><div class="ttdoc">The maximum number of partitions a block can support.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00078">astcenc_internal.h:78</a></div></div>
<div class="ttc" id="aastcenc__pick__best__endpoint__format_8cpp_html_a118e8a2374bfd56b522a03f938b0f367"><div class="ttname"><a href="#a118e8a2374bfd56b522a03f938b0f367">compute_error_squared_rgb_single_partition</a></div><div class="ttdeci">static void compute_error_squared_rgb_single_partition(const partition_info &amp;pi, int partition_index, const image_block &amp;blk, const processed_line3 &amp;uncor_pline, float &amp;uncor_err, const processed_line3 &amp;samec_pline, float &amp;samec_err, const processed_line3 &amp;rgbl_pline, float &amp;rgbl_err, const processed_line3 &amp;l_pline, float &amp;l_err, float &amp;a_drop_err)</div><div class="ttdoc">Functions for finding best endpoint format.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00072">astcenc_pick_best_endpoint_format.cpp:72</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a3b0e8ae23a514219217b72164a7909a4"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4">normalize_safe</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 normalize_safe(vfloat4 a, vfloat4 safe)</div><div class="ttdoc">Normalize a vector, returning safe if len is zero.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00300">astcenc_vecmathlib.h:300</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a3cf3e0218d808e69f31668dbc458dc08"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08">unit3</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 unit3()</div><div class="ttdoc">Factory that returns a unit length 3 component vfloat4.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00257">astcenc_vecmathlib.h:257</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ad922a3ed6098767968916265154b6f82"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE unsigned int mask(vmask8 a)</div><div class="ttdoc">Return a 8-bit mask code indicating mask status.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00355">astcenc_vecmathlib_avx2_8.h:355</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__common__4_8h_html_ae36c7167bc89ff2bf984c1a912526dcb"><div class="ttname"><a href="astcenc__vecmathlib__common__4_8h.html#ae36c7167bc89ff2bf984c1a912526dcb">dot3</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat4 dot3(vfloat4 a, vfloat4 b)</div><div class="ttdoc">Return the dot product for the bottom 3 lanes, returning vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__common__4_8h_source.html#l00330">astcenc_vecmathlib_common_4.h:330</a></div></div>
<div class="ttc" id="astructimage__block_html_ac3e154e58086017c6e405b8cc7e52c9f"><div class="ttname"><a href="structimage__block.html#ac3e154e58086017c6e405b8cc7e52c9f">image_block::is_luminance</a></div><div class="ttdeci">bool is_luminance() const</div><div class="ttdoc">Test if this block is a luminance block with constant 1.0 alpha.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00859">astcenc_internal.h:859</a></div></div>
<div class="ttc" id="astructline3_html"><div class="ttname"><a href="structline3.html">line3</a></div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00457">astcenc_mathlib.h:458</a></div></div>
<div class="ttc" id="astructline3_html_a38cf244ed3886bcb8bbee41ce48a8758"><div class="ttname"><a href="structline3.html#a38cf244ed3886bcb8bbee41ce48a8758">line3::b</a></div><div class="ttdeci">vfloat4 b</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00460">astcenc_mathlib.h:460</a></div></div>
<div class="ttc" id="astructline3_html_a9f31b902a534755efedc7f07672353c3"><div class="ttname"><a href="structline3.html#a9f31b902a534755efedc7f07672353c3">line3::a</a></div><div class="ttdeci">vfloat4 a</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00459">astcenc_mathlib.h:459</a></div></div>
<div class="ttc" id="astructpartition__info_html_a1ffb0fdd4d560f536d6118f032fba4f3"><div class="ttname"><a href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_info::partition_count</a></div><div class="ttdeci">uint16_t partition_count</div><div class="ttdoc">The number of partitions in this partitioning.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00315">astcenc_internal.h:315</a></div></div>
<div class="ttc" id="astructpartition__metrics_html"><div class="ttname"><a href="structpartition__metrics.html">partition_metrics</a></div><div class="ttdoc">Computed metrics about a partition in a block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00269">astcenc_internal.h:270</a></div></div>
<div class="ttc" id="astructpartition__metrics_html_a5a05f959255774e848e83001f9b7bd37"><div class="ttname"><a href="structpartition__metrics.html#a5a05f959255774e848e83001f9b7bd37">partition_metrics::dir</a></div><div class="ttdeci">vfloat4 dir</div><div class="ttdoc">The dominant error-weighted direction in the partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00275">astcenc_internal.h:275</a></div></div>
<div class="ttc" id="astructpartition__metrics_html_a81851ed35dd9dc3ce09a74b8167f5846"><div class="ttname"><a href="structpartition__metrics.html#a81851ed35dd9dc3ce09a74b8167f5846">partition_metrics::avg</a></div><div class="ttdeci">vfloat4 avg</div><div class="ttdoc">The error-weighted average color in the partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00272">astcenc_internal.h:272</a></div></div>
<div class="ttc" id="astructprocessed__line3_html"><div class="ttname"><a href="structprocessed__line3.html">processed_line3</a></div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00476">astcenc_mathlib.h:477</a></div></div>
<div class="ttc" id="astructprocessed__line3_html_aa87031817df0c101f16e5e0a7687f10d"><div class="ttname"><a href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">processed_line3::bs</a></div><div class="ttdeci">vfloat4 bs</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00479">astcenc_mathlib.h:479</a></div></div>
<div class="ttc" id="astructprocessed__line3_html_ab2637ed29af1632d3181cd1bc7d7cef0"><div class="ttname"><a href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">processed_line3::amod</a></div><div class="ttdeci">vfloat4 amod</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00478">astcenc_mathlib.h:478</a></div></div>
<div class="ttc" id="astructvfloat4_html_a04b5f338012dab6be0b2bd7910fcbcae"><div class="ttname"><a href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloat4::zero</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vfloat4 zero()</div><div class="ttdoc">Factory that returns a vector of zeros.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00116">astcenc_vecmathlib_neon_4.h:116</a></div></div>
<div class="ttc" id="astructvmask4_html"><div class="ttname"><a href="structvmask4.html">vmask4</a></div><div class="ttdoc">Data type for 4-wide control plane masks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00313">astcenc_vecmathlib_neon_4.h:314</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_affc96d3eeffef962cd64307bf0b85590_cgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_affc96d3eeffef962cd64307bf0b85590_cgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_affc96d3eeffef962cd64307bf0b85590_cgraph" id="aastcenc__pick__best__endpoint__format_8cpp_affc96d3eeffef962cd64307bf0b85590_cgraph">
<area shape="rect" title="For a given set of input colors and partitioning determine endpoint encode errors." alt="" coords="5,415,181,455"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c" title="Return the absolute value of the float vector." alt="" coords="297,97,340,123"/>
<area shape="poly" title=" " alt="" coords="96,414,109,360,134,287,172,209,198,172,228,140,254,123,283,113,285,118,257,128,231,144,202,176,177,212,138,289,114,362,101,416"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="238,198,399,238"/>
<area shape="poly" title=" " alt="" coords="113,413,285,246,289,249,117,417"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="533,255,587,280"/>
<area shape="poly" title=" " alt="" coords="144,413,284,359,455,297,518,276,520,282,457,302,286,364,146,418"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="515,5,605,31"/>
<area shape="poly" title=" " alt="" coords="97,414,112,367,138,305,176,240,200,210,228,184,252,168,274,160,318,156,360,153,383,146,406,132,422,115,430,98,438,79,454,60,477,45,501,33,503,38,479,49,458,64,443,82,435,100,427,118,410,136,385,151,362,158,318,162,276,165,254,173,231,188,204,214,181,243,143,307,117,369,102,416"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a118e8a2374bfd56b522a03f938b0f367" title="Functions for finding best endpoint format." alt="" coords="239,415,398,455"/>
<area shape="poly" title=" " alt="" coords="181,433,226,433,226,438,181,438"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#ae36c7167bc89ff2bf984c1a912526dcb" title="Return the dot product for the bottom 3 lanes, returning vector." alt="" coords="295,629,342,655"/>
<area shape="poly" title=" " alt="" coords="106,455,125,490,152,534,188,578,231,616,256,628,282,635,281,640,254,633,228,620,184,582,148,537,120,493,102,457"/>
<area shape="rect" href="structimage__block.html#ac3e154e58086017c6e405b8cc7e52c9f" title="Test if this block is a luminance block with constant 1.0 alpha." alt="" coords="229,531,408,556"/>
<area shape="poly" title=" " alt="" coords="137,453,280,522,278,527,135,458"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4" title="Normalize a vector, returning safe if len is zero." alt="" coords="264,580,373,605"/>
<area shape="poly" title=" " alt="" coords="112,454,161,510,194,541,231,566,252,576,250,581,228,571,191,545,157,514,108,458"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08" title="Factory that returns a unit length 3 component vfloat4." alt="" coords="293,679,344,704"/>
<area shape="poly" title=" " alt="" coords="103,455,119,499,145,556,182,615,205,642,231,665,255,678,280,685,279,690,253,683,228,670,201,646,178,618,140,558,114,501,98,457"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#ac5429bc77cf39a7dba332af8fb14e093" title="Functions for finding dominant direction of a set of colors." alt="" coords="456,205,664,231"/>
<area shape="poly" title=" " alt="" coords="399,215,442,215,442,221,399,221"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="716,95,805,120"/>
<area shape="poly" title=" " alt="" coords="379,196,406,177,421,156,427,133,435,111,454,92,486,77,520,68,555,65,590,65,657,74,713,88,711,93,656,79,590,70,556,70,521,74,488,82,458,96,439,114,433,135,426,158,410,181,381,200"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="540,407,580,432"/>
<area shape="poly" title=" " alt="" coords="345,236,534,395,531,399,342,240"/>
<area shape="poly" title=" " alt="" coords="400,232,520,257,519,262,399,237"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="531,156,589,181"/>
<area shape="poly" title=" " alt="" coords="399,199,517,174,518,180,400,204"/>
<area shape="rect" href="structimage__block.html#a682b1ada02acb8369d6f6f30378b260e" title="Get an RGB texel value from the data." alt="" coords="491,107,629,132"/>
<area shape="poly" title=" " alt="" coords="370,195,407,177,430,158,455,141,476,133,478,138,457,146,433,163,409,182,372,200"/>
<area shape="poly" title=" " alt="" coords="382,196,406,177,418,161,424,146,428,113,433,81,441,64,454,48,476,33,500,24,502,29,478,38,458,52,445,67,438,82,434,114,430,147,423,164,410,181,385,200"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="713,320,809,345"/>
<area shape="poly" title=" " alt="" coords="638,228,665,240,700,268,740,308,736,312,697,272,663,244,636,233"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="729,407,793,432"/>
<area shape="poly" title=" " alt="" coords="648,229,666,240,688,267,696,295,701,324,714,357,741,394,737,398,710,359,696,325,691,296,683,270,662,244,645,233"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="712,244,809,269"/>
<area shape="poly" title=" " alt="" coords="627,228,698,242,697,247,626,233"/>
<area shape="poly" title=" " alt="" coords="632,203,663,190,704,161,737,129,741,133,708,165,665,195,634,208"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a1a2e12d78738b0b4b550f57b2dc05f07" title="Factory that returns a 3 component vfloat4." alt="" coords="731,193,790,219"/>
<area shape="poly" title=" " alt="" coords="664,209,717,206,718,211,665,214"/>
<area shape="poly" title=" " alt="" coords="736,321,731,312,733,302,744,296,761,293,781,297,790,305,786,309,778,302,761,299,745,301,738,305,736,311,740,319"/>
<area shape="poly" title=" " alt="" coords="736,408,731,398,733,389,744,382,761,380,781,384,790,392,786,396,778,388,761,385,745,387,738,392,736,398,740,405"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="867,244,950,269"/>
<area shape="poly" title=" " alt="" coords="810,254,854,254,854,259,810,259"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="863,616,954,641"/>
<area shape="poly" title=" " alt="" coords="774,119,794,146,812,180,834,239,852,300,881,421,898,528,908,602,902,603,893,528,875,422,847,301,829,240,807,182,789,148,770,122"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="857,57,960,83"/>
<area shape="poly" title=" " alt="" coords="805,94,844,84,845,89,806,99"/>
<area shape="poly" title=" " alt="" coords="580,417,715,417,715,422,580,422"/>
<area shape="poly" title=" " alt="" coords="631,129,665,141,702,161,734,182,731,187,699,165,663,146,629,134"/>
<area shape="poly" title=" " alt="" coords="606,22,844,58,844,63,605,27"/>
<area shape="poly" title=" " alt="" coords="383,413,455,393,585,363,698,341,700,346,586,369,457,398,385,418"/>
<area shape="poly" title=" " alt="" coords="398,442,523,449,594,448,664,442,715,431,716,436,664,447,594,453,523,454,398,447"/>
<area shape="poly" title=" " alt="" coords="356,413,407,384,430,367,455,352,512,329,558,316,604,306,663,289,712,272,714,277,665,294,606,311,559,321,513,334,457,356,433,371,409,388,359,418"/>
<area shape="poly" title=" " alt="" coords="340,454,390,500,422,524,457,544,533,567,640,588,850,619,849,624,639,594,531,572,455,548,419,528,387,504,337,458"/>
<area shape="poly" title=" " alt="" coords="345,413,406,360,419,343,428,327,438,312,454,297,486,281,518,271,520,276,488,286,458,302,442,316,433,330,424,346,410,364,349,417"/>
<area shape="poly" title=" " alt="" coords="328,414,365,342,405,249,418,205,424,168,432,133,454,92,485,60,520,35,523,40,489,64,458,96,437,135,429,169,423,206,411,251,369,344,333,416"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="529,508,591,533"/>
<area shape="poly" title=" " alt="" coords="370,453,457,486,517,506,516,511,455,491,368,458"/>
<area shape="rect" href="structimage__block.html#ab5d7af0f7b40343941660350ac186fab" title="Get the default alpha value for endpoints that don&#39;t store it." alt="" coords="477,609,643,649"/>
<area shape="poly" title=" " alt="" coords="346,454,410,518,424,538,432,555,441,572,458,588,477,600,474,605,454,592,437,575,428,558,419,541,406,521,342,457"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e" title="Return the horizontal sum of RGB vector lanes as a scalar." alt="" coords="515,825,605,851"/>
<area shape="poly" title=" " alt="" coords="343,640,377,647,394,654,410,665,424,683,431,701,435,736,438,771,445,788,458,804,479,819,503,828,501,833,476,823,454,808,440,790,433,772,430,737,426,702,419,686,406,669,392,659,375,652,342,645"/>
<area shape="rect" href="structvint4.html#a01e3f7debf73dc6c757fa36d585c9d17" title="Get the scalar from a single lane." alt="" coords="721,825,801,851"/>
<area shape="poly" title=" " alt="" coords="605,835,706,835,706,841,605,841"/>
<area shape="poly" title=" " alt="" coords="388,554,410,567,421,578,428,591,433,616,439,639,446,649,457,658,509,682,564,694,621,697,678,693,733,684,784,671,865,644,867,649,785,676,734,689,679,699,621,703,563,699,507,687,455,663,442,653,434,641,428,617,423,593,417,582,406,571,385,558"/>
<area shape="poly" title=" " alt="" coords="370,554,409,566,457,588,492,601,490,606,455,592,407,571,368,559"/>
<area shape="poly" title=" " alt="" coords="375,597,393,604,410,616,424,635,431,654,432,693,435,729,442,745,458,760,504,787,547,801,588,803,628,795,670,779,713,758,808,702,848,676,882,648,885,652,851,680,811,707,715,762,672,784,630,800,588,808,546,806,501,792,454,764,438,748,430,730,427,693,426,655,419,637,406,620,391,609,373,602"/>
<area shape="poly" title=" " alt="" coords="372,582,406,566,423,550,431,534,439,515,454,495,490,462,526,436,530,441,494,466,458,498,444,518,436,536,427,553,410,571,375,587"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a46b31b19ff13c14adb023db4b5df8e52" title="Return the sqrt of the lanes in the vector." alt="" coords="538,724,582,749"/>
<area shape="poly" title=" " alt="" coords="374,598,393,605,410,616,428,638,435,660,441,682,458,703,490,721,525,730,524,735,488,726,454,707,437,684,430,662,423,640,406,620,390,610,373,603"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_affc96d3eeffef962cd64307bf0b85590_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_affc96d3eeffef962cd64307bf0b85590_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_affc96d3eeffef962cd64307bf0b85590_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_affc96d3eeffef962cd64307bf0b85590_icgraph">
<area shape="rect" title="For a given set of input colors and partitioning determine endpoint encode errors." alt="" coords="1449,37,1625,77"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="poly" title=" " alt="" coords="1436,60,1401,60,1401,55,1436,55"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="a118e8a2374bfd56b522a03f938b0f367" name="a118e8a2374bfd56b522a03f938b0f367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a118e8a2374bfd56b522a03f938b0f367">&#9670;&#160;</a></span>compute_error_squared_rgb_single_partition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void compute_error_squared_rgb_single_partition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>partition_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structprocessed__line3.html">processed_line3</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>uncor_pline</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;</td>          <td class="paramname"><span class="paramname"><em>uncor_err</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structprocessed__line3.html">processed_line3</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>samec_pline</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;</td>          <td class="paramname"><span class="paramname"><em>samec_err</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structprocessed__line3.html">processed_line3</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>rgbl_pline</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;</td>          <td class="paramname"><span class="paramname"><em>rgbl_err</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structprocessed__line3.html">processed_line3</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>l_pline</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;</td>          <td class="paramname"><span class="paramname"><em>l_err</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;</td>          <td class="paramname"><span class="paramname"><em>a_drop_err</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Functions for finding best endpoint format. </p>
<p>We assume there are two independent sources of error in any given partition:</p>
<ul>
<li>Encoding choice errors</li>
<li>Quantization errors</li>
</ul>
<p>Encoding choice errors are caused by encoder decisions. For example:</p>
<ul>
<li>Using luminance instead of separate RGB components.</li>
<li>Using a constant 1.0 alpha instead of storing an alpha component.</li>
<li>Using RGB+scale instead of storing two full RGB endpoints.</li>
</ul>
<p>Quantization errors occur due to the limited precision we use for storage. These errors generally scale with quantization level, but are not actually independent of color encoding. In particular:</p>
<ul>
<li>If we can use offset encoding then quantization error is halved.</li>
<li>If we can use blue-contraction then quantization error for RG is halved.</li>
<li>If we use HDR endpoints the quantization error is higher.</li>
</ul>
<p>Apart from these effects, we assume the error is proportional to the quantization step size.</p>
<p>Compute the errors of the endpoint line options for one partition.</p>
<p>Uncorrelated data assumes storing completely independent RGBA channels for each endpoint. Same chroma data assumes storing RGBA endpoints which pass though the origin (LDR only). RGBL data assumes storing RGB + lumashift (HDR only). Luminance error assumes storing RGB channels as a single value.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info data. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">partition_index</td><td>The partition index to compule the error for. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">uncor_pline</td><td>The endpoint line assuming uncorrelated endpoints. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">uncor_err</td><td>The computed error for the uncorrelated endpoint line. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">samec_pline</td><td>The endpoint line assuming the same chroma for both endpoints. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">samec_err</td><td>The computed error for the uncorrelated endpoint line. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">rgbl_pline</td><td>The endpoint line assuming RGB + lumashift data. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rgbl_err</td><td>The computed error for the RGB + lumashift endpoint line. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">l_pline</td><td>The endpoint line assuming luminance data. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">l_err</td><td>The computed error for the luminance endpoint line. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">a_drop_err</td><td>The computed error for dropping the alpha component. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00072">72</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">   85</span>  {</div>
<div class="line"><span class="lineno">   86</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat4</a> ews = blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>;</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> texel_count = pi.<a class="code hl_variable" href="structpartition__info.html#a92b324c921407ee30e6052426e00e0f6">partition_texel_count</a>[partition_index];</div>
<div class="line"><span class="lineno">   89</span>    <span class="keyword">const</span> uint8_t* texel_indexes = pi.<a class="code hl_variable" href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">texels_of_partition</a>[partition_index];</div>
<div class="line"><span class="lineno">   90</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(texel_count &gt; 0);</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> a_drop_errv = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">   93</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> default_a(blk.<a class="code hl_function" href="structimage__block.html#ab5d7af0f7b40343941660350ac186fab">get_default_alpha</a>());</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> uncor_errv = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">   96</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_bs0(uncor_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">   97</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_bs1(uncor_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">   98</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_bs2(uncor_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_amod0(uncor_pline.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  101</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_amod1(uncor_pline.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  102</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> uncor_amod2(uncor_pline.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> samec_errv = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">  105</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_bs0(samec_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  106</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_bs1(samec_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  107</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> samec_bs2(samec_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> rgbl_errv = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">  110</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> rgbl_bs0(rgbl_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  111</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> rgbl_bs1(rgbl_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  112</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> rgbl_bs2(rgbl_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> rgbl_amod0(rgbl_pline.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  115</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> rgbl_amod1(rgbl_pline.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  116</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> rgbl_amod2(rgbl_pline.<a class="code hl_variable" href="structprocessed__line3.html#ab2637ed29af1632d3181cd1bc7d7cef0">amod</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    <a class="code hl_struct" href="structvfloat4.html">vfloatacc</a> l_errv = <a class="code hl_function" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae">vfloatacc::zero</a>();</div>
<div class="line"><span class="lineno">  119</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_bs0(l_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;());</div>
<div class="line"><span class="lineno">  120</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_bs1(l_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;());</div>
<div class="line"><span class="lineno">  121</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> l_bs2(l_pline.<a class="code hl_variable" href="structprocessed__line3.html#aa87031817df0c101f16e5e0a7687f10d">bs</a>.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;());</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>    <a class="code hl_struct" href="structvint4.html">vint</a> lane_ids = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint::lane_id</a>();</div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; texel_count; i += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  125</span>    {</div>
<div class="line"><span class="lineno">  126</span>        <a class="code hl_struct" href="structvint4.html">vint</a> tix(texel_indexes + i);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>        <a class="code hl_struct" href="structvmask4.html">vmask</a> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = lane_ids &lt; <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(texel_count);</div>
<div class="line"><span class="lineno">  129</span>        lane_ids += <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(<a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>);</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>        <span class="comment">// Compute the error that arises from just ditching alpha</span></div>
<div class="line"><span class="lineno">  132</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_a = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">data_a</a>, tix);</div>
<div class="line"><span class="lineno">  133</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> alpha_diff = data_a - default_a;</div>
<div class="line"><span class="lineno">  134</span>        alpha_diff = alpha_diff * alpha_diff;</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(a_drop_errv, alpha_diff, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_r = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">data_r</a>, tix);</div>
<div class="line"><span class="lineno">  139</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_g = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">data_g</a>, tix);</div>
<div class="line"><span class="lineno">  140</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> data_b = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a>(blk.<a class="code hl_variable" href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">data_b</a>, tix);</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>        <span class="comment">// Compute uncorrelated error</span></div>
<div class="line"><span class="lineno">  143</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> param = data_r * uncor_bs0</div>
<div class="line"><span class="lineno">  144</span>                     + data_g * uncor_bs1</div>
<div class="line"><span class="lineno">  145</span>                     + data_b * uncor_bs2;</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> dist0 = (uncor_amod0 + param * uncor_bs0) - data_r;</div>
<div class="line"><span class="lineno">  148</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> dist1 = (uncor_amod1 + param * uncor_bs1) - data_g;</div>
<div class="line"><span class="lineno">  149</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> dist2 = (uncor_amod2 + param * uncor_bs2) - data_b;</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> error = dist0 * dist0 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;()</div>
<div class="line"><span class="lineno">  152</span>                     + dist1 * dist1 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;()</div>
<div class="line"><span class="lineno">  153</span>                     + dist2 * dist2 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;();</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(uncor_errv, error, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>        <span class="comment">// Compute same chroma error - no &quot;amod&quot;, its always zero</span></div>
<div class="line"><span class="lineno">  158</span>        param = data_r * samec_bs0</div>
<div class="line"><span class="lineno">  159</span>              + data_g * samec_bs1</div>
<div class="line"><span class="lineno">  160</span>              + data_b * samec_bs2;</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>        dist0 = (param * samec_bs0) - data_r;</div>
<div class="line"><span class="lineno">  163</span>        dist1 = (param * samec_bs1) - data_g;</div>
<div class="line"><span class="lineno">  164</span>        dist2 = (param * samec_bs2) - data_b;</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>        error = dist0 * dist0 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;()</div>
<div class="line"><span class="lineno">  167</span>              + dist1 * dist1 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;()</div>
<div class="line"><span class="lineno">  168</span>              + dist2 * dist2 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;();</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(samec_errv, error, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>        <span class="comment">// Compute rgbl error</span></div>
<div class="line"><span class="lineno">  173</span>        param = data_r * rgbl_bs0</div>
<div class="line"><span class="lineno">  174</span>              + data_g * rgbl_bs1</div>
<div class="line"><span class="lineno">  175</span>              + data_b * rgbl_bs2;</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>        dist0 = (rgbl_amod0 + param * rgbl_bs0) - data_r;</div>
<div class="line"><span class="lineno">  178</span>        dist1 = (rgbl_amod1 + param * rgbl_bs1) - data_g;</div>
<div class="line"><span class="lineno">  179</span>        dist2 = (rgbl_amod2 + param * rgbl_bs2) - data_b;</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>        error = dist0 * dist0 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;()</div>
<div class="line"><span class="lineno">  182</span>              + dist1 * dist1 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;()</div>
<div class="line"><span class="lineno">  183</span>              + dist2 * dist2 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;();</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(rgbl_errv, error, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>        <span class="comment">// Compute luma error - no &quot;amod&quot;, its always zero</span></div>
<div class="line"><span class="lineno">  188</span>        param = data_r * l_bs0</div>
<div class="line"><span class="lineno">  189</span>              + data_g * l_bs1</div>
<div class="line"><span class="lineno">  190</span>              + data_b * l_bs2;</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>        dist0 = (param * l_bs0) - data_r;</div>
<div class="line"><span class="lineno">  193</span>        dist1 = (param * l_bs1) - data_g;</div>
<div class="line"><span class="lineno">  194</span>        dist2 = (param * l_bs2) - data_b;</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>        error = dist0 * dist0 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;0&gt;()</div>
<div class="line"><span class="lineno">  197</span>              + dist1 * dist1 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;1&gt;()</div>
<div class="line"><span class="lineno">  198</span>              + dist2 * dist2 * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;2&gt;();</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>        <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a>(l_errv, error, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno">  201</span>    }</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    a_drop_err = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(a_drop_errv) * ews.<a class="code hl_function" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc">lane</a>&lt;3&gt;();</div>
<div class="line"><span class="lineno">  204</span>    uncor_err = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(uncor_errv);</div>
<div class="line"><span class="lineno">  205</span>    samec_err = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(samec_errv);</div>
<div class="line"><span class="lineno">  206</span>    rgbl_err = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(rgbl_errv);</div>
<div class="line"><span class="lineno">  207</span>    l_err = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a>(l_errv);</div>
<div class="line"><span class="lineno">  208</span>}</div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a1d994704cca1a088c460bd5a3058e3bc"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a></div><div class="ttdeci">vint4 vint</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00150">astcenc_vecmathlib.h:150</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_aaf679f3389069313db808a4ebd6af8ad"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a></div><div class="ttdeci">#define ASTCENC_SIMD_WIDTH</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00146">astcenc_vecmathlib.h:146</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aaa291a197219a09a2e1103aec6945b3c"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c">haccumulate</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE void haccumulate(vfloat4 &amp;accum, vfloat8 a)</div><div class="ttdoc">Accumulate lane-wise sums for a vector, folded 4-wide.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00925">astcenc_vecmathlib_avx2_8.h:925</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aacd26478e4fe1f97a5d47e8adaacc898"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898">hadd_s</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE float hadd_s(vfloat8 a)</div><div class="ttdoc">Return the horizontal sum of a vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00896">astcenc_vecmathlib_avx2_8.h:896</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_aae2f99eb48f3cde0f4739b894e8ca29f"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f">gatherf</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vfloat8 gatherf(const float *base, vint8 indices)</div><div class="ttdoc">Load a vector of gathered results from an array;</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00977">astcenc_vecmathlib_avx2_8.h:977</a></div></div>
<div class="ttc" id="astructimage__block_html_a298273079b0de525a0c12ced8bf98d13"><div class="ttname"><a href="structimage__block.html#a298273079b0de525a0c12ced8bf98d13">image_block::data_b</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_b[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the blue color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00753">astcenc_internal.h:753</a></div></div>
<div class="ttc" id="astructimage__block_html_a602c8c88dc1ceef33e833f6d6cbc09ea"><div class="ttname"><a href="structimage__block.html#a602c8c88dc1ceef33e833f6d6cbc09ea">image_block::data_a</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_a[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the alpha color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00756">astcenc_internal.h:756</a></div></div>
<div class="ttc" id="astructimage__block_html_a6fd749c93e25e5e96748a10387c24a77"><div class="ttname"><a href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">image_block::channel_weight</a></div><div class="ttdeci">vfloat4 channel_weight</div><div class="ttdoc">The relative error significance of the color channels.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00774">astcenc_internal.h:774</a></div></div>
<div class="ttc" id="astructimage__block_html_ab5d7af0f7b40343941660350ac186fab"><div class="ttname"><a href="structimage__block.html#ab5d7af0f7b40343941660350ac186fab">image_block::get_default_alpha</a></div><div class="ttdeci">float get_default_alpha() const</div><div class="ttdoc">Get the default alpha value for endpoints that don't store it.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00833">astcenc_internal.h:833</a></div></div>
<div class="ttc" id="astructimage__block_html_abc5bc97aed6bb644726f952818ec74b5"><div class="ttname"><a href="structimage__block.html#abc5bc97aed6bb644726f952818ec74b5">image_block::data_g</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_g[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the green color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00750">astcenc_internal.h:750</a></div></div>
<div class="ttc" id="astructimage__block_html_acd4ea54654959c7b325efe9d02aaeacc"><div class="ttname"><a href="structimage__block.html#acd4ea54654959c7b325efe9d02aaeacc">image_block::data_r</a></div><div class="ttdeci">ASTCENC_ALIGNAS float data_r[BLOCK_MAX_TEXELS+ASTCENC_SIMD_WIDTH - 1]</div><div class="ttdoc">The input (compress) or output (decompress) data for the red color component.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00747">astcenc_internal.h:747</a></div></div>
<div class="ttc" id="astructpartition__info_html_af0987713fff05a82c3230d9400c6e1e7"><div class="ttname"><a href="structpartition__info.html#af0987713fff05a82c3230d9400c6e1e7">partition_info::texels_of_partition</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t texels_of_partition[BLOCK_MAX_PARTITIONS][BLOCK_MAX_TEXELS]</div><div class="ttdoc">The list of texels in each partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00332">astcenc_internal.h:332</a></div></div>
<div class="ttc" id="astructvint4_html"><div class="ttname"><a href="structvint4.html">vint4</a></div><div class="ttdoc">Data type for 4-wide ints.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00183">astcenc_vecmathlib_neon_4.h:184</a></div></div>
<div class="ttc" id="astructvint4_html_a21e3d111e37da1aaaeb5ba21a831c863"><div class="ttname"><a href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint4::lane_id</a></div><div class="ttdeci">static ASTCENC_SIMD_INLINE vint4 lane_id()</div><div class="ttdoc">Factory that returns a vector containing the lane IDs.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__neon__4_8h_source.html#l00294">astcenc_vecmathlib_neon_4.h:294</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a118e8a2374bfd56b522a03f938b0f367_cgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a118e8a2374bfd56b522a03f938b0f367_cgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a118e8a2374bfd56b522a03f938b0f367_cgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a118e8a2374bfd56b522a03f938b0f367_cgraph">
<area shape="rect" title="Functions for finding best endpoint format." alt="" coords="5,235,164,275"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="265,5,326,31"/>
<area shape="poly" title=" " alt="" coords="90,234,105,194,130,142,165,88,187,63,210,41,230,30,251,22,252,27,232,35,214,45,190,67,170,91,135,144,110,196,95,236"/>
<area shape="rect" href="structimage__block.html#ab5d7af0f7b40343941660350ac186fab" title="Get the default alpha value for endpoints that don&#39;t store it." alt="" coords="212,55,379,95"/>
<area shape="poly" title=" " alt="" coords="96,233,142,171,174,136,210,105,218,100,221,104,214,109,178,140,146,174,101,236"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="247,144,343,169"/>
<area shape="poly" title=" " alt="" coords="114,233,159,205,211,178,234,170,235,175,213,183,161,210,117,237"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="263,217,327,243"/>
<area shape="poly" title=" " alt="" coords="164,243,249,233,250,238,164,248"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="250,267,341,292"/>
<area shape="poly" title=" " alt="" coords="164,262,237,270,236,275,164,267"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="247,316,344,341"/>
<area shape="poly" title=" " alt="" coords="138,273,213,301,238,309,237,314,211,306,136,278"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="268,365,323,391"/>
<area shape="poly" title=" " alt="" coords="109,273,155,312,213,350,256,366,254,371,211,355,152,317,105,278"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="250,415,341,440"/>
<area shape="poly" title=" " alt="" coords="100,274,145,337,177,372,213,401,238,413,236,418,211,406,173,375,140,340,95,277"/>
<area shape="poly" title=" " alt="" coords="265,145,259,136,262,126,275,120,295,117,320,121,331,130,327,134,318,126,295,123,276,125,266,129,264,135,270,142"/>
<area shape="poly" title=" " alt="" coords="265,219,259,209,262,199,275,193,295,191,320,194,331,203,327,207,318,199,295,196,276,198,266,203,264,208,270,216"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="437,316,519,341"/>
<area shape="poly" title=" " alt="" coords="344,326,423,326,423,331,344,331"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="427,415,529,440"/>
<area shape="poly" title=" " alt="" coords="341,425,412,425,412,430,341,430"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a118e8a2374bfd56b522a03f938b0f367_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a118e8a2374bfd56b522a03f938b0f367_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a118e8a2374bfd56b522a03f938b0f367_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a118e8a2374bfd56b522a03f938b0f367_icgraph">
<area shape="rect" title="Functions for finding best endpoint format." alt="" coords="1673,37,1832,77"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#affc96d3eeffef962cd64307bf0b85590" title="For a given set of input colors and partitioning determine endpoint encode errors." alt="" coords="1449,37,1625,77"/>
<area shape="poly" title=" " alt="" coords="1659,60,1626,60,1626,55,1659,55"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="poly" title=" " alt="" coords="1436,60,1401,60,1401,55,1436,55"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="a81c7b68e8c7b82a5ff718f21bd4f3c35" name="a81c7b68e8c7b82a5ff718f21bd4f3c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81c7b68e8c7b82a5ff718f21bd4f3c35">&#9670;&#160;</a></span>compute_ideal_endpoint_formats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int compute_ideal_endpoint_formats </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpartition__info.html">partition_info</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structimage__block.html">image_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>blk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structendpoints.html">endpoints</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ep</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int8_t *</td>          <td class="paramname"><span class="paramname"><em>qwt_bitcounts</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float *</td>          <td class="paramname"><span class="paramname"><em>qwt_errors</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>tune_candidate_limit</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>start_block_mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>end_block_mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>partition_format_specifiers</em></span>[TUNE_MAX_TRIAL_CANDIDATES][BLOCK_MAX_PARTITIONS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>block_mode</em></span>[TUNE_MAX_TRIAL_CANDIDATES], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a></td>          <td class="paramname"><span class="paramname"><em>quant_level</em></span>[TUNE_MAX_TRIAL_CANDIDATES], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a></td>          <td class="paramname"><span class="paramname"><em>quant_level_mod</em></span>[TUNE_MAX_TRIAL_CANDIDATES], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcompression__working__buffers.html">compression_working_buffers</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>tmpbuf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identify, for each mode, which set of color endpoint produces the best result. </p>
<p>Returns the best <code>tune_candidate_limit</code> best looking modes, along with the ideal color encoding combination for each. The modified quantization level can be used when all formats are the same, as this frees up two additional bits of storage.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">pi</td><td>The partition info for the current trial. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">blk</td><td>The image block color data to compress. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ep</td><td>The ideal endpoints. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">qwt_bitcounts</td><td>Bit counts for different quantization methods. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">qwt_errors</td><td>Errors for different quantization methods. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">tune_candidate_limit</td><td>The max number of candidates to return, may be less. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">start_block_mode</td><td>The first block mode to inspect. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">end_block_mode</td><td>The last block mode to inspect. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">partition_format_specifiers</td><td>The best formats per partition. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname"><a class="el" href="structblock__mode.html" title="Metadata for single block mode for a specific block size.">block_mode</a></td><td>The best packed block mode indexes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">quant_level</td><td>The best color quant level. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">quant_level_mod</td><td>The best color quant level if endpoints are the same. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tmpbuf</td><td>Preallocated scratch buffers for the compressor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The actual number of candidate matches returned. </dd></dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l01090">1090</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1106</span>  {</div>
<div class="line"><span class="lineno"> 1107</span>    <span class="keywordtype">int</span> partition_count = pi.<a class="code hl_variable" href="structpartition__info.html#a1ffb0fdd4d560f536d6118f032fba4f3">partition_count</a>;</div>
<div class="line"><span class="lineno"> 1108</span> </div>
<div class="line"><span class="lineno"> 1109</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno"> 1110</span> </div>
<div class="line"><span class="lineno"> 1111</span>    <span class="keywordtype">bool</span> encode_hdr_rgb = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(blk.<a class="code hl_variable" href="structimage__block.html#af1a9e601f3d03dc488993b81258058e0">rgb_lns</a>[0]);</div>
<div class="line"><span class="lineno"> 1112</span>    <span class="keywordtype">bool</span> encode_hdr_alpha = <span class="keyword">static_cast&lt;</span><span class="keywordtype">bool</span><span class="keyword">&gt;</span>(blk.<a class="code hl_variable" href="structimage__block.html#ade6f78d73e016d4e9222cbe89f5b1eec">alpha_lns</a>[0]);</div>
<div class="line"><span class="lineno"> 1113</span> </div>
<div class="line"><span class="lineno"> 1114</span>    <span class="comment">// Compute the errors that result from various encoding choices (such as using luminance instead</span></div>
<div class="line"><span class="lineno"> 1115</span>    <span class="comment">// of RGB, discarding Alpha, using RGB-scale in place of two separate RGB endpoints and so on)</span></div>
<div class="line"><span class="lineno"> 1116</span>    <a class="code hl_struct" href="structencoding__choice__errors.html">encoding_choice_errors</a> eci[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno"> 1117</span>    <a class="code hl_function" href="#affc96d3eeffef962cd64307bf0b85590">compute_encoding_choice_errors</a>(blk, pi, ep, eci);</div>
<div class="line"><span class="lineno"> 1118</span> </div>
<div class="line"><span class="lineno"> 1119</span>    <span class="keywordtype">float</span> best_error[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>][21][4];</div>
<div class="line"><span class="lineno"> 1120</span>    uint8_t format_of_choice[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>][21][4];</div>
<div class="line"><span class="lineno"> 1121</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno"> 1122</span>    {</div>
<div class="line"><span class="lineno"> 1123</span>        <a class="code hl_function" href="#a163a7d0cf020b6f86049745807912ec1">compute_color_error_for_every_integer_count_and_quant_level</a>(</div>
<div class="line"><span class="lineno"> 1124</span>            encode_hdr_rgb, encode_hdr_alpha, i,</div>
<div class="line"><span class="lineno"> 1125</span>            pi, eci[i], ep, blk.<a class="code hl_variable" href="structimage__block.html#a6fd749c93e25e5e96748a10387c24a77">channel_weight</a>, best_error[i],</div>
<div class="line"><span class="lineno"> 1126</span>            format_of_choice[i]);</div>
<div class="line"><span class="lineno"> 1127</span>    }</div>
<div class="line"><span class="lineno"> 1128</span> </div>
<div class="line"><span class="lineno"> 1129</span>    <span class="keywordtype">float</span>* errors_of_best_combination = tmpbuf.<a class="code hl_variable" href="structcompression__working__buffers.html#afb2e61360f7ae7d2145168f6b58dda79">errors_of_best_combination</a>;</div>
<div class="line"><span class="lineno"> 1130</span>    uint8_t* best_quant_levels = tmpbuf.<a class="code hl_variable" href="structcompression__working__buffers.html#a7044bbc3a97268556df665be7e95d8ec">best_quant_levels</a>;</div>
<div class="line"><span class="lineno"> 1131</span>    uint8_t* best_quant_levels_mod = tmpbuf.<a class="code hl_variable" href="structcompression__working__buffers.html#a7f6a376666f482cda23ec44a6b607dc7">best_quant_levels_mod</a>;</div>
<div class="line"><span class="lineno"> 1132</span>    uint8_t (&amp;best_ep_formats)[<a class="code hl_variable" href="astcenc__internal_8h.html#ac446d816e6883587f7cd6fd115d9a40c">WEIGHTS_MAX_BLOCK_MODES</a>][<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>] = tmpbuf.<a class="code hl_variable" href="structcompression__working__buffers.html#a928d9ac0c422719cae52a322fcd7f08e">best_ep_formats</a>;</div>
<div class="line"><span class="lineno"> 1133</span> </div>
<div class="line"><span class="lineno"> 1134</span>    <span class="comment">// Ensure that the first iteration understep contains data that will never be picked</span></div>
<div class="line"><span class="lineno"> 1135</span>    <a class="code hl_struct" href="structvfloat4.html">vfloat</a> clear_error(<a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>);</div>
<div class="line"><span class="lineno"> 1136</span>    <a class="code hl_struct" href="structvint4.html">vint</a> clear_quant(0);</div>
<div class="line"><span class="lineno"> 1137</span> </div>
<div class="line"><span class="lineno"> 1138</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> packed_start_block_mode = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a63b1ecd0244123ff734e6791e33bf9ca">round_down_to_simd_multiple_vla</a>(start_block_mode);</div>
<div class="line"><span class="lineno"> 1139</span>    <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(clear_error, errors_of_best_combination + packed_start_block_mode);</div>
<div class="line"><span class="lineno"> 1140</span>    <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ac55f9ffdc41bee5d274cb6433809fefc">store_nbytes</a>(clear_quant, best_quant_levels + packed_start_block_mode);</div>
<div class="line"><span class="lineno"> 1141</span>    <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ac55f9ffdc41bee5d274cb6433809fefc">store_nbytes</a>(clear_quant, best_quant_levels_mod + packed_start_block_mode);</div>
<div class="line"><span class="lineno"> 1142</span> </div>
<div class="line"><span class="lineno"> 1143</span>    <span class="comment">// Ensure that last iteration overstep contains data that will never be picked</span></div>
<div class="line"><span class="lineno"> 1144</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> packed_end_block_mode = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a63b1ecd0244123ff734e6791e33bf9ca">round_down_to_simd_multiple_vla</a>(end_block_mode - 1);</div>
<div class="line"><span class="lineno"> 1145</span>    <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a>(clear_error, errors_of_best_combination + packed_end_block_mode);</div>
<div class="line"><span class="lineno"> 1146</span>    <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ac55f9ffdc41bee5d274cb6433809fefc">store_nbytes</a>(clear_quant, best_quant_levels + packed_end_block_mode);</div>
<div class="line"><span class="lineno"> 1147</span>    <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ac55f9ffdc41bee5d274cb6433809fefc">store_nbytes</a>(clear_quant, best_quant_levels_mod + packed_end_block_mode);</div>
<div class="line"><span class="lineno"> 1148</span> </div>
<div class="line"><span class="lineno"> 1149</span>    <span class="comment">// Track a scalar best to avoid expensive search at least once ...</span></div>
<div class="line"><span class="lineno"> 1150</span>    <span class="keywordtype">float</span> error_of_best_combination = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno"> 1151</span>    <span class="keywordtype">int</span> index_of_best_combination = -1;</div>
<div class="line"><span class="lineno"> 1152</span> </div>
<div class="line"><span class="lineno"> 1153</span>    <span class="comment">// The block contains 1 partition</span></div>
<div class="line"><span class="lineno"> 1154</span>    <span class="keywordflow">if</span> (partition_count == 1)</div>
<div class="line"><span class="lineno"> 1155</span>    {</div>
<div class="line"><span class="lineno"> 1156</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = start_block_mode; i &lt; end_block_mode; i++)</div>
<div class="line"><span class="lineno"> 1157</span>        {</div>
<div class="line"><span class="lineno"> 1158</span>            <span class="keywordflow">if</span> (qwt_errors[i] &gt;= <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>)</div>
<div class="line"><span class="lineno"> 1159</span>            {</div>
<div class="line"><span class="lineno"> 1160</span>                errors_of_best_combination[i] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno"> 1161</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1162</span>            }</div>
<div class="line"><span class="lineno"> 1163</span> </div>
<div class="line"><span class="lineno"> 1164</span>            <span class="keywordtype">float</span> error_of_best = <a class="code hl_function" href="#a4a0bf4253790d6b09132c02f57fcbe32">one_partition_find_best_combination_for_bitcount</a>(</div>
<div class="line"><span class="lineno"> 1165</span>                best_error[0], format_of_choice[0], qwt_bitcounts[i],</div>
<div class="line"><span class="lineno"> 1166</span>                best_quant_levels[i], best_ep_formats[i][0]);</div>
<div class="line"><span class="lineno"> 1167</span> </div>
<div class="line"><span class="lineno"> 1168</span>            <span class="keywordtype">float</span> total_error = error_of_best + qwt_errors[i];</div>
<div class="line"><span class="lineno"> 1169</span>            errors_of_best_combination[i] = total_error;</div>
<div class="line"><span class="lineno"> 1170</span>            best_quant_levels_mod[i] = best_quant_levels[i];</div>
<div class="line"><span class="lineno"> 1171</span> </div>
<div class="line"><span class="lineno"> 1172</span>            <span class="keywordflow">if</span> (total_error &lt; error_of_best_combination)</div>
<div class="line"><span class="lineno"> 1173</span>            {</div>
<div class="line"><span class="lineno"> 1174</span>                error_of_best_combination = total_error;</div>
<div class="line"><span class="lineno"> 1175</span>                index_of_best_combination = i;</div>
<div class="line"><span class="lineno"> 1176</span>            }</div>
<div class="line"><span class="lineno"> 1177</span>        }</div>
<div class="line"><span class="lineno"> 1178</span>    }</div>
<div class="line"><span class="lineno"> 1179</span>    <span class="comment">// The block contains 2 partitions</span></div>
<div class="line"><span class="lineno"> 1180</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (partition_count == 2)</div>
<div class="line"><span class="lineno"> 1181</span>    {</div>
<div class="line"><span class="lineno"> 1182</span>        <span class="keywordtype">float</span> combined_best_error[21][7];</div>
<div class="line"><span class="lineno"> 1183</span>        uint8_t formats_of_choice[21][7][2];</div>
<div class="line"><span class="lineno"> 1184</span> </div>
<div class="line"><span class="lineno"> 1185</span>        <a class="code hl_function" href="#ac317754d4bbd795d6f29b331883e8eb3">two_partitions_find_best_combination_for_every_quantization_and_integer_count</a>(</div>
<div class="line"><span class="lineno"> 1186</span>            best_error, format_of_choice, combined_best_error, formats_of_choice);</div>
<div class="line"><span class="lineno"> 1187</span> </div>
<div class="line"><span class="lineno"> 1188</span>        assert(start_block_mode == 0);</div>
<div class="line"><span class="lineno"> 1189</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; end_block_mode; i++)</div>
<div class="line"><span class="lineno"> 1190</span>        {</div>
<div class="line"><span class="lineno"> 1191</span>            <span class="keywordflow">if</span> (qwt_errors[i] &gt;= <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>)</div>
<div class="line"><span class="lineno"> 1192</span>            {</div>
<div class="line"><span class="lineno"> 1193</span>                errors_of_best_combination[i] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno"> 1194</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1195</span>            }</div>
<div class="line"><span class="lineno"> 1196</span> </div>
<div class="line"><span class="lineno"> 1197</span>            <span class="keywordtype">float</span> error_of_best = <a class="code hl_function" href="#a5c74518d7a68796ba962179901f805ae">two_partitions_find_best_combination_for_bitcount</a>(</div>
<div class="line"><span class="lineno"> 1198</span>                combined_best_error, formats_of_choice, qwt_bitcounts[i],</div>
<div class="line"><span class="lineno"> 1199</span>                best_quant_levels[i], best_quant_levels_mod[i],</div>
<div class="line"><span class="lineno"> 1200</span>                best_ep_formats[i]);</div>
<div class="line"><span class="lineno"> 1201</span> </div>
<div class="line"><span class="lineno"> 1202</span>            <span class="keywordtype">float</span> total_error = error_of_best + qwt_errors[i];</div>
<div class="line"><span class="lineno"> 1203</span>            errors_of_best_combination[i] = total_error;</div>
<div class="line"><span class="lineno"> 1204</span> </div>
<div class="line"><span class="lineno"> 1205</span>            <span class="keywordflow">if</span> (total_error &lt; error_of_best_combination)</div>
<div class="line"><span class="lineno"> 1206</span>            {</div>
<div class="line"><span class="lineno"> 1207</span>                error_of_best_combination = total_error;</div>
<div class="line"><span class="lineno"> 1208</span>                index_of_best_combination = i;</div>
<div class="line"><span class="lineno"> 1209</span>            }</div>
<div class="line"><span class="lineno"> 1210</span>        }</div>
<div class="line"><span class="lineno"> 1211</span>    }</div>
<div class="line"><span class="lineno"> 1212</span>    <span class="comment">// The block contains 3 partitions</span></div>
<div class="line"><span class="lineno"> 1213</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (partition_count == 3)</div>
<div class="line"><span class="lineno"> 1214</span>    {</div>
<div class="line"><span class="lineno"> 1215</span>        <span class="keywordtype">float</span> combined_best_error[21][10];</div>
<div class="line"><span class="lineno"> 1216</span>        uint8_t formats_of_choice[21][10][3];</div>
<div class="line"><span class="lineno"> 1217</span> </div>
<div class="line"><span class="lineno"> 1218</span>        <a class="code hl_function" href="#ab08ff5ed53a05a876dc8e90c05aeef72">three_partitions_find_best_combination_for_every_quantization_and_integer_count</a>(</div>
<div class="line"><span class="lineno"> 1219</span>            best_error, format_of_choice, combined_best_error, formats_of_choice);</div>
<div class="line"><span class="lineno"> 1220</span> </div>
<div class="line"><span class="lineno"> 1221</span>        assert(start_block_mode == 0);</div>
<div class="line"><span class="lineno"> 1222</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; end_block_mode; i++)</div>
<div class="line"><span class="lineno"> 1223</span>        {</div>
<div class="line"><span class="lineno"> 1224</span>            <span class="keywordflow">if</span> (qwt_errors[i] &gt;= <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>)</div>
<div class="line"><span class="lineno"> 1225</span>            {</div>
<div class="line"><span class="lineno"> 1226</span>                errors_of_best_combination[i] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno"> 1227</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1228</span>            }</div>
<div class="line"><span class="lineno"> 1229</span> </div>
<div class="line"><span class="lineno"> 1230</span>            <span class="keywordtype">float</span> error_of_best = <a class="code hl_function" href="#a7681b157ce5786accf05034e1facbdbe">three_partitions_find_best_combination_for_bitcount</a>(</div>
<div class="line"><span class="lineno"> 1231</span>                combined_best_error, formats_of_choice, qwt_bitcounts[i],</div>
<div class="line"><span class="lineno"> 1232</span>                best_quant_levels[i], best_quant_levels_mod[i],</div>
<div class="line"><span class="lineno"> 1233</span>                best_ep_formats[i]);</div>
<div class="line"><span class="lineno"> 1234</span> </div>
<div class="line"><span class="lineno"> 1235</span>            <span class="keywordtype">float</span> total_error = error_of_best + qwt_errors[i];</div>
<div class="line"><span class="lineno"> 1236</span>            errors_of_best_combination[i] = total_error;</div>
<div class="line"><span class="lineno"> 1237</span> </div>
<div class="line"><span class="lineno"> 1238</span>            <span class="keywordflow">if</span> (total_error &lt; error_of_best_combination)</div>
<div class="line"><span class="lineno"> 1239</span>            {</div>
<div class="line"><span class="lineno"> 1240</span>                error_of_best_combination = total_error;</div>
<div class="line"><span class="lineno"> 1241</span>                index_of_best_combination = i;</div>
<div class="line"><span class="lineno"> 1242</span>            }</div>
<div class="line"><span class="lineno"> 1243</span>        }</div>
<div class="line"><span class="lineno"> 1244</span>    }</div>
<div class="line"><span class="lineno"> 1245</span>    <span class="comment">// The block contains 4 partitions</span></div>
<div class="line"><span class="lineno"> 1246</span>    <span class="keywordflow">else</span> <span class="comment">// if (partition_count == 4)</span></div>
<div class="line"><span class="lineno"> 1247</span>    {</div>
<div class="line"><span class="lineno"> 1248</span>        assert(partition_count == 4);</div>
<div class="line"><span class="lineno"> 1249</span>        <span class="keywordtype">float</span> combined_best_error[21][13];</div>
<div class="line"><span class="lineno"> 1250</span>        uint8_t formats_of_choice[21][13][4];</div>
<div class="line"><span class="lineno"> 1251</span> </div>
<div class="line"><span class="lineno"> 1252</span>        <a class="code hl_function" href="#a806d3ce88e28226224c6b929b69f2fda">four_partitions_find_best_combination_for_every_quantization_and_integer_count</a>(</div>
<div class="line"><span class="lineno"> 1253</span>            best_error, format_of_choice, combined_best_error, formats_of_choice);</div>
<div class="line"><span class="lineno"> 1254</span> </div>
<div class="line"><span class="lineno"> 1255</span>        assert(start_block_mode == 0);</div>
<div class="line"><span class="lineno"> 1256</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; end_block_mode; i++)</div>
<div class="line"><span class="lineno"> 1257</span>        {</div>
<div class="line"><span class="lineno"> 1258</span>            <span class="keywordflow">if</span> (qwt_errors[i] &gt;= <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>)</div>
<div class="line"><span class="lineno"> 1259</span>            {</div>
<div class="line"><span class="lineno"> 1260</span>                errors_of_best_combination[i] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno"> 1261</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1262</span>            }</div>
<div class="line"><span class="lineno"> 1263</span> </div>
<div class="line"><span class="lineno"> 1264</span>            <span class="keywordtype">float</span> error_of_best = <a class="code hl_function" href="#aa54b7e3566c1445d292b8ff7cf6f5e28">four_partitions_find_best_combination_for_bitcount</a>(</div>
<div class="line"><span class="lineno"> 1265</span>                combined_best_error, formats_of_choice, qwt_bitcounts[i],</div>
<div class="line"><span class="lineno"> 1266</span>                best_quant_levels[i], best_quant_levels_mod[i],</div>
<div class="line"><span class="lineno"> 1267</span>                best_ep_formats[i]);</div>
<div class="line"><span class="lineno"> 1268</span> </div>
<div class="line"><span class="lineno"> 1269</span>            <span class="keywordtype">float</span> total_error = error_of_best + qwt_errors[i];</div>
<div class="line"><span class="lineno"> 1270</span>            errors_of_best_combination[i] = total_error;</div>
<div class="line"><span class="lineno"> 1271</span> </div>
<div class="line"><span class="lineno"> 1272</span>            <span class="keywordflow">if</span> (total_error &lt; error_of_best_combination)</div>
<div class="line"><span class="lineno"> 1273</span>            {</div>
<div class="line"><span class="lineno"> 1274</span>                error_of_best_combination = total_error;</div>
<div class="line"><span class="lineno"> 1275</span>                index_of_best_combination = i;</div>
<div class="line"><span class="lineno"> 1276</span>            }</div>
<div class="line"><span class="lineno"> 1277</span>        }</div>
<div class="line"><span class="lineno"> 1278</span>    }</div>
<div class="line"><span class="lineno"> 1279</span> </div>
<div class="line"><span class="lineno"> 1280</span>    <span class="keywordtype">int</span> best_error_weights[<a class="code hl_variable" href="astcenc__internal_8h.html#a0f2aba262e65e945037f4ed5dda3f2f9">TUNE_MAX_TRIAL_CANDIDATES</a>];</div>
<div class="line"><span class="lineno"> 1281</span> </div>
<div class="line"><span class="lineno"> 1282</span>    <span class="comment">// Fast path the first result and avoid the list search for trial 0</span></div>
<div class="line"><span class="lineno"> 1283</span>    best_error_weights[0] = index_of_best_combination;</div>
<div class="line"><span class="lineno"> 1284</span>    <span class="keywordflow">if</span> (index_of_best_combination &gt;= 0)</div>
<div class="line"><span class="lineno"> 1285</span>    {</div>
<div class="line"><span class="lineno"> 1286</span>        errors_of_best_combination[index_of_best_combination] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno"> 1287</span>    }</div>
<div class="line"><span class="lineno"> 1288</span> </div>
<div class="line"><span class="lineno"> 1289</span>    <span class="comment">// Search the remaining results and pick the best candidate modes for trial 1+</span></div>
<div class="line"><span class="lineno"> 1290</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 1; i &lt; tune_candidate_limit; i++)</div>
<div class="line"><span class="lineno"> 1291</span>    {</div>
<div class="line"><span class="lineno"> 1292</span>        <a class="code hl_struct" href="structvint4.html">vint</a> vbest_error_index(-1);</div>
<div class="line"><span class="lineno"> 1293</span>        <a class="code hl_struct" href="structvfloat4.html">vfloat</a> vbest_ep_error(<a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>);</div>
<div class="line"><span class="lineno"> 1294</span> </div>
<div class="line"><span class="lineno"> 1295</span>        start_block_mode = <a class="code hl_function" href="astcenc__vecmathlib_8h.html#a63b1ecd0244123ff734e6791e33bf9ca">round_down_to_simd_multiple_vla</a>(start_block_mode);</div>
<div class="line"><span class="lineno"> 1296</span>        <a class="code hl_struct" href="structvint4.html">vint</a> lane_ids = <a class="code hl_function" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863">vint::lane_id</a>() + <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(start_block_mode);</div>
<div class="line"><span class="lineno"> 1297</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = start_block_mode; j &lt; end_block_mode; j += <a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>)</div>
<div class="line"><span class="lineno"> 1298</span>        {</div>
<div class="line"><span class="lineno"> 1299</span>            <a class="code hl_struct" href="structvfloat4.html">vfloat</a> err = <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a>(errors_of_best_combination + j);</div>
<div class="line"><span class="lineno"> 1300</span>            <a class="code hl_struct" href="structvmask4.html">vmask</a> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = err &lt; vbest_ep_error;</div>
<div class="line"><span class="lineno"> 1301</span>            vbest_ep_error = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(vbest_ep_error, err, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno"> 1302</span>            vbest_error_index = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(vbest_error_index, lane_ids, <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>);</div>
<div class="line"><span class="lineno"> 1303</span>            lane_ids += <a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(<a class="code hl_define" href="astcenc__vecmathlib_8h.html#aaf679f3389069313db808a4ebd6af8ad">ASTCENC_SIMD_WIDTH</a>);</div>
<div class="line"><span class="lineno"> 1304</span>        }</div>
<div class="line"><span class="lineno"> 1305</span> </div>
<div class="line"><span class="lineno"> 1306</span>        <span class="comment">// Pick best mode from the SIMD result, using lowest matching index to ensure invariance</span></div>
<div class="line"><span class="lineno"> 1307</span>        <a class="code hl_struct" href="structvmask4.html">vmask</a> lanes_min_error = vbest_ep_error == <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ae7ff255b24f24f8d2a31e6849f4b1250">hmin</a>(vbest_ep_error);</div>
<div class="line"><span class="lineno"> 1308</span>        vbest_error_index = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a>(<a class="code hl_typedef" href="astcenc__vecmathlib_8h.html#a1d994704cca1a088c460bd5a3058e3bc">vint</a>(0x7FFFFFFF), vbest_error_index, lanes_min_error);</div>
<div class="line"><span class="lineno"> 1309</span>        vbest_error_index = <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ae7ff255b24f24f8d2a31e6849f4b1250">hmin</a>(vbest_error_index);</div>
<div class="line"><span class="lineno"> 1310</span>        <span class="keywordtype">int</span> best_error_index = vbest_error_index.lane&lt;0&gt;();</div>
<div class="line"><span class="lineno"> 1311</span> </div>
<div class="line"><span class="lineno"> 1312</span>        best_error_weights[i] = best_error_index;</div>
<div class="line"><span class="lineno"> 1313</span> </div>
<div class="line"><span class="lineno"> 1314</span>        <span class="comment">// Max the error for this candidate so we don&#39;t pick it again</span></div>
<div class="line"><span class="lineno"> 1315</span>        <span class="keywordflow">if</span> (best_error_index &gt;= 0)</div>
<div class="line"><span class="lineno"> 1316</span>        {</div>
<div class="line"><span class="lineno"> 1317</span>            errors_of_best_combination[best_error_index] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno"> 1318</span>        }</div>
<div class="line"><span class="lineno"> 1319</span>        <span class="comment">// Early-out if no more candidates are valid</span></div>
<div class="line"><span class="lineno"> 1320</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1321</span>        {</div>
<div class="line"><span class="lineno"> 1322</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1323</span>        }</div>
<div class="line"><span class="lineno"> 1324</span>    }</div>
<div class="line"><span class="lineno"> 1325</span> </div>
<div class="line"><span class="lineno"> 1326</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; tune_candidate_limit; i++)</div>
<div class="line"><span class="lineno"> 1327</span>    {</div>
<div class="line"><span class="lineno"> 1328</span>        <span class="keywordflow">if</span> (best_error_weights[i] &lt; 0)</div>
<div class="line"><span class="lineno"> 1329</span>        {</div>
<div class="line"><span class="lineno"> 1330</span>            <span class="keywordflow">return</span> i;</div>
<div class="line"><span class="lineno"> 1331</span>        }</div>
<div class="line"><span class="lineno"> 1332</span> </div>
<div class="line"><span class="lineno"> 1333</span>        <a class="code hl_struct" href="structblock__mode.html">block_mode</a>[i] = best_error_weights[i];</div>
<div class="line"><span class="lineno"> 1334</span> </div>
<div class="line"><span class="lineno"> 1335</span>        quant_level[i] = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(best_quant_levels[best_error_weights[i]]);</div>
<div class="line"><span class="lineno"> 1336</span>        quant_level_mod[i] = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(best_quant_levels_mod[best_error_weights[i]]);</div>
<div class="line"><span class="lineno"> 1337</span> </div>
<div class="line"><span class="lineno"> 1338</span>        assert(quant_level[i] &gt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a> &amp;&amp; quant_level[i] &lt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a>);</div>
<div class="line"><span class="lineno"> 1339</span>        assert(quant_level_mod[i] &gt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a> &amp;&amp; quant_level_mod[i] &lt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a>);</div>
<div class="line"><span class="lineno"> 1340</span> </div>
<div class="line"><span class="lineno"> 1341</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; partition_count; j++)</div>
<div class="line"><span class="lineno"> 1342</span>        {</div>
<div class="line"><span class="lineno"> 1343</span>            partition_format_specifiers[i][j] = best_ep_formats[best_error_weights[i]][j];</div>
<div class="line"><span class="lineno"> 1344</span>        }</div>
<div class="line"><span class="lineno"> 1345</span>    }</div>
<div class="line"><span class="lineno"> 1346</span> </div>
<div class="line"><span class="lineno"> 1347</span>    <span class="keywordflow">return</span> tune_candidate_limit;</div>
<div class="line"><span class="lineno"> 1348</span>}</div>
<div class="ttc" id="aastcenc__internal_8h_html_a0f2aba262e65e945037f4ed5dda3f2f9"><div class="ttname"><a href="astcenc__internal_8h.html#a0f2aba262e65e945037f4ed5dda3f2f9">TUNE_MAX_TRIAL_CANDIDATES</a></div><div class="ttdeci">static constexpr unsigned int TUNE_MAX_TRIAL_CANDIDATES</div><div class="ttdoc">The maximum number of candidate encodings tested for each encoding mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00132">astcenc_internal.h:132</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a806a5b8001942a6fa06d788ffec45a75"><div class="ttname"><a href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a></div><div class="ttdeci">quant_method</div><div class="ttdoc">The ASTC quantization methods.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00203">astcenc_internal.h:204</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_ac446d816e6883587f7cd6fd115d9a40c"><div class="ttname"><a href="astcenc__internal_8h.html#ac446d816e6883587f7cd6fd115d9a40c">WEIGHTS_MAX_BLOCK_MODES</a></div><div class="ttdeci">static constexpr unsigned int WEIGHTS_MAX_BLOCK_MODES</div><div class="ttdoc">The number of block modes supported by the ASTC format.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00114">astcenc_internal.h:114</a></div></div>
<div class="ttc" id="aastcenc__pick__best__endpoint__format_8cpp_html_a163a7d0cf020b6f86049745807912ec1"><div class="ttname"><a href="#a163a7d0cf020b6f86049745807912ec1">compute_color_error_for_every_integer_count_and_quant_level</a></div><div class="ttdeci">static void compute_color_error_for_every_integer_count_and_quant_level(bool encode_hdr_rgb, bool encode_hdr_alpha, int partition_index, const partition_info &amp;pi, const encoding_choice_errors &amp;eci, const endpoints &amp;ep, vfloat4 error_weight, float best_error[21][4], uint8_t format_of_choice[21][4])</div><div class="ttdoc">For a given partition compute the error for every endpoint integer count and quant level.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00315">astcenc_pick_best_endpoint_format.cpp:315</a></div></div>
<div class="ttc" id="aastcenc__pick__best__endpoint__format_8cpp_html_a4a0bf4253790d6b09132c02f57fcbe32"><div class="ttname"><a href="#a4a0bf4253790d6b09132c02f57fcbe32">one_partition_find_best_combination_for_bitcount</a></div><div class="ttdeci">static float one_partition_find_best_combination_for_bitcount(const float best_combined_error[21][4], const uint8_t best_combined_format[21][4], int bits_available, uint8_t &amp;best_quant_level, uint8_t &amp;best_format)</div><div class="ttdoc">For one partition compute the best format and quantization for a given bit count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00672">astcenc_pick_best_endpoint_format.cpp:672</a></div></div>
<div class="ttc" id="aastcenc__pick__best__endpoint__format_8cpp_html_a5c74518d7a68796ba962179901f805ae"><div class="ttname"><a href="#a5c74518d7a68796ba962179901f805ae">two_partitions_find_best_combination_for_bitcount</a></div><div class="ttdeci">static float two_partitions_find_best_combination_for_bitcount(float best_combined_error[21][7], uint8_t best_combined_format[21][7][2], int bits_available, uint8_t &amp;best_quant_level, uint8_t &amp;best_quant_level_mod, uint8_t *best_formats)</div><div class="ttdoc">For 2 partitions compute the best format and quantization for a given bit count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00774">astcenc_pick_best_endpoint_format.cpp:774</a></div></div>
<div class="ttc" id="aastcenc__pick__best__endpoint__format_8cpp_html_a7681b157ce5786accf05034e1facbdbe"><div class="ttname"><a href="#a7681b157ce5786accf05034e1facbdbe">three_partitions_find_best_combination_for_bitcount</a></div><div class="ttdeci">static float three_partitions_find_best_combination_for_bitcount(const float best_combined_error[21][10], const uint8_t best_combined_format[21][10][3], int bits_available, uint8_t &amp;best_quant_level, uint8_t &amp;best_quant_level_mod, uint8_t *best_formats)</div><div class="ttdoc">For 3 partitions compute the best format and quantization for a given bit count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00899">astcenc_pick_best_endpoint_format.cpp:899</a></div></div>
<div class="ttc" id="aastcenc__pick__best__endpoint__format_8cpp_html_a806d3ce88e28226224c6b929b69f2fda"><div class="ttname"><a href="#a806d3ce88e28226224c6b929b69f2fda">four_partitions_find_best_combination_for_every_quantization_and_integer_count</a></div><div class="ttdeci">static void four_partitions_find_best_combination_for_every_quantization_and_integer_count(const float best_error[4][21][4], const uint8_t best_format[4][21][4], float best_combined_error[21][13], uint8_t best_combined_format[21][13][4])</div><div class="ttdoc">For 4 partitions compute the best format combinations for every pair of quant mode and integer count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00961">astcenc_pick_best_endpoint_format.cpp:961</a></div></div>
<div class="ttc" id="aastcenc__pick__best__endpoint__format_8cpp_html_aa54b7e3566c1445d292b8ff7cf6f5e28"><div class="ttname"><a href="#aa54b7e3566c1445d292b8ff7cf6f5e28">four_partitions_find_best_combination_for_bitcount</a></div><div class="ttdeci">static float four_partitions_find_best_combination_for_bitcount(const float best_combined_error[21][13], const uint8_t best_combined_format[21][13][4], int bits_available, uint8_t &amp;best_quant_level, uint8_t &amp;best_quant_level_mod, uint8_t *best_formats)</div><div class="ttdoc">For 4 partitions compute the best format and quantization for a given bit count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__pick__best__endpoint__format_8cpp_source.html#l01035">astcenc_pick_best_endpoint_format.cpp:1035</a></div></div>
<div class="ttc" id="aastcenc__pick__best__endpoint__format_8cpp_html_ab08ff5ed53a05a876dc8e90c05aeef72"><div class="ttname"><a href="#ab08ff5ed53a05a876dc8e90c05aeef72">three_partitions_find_best_combination_for_every_quantization_and_integer_count</a></div><div class="ttdeci">static void three_partitions_find_best_combination_for_every_quantization_and_integer_count(const float best_error[3][21][4], const uint8_t best_format[3][21][4], float best_combined_error[21][10], uint8_t best_combined_format[21][10][3])</div><div class="ttdoc">For 3 partitions compute the best format combinations for every pair of quant mode and integer count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00836">astcenc_pick_best_endpoint_format.cpp:836</a></div></div>
<div class="ttc" id="aastcenc__pick__best__endpoint__format_8cpp_html_ac317754d4bbd795d6f29b331883e8eb3"><div class="ttname"><a href="#ac317754d4bbd795d6f29b331883e8eb3">two_partitions_find_best_combination_for_every_quantization_and_integer_count</a></div><div class="ttdeci">static void two_partitions_find_best_combination_for_every_quantization_and_integer_count(const float best_error[2][21][4], const uint8_t best_format[2][21][4], float best_combined_error[21][7], uint8_t best_combined_format[21][7][2])</div><div class="ttdoc">For 2 partitions compute the best format combinations for every pair of quant mode and integer count.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00722">astcenc_pick_best_endpoint_format.cpp:722</a></div></div>
<div class="ttc" id="aastcenc__pick__best__endpoint__format_8cpp_html_affc96d3eeffef962cd64307bf0b85590"><div class="ttname"><a href="#affc96d3eeffef962cd64307bf0b85590">compute_encoding_choice_errors</a></div><div class="ttdeci">static void compute_encoding_choice_errors(const image_block &amp;blk, const partition_info &amp;pi, const endpoints &amp;ep, encoding_choice_errors eci[BLOCK_MAX_PARTITIONS])</div><div class="ttdoc">For a given set of input colors and partitioning determine endpoint encode errors.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00222">astcenc_pick_best_endpoint_format.cpp:222</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a3a29c3b15144cf0836ca0f4740b73d00"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a3a29c3b15144cf0836ca0f4740b73d00">vfloat</a></div><div class="ttdeci">vfloat4 vfloat</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00148">astcenc_vecmathlib.h:148</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib_8h_html_a63b1ecd0244123ff734e6791e33bf9ca"><div class="ttname"><a href="astcenc__vecmathlib_8h.html#a63b1ecd0244123ff734e6791e33bf9ca">round_down_to_simd_multiple_vla</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE unsigned int round_down_to_simd_multiple_vla(unsigned int count)</div><div class="ttdoc">Round a count down to the largest multiple of the SIMD width.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib_8h_source.html#l00190">astcenc_vecmathlib.h:190</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_a844ab5b69b84569f033be33bf5fb9fbc"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc">select</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 select(vint8 a, vint8 b, vmask8 cond)</div><div class="ttdoc">Return lanes from b if cond is set, else a.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00602">astcenc_vecmathlib_avx2_8.h:602</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ac55f9ffdc41bee5d274cb6433809fefc"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ac55f9ffdc41bee5d274cb6433809fefc">store_nbytes</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE void store_nbytes(vint8 a, uint8_t *p)</div><div class="ttdoc">Store lowest N (vector width) bytes into an unaligned address.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00565">astcenc_vecmathlib_avx2_8.h:565</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ad4c0a7bde35d6fe9c54531e1e0652f4a"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a">storea</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE void storea(vint8 a, int *p)</div><div class="ttdoc">Store a vector to a 16B aligned memory address.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00549">astcenc_vecmathlib_avx2_8.h:549</a></div></div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ae7ff255b24f24f8d2a31e6849f4b1250"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ae7ff255b24f24f8d2a31e6849f4b1250">hmin</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE vint8 hmin(vint8 a)</div><div class="ttdoc">Return the horizontal minimum of a vector.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00519">astcenc_vecmathlib_avx2_8.h:519</a></div></div>
<div class="ttc" id="astructblock__mode_html"><div class="ttname"><a href="structblock__mode.html">block_mode</a></div><div class="ttdoc">Metadata for single block mode for a specific block size.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00415">astcenc_internal.h:416</a></div></div>
<div class="ttc" id="astructcompression__working__buffers_html_a7044bbc3a97268556df665be7e95d8ec"><div class="ttname"><a href="structcompression__working__buffers.html#a7044bbc3a97268556df665be7e95d8ec">compression_working_buffers::best_quant_levels</a></div><div class="ttdeci">uint8_t best_quant_levels[WEIGHTS_MAX_BLOCK_MODES]</div><div class="ttdoc">The best color quant for each block mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00970">astcenc_internal.h:970</a></div></div>
<div class="ttc" id="astructcompression__working__buffers_html_a7f6a376666f482cda23ec44a6b607dc7"><div class="ttname"><a href="structcompression__working__buffers.html#a7f6a376666f482cda23ec44a6b607dc7">compression_working_buffers::best_quant_levels_mod</a></div><div class="ttdeci">uint8_t best_quant_levels_mod[WEIGHTS_MAX_BLOCK_MODES]</div><div class="ttdoc">The best color quant for each block mode if modes are the same and we have spare bits.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00973">astcenc_internal.h:973</a></div></div>
<div class="ttc" id="astructcompression__working__buffers_html_a928d9ac0c422719cae52a322fcd7f08e"><div class="ttname"><a href="structcompression__working__buffers.html#a928d9ac0c422719cae52a322fcd7f08e">compression_working_buffers::best_ep_formats</a></div><div class="ttdeci">uint8_t best_ep_formats[WEIGHTS_MAX_BLOCK_MODES][BLOCK_MAX_PARTITIONS]</div><div class="ttdoc">The best endpoint format for each partition.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00976">astcenc_internal.h:976</a></div></div>
<div class="ttc" id="astructcompression__working__buffers_html_afb2e61360f7ae7d2145168f6b58dda79"><div class="ttname"><a href="structcompression__working__buffers.html#afb2e61360f7ae7d2145168f6b58dda79">compression_working_buffers::errors_of_best_combination</a></div><div class="ttdeci">ASTCENC_ALIGNAS float errors_of_best_combination[WEIGHTS_MAX_BLOCK_MODES]</div><div class="ttdoc">Error of the best encoding combination for each block mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00967">astcenc_internal.h:967</a></div></div>
<div class="ttc" id="astructencoding__choice__errors_html"><div class="ttname"><a href="structencoding__choice__errors.html">encoding_choice_errors</a></div><div class="ttdoc">Utility storing estimated errors from choosing particular endpoint encodings.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00917">astcenc_internal.h:918</a></div></div>
<div class="ttc" id="astructimage__block_html_ade6f78d73e016d4e9222cbe89f5b1eec"><div class="ttname"><a href="structimage__block.html#ade6f78d73e016d4e9222cbe89f5b1eec">image_block::alpha_lns</a></div><div class="ttdeci">uint8_t alpha_lns[BLOCK_MAX_TEXELS]</div><div class="ttdoc">Set to 1 if a texel is using HDR alpha endpoints (decompression only).</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00786">astcenc_internal.h:786</a></div></div>
<div class="ttc" id="astructimage__block_html_af1a9e601f3d03dc488993b81258058e0"><div class="ttname"><a href="structimage__block.html#af1a9e601f3d03dc488993b81258058e0">image_block::rgb_lns</a></div><div class="ttdeci">uint8_t rgb_lns[BLOCK_MAX_TEXELS]</div><div class="ttdoc">Set to 1 if a texel is using HDR RGB endpoints (decompression only).</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00783">astcenc_internal.h:783</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a81c7b68e8c7b82a5ff718f21bd4f3c35_cgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a81c7b68e8c7b82a5ff718f21bd4f3c35_cgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a81c7b68e8c7b82a5ff718f21bd4f3c35_cgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a81c7b68e8c7b82a5ff718f21bd4f3c35_cgraph">
<area shape="rect" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="5,1521,168,1561"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a163a7d0cf020b6f86049745807912ec1" title="For a given partition compute the error for every endpoint integer count and quant level." alt="" coords="221,1097,387,1151"/>
<area shape="poly" title=" " alt="" coords="96,1520,280,1162,285,1165,101,1522"/>
<area shape="rect" href="structvint4.html#a01e3f7debf73dc6c757fa36d585c9d17" title="Get the scalar from a single lane." alt="" coords="931,1301,1011,1326"/>
<area shape="poly" title=" " alt="" coords="97,1520,116,1491,143,1458,176,1425,215,1399,276,1379,354,1366,444,1360,541,1356,729,1353,810,1349,874,1341,923,1328,924,1333,875,1347,811,1355,730,1359,541,1362,444,1365,355,1372,277,1384,217,1404,179,1429,147,1461,120,1494,102,1523"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ae7ff255b24f24f8d2a31e6849f4b1250" title="Return the horizontal minimum of a vector." alt="" coords="946,1251,997,1277"/>
<area shape="poly" title=" " alt="" coords="94,1520,111,1484,137,1441,171,1398,215,1363,249,1354,320,1342,530,1313,932,1266,932,1271,530,1319,321,1347,250,1359,217,1368,175,1402,141,1444,116,1487,99,1522"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#affc96d3eeffef962cd64307bf0b85590" title="For a given set of input colors and partitioning determine endpoint encode errors." alt="" coords="216,531,392,571"/>
<area shape="poly" title=" " alt="" coords="85,1521,90,1345,96,1212,106,1066,122,919,145,782,175,668,193,623,214,588,224,577,228,581,218,591,198,625,180,669,150,783,128,920,112,1067,101,1213,95,1345,91,1521"/>
<area shape="rect" href="structvint4.html#a21e3d111e37da1aaaeb5ba21a831c863" title="Factory that returns a vector containing the lane IDs." alt="" coords="923,191,1020,217"/>
<area shape="poly" title=" " alt="" coords="86,1521,93,1308,113,960,129,772,151,595,179,444,195,383,214,334,252,258,292,197,337,147,387,109,444,79,508,57,582,40,666,27,726,15,775,4,798,3,822,5,848,13,876,27,896,41,913,59,939,100,957,142,967,177,962,179,952,143,934,102,908,62,892,45,873,32,846,18,821,10,798,8,776,10,727,20,667,32,583,45,510,62,446,84,390,113,341,151,297,200,256,261,218,336,200,384,184,445,156,596,135,772,118,960,98,1308,91,1521"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="743,42,798,67"/>
<area shape="poly" title=" " alt="" coords="85,1521,85,1374,90,1258,98,1124,114,977,137,822,170,667,213,518,254,398,272,350,292,306,316,265,347,225,387,185,438,142,474,119,512,100,592,73,669,59,730,53,730,58,669,64,594,79,514,105,476,123,442,146,391,188,351,228,320,268,296,308,277,352,259,400,219,519,175,669,142,823,119,977,104,1125,95,1259,91,1374,90,1521"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a844ab5b69b84569f033be33bf5fb9fbc" title="Return lanes from b if cond is set, else a." alt="" coords="742,394,799,419"/>
<area shape="poly" title=" " alt="" coords="87,1521,103,1372,124,1258,155,1130,200,996,228,928,261,862,297,798,339,738,386,682,438,631,462,615,485,606,529,601,572,596,594,588,617,573,634,551,642,530,649,506,665,481,698,449,733,424,736,429,701,453,669,484,654,509,647,531,639,554,620,577,597,593,573,601,529,606,486,611,464,620,442,635,390,686,343,741,302,801,265,865,233,930,205,998,160,1132,129,1260,109,1372,92,1521"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#aa54b7e3566c1445d292b8ff7cf6f5e28" title="For 4 partitions compute the best format and quantization for a given bit count." alt="" coords="228,1694,380,1749"/>
<area shape="poly" title=" " alt="" coords="105,1560,151,1618,183,1650,218,1679,225,1684,222,1689,214,1683,179,1654,147,1621,100,1563"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a806d3ce88e28226224c6b929b69f2fda" title="For 4 partitions compute the best format combinations for every pair of quant mode and integer count." alt="" coords="222,1413,386,1483"/>
<area shape="poly" title=" " alt="" coords="133,1519,209,1486,212,1490,135,1524"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a4a0bf4253790d6b09132c02f57fcbe32" title="For one partition compute the best format and quantization for a given bit count." alt="" coords="228,1773,380,1827"/>
<area shape="poly" title=" " alt="" coords="97,1561,114,1602,139,1654,174,1710,218,1759,222,1763,218,1767,214,1763,170,1713,135,1657,109,1604,92,1563"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a63b1ecd0244123ff734e6791e33bf9ca" title="Round a count down to the largest multiple of the SIMD width." alt="" coords="232,1852,376,1892"/>
<area shape="poly" title=" " alt="" coords="94,1561,105,1615,128,1690,144,1729,164,1769,189,1805,218,1838,222,1842,219,1846,214,1842,185,1809,160,1771,139,1732,123,1691,100,1617,88,1562"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ac55f9ffdc41bee5d274cb6433809fefc" title="Store lowest N (vector width) bytes into an unaligned address." alt="" coords="255,1917,353,1942"/>
<area shape="poly" title=" " alt="" coords="92,1561,99,1627,118,1719,134,1768,156,1817,183,1862,218,1902,243,1917,241,1922,214,1906,179,1865,151,1819,129,1770,113,1720,93,1628,86,1562"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad4c0a7bde35d6fe9c54531e1e0652f4a" title="Store a vector to a 16B aligned memory address." alt="" coords="275,1966,333,1991"/>
<area shape="poly" title=" " alt="" coords="91,1561,95,1635,111,1740,127,1798,150,1854,180,1907,218,1953,238,1966,262,1973,260,1978,236,1971,214,1957,175,1910,145,1856,122,1799,106,1741,89,1635,85,1562"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a7681b157ce5786accf05034e1facbdbe" title="For 3 partitions compute the best format and quantization for a given bit count." alt="" coords="228,2015,380,2070"/>
<area shape="poly" title=" " alt="" coords="90,1561,94,1641,111,1757,126,1822,149,1886,179,1947,218,2002,220,2004,216,2008,214,2006,175,1950,144,1888,121,1823,105,1758,89,1641,85,1562"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#ab08ff5ed53a05a876dc8e90c05aeef72" title="For 3 partitions compute the best format combinations for every pair of quant mode and integer count." alt="" coords="222,1507,386,1576"/>
<area shape="poly" title=" " alt="" coords="169,1539,208,1539,208,1544,169,1544"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a5c74518d7a68796ba962179901f805ae" title="For 2 partitions compute the best format and quantization for a given bit count." alt="" coords="228,2094,380,2149"/>
<area shape="poly" title=" " alt="" coords="93,1561,108,1668,134,1824,152,1904,171,1978,194,2039,218,2081,220,2083,216,2086,214,2084,189,2041,166,1979,146,1905,129,1825,102,1669,88,1562"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#ac317754d4bbd795d6f29b331883e8eb3" title="For 2 partitions compute the best format combinations for every pair of quant mode and integer count." alt="" coords="222,1600,386,1669"/>
<area shape="poly" title=" " alt="" coords="135,1559,212,1592,209,1597,133,1564"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aeac50750508168aeab5115733d3ee63c" title="Return the absolute value of the float vector." alt="" coords="508,757,551,782"/>
<area shape="poly" title=" " alt="" coords="307,1096,320,1037,344,959,362,917,383,876,408,838,438,803,465,785,494,774,496,779,467,790,442,807,413,841,388,879,367,920,349,961,325,1038,312,1097"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a377cafdb98d3ee38a2999ed00504f477" title="Return the dot product for the bottom 3 lanes, returning scalar." alt="" coords="499,1262,560,1287"/>
<area shape="poly" title=" " alt="" coords="333,1150,381,1196,441,1240,487,1260,484,1265,439,1245,377,1200,329,1154"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a48e833d0cfdf950b6bc3431fce00507e" title="Return the horizontal sum of RGB vector lanes as a scalar." alt="" coords="726,1238,815,1263"/>
<area shape="poly" title=" " alt="" coords="349,1149,392,1174,441,1195,513,1215,586,1229,712,1245,712,1250,585,1235,511,1220,439,1200,390,1178,346,1154"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a5d1b09f64af83d5171e4b9580f62ac71" title="Return the horizontal maximum of a vector." alt="" coords="495,1013,563,1038"/>
<area shape="poly" title=" " alt="" coords="348,1094,391,1069,439,1047,481,1033,483,1038,441,1052,393,1074,350,1099"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#ac8652a0d90b3378db8fa8a8d2c4a434c" title="Return the horizontal min of RGB vector lanes as a scalar." alt="" coords="485,963,574,989"/>
<area shape="poly" title=" " alt="" coords="326,1094,375,1045,405,1019,439,998,470,985,472,990,441,1002,409,1024,378,1049,330,1098"/>
<area shape="rect" href="structvfloat4.html#a04462a7815432c6bc3ce1b5e5d11e4fc" title="Get the scalar value of a single lane." alt="" coords="1074,811,1165,837"/>
<area shape="poly" title=" " alt="" coords="316,1095,335,1061,363,1021,397,981,439,948,478,934,545,919,726,887,1020,843,1060,834,1061,839,1020,848,727,893,546,924,479,939,441,953,401,985,367,1024,340,1064,321,1098"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="489,1457,569,1482"/>
<area shape="poly" title=" " alt="" coords="325,1150,515,1444,510,1446,321,1153"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aa162915c044e97cc1f6d630338761fd3" title="Return the max vector of two vectors." alt="" coords="506,1111,553,1137"/>
<area shape="poly" title=" " alt="" coords="387,1121,492,1121,492,1127,387,1127"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a165b3db4e7ced1551e1880a01a01150b" title="Return the min vector of two vectors." alt="" coords="508,1161,551,1186"/>
<area shape="poly" title=" " alt="" coords="388,1139,495,1163,494,1168,386,1145"/>
<area shape="rect" href="structvfloat4.html#a0a3e390831722cc8e54f29155699f3a5" title="Return a swizzled float 2." alt="" coords="927,461,1016,486"/>
<area shape="poly" title=" " alt="" coords="313,1095,331,1054,358,1003,394,950,438,905,468,883,497,866,554,845,609,835,663,831,715,826,767,814,820,789,846,770,873,746,896,718,915,686,943,617,959,551,966,499,971,500,964,552,948,618,920,688,901,721,877,750,849,774,822,794,769,819,716,831,663,836,610,841,556,850,500,871,471,887,442,909,398,954,363,1005,336,1056,318,1098"/>
<area shape="poly" title=" " alt="" coords="560,1269,712,1254,713,1259,561,1274"/>
<area shape="poly" title=" " alt="" coords="813,1261,919,1294,917,1299,811,1266"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a516a2f0d872381b8c7c047845a90c9a3" title="Return the horizontal maximum of a vector." alt="" coords="743,1165,798,1190"/>
<area shape="poly" title=" " alt="" coords="564,1025,593,1032,620,1047,632,1059,639,1072,645,1096,652,1120,658,1132,668,1143,698,1160,730,1170,729,1175,696,1165,665,1147,654,1135,647,1122,640,1098,634,1074,628,1062,617,1051,591,1037,563,1030"/>
<area shape="rect" href="structvint8.html#a2e1f0c785f4899e1b7912f2580b9f77c" title="Get the scalar from a single lane." alt="" coords="931,1089,1011,1114"/>
<area shape="poly" title=" " alt="" coords="564,1027,592,1035,620,1047,635,1060,644,1074,653,1087,668,1098,699,1109,732,1116,800,1121,863,1118,917,1110,918,1116,864,1123,799,1127,731,1121,698,1114,665,1102,649,1091,640,1077,631,1064,617,1051,591,1040,563,1032"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#ac4a641bfa34d9f961fddf927fbb939da" title="Return the horizontal minimum of a vector." alt="" coords="739,1063,803,1089"/>
<area shape="poly" title=" " alt="" coords="575,980,598,987,620,998,636,1011,645,1024,654,1036,668,1048,696,1061,726,1068,725,1073,695,1066,665,1053,650,1040,640,1027,632,1014,617,1002,596,992,573,985"/>
<area shape="poly" title=" " alt="" coords="575,981,661,992,775,995,837,991,900,982,961,966,1019,942,1047,922,1070,898,1104,847,1108,850,1074,901,1050,926,1021,946,963,971,901,987,838,997,775,1001,661,997,574,987"/>
<area shape="rect" href="structvfloat4.html#a2168231efa1e514fd41b3603e57be297" title="Set the scalar value of a single lane." alt="" coords="713,1014,828,1039"/>
<area shape="poly" title=" " alt="" coords="575,983,700,1009,699,1014,574,988"/>
<area shape="poly" title=" " alt="" coords="803,1077,918,1092,917,1097,803,1083"/>
<area shape="poly" title=" " alt="" coords="793,1086,833,1114,876,1150,920,1196,954,1238,950,1242,916,1199,873,1154,830,1118,790,1091"/>
<area shape="poly" title=" " alt="" coords="980,485,1110,797,1105,799,976,487"/>
<area shape="rect" href="structvfloat4.html#a9df51cb30b68d6d51ca607e64aa1ebf0" title="Construct from zero&#45;initialized value." alt="" coords="1068,130,1171,155"/>
<area shape="poly" title=" " alt="" coords="1004,458,1018,446,1037,411,1046,378,1047,347,1044,315,1041,283,1041,250,1048,215,1066,177,1080,162,1084,165,1070,180,1053,217,1046,251,1046,283,1049,315,1052,346,1051,379,1042,413,1022,450,1008,462"/>
<area shape="poly" title=" " alt="" coords="317,570,335,606,363,651,399,698,442,738,468,752,496,761,494,766,466,757,438,742,395,701,358,654,331,608,312,572"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#a73936e5cf41b74f2b8d9b137a9d64253" title="Compute averages and dominant directions for each partition in a 3 component texture." alt="" coords="449,280,610,320"/>
<area shape="poly" title=" " alt="" coords="321,529,499,329,503,332,325,532"/>
<area shape="poly" title=" " alt="" coords="305,530,317,469,341,383,358,336,380,290,406,245,438,205,460,184,482,170,523,154,567,141,617,116,640,96,650,86,665,76,697,64,729,57,730,62,699,69,668,81,654,90,644,99,620,121,569,146,525,159,484,174,463,188,442,208,411,248,385,292,363,338,346,385,322,470,311,531"/>
<area shape="rect" href="structvfloat4.html#a04b5f338012dab6be0b2bd7910fcbcae" title="Factory that returns a vector of zeros." alt="" coords="725,91,816,117"/>
<area shape="poly" title=" " alt="" coords="307,530,322,478,348,409,386,334,410,298,438,266,461,246,483,233,525,218,569,206,592,195,617,179,631,165,640,152,649,139,665,126,688,115,711,108,713,113,690,120,668,130,653,142,644,155,635,169,620,183,595,200,571,211,527,224,485,238,464,251,442,270,415,301,391,336,353,411,327,480,313,531"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a118e8a2374bfd56b522a03f938b0f367" title="Functions for finding best endpoint format." alt="" coords="450,437,609,477"/>
<area shape="poly" title=" " alt="" coords="352,528,467,480,469,485,354,533"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#ae36c7167bc89ff2bf984c1a912526dcb" title="Return the dot product for the bottom 3 lanes, returning vector." alt="" coords="506,1062,553,1087"/>
<area shape="poly" title=" " alt="" coords="311,570,327,671,355,815,373,888,394,956,417,1011,442,1047,466,1062,493,1070,492,1075,463,1067,438,1051,412,1013,389,957,368,890,350,816,321,672,306,571"/>
<area shape="rect" href="structimage__block.html#ac3e154e58086017c6e405b8cc7e52c9f" title="Test if this block is a luminance block with constant 1.0 alpha." alt="" coords="440,703,619,729"/>
<area shape="poly" title=" " alt="" coords="323,569,373,624,406,654,441,680,472,696,470,701,439,685,402,658,369,627,319,572"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3b0e8ae23a514219217b72164a7909a4" title="Normalize a vector, returning safe if len is zero." alt="" coords="475,646,584,671"/>
<area shape="poly" title=" " alt="" coords="348,568,491,637,488,642,346,573"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html#a3cf3e0218d808e69f31668dbc458dc08" title="Factory that returns a unit length 3 component vfloat4." alt="" coords="504,538,555,563"/>
<area shape="poly" title=" " alt="" coords="392,548,491,548,491,553,392,553"/>
<area shape="poly" title=" " alt="" coords="611,300,672,308,741,322,811,345,876,379,893,395,902,412,910,429,925,446,931,451,928,455,921,450,906,432,897,414,889,398,873,383,809,350,740,327,671,313,610,306"/>
<area shape="rect" href="astcenc__averages__and__directions_8cpp.html#ac5429bc77cf39a7dba332af8fb14e093" title="Functions for finding dominant direction of a set of colors." alt="" coords="667,242,875,267"/>
<area shape="poly" title=" " alt="" coords="610,282,689,267,690,272,611,287"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html#a6d7561f8f0ebee752b0e217101d9d5f3" title="Return the dot product for the full 4 lanes, returning vector." alt="" coords="751,545,791,570"/>
<area shape="poly" title=" " alt="" coords="549,318,583,365,621,424,634,455,640,482,648,506,668,530,684,540,702,547,738,554,737,559,700,552,682,545,665,534,644,509,635,484,629,457,616,426,579,369,544,322"/>
<area shape="poly" title=" " alt="" coords="545,278,580,234,616,180,629,151,635,125,644,101,665,76,696,60,729,53,730,58,698,65,668,81,649,103,640,126,634,152,621,183,584,237,550,281"/>
<area shape="poly" title=" " alt="" coords="577,318,731,386,728,391,574,322"/>
<area shape="rect" href="structimage__block.html#a682b1ada02acb8369d6f6f30378b260e" title="Get an RGB texel value from the data." alt="" coords="701,141,840,166"/>
<area shape="poly" title=" " alt="" coords="578,278,617,253,632,235,639,218,648,200,665,183,691,168,694,173,668,187,653,204,644,220,636,238,620,257,581,282"/>
<area shape="poly" title=" " alt="" coords="583,278,601,267,617,253,628,237,634,221,638,189,643,157,651,141,665,126,687,112,711,105,713,110,689,117,668,130,655,144,648,159,643,190,639,222,633,239,621,256,605,271,586,282"/>
<area shape="poly" title=" " alt="" coords="846,265,876,285,892,305,900,325,903,365,905,405,912,425,925,446,929,451,925,454,921,450,907,428,900,406,898,366,895,327,888,308,873,289,844,270"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aaa291a197219a09a2e1103aec6945b3c" title="Accumulate lane&#45;wise sums for a vector, folded 4&#45;wide." alt="" coords="923,305,1019,330"/>
<area shape="poly" title=" " alt="" coords="814,265,875,284,918,298,917,303,874,289,812,270"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aacd26478e4fe1f97a5d47e8adaacc898" title="Return the horizontal sum of a vector." alt="" coords="939,411,1003,437"/>
<area shape="poly" title=" " alt="" coords="837,265,876,284,895,304,917,334,958,398,953,401,913,337,891,308,873,289,835,270"/>
<area shape="poly" title=" " alt="" coords="821,239,908,217,910,222,823,244"/>
<area shape="poly" title=" " alt="" coords="946,306,941,296,944,287,954,280,971,278,992,281,1000,290,997,294,989,286,971,283,956,285,948,290,947,296,951,303"/>
<area shape="poly" title=" " alt="" coords="946,412,941,403,944,393,954,387,971,385,992,388,1000,397,997,400,989,393,971,390,956,392,948,396,947,402,951,410"/>
<area shape="rect" href="structvint4.html#a3315184e8bb4f0cf1ca8dcff1f57cdae" title="Construct from zero&#45;initialized value." alt="" coords="1078,191,1161,217"/>
<area shape="poly" title=" " alt="" coords="1020,201,1064,201,1064,207,1020,207"/>
<area shape="poly" title=" " alt="" coords="791,554,831,548,853,541,873,530,890,511,897,490,904,469,921,446,926,441,930,445,925,450,909,471,902,492,895,513,876,534,855,546,832,554,791,560"/>
<area shape="poly" title=" " alt="" coords="816,106,1055,133,1054,138,816,111"/>
<area shape="poly" title=" " alt="" coords="561,475,621,523,634,540,643,554,653,567,668,579,696,594,722,602,769,608,818,612,845,619,876,631,944,671,1006,717,1098,799,1094,803,1003,721,941,675,873,636,844,624,817,617,769,613,721,607,694,599,665,583,649,570,639,557,630,543,617,527,558,479"/>
<area shape="poly" title=" " alt="" coords="559,435,608,406,666,379,729,358,795,342,909,322,910,327,796,347,731,363,668,384,611,410,562,439"/>
<area shape="poly" title=" " alt="" coords="609,449,925,425,926,430,609,454"/>
<area shape="poly" title=" " alt="" coords="544,436,579,389,616,331,628,301,634,274,643,250,665,227,694,211,725,199,790,186,854,185,909,190,909,195,853,190,790,191,726,204,696,215,668,231,648,253,639,276,634,302,621,333,583,392,549,439"/>
<area shape="poly" title=" " alt="" coords="547,436,583,390,616,331,628,294,631,259,627,197,626,167,629,138,641,108,665,77,679,66,695,58,729,51,730,57,697,63,682,70,669,80,646,110,635,139,631,167,632,197,636,259,633,295,621,333,587,393,551,439"/>
<area shape="poly" title=" " alt="" coords="546,435,582,389,616,331,626,301,630,273,630,223,630,199,634,175,645,151,665,126,686,111,711,104,712,109,689,116,668,130,650,153,639,176,635,199,635,223,636,274,632,302,621,333,587,392,551,439"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#aae2f99eb48f3cde0f4739b894e8ca29f" title="Load a vector of gathered results from an array;" alt="" coords="740,495,801,521"/>
<area shape="poly" title=" " alt="" coords="609,471,727,496,726,501,608,476"/>
<area shape="rect" href="structimage__block.html#ab5d7af0f7b40343941660350ac186fab" title="Get the default alpha value for endpoints that don&#39;t store it." alt="" coords="687,696,854,736"/>
<area shape="poly" title=" " alt="" coords="568,475,596,496,621,524,633,546,639,567,642,607,646,644,654,662,669,681,677,688,674,692,665,684,649,665,641,645,636,607,634,568,628,548,616,527,592,500,565,480"/>
<area shape="poly" title=" " alt="" coords="553,1073,587,1079,605,1086,620,1097,632,1109,640,1122,646,1148,652,1174,669,1199,691,1217,716,1230,713,1235,688,1221,665,1203,647,1176,641,1149,635,1124,628,1112,617,1101,602,1091,585,1084,552,1078"/>
<area shape="poly" title=" " alt="" coords="586,726,620,742,635,754,644,768,653,779,668,790,718,809,771,822,825,831,879,836,980,836,1060,830,1061,835,980,841,879,841,825,836,770,827,717,814,665,794,649,783,640,771,631,758,617,746,584,731"/>
<area shape="poly" title=" " alt="" coords="619,713,673,713,673,719,619,719"/>
<area shape="poly" title=" " alt="" coords="581,669,620,688,636,704,644,719,653,733,668,746,727,762,834,781,1060,814,1060,819,833,786,726,767,665,750,649,736,640,722,631,707,617,693,579,674"/>
<area shape="poly" title=" " alt="" coords="567,643,618,624,737,570,739,575,620,629,569,648"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#a46b31b19ff13c14adb023db4b5df8e52" title="Return the sqrt of the lanes in the vector." alt="" coords="749,646,793,671"/>
<area shape="poly" title=" " alt="" coords="584,656,735,656,735,661,584,661"/>
<area shape="poly" title=" " alt="" coords="387,1453,476,1462,476,1467,386,1458"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="491,1529,567,1554"/>
<area shape="poly" title=" " alt="" coords="387,1479,486,1521,484,1526,385,1484"/>
<area shape="poly" title=" " alt="" coords="386,1513,475,1483,477,1489,387,1518"/>
<area shape="poly" title=" " alt="" coords="386,1539,478,1539,478,1544,386,1544"/>
<area shape="poly" title=" " alt="" coords="375,1598,390,1586,405,1568,414,1551,422,1533,438,1514,481,1486,484,1490,442,1518,427,1536,418,1553,410,1571,394,1590,378,1602"/>
<area shape="poly" title=" " alt="" coords="385,1598,484,1557,486,1562,387,1603"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a81c7b68e8c7b82a5ff718f21bd4f3c35_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a81c7b68e8c7b82a5ff718f21bd4f3c35_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a81c7b68e8c7b82a5ff718f21bd4f3c35_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a81c7b68e8c7b82a5ff718f21bd4f3c35_icgraph">
<area shape="rect" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="aa54b7e3566c1445d292b8ff7cf6f5e28" name="aa54b7e3566c1445d292b8ff7cf6f5e28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa54b7e3566c1445d292b8ff7cf6f5e28">&#9670;&#160;</a></span>four_partitions_find_best_combination_for_bitcount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static float four_partitions_find_best_combination_for_bitcount </td>
          <td>(</td>
          <td class="paramtype">const float</td>          <td class="paramname"><span class="paramname"><em>best_combined_error</em></span>[21][13], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>best_combined_format</em></span>[21][13][4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>bits_available</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;</td>          <td class="paramname"><span class="paramname"><em>best_quant_level</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;</td>          <td class="paramname"><span class="paramname"><em>best_quant_level_mod</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>best_formats</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For 4 partitions compute the best format and quantization for a given bit count. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">best_combined_error</td><td>The best error for each quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">best_combined_format</td><td>The best format for each quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bits_available</td><td>The number of bits available for encoding. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_quant_level</td><td>The output best color quant level. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_quant_level_mod</td><td>The output best color quant level assuming two more bits are available. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_formats</td><td>The output best color formats.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>best_error The output error for the best pairing. </dd></dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l01035">1035</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1042</span>  {</div>
<div class="line"><span class="lineno"> 1043</span>    <span class="keywordtype">int</span> best_integer_count = 0;</div>
<div class="line"><span class="lineno"> 1044</span>    <span class="keywordtype">float</span> best_integer_count_error = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno"> 1045</span> </div>
<div class="line"><span class="lineno"> 1046</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> integer_count = 4; integer_count &lt;= 9; integer_count++)</div>
<div class="line"><span class="lineno"> 1047</span>    {</div>
<div class="line"><span class="lineno"> 1048</span>        <span class="comment">// Compute the quantization level for a given number of integers and a given number of bits</span></div>
<div class="line"><span class="lineno"> 1049</span>        <span class="keywordtype">int</span> quant_level = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[integer_count][bits_available];</div>
<div class="line"><span class="lineno"> 1050</span> </div>
<div class="line"><span class="lineno"> 1051</span>        <span class="comment">// Don&#39;t have enough bits to represent a given endpoint format at all!</span></div>
<div class="line"><span class="lineno"> 1052</span>        <span class="keywordflow">if</span> (quant_level &lt; <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>)</div>
<div class="line"><span class="lineno"> 1053</span>        {</div>
<div class="line"><span class="lineno"> 1054</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1055</span>        }</div>
<div class="line"><span class="lineno"> 1056</span> </div>
<div class="line"><span class="lineno"> 1057</span>        <span class="keywordtype">float</span> integer_count_error = best_combined_error[quant_level][integer_count - 4];</div>
<div class="line"><span class="lineno"> 1058</span>        <span class="keywordflow">if</span> (integer_count_error &lt; best_integer_count_error)</div>
<div class="line"><span class="lineno"> 1059</span>        {</div>
<div class="line"><span class="lineno"> 1060</span>            best_integer_count_error = integer_count_error;</div>
<div class="line"><span class="lineno"> 1061</span>            best_integer_count = integer_count;</div>
<div class="line"><span class="lineno"> 1062</span>        }</div>
<div class="line"><span class="lineno"> 1063</span>    }</div>
<div class="line"><span class="lineno"> 1064</span> </div>
<div class="line"><span class="lineno"> 1065</span>    <span class="keywordtype">int</span> ql = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[best_integer_count][bits_available];</div>
<div class="line"><span class="lineno"> 1066</span>    <span class="keywordtype">int</span> ql_mod = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[best_integer_count][bits_available + 8];</div>
<div class="line"><span class="lineno"> 1067</span> </div>
<div class="line"><span class="lineno"> 1068</span>    best_quant_level = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(ql);</div>
<div class="line"><span class="lineno"> 1069</span>    best_quant_level_mod = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(ql_mod);</div>
<div class="line"><span class="lineno"> 1070</span> </div>
<div class="line"><span class="lineno"> 1071</span>    <span class="keywordflow">if</span> (ql &gt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>)</div>
<div class="line"><span class="lineno"> 1072</span>    {</div>
<div class="line"><span class="lineno"> 1073</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++)</div>
<div class="line"><span class="lineno"> 1074</span>        {</div>
<div class="line"><span class="lineno"> 1075</span>            best_formats[i] = best_combined_format[ql][best_integer_count - 4][i];</div>
<div class="line"><span class="lineno"> 1076</span>        }</div>
<div class="line"><span class="lineno"> 1077</span>    }</div>
<div class="line"><span class="lineno"> 1078</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1079</span>    {</div>
<div class="line"><span class="lineno"> 1080</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++)</div>
<div class="line"><span class="lineno"> 1081</span>        {</div>
<div class="line"><span class="lineno"> 1082</span>            best_formats[i] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baf29afed4fcc815780d85789b8a095a22">FMT_LUMINANCE</a>;</div>
<div class="line"><span class="lineno"> 1083</span>        }</div>
<div class="line"><span class="lineno"> 1084</span>    }</div>
<div class="line"><span class="lineno"> 1085</span> </div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keywordflow">return</span> best_integer_count_error;</div>
<div class="line"><span class="lineno"> 1087</span>}</div>
<div class="ttc" id="aastcenc__internal_8h_html_a67050b7e3e5e5c4ff2021c8f266dd903"><div class="ttname"><a href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a></div><div class="ttdeci">const int8_t quant_mode_table[10][128]</div><div class="ttdoc">The precomputed quant mode storage table.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__quantization_8cpp_source.html#l00802">astcenc_quantization.cpp:802</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_aa54b7e3566c1445d292b8ff7cf6f5e28_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_aa54b7e3566c1445d292b8ff7cf6f5e28_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_aa54b7e3566c1445d292b8ff7cf6f5e28_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_aa54b7e3566c1445d292b8ff7cf6f5e28_icgraph">
<area shape="rect" title="For 4 partitions compute the best format and quantization for a given bit count." alt="" coords="1449,30,1601,85"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="poly" title=" " alt="" coords="1435,60,1401,60,1401,55,1435,55"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="a806d3ce88e28226224c6b929b69f2fda" name="a806d3ce88e28226224c6b929b69f2fda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a806d3ce88e28226224c6b929b69f2fda">&#9670;&#160;</a></span>four_partitions_find_best_combination_for_every_quantization_and_integer_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void four_partitions_find_best_combination_for_every_quantization_and_integer_count </td>
          <td>(</td>
          <td class="paramtype">const float</td>          <td class="paramname"><span class="paramname"><em>best_error</em></span>[4][21][4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>best_format</em></span>[4][21][4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>best_combined_error</em></span>[21][13], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>best_combined_format</em></span>[21][13][4]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For 4 partitions compute the best format combinations for every pair of quant mode and integer count. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">best_error</td><td>The best error for a single endpoint quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">best_format</td><td>The best format for a single endpoint quant level and integer count. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_combined_error</td><td>The best combined error pairings for the 4 partitions. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_combined_format</td><td>The best combined format pairings for the 4 partitions. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00961">961</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  966</span>  {</div>
<div class="line"><span class="lineno">  967</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75aad7b37039e6f1b7dc45712dac09dd8f7">QUANT_2</a>; i &lt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a>; i++)</div>
<div class="line"><span class="lineno">  968</span>    {</div>
<div class="line"><span class="lineno">  969</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 13; j++)</div>
<div class="line"><span class="lineno">  970</span>        {</div>
<div class="line"><span class="lineno">  971</span>            best_combined_error[i][j] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  972</span>        }</div>
<div class="line"><span class="lineno">  973</span>    }</div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> quant = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>; quant &lt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a>; quant++)</div>
<div class="line"><span class="lineno">  976</span>    {</div>
<div class="line"><span class="lineno">  977</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) <span class="comment">// integer-count for first endpoint-pair</span></div>
<div class="line"><span class="lineno">  978</span>        {</div>
<div class="line"><span class="lineno">  979</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; j++) <span class="comment">// integer-count for second endpoint-pair</span></div>
<div class="line"><span class="lineno">  980</span>            {</div>
<div class="line"><span class="lineno">  981</span>                <span class="keywordtype">int</span> low2 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(i, j);</div>
<div class="line"><span class="lineno">  982</span>                <span class="keywordtype">int</span> high2 = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(i, j);</div>
<div class="line"><span class="lineno">  983</span>                <span class="keywordflow">if</span> ((high2 - low2) &gt; 1)</div>
<div class="line"><span class="lineno">  984</span>                {</div>
<div class="line"><span class="lineno">  985</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  986</span>                }</div>
<div class="line"><span class="lineno">  987</span> </div>
<div class="line"><span class="lineno">  988</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 4; k++) <span class="comment">// integer-count for third endpoint-pair</span></div>
<div class="line"><span class="lineno">  989</span>                {</div>
<div class="line"><span class="lineno">  990</span>                    <span class="keywordtype">int</span> low3 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(k, low2);</div>
<div class="line"><span class="lineno">  991</span>                    <span class="keywordtype">int</span> high3 = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(k, high2);</div>
<div class="line"><span class="lineno">  992</span>                    <span class="keywordflow">if</span> ((high3 - low3) &gt; 1)</div>
<div class="line"><span class="lineno">  993</span>                    {</div>
<div class="line"><span class="lineno">  994</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  995</span>                    }</div>
<div class="line"><span class="lineno">  996</span> </div>
<div class="line"><span class="lineno">  997</span>                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l = 0; l &lt; 4; l++) <span class="comment">// integer-count for fourth endpoint-pair</span></div>
<div class="line"><span class="lineno">  998</span>                    {</div>
<div class="line"><span class="lineno">  999</span>                        <span class="keywordtype">int</span> low4 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(l, low3);</div>
<div class="line"><span class="lineno"> 1000</span>                        <span class="keywordtype">int</span> high4 = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(l, high3);</div>
<div class="line"><span class="lineno"> 1001</span>                        <span class="keywordflow">if</span> ((high4 - low4) &gt; 1)</div>
<div class="line"><span class="lineno"> 1002</span>                        {</div>
<div class="line"><span class="lineno"> 1003</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1004</span>                        }</div>
<div class="line"><span class="lineno"> 1005</span> </div>
<div class="line"><span class="lineno"> 1006</span>                        <span class="keywordtype">int</span> intcnt = i + j + k + l;</div>
<div class="line"><span class="lineno"> 1007</span>                        <span class="keywordtype">float</span> errorterm = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(best_error[0][quant][i] + best_error[1][quant][j] + best_error[2][quant][k] + best_error[3][quant][l], 1e10f);</div>
<div class="line"><span class="lineno"> 1008</span>                        <span class="keywordflow">if</span> (errorterm &lt;= best_combined_error[quant][intcnt])</div>
<div class="line"><span class="lineno"> 1009</span>                        {</div>
<div class="line"><span class="lineno"> 1010</span>                            best_combined_error[quant][intcnt] = errorterm;</div>
<div class="line"><span class="lineno"> 1011</span>                            best_combined_format[quant][intcnt][0] = best_format[0][quant][i];</div>
<div class="line"><span class="lineno"> 1012</span>                            best_combined_format[quant][intcnt][1] = best_format[1][quant][j];</div>
<div class="line"><span class="lineno"> 1013</span>                            best_combined_format[quant][intcnt][2] = best_format[2][quant][k];</div>
<div class="line"><span class="lineno"> 1014</span>                            best_combined_format[quant][intcnt][3] = best_format[3][quant][l];</div>
<div class="line"><span class="lineno"> 1015</span>                        }</div>
<div class="line"><span class="lineno"> 1016</span>                    }</div>
<div class="line"><span class="lineno"> 1017</span>                }</div>
<div class="line"><span class="lineno"> 1018</span>            }</div>
<div class="line"><span class="lineno"> 1019</span>        }</div>
<div class="line"><span class="lineno"> 1020</span>    }</div>
<div class="line"><span class="lineno"> 1021</span>}</div>
<div class="ttc" id="anamespaceastc_html_af78c0d31374aa9923633a3a2abf8d738"><div class="ttname"><a href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a></div><div class="ttdeci">static T min(T p, T q)</div><div class="ttdoc">Return the minimum of two values.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00159">astcenc_mathlib.h:159</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a806d3ce88e28226224c6b929b69f2fda_cgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a806d3ce88e28226224c6b929b69f2fda_cgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a806d3ce88e28226224c6b929b69f2fda_cgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a806d3ce88e28226224c6b929b69f2fda_cgraph">
<area shape="rect" title="For 4 partitions compute the best format combinations for every pair of quant mode and integer count." alt="" coords="5,9,169,78"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="217,5,297,31"/>
<area shape="poly" title=" " alt="" coords="169,28,203,23,204,29,170,34"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="219,55,295,80"/>
<area shape="poly" title=" " alt="" coords="170,52,206,57,205,63,169,58"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a806d3ce88e28226224c6b929b69f2fda_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a806d3ce88e28226224c6b929b69f2fda_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a806d3ce88e28226224c6b929b69f2fda_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a806d3ce88e28226224c6b929b69f2fda_icgraph">
<area shape="rect" title="For 4 partitions compute the best format combinations for every pair of quant mode and integer count." alt="" coords="1449,23,1613,92"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="poly" title=" " alt="" coords="1436,60,1401,60,1401,55,1436,55"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="a4a0bf4253790d6b09132c02f57fcbe32" name="a4a0bf4253790d6b09132c02f57fcbe32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0bf4253790d6b09132c02f57fcbe32">&#9670;&#160;</a></span>one_partition_find_best_combination_for_bitcount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static float one_partition_find_best_combination_for_bitcount </td>
          <td>(</td>
          <td class="paramtype">const float</td>          <td class="paramname"><span class="paramname"><em>best_combined_error</em></span>[21][4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>best_combined_format</em></span>[21][4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>bits_available</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;</td>          <td class="paramname"><span class="paramname"><em>best_quant_level</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;</td>          <td class="paramname"><span class="paramname"><em>best_format</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For one partition compute the best format and quantization for a given bit count. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">best_combined_error</td><td>The best error for each quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">best_combined_format</td><td>The best format for each quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bits_available</td><td>The number of bits available for encoding. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_quant_level</td><td>The output best color quant level. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_format</td><td>The output best color format.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The output error for the best pairing. </dd></dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00672">672</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  678</span>  {</div>
<div class="line"><span class="lineno">  679</span>    <span class="keywordtype">int</span> best_integer_count = 0;</div>
<div class="line"><span class="lineno">  680</span>    <span class="keywordtype">float</span> best_integer_count_error = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  681</span> </div>
<div class="line"><span class="lineno">  682</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> integer_count = 1; integer_count &lt;= 4;  integer_count++)</div>
<div class="line"><span class="lineno">  683</span>    {</div>
<div class="line"><span class="lineno">  684</span>        <span class="comment">// Compute the quantization level for a given number of integers and a given number of bits</span></div>
<div class="line"><span class="lineno">  685</span>        <span class="keywordtype">int</span> quant_level = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[integer_count][bits_available];</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>        <span class="comment">// Don&#39;t have enough bits to represent a given endpoint format at all!</span></div>
<div class="line"><span class="lineno">  688</span>        <span class="keywordflow">if</span> (quant_level &lt; <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>)</div>
<div class="line"><span class="lineno">  689</span>        {</div>
<div class="line"><span class="lineno">  690</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  691</span>        }</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>        <span class="keywordtype">float</span> integer_count_error = best_combined_error[quant_level][integer_count - 1];</div>
<div class="line"><span class="lineno">  694</span>        <span class="keywordflow">if</span> (integer_count_error &lt; best_integer_count_error)</div>
<div class="line"><span class="lineno">  695</span>        {</div>
<div class="line"><span class="lineno">  696</span>            best_integer_count_error = integer_count_error;</div>
<div class="line"><span class="lineno">  697</span>            best_integer_count = integer_count - 1;</div>
<div class="line"><span class="lineno">  698</span>        }</div>
<div class="line"><span class="lineno">  699</span>    }</div>
<div class="line"><span class="lineno">  700</span> </div>
<div class="line"><span class="lineno">  701</span>    <span class="keywordtype">int</span> ql = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[best_integer_count + 1][bits_available];</div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span>    best_quant_level = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(ql);</div>
<div class="line"><span class="lineno">  704</span>    best_format = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baf29afed4fcc815780d85789b8a095a22">FMT_LUMINANCE</a>;</div>
<div class="line"><span class="lineno">  705</span> </div>
<div class="line"><span class="lineno">  706</span>    <span class="keywordflow">if</span> (ql &gt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>)</div>
<div class="line"><span class="lineno">  707</span>    {</div>
<div class="line"><span class="lineno">  708</span>        best_format = best_combined_format[ql][best_integer_count];</div>
<div class="line"><span class="lineno">  709</span>    }</div>
<div class="line"><span class="lineno">  710</span> </div>
<div class="line"><span class="lineno">  711</span>    <span class="keywordflow">return</span> best_integer_count_error;</div>
<div class="line"><span class="lineno">  712</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a4a0bf4253790d6b09132c02f57fcbe32_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a4a0bf4253790d6b09132c02f57fcbe32_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a4a0bf4253790d6b09132c02f57fcbe32_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a4a0bf4253790d6b09132c02f57fcbe32_icgraph">
<area shape="rect" title="For one partition compute the best format and quantization for a given bit count." alt="" coords="1449,30,1601,85"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="poly" title=" " alt="" coords="1435,60,1401,60,1401,55,1435,55"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="a7681b157ce5786accf05034e1facbdbe" name="a7681b157ce5786accf05034e1facbdbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7681b157ce5786accf05034e1facbdbe">&#9670;&#160;</a></span>three_partitions_find_best_combination_for_bitcount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static float three_partitions_find_best_combination_for_bitcount </td>
          <td>(</td>
          <td class="paramtype">const float</td>          <td class="paramname"><span class="paramname"><em>best_combined_error</em></span>[21][10], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>best_combined_format</em></span>[21][10][3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>bits_available</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;</td>          <td class="paramname"><span class="paramname"><em>best_quant_level</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;</td>          <td class="paramname"><span class="paramname"><em>best_quant_level_mod</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>best_formats</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For 3 partitions compute the best format and quantization for a given bit count. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">best_combined_error</td><td>The best error for each quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">best_combined_format</td><td>The best format for each quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bits_available</td><td>The number of bits available for encoding. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_quant_level</td><td>The output best color quant level. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_quant_level_mod</td><td>The output best color quant level assuming two more bits are available. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_formats</td><td>The output best color formats.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The output error for the best pairing. </dd></dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00899">899</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  906</span>  {</div>
<div class="line"><span class="lineno">  907</span>    <span class="keywordtype">int</span> best_integer_count = 0;</div>
<div class="line"><span class="lineno">  908</span>    <span class="keywordtype">float</span> best_integer_count_error = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  909</span> </div>
<div class="line"><span class="lineno">  910</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> integer_count = 3; integer_count &lt;= 9; integer_count++)</div>
<div class="line"><span class="lineno">  911</span>    {</div>
<div class="line"><span class="lineno">  912</span>        <span class="comment">// Compute the quantization level for a given number of integers and a given number of bits</span></div>
<div class="line"><span class="lineno">  913</span>        <span class="keywordtype">int</span> quant_level = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[integer_count][bits_available];</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>        <span class="comment">// Don&#39;t have enough bits to represent a given endpoint format at all!</span></div>
<div class="line"><span class="lineno">  916</span>        <span class="keywordflow">if</span> (quant_level &lt; <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>)</div>
<div class="line"><span class="lineno">  917</span>        {</div>
<div class="line"><span class="lineno">  918</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  919</span>        }</div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span>        <span class="keywordtype">float</span> integer_count_error = best_combined_error[quant_level][integer_count - 3];</div>
<div class="line"><span class="lineno">  922</span>        <span class="keywordflow">if</span> (integer_count_error &lt; best_integer_count_error)</div>
<div class="line"><span class="lineno">  923</span>        {</div>
<div class="line"><span class="lineno">  924</span>            best_integer_count_error = integer_count_error;</div>
<div class="line"><span class="lineno">  925</span>            best_integer_count = integer_count;</div>
<div class="line"><span class="lineno">  926</span>        }</div>
<div class="line"><span class="lineno">  927</span>    }</div>
<div class="line"><span class="lineno">  928</span> </div>
<div class="line"><span class="lineno">  929</span>    <span class="keywordtype">int</span> ql = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[best_integer_count][bits_available];</div>
<div class="line"><span class="lineno">  930</span>    <span class="keywordtype">int</span> ql_mod = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[best_integer_count][bits_available + 5];</div>
<div class="line"><span class="lineno">  931</span> </div>
<div class="line"><span class="lineno">  932</span>    best_quant_level = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(ql);</div>
<div class="line"><span class="lineno">  933</span>    best_quant_level_mod = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(ql_mod);</div>
<div class="line"><span class="lineno">  934</span> </div>
<div class="line"><span class="lineno">  935</span>    <span class="keywordflow">if</span> (ql &gt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>)</div>
<div class="line"><span class="lineno">  936</span>    {</div>
<div class="line"><span class="lineno">  937</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)</div>
<div class="line"><span class="lineno">  938</span>        {</div>
<div class="line"><span class="lineno">  939</span>            best_formats[i] = best_combined_format[ql][best_integer_count - 3][i];</div>
<div class="line"><span class="lineno">  940</span>        }</div>
<div class="line"><span class="lineno">  941</span>    }</div>
<div class="line"><span class="lineno">  942</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  943</span>    {</div>
<div class="line"><span class="lineno">  944</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)</div>
<div class="line"><span class="lineno">  945</span>        {</div>
<div class="line"><span class="lineno">  946</span>            best_formats[i] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baf29afed4fcc815780d85789b8a095a22">FMT_LUMINANCE</a>;</div>
<div class="line"><span class="lineno">  947</span>        }</div>
<div class="line"><span class="lineno">  948</span>    }</div>
<div class="line"><span class="lineno">  949</span> </div>
<div class="line"><span class="lineno">  950</span>    <span class="keywordflow">return</span> best_integer_count_error;</div>
<div class="line"><span class="lineno">  951</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a7681b157ce5786accf05034e1facbdbe_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a7681b157ce5786accf05034e1facbdbe_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a7681b157ce5786accf05034e1facbdbe_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a7681b157ce5786accf05034e1facbdbe_icgraph">
<area shape="rect" title="For 3 partitions compute the best format and quantization for a given bit count." alt="" coords="1449,30,1601,85"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="poly" title=" " alt="" coords="1435,60,1401,60,1401,55,1435,55"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="ab08ff5ed53a05a876dc8e90c05aeef72" name="ab08ff5ed53a05a876dc8e90c05aeef72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab08ff5ed53a05a876dc8e90c05aeef72">&#9670;&#160;</a></span>three_partitions_find_best_combination_for_every_quantization_and_integer_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void three_partitions_find_best_combination_for_every_quantization_and_integer_count </td>
          <td>(</td>
          <td class="paramtype">const float</td>          <td class="paramname"><span class="paramname"><em>best_error</em></span>[3][21][4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>best_format</em></span>[3][21][4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>best_combined_error</em></span>[21][10], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>best_combined_format</em></span>[21][10][3]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For 3 partitions compute the best format combinations for every pair of quant mode and integer count. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">best_error</td><td>The best error for a single endpoint quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">best_format</td><td>The best format for a single endpoint quant level and integer count. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_combined_error</td><td>The best combined error pairings for the 3 partitions. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_combined_format</td><td>The best combined format pairings for the 3 partitions. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00836">836</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  841</span>  {</div>
<div class="line"><span class="lineno">  842</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75aad7b37039e6f1b7dc45712dac09dd8f7">QUANT_2</a>; i &lt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a>; i++)</div>
<div class="line"><span class="lineno">  843</span>    {</div>
<div class="line"><span class="lineno">  844</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 10; j++)</div>
<div class="line"><span class="lineno">  845</span>        {</div>
<div class="line"><span class="lineno">  846</span>            best_combined_error[i][j] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  847</span>        }</div>
<div class="line"><span class="lineno">  848</span>    }</div>
<div class="line"><span class="lineno">  849</span> </div>
<div class="line"><span class="lineno">  850</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> quant = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>; quant &lt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a>; quant++)</div>
<div class="line"><span class="lineno">  851</span>    {</div>
<div class="line"><span class="lineno">  852</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) <span class="comment">// integer-count for first endpoint-pair</span></div>
<div class="line"><span class="lineno">  853</span>        {</div>
<div class="line"><span class="lineno">  854</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; j++) <span class="comment">// integer-count for second endpoint-pair</span></div>
<div class="line"><span class="lineno">  855</span>            {</div>
<div class="line"><span class="lineno">  856</span>                <span class="keywordtype">int</span> low2 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(i, j);</div>
<div class="line"><span class="lineno">  857</span>                <span class="keywordtype">int</span> high2 = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(i, j);</div>
<div class="line"><span class="lineno">  858</span>                <span class="keywordflow">if</span> ((high2 - low2) &gt; 1)</div>
<div class="line"><span class="lineno">  859</span>                {</div>
<div class="line"><span class="lineno">  860</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  861</span>                }</div>
<div class="line"><span class="lineno">  862</span> </div>
<div class="line"><span class="lineno">  863</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 4; k++) <span class="comment">// integer-count for third endpoint-pair</span></div>
<div class="line"><span class="lineno">  864</span>                {</div>
<div class="line"><span class="lineno">  865</span>                    <span class="keywordtype">int</span> low3 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(k, low2);</div>
<div class="line"><span class="lineno">  866</span>                    <span class="keywordtype">int</span> high3 = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(k, high2);</div>
<div class="line"><span class="lineno">  867</span>                    <span class="keywordflow">if</span> ((high3 - low3) &gt; 1)</div>
<div class="line"><span class="lineno">  868</span>                    {</div>
<div class="line"><span class="lineno">  869</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  870</span>                    }</div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>                    <span class="keywordtype">int</span> intcnt = i + j + k;</div>
<div class="line"><span class="lineno">  873</span>                    <span class="keywordtype">float</span> errorterm = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(best_error[0][quant][i] + best_error[1][quant][j] + best_error[2][quant][k], 1e10f);</div>
<div class="line"><span class="lineno">  874</span>                    <span class="keywordflow">if</span> (errorterm &lt;= best_combined_error[quant][intcnt])</div>
<div class="line"><span class="lineno">  875</span>                    {</div>
<div class="line"><span class="lineno">  876</span>                        best_combined_error[quant][intcnt] = errorterm;</div>
<div class="line"><span class="lineno">  877</span>                        best_combined_format[quant][intcnt][0] = best_format[0][quant][i];</div>
<div class="line"><span class="lineno">  878</span>                        best_combined_format[quant][intcnt][1] = best_format[1][quant][j];</div>
<div class="line"><span class="lineno">  879</span>                        best_combined_format[quant][intcnt][2] = best_format[2][quant][k];</div>
<div class="line"><span class="lineno">  880</span>                    }</div>
<div class="line"><span class="lineno">  881</span>                }</div>
<div class="line"><span class="lineno">  882</span>            }</div>
<div class="line"><span class="lineno">  883</span>        }</div>
<div class="line"><span class="lineno">  884</span>    }</div>
<div class="line"><span class="lineno">  885</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_ab08ff5ed53a05a876dc8e90c05aeef72_cgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_ab08ff5ed53a05a876dc8e90c05aeef72_cgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_ab08ff5ed53a05a876dc8e90c05aeef72_cgraph" id="aastcenc__pick__best__endpoint__format_8cpp_ab08ff5ed53a05a876dc8e90c05aeef72_cgraph">
<area shape="rect" title="For 3 partitions compute the best format combinations for every pair of quant mode and integer count." alt="" coords="5,9,169,78"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="217,5,297,31"/>
<area shape="poly" title=" " alt="" coords="169,28,203,23,204,29,170,34"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="219,55,295,80"/>
<area shape="poly" title=" " alt="" coords="170,52,206,57,205,63,169,58"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_ab08ff5ed53a05a876dc8e90c05aeef72_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_ab08ff5ed53a05a876dc8e90c05aeef72_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_ab08ff5ed53a05a876dc8e90c05aeef72_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_ab08ff5ed53a05a876dc8e90c05aeef72_icgraph">
<area shape="rect" title="For 3 partitions compute the best format combinations for every pair of quant mode and integer count." alt="" coords="1449,23,1613,92"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="poly" title=" " alt="" coords="1436,60,1401,60,1401,55,1436,55"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="a5c74518d7a68796ba962179901f805ae" name="a5c74518d7a68796ba962179901f805ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c74518d7a68796ba962179901f805ae">&#9670;&#160;</a></span>two_partitions_find_best_combination_for_bitcount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static float two_partitions_find_best_combination_for_bitcount </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>best_combined_error</em></span>[21][7], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>best_combined_format</em></span>[21][7][2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>bits_available</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;</td>          <td class="paramname"><span class="paramname"><em>best_quant_level</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;</td>          <td class="paramname"><span class="paramname"><em>best_quant_level_mod</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>best_formats</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For 2 partitions compute the best format and quantization for a given bit count. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">best_combined_error</td><td>The best error for each quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">best_combined_format</td><td>The best format for each quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bits_available</td><td>The number of bits available for encoding. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_quant_level</td><td>The output best color quant level. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_quant_level_mod</td><td>The output best color quant level assuming two more bits are available. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_formats</td><td>The output best color formats.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The output error for the best pairing. </dd></dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00774">774</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  781</span>  {</div>
<div class="line"><span class="lineno">  782</span>    <span class="keywordtype">int</span> best_integer_count = 0;</div>
<div class="line"><span class="lineno">  783</span>    <span class="keywordtype">float</span> best_integer_count_error = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> integer_count = 2; integer_count &lt;= 8; integer_count++)</div>
<div class="line"><span class="lineno">  786</span>    {</div>
<div class="line"><span class="lineno">  787</span>        <span class="comment">// Compute the quantization level for a given number of integers and a given number of bits</span></div>
<div class="line"><span class="lineno">  788</span>        <span class="keywordtype">int</span> quant_level = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[integer_count][bits_available];</div>
<div class="line"><span class="lineno">  789</span> </div>
<div class="line"><span class="lineno">  790</span>        <span class="comment">// Don&#39;t have enough bits to represent a given endpoint format at all!</span></div>
<div class="line"><span class="lineno">  791</span>        <span class="keywordflow">if</span> (quant_level &lt; <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>)</div>
<div class="line"><span class="lineno">  792</span>        {</div>
<div class="line"><span class="lineno">  793</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  794</span>        }</div>
<div class="line"><span class="lineno">  795</span> </div>
<div class="line"><span class="lineno">  796</span>        <span class="keywordtype">float</span> integer_count_error = best_combined_error[quant_level][integer_count - 2];</div>
<div class="line"><span class="lineno">  797</span>        <span class="keywordflow">if</span> (integer_count_error &lt; best_integer_count_error)</div>
<div class="line"><span class="lineno">  798</span>        {</div>
<div class="line"><span class="lineno">  799</span>            best_integer_count_error = integer_count_error;</div>
<div class="line"><span class="lineno">  800</span>            best_integer_count = integer_count;</div>
<div class="line"><span class="lineno">  801</span>        }</div>
<div class="line"><span class="lineno">  802</span>    }</div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>    <span class="keywordtype">int</span> ql = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[best_integer_count][bits_available];</div>
<div class="line"><span class="lineno">  805</span>    <span class="keywordtype">int</span> ql_mod = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[best_integer_count][bits_available + 2];</div>
<div class="line"><span class="lineno">  806</span> </div>
<div class="line"><span class="lineno">  807</span>    best_quant_level = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(ql);</div>
<div class="line"><span class="lineno">  808</span>    best_quant_level_mod = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(ql_mod);</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>    <span class="keywordflow">if</span> (ql &gt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>)</div>
<div class="line"><span class="lineno">  811</span>    {</div>
<div class="line"><span class="lineno">  812</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++)</div>
<div class="line"><span class="lineno">  813</span>        {</div>
<div class="line"><span class="lineno">  814</span>            best_formats[i] = best_combined_format[ql][best_integer_count - 2][i];</div>
<div class="line"><span class="lineno">  815</span>        }</div>
<div class="line"><span class="lineno">  816</span>    }</div>
<div class="line"><span class="lineno">  817</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  818</span>    {</div>
<div class="line"><span class="lineno">  819</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++)</div>
<div class="line"><span class="lineno">  820</span>        {</div>
<div class="line"><span class="lineno">  821</span>            best_formats[i] = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a961094c83b018837fe95bef26926cb4baf29afed4fcc815780d85789b8a095a22">FMT_LUMINANCE</a>;</div>
<div class="line"><span class="lineno">  822</span>        }</div>
<div class="line"><span class="lineno">  823</span>    }</div>
<div class="line"><span class="lineno">  824</span> </div>
<div class="line"><span class="lineno">  825</span>    <span class="keywordflow">return</span> best_integer_count_error;</div>
<div class="line"><span class="lineno">  826</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_a5c74518d7a68796ba962179901f805ae_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_a5c74518d7a68796ba962179901f805ae_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_a5c74518d7a68796ba962179901f805ae_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_a5c74518d7a68796ba962179901f805ae_icgraph">
<area shape="rect" title="For 2 partitions compute the best format and quantization for a given bit count." alt="" coords="1449,30,1601,85"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="poly" title=" " alt="" coords="1435,60,1401,60,1401,55,1435,55"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
<a id="ac317754d4bbd795d6f29b331883e8eb3" name="ac317754d4bbd795d6f29b331883e8eb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac317754d4bbd795d6f29b331883e8eb3">&#9670;&#160;</a></span>two_partitions_find_best_combination_for_every_quantization_and_integer_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void two_partitions_find_best_combination_for_every_quantization_and_integer_count </td>
          <td>(</td>
          <td class="paramtype">const float</td>          <td class="paramname"><span class="paramname"><em>best_error</em></span>[2][21][4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>best_format</em></span>[2][21][4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>best_combined_error</em></span>[21][7], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>best_combined_format</em></span>[21][7][2]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For 2 partitions compute the best format combinations for every pair of quant mode and integer count. </p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">best_error</td><td>The best error for a single endpoint quant level and integer count. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">best_format</td><td>The best format for a single endpoint quant level and integer count. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_combined_error</td><td>The best combined error pairings for the 2 partitions. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">best_combined_format</td><td>The best combined format pairings for the 2 partitions. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html">astcenc_pick_best_endpoint_format.cpp</a> 파일의 <a class="el" href="astcenc__pick__best__endpoint__format_8cpp_source.html#l00722">722</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  727</span>  {</div>
<div class="line"><span class="lineno">  728</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75aad7b37039e6f1b7dc45712dac09dd8f7">QUANT_2</a>; i &lt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a>; i++)</div>
<div class="line"><span class="lineno">  729</span>    {</div>
<div class="line"><span class="lineno">  730</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 7; j++)</div>
<div class="line"><span class="lineno">  731</span>        {</div>
<div class="line"><span class="lineno">  732</span>            best_combined_error[i][j] = <a class="code hl_variable" href="astcenc__internal_8h.html#aaa341023bf98401423daebc6795e2c83">ERROR_CALC_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  733</span>        }</div>
<div class="line"><span class="lineno">  734</span>    }</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> quant = <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>; quant &lt;= <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a190d92e6d064f52082c798be06b2850f">QUANT_256</a>; quant++)</div>
<div class="line"><span class="lineno">  737</span>    {</div>
<div class="line"><span class="lineno">  738</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) <span class="comment">// integer-count for first endpoint-pair</span></div>
<div class="line"><span class="lineno">  739</span>        {</div>
<div class="line"><span class="lineno">  740</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; j++) <span class="comment">// integer-count for second endpoint-pair</span></div>
<div class="line"><span class="lineno">  741</span>            {</div>
<div class="line"><span class="lineno">  742</span>                <span class="keywordtype">int</span> low2 = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(i, j);</div>
<div class="line"><span class="lineno">  743</span>                <span class="keywordtype">int</span> high2 = <a class="code hl_function" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f">astc::max</a>(i, j);</div>
<div class="line"><span class="lineno">  744</span>                <span class="keywordflow">if</span> ((high2 - low2) &gt; 1)</div>
<div class="line"><span class="lineno">  745</span>                {</div>
<div class="line"><span class="lineno">  746</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  747</span>                }</div>
<div class="line"><span class="lineno">  748</span> </div>
<div class="line"><span class="lineno">  749</span>                <span class="keywordtype">int</span> intcnt = i + j;</div>
<div class="line"><span class="lineno">  750</span>                <span class="keywordtype">float</span> errorterm = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(best_error[0][quant][i] + best_error[1][quant][j], 1e10f);</div>
<div class="line"><span class="lineno">  751</span>                <span class="keywordflow">if</span> (errorterm &lt;= best_combined_error[quant][intcnt])</div>
<div class="line"><span class="lineno">  752</span>                {</div>
<div class="line"><span class="lineno">  753</span>                    best_combined_error[quant][intcnt] = errorterm;</div>
<div class="line"><span class="lineno">  754</span>                    best_combined_format[quant][intcnt][0] = best_format[0][quant][i];</div>
<div class="line"><span class="lineno">  755</span>                    best_combined_format[quant][intcnt][1] = best_format[1][quant][j];</div>
<div class="line"><span class="lineno">  756</span>                }</div>
<div class="line"><span class="lineno">  757</span>            }</div>
<div class="line"><span class="lineno">  758</span>        }</div>
<div class="line"><span class="lineno">  759</span>    }</div>
<div class="line"><span class="lineno">  760</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_ac317754d4bbd795d6f29b331883e8eb3_cgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_ac317754d4bbd795d6f29b331883e8eb3_cgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_ac317754d4bbd795d6f29b331883e8eb3_cgraph" id="aastcenc__pick__best__endpoint__format_8cpp_ac317754d4bbd795d6f29b331883e8eb3_cgraph">
<area shape="rect" title="For 2 partitions compute the best format combinations for every pair of quant mode and integer count." alt="" coords="5,9,169,78"/>
<area shape="rect" href="namespaceastc.html#a83a55552d03399cdff6cf2fed8312c9f" title="Return the maximum of two values." alt="" coords="217,5,297,31"/>
<area shape="poly" title=" " alt="" coords="169,28,203,23,204,29,170,34"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="219,55,295,80"/>
<area shape="poly" title=" " alt="" coords="170,52,206,57,205,63,169,58"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__pick__best__endpoint__format_8cpp_ac317754d4bbd795d6f29b331883e8eb3_icgraph.png" border="0" usemap="#aastcenc__pick__best__endpoint__format_8cpp_ac317754d4bbd795d6f29b331883e8eb3_icgraph" alt=""/></div>
<map name="aastcenc__pick__best__endpoint__format_8cpp_ac317754d4bbd795d6f29b331883e8eb3_icgraph" id="aastcenc__pick__best__endpoint__format_8cpp_ac317754d4bbd795d6f29b331883e8eb3_icgraph">
<area shape="rect" title="For 2 partitions compute the best format combinations for every pair of quant mode and integer count." alt="" coords="1449,23,1613,92"/>
<area shape="rect" href="astcenc__pick__best__endpoint__format_8cpp.html#a81c7b68e8c7b82a5ff718f21bd4f3c35" title="Identify, for each mode, which set of color endpoint produces the best result." alt="" coords="1239,37,1401,77"/>
<area shape="poly" title=" " alt="" coords="1436,60,1401,60,1401,55,1436,55"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af5f518a15600c71922e69267dea2db99" title="Compress a block using a chosen partitioning and 1 plane of weights." alt="" coords="1015,5,1191,45"/>
<area shape="poly" title=" " alt="" coords="1225,46,1190,41,1191,36,1225,41"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#af11a976c8ea386db054bef472ce0667c" title="Compress a block using a chosen partitioning and 2 planes of weights." alt="" coords="1015,69,1191,109"/>
<area shape="poly" title=" " alt="" coords="1225,74,1191,79,1190,74,1225,69"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,45,967,70"/>
<area shape="poly" title=" " alt="" coords="1002,45,967,50,966,45,1001,39"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,45,801,70"/>
<area shape="poly" title=" " alt="" coords="835,60,802,60,802,55,835,55"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,45,632,70"/>
<area shape="poly" title=" " alt="" coords="666,60,632,60,632,55,666,55"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,45,207,70"/>
<area shape="poly" title=" " alt="" coords="444,57,409,56,255,56,207,58,207,52,255,51,409,51,444,51"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,65,409,105"/>
<area shape="poly" title=" " alt="" coords="444,73,410,78,409,73,443,68"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,45,56,70"/>
<area shape="poly" title=" " alt="" coords="90,60,57,60,57,55,90,55"/>
<area shape="poly" title=" " alt="" coords="241,74,206,68,207,63,242,68"/>
<area shape="poly" title=" " alt="" coords="1001,75,966,70,967,64,1002,70"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_211b531afad3b7391864460492782af6.html">astc-encoder-main</a></li><li class="navelem"><a class="el" href="dir_7df889ea08e038e0b05c337eccc30153.html">Source</a></li><li class="navelem"><a class="el" href="astcenc__pick__best__endpoint__format_8cpp.html">astcenc_pick_best_endpoint_format.cpp</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
