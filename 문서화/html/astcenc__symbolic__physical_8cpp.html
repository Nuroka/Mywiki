<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project1: C:/Users/inhyu/OneDrive/바탕 화면/랩실 내용/astc-encoder-main/Source/astcenc_symbolic_physical.cpp 파일 참조</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Project1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','검색',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('astcenc__symbolic__physical_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">함수</a>  </div>
  <div class="headertitle"><div class="title">astcenc_symbolic_physical.cpp 파일 참조</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="astcenc__internal_8h_source.html">astcenc_internal.h</a>&quot;</code><br />
<code>#include &lt;cassert&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
astcenc_symbolic_physical.cpp에 대한 include 의존 그래프</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__symbolic__physical_8cpp__incl.png" border="0" usemap="#a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__symbolic__physical_8cpp" alt=""/></div>
<map name="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__symbolic__physical_8cpp" id="a_c_1_2_users_2inhyu_2_one_drive_2_xEB_xB0_x94_xED_x83_x95_01_xED_x99_x94_xEB_xA9_xB4_2_xEB_x9E_xA9_xEC_x8B_xA4_01_xEB_x82_xB4_xEC_x9A_xA9_2astc-encoder-main_2_source_2astcenc__symbolic__physical_8cpp">
<area shape="rect" title=" " alt="" coords="121,5,297,89"/>
<area shape="rect" href="astcenc__internal_8h.html" title=" " alt="" coords="321,137,449,163"/>
<area shape="poly" title=" " alt="" coords="282,87,354,128,352,133,279,92"/>
<area shape="rect" title=" " alt="" coords="5,284,71,309"/>
<area shape="poly" title=" " alt="" coords="183,91,56,274,52,271,178,88"/>
<area shape="rect" title=" " alt="" coords="530,445,605,471"/>
<area shape="poly" title=" " alt="" coords="449,158,539,178,577,192,601,209,617,236,625,266,626,297,622,329,604,388,583,434,578,432,599,386,617,328,621,297,620,267,612,238,597,212,574,197,537,183,448,163"/>
<area shape="rect" title=" " alt="" coords="527,284,591,309"/>
<area shape="poly" title=" " alt="" coords="449,150,484,155,520,166,553,183,580,209,587,225,587,241,576,273,571,271,582,241,582,226,576,212,550,188,518,171,483,160,448,155"/>
<area shape="rect" title=" " alt="" coords="418,284,479,309"/>
<area shape="poly" title=" " alt="" coords="396,162,426,210,446,269,441,271,421,212,391,164"/>
<area shape="rect" title=" " alt="" coords="273,211,333,236"/>
<area shape="poly" title=" " alt="" coords="373,165,329,204,325,200,370,161"/>
<area shape="rect" title=" " alt="" coords="358,211,411,236"/>
<area shape="poly" title=" " alt="" coords="387,163,387,197,382,197,382,163"/>
<area shape="rect" href="astcenc_8h.html" title=" " alt="" coords="487,211,565,236"/>
<area shape="poly" title=" " alt="" coords="409,160,492,202,490,207,406,165"/>
<area shape="rect" href="astcenc__mathlib_8h.html" title=" " alt="" coords="121,211,249,236"/>
<area shape="poly" title=" " alt="" coords="353,165,231,208,230,203,352,160"/>
<area shape="rect" href="astcenc__vecmathlib_8h.html" title=" " alt="" coords="101,284,247,309"/>
<area shape="poly" title=" " alt="" coords="321,159,261,166,198,176,143,192,124,202,111,212,106,228,112,244,126,260,144,274,141,279,123,264,107,247,100,228,106,209,121,197,142,187,196,171,260,160,320,153"/>
<area shape="poly" title=" " alt="" coords="534,235,551,271,546,273,529,237"/>
<area shape="poly" title=" " alt="" coords="515,238,473,276,470,273,512,234"/>
<area shape="poly" title=" " alt="" coords="228,233,406,281,404,286,226,239"/>
<area shape="poly" title=" " alt="" coords="162,238,75,280,73,276,160,234"/>
<area shape="rect" title=" " alt="" coords="271,284,330,309"/>
<area shape="poly" title=" " alt="" coords="205,234,271,274,269,279,202,238"/>
<area shape="poly" title=" " alt="" coords="186,237,180,271,175,270,180,236"/>
<area shape="rect" href="astcenc__vecmathlib__none__4_8h.html" title=" " alt="" coords="266,357,402,397"/>
<area shape="poly" title=" " alt="" coords="198,307,284,349,282,353,196,312"/>
<area shape="rect" href="astcenc__vecmathlib__common__4_8h.html" title=" " alt="" coords="106,357,242,397"/>
<area shape="poly" title=" " alt="" coords="177,310,177,344,171,344,171,310"/>
<area shape="poly" title=" " alt="" coords="391,395,521,438,519,443,389,400"/>
<area shape="rect" title=" " alt="" coords="183,445,240,471"/>
<area shape="poly" title=" " alt="" coords="306,400,242,440,240,436,303,395"/>
<area shape="rect" title=" " alt="" coords="283,445,345,471"/>
<area shape="poly" title=" " alt="" coords="332,398,323,432,318,431,327,397"/>
<area shape="rect" title=" " alt="" coords="369,445,419,471"/>
<area shape="poly" title=" " alt="" coords="351,396,379,433,375,436,346,399"/>
<area shape="poly" title=" " alt="" coords="185,396,202,432,198,434,181,399"/>
</map>
</div>
</div>
<p><a href="astcenc__symbolic__physical_8cpp_source.html">이 파일의 소스 코드 페이지로 가기</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
함수</h2></td></tr>
<tr class="memitem:ac8ea7de26c1e90f79a9e315407ab04ff" id="r_ac8ea7de26c1e90f79a9e315407ab04ff"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac8ea7de26c1e90f79a9e315407ab04ff">bitrev8</a> (int p)</td></tr>
<tr class="memdesc:ac8ea7de26c1e90f79a9e315407ab04ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions for converting between symbolic and physical encodings.  <br /></td></tr>
<tr class="separator:ac8ea7de26c1e90f79a9e315407ab04ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6062008b44453960d62c54f571cccfe1" id="r_a6062008b44453960d62c54f571cccfe1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a> (int bitcount, int bitoffset, const uint8_t *ptr)</td></tr>
<tr class="memdesc:a6062008b44453960d62c54f571cccfe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read up to 8 bits at an arbitrary bit offset.  <br /></td></tr>
<tr class="separator:a6062008b44453960d62c54f571cccfe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8ca963a290faa03da1eed39553521ec" id="r_ae8ca963a290faa03da1eed39553521ec"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a> (int value, int bitcount, int bitoffset, uint8_t *ptr)</td></tr>
<tr class="memdesc:ae8ca963a290faa03da1eed39553521ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write up to 8 bits at an arbitrary bit offset.  <br /></td></tr>
<tr class="separator:ae8ca963a290faa03da1eed39553521ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7b1f1696c0ee5cbfd6f2546fa400011" id="r_af7b1f1696c0ee5cbfd6f2546fa400011"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7b1f1696c0ee5cbfd6f2546fa400011">symbolic_to_physical</a> (const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd, const <a class="el" href="structsymbolic__compressed__block.html">symbolic_compressed_block</a> &amp;scb, uint8_t pcb[16])</td></tr>
<tr class="memdesc:af7b1f1696c0ee5cbfd6f2546fa400011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a symbolic representation into a binary physical encoding.  <br /></td></tr>
<tr class="separator:af7b1f1696c0ee5cbfd6f2546fa400011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6272d8cee006f73e936e16739c4cab" id="r_acd6272d8cee006f73e936e16739c4cab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd6272d8cee006f73e936e16739c4cab">physical_to_symbolic</a> (const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;bsd, const uint8_t pcb[16], <a class="el" href="structsymbolic__compressed__block.html">symbolic_compressed_block</a> &amp;scb)</td></tr>
<tr class="memdesc:acd6272d8cee006f73e936e16739c4cab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a binary physical encoding into a symbolic representation.  <br /></td></tr>
<tr class="separator:acd6272d8cee006f73e936e16739c4cab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">함수 문서화</h2>
<a id="ac8ea7de26c1e90f79a9e315407ab04ff" name="ac8ea7de26c1e90f79a9e315407ab04ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ea7de26c1e90f79a9e315407ab04ff">&#9670;&#160;</a></span>bitrev8()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bitrev8 </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>p</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Functions for converting between symbolic and physical encodings. </p>
<p>Reverse bits in a byte.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>The value to reverse.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The reversed result. </dd></dl>

<p class="definition"><a class="el" href="astcenc__symbolic__physical_8cpp_source.html">astcenc_symbolic_physical.cpp</a> 파일의 <a class="el" href="astcenc__symbolic__physical_8cpp_source.html#l00033">33</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">   34</span>{</div>
<div class="line"><span class="lineno">   35</span>    p = ((p &amp; 0x0F) &lt;&lt; 4) | ((p &gt;&gt; 4) &amp; 0x0F);</div>
<div class="line"><span class="lineno">   36</span>    p = ((p &amp; 0x33) &lt;&lt; 2) | ((p &gt;&gt; 2) &amp; 0x33);</div>
<div class="line"><span class="lineno">   37</span>    p = ((p &amp; 0x55) &lt;&lt; 1) | ((p &gt;&gt; 1) &amp; 0x55);</div>
<div class="line"><span class="lineno">   38</span>    <span class="keywordflow">return</span> p;</div>
<div class="line"><span class="lineno">   39</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__symbolic__physical_8cpp_ac8ea7de26c1e90f79a9e315407ab04ff_icgraph.png" border="0" usemap="#aastcenc__symbolic__physical_8cpp_ac8ea7de26c1e90f79a9e315407ab04ff_icgraph" alt=""/></div>
<map name="aastcenc__symbolic__physical_8cpp_ac8ea7de26c1e90f79a9e315407ab04ff_icgraph" id="aastcenc__symbolic__physical_8cpp_ac8ea7de26c1e90f79a9e315407ab04ff_icgraph">
<area shape="rect" title="Functions for converting between symbolic and physical encodings." alt="" coords="1289,124,1348,149"/>
<area shape="rect" href="astcenc__symbolic__physical_8cpp.html#acd6272d8cee006f73e936e16739c4cab" title="Convert a binary physical encoding into a symbolic representation." alt="" coords="900,98,1047,124"/>
<area shape="poly" title=" " alt="" coords="1276,136,1047,119,1047,114,1276,130"/>
<area shape="rect" href="astcenc__symbolic__physical_8cpp.html#af7b1f1696c0ee5cbfd6f2546fa400011" title="Convert a symbolic representation into a binary physical encoding." alt="" coords="1095,149,1241,174"/>
<area shape="poly" title=" " alt="" coords="1276,146,1242,152,1241,147,1275,141"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a062987fc41b9df7d34d8eb668f29eb21" title="Decompress an image." alt="" coords="485,34,631,74"/>
<area shape="poly" title=" " alt="" coords="900,98,852,89,631,63,632,57,852,84,901,93"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a4138a9fb500526b5bfd98ea53a3ecec7" title="Provide a high level summary of a block&#39;s encoding." alt="" coords="693,98,852,124"/>
<area shape="poly" title=" " alt="" coords="887,114,852,114,852,108,887,108"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,98,207,124"/>
<area shape="poly" title=" " alt="" coords="490,32,438,19,378,10,315,10,285,15,256,24,228,39,203,60,168,100,164,96,199,56,225,35,254,19,284,10,315,5,378,4,439,13,491,27"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a02c55a799cc33b39f9d733b1a7e91281" title="Runner callback function for a decompression worker thread." alt="" coords="255,34,423,74"/>
<area shape="poly" title=" " alt="" coords="471,56,423,56,423,51,471,51"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,98,56,124"/>
<area shape="poly" title=" " alt="" coords="90,114,57,114,57,108,90,108"/>
<area shape="poly" title=" " alt="" coords="262,80,198,101,196,96,260,75"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#ac1760850c83dafab500f7cf8ab789246" title="Populate a single diagnostic image showing aspects of the encoding." alt="" coords="481,98,635,124"/>
<area shape="poly" title=" " alt="" coords="680,114,636,114,636,108,680,108"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a65c87ee1ff0ed0736cffa06692853479" title="Print a set of diagnostic images showing aspects of the encoding." alt="" coords="257,98,420,124"/>
<area shape="poly" title=" " alt="" coords="467,114,420,114,420,108,467,108"/>
<area shape="poly" title=" " alt="" coords="243,114,207,114,207,108,243,108"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="915,149,1032,174"/>
<area shape="poly" title=" " alt="" coords="1081,164,1032,164,1032,159,1081,159"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="712,149,833,174"/>
<area shape="poly" title=" " alt="" coords="901,164,834,164,834,159,901,159"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="471,149,645,174"/>
<area shape="poly" title=" " alt="" coords="698,164,645,164,645,159,698,159"/>
<area shape="poly" title=" " alt="" coords="457,160,358,152,254,139,199,126,200,121,255,134,359,147,457,155"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="261,199,416,239"/>
<area shape="poly" title=" " alt="" coords="496,180,416,201,415,196,495,175"/>
<area shape="poly" title=" " alt="" coords="277,195,253,182,208,153,171,126,174,121,211,149,256,178,279,190"/>
</map>
</div>

</div>
</div>
<a id="acd6272d8cee006f73e936e16739c4cab" name="acd6272d8cee006f73e936e16739c4cab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd6272d8cee006f73e936e16739c4cab">&#9670;&#160;</a></span>physical_to_symbolic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void physical_to_symbolic </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t</td>          <td class="paramname"><span class="paramname"><em>pcb</em></span>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsymbolic__compressed__block.html">symbolic_compressed_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>scb</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a binary physical encoding into a symbolic representation. </p>
<p>This function can cope with arbitrary input data; output blocks will be flagged as an error block if the encoding is invalid.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">bsd</td><td>The block size information. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">pcb</td><td>The physical compresesd block input. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">scb</td><td>The output symbolic representation. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__symbolic__physical_8cpp_source.html">astcenc_symbolic_physical.cpp</a> 파일의 <a class="el" href="astcenc__symbolic__physical_8cpp_source.html#l00291">291</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  295</span>  {</div>
<div class="line"><span class="lineno">  296</span>    uint8_t bswapped[16];</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>    scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> = <a class="code hl_variable" href="astcenc__internal_8h.html#a62b894529f4eb2badc6656c94ca1c003">SYM_BTYPE_NONCONST</a>;</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>    <span class="comment">// Extract header fields</span></div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordtype">int</span> <a class="code hl_struct" href="structblock__mode.html">block_mode</a> = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(11, 0, pcb);</div>
<div class="line"><span class="lineno">  302</span>    <span class="keywordflow">if</span> ((<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &amp; 0x1FF) == 0x1FC)</div>
<div class="line"><span class="lineno">  303</span>    {</div>
<div class="line"><span class="lineno">  304</span>        <span class="comment">// Constant color block</span></div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>        <span class="comment">// Check what format the data has</span></div>
<div class="line"><span class="lineno">  307</span>        <span class="keywordflow">if</span> (<a class="code hl_struct" href="structblock__mode.html">block_mode</a> &amp; 0x200)</div>
<div class="line"><span class="lineno">  308</span>        {</div>
<div class="line"><span class="lineno">  309</span>            scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> = <a class="code hl_variable" href="astcenc__internal_8h.html#aebc278aa5ca9c97969af61d9186f9172">SYM_BTYPE_CONST_F16</a>;</div>
<div class="line"><span class="lineno">  310</span>        }</div>
<div class="line"><span class="lineno">  311</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  312</span>        {</div>
<div class="line"><span class="lineno">  313</span>            scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> = <a class="code hl_variable" href="astcenc__internal_8h.html#adb59df7fefb94a8c52948d49ce70b1f5">SYM_BTYPE_CONST_U16</a>;</div>
<div class="line"><span class="lineno">  314</span>        }</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>        scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a6ac68bba1c38975e28fb3e67e974c551">partition_count</a> = 0;</div>
<div class="line"><span class="lineno">  317</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++)</div>
<div class="line"><span class="lineno">  318</span>        {</div>
<div class="line"><span class="lineno">  319</span>            scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#abb86a3a9a9bf54d5138c1883ed6159a5">constant_color</a>[i] = pcb[2 * i + 8] | (pcb[2 * i + 9] &lt;&lt; 8);</div>
<div class="line"><span class="lineno">  320</span>        }</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>        <span class="comment">// Additionally, check that the void-extent</span></div>
<div class="line"><span class="lineno">  323</span>        <span class="keywordflow">if</span> (bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#afc7428efe69cba2425ae335d9d266714">zdim</a> == 1)</div>
<div class="line"><span class="lineno">  324</span>        {</div>
<div class="line"><span class="lineno">  325</span>            <span class="comment">// 2D void-extent</span></div>
<div class="line"><span class="lineno">  326</span>            <span class="keywordtype">int</span> rsvbits = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(2, 10, pcb);</div>
<div class="line"><span class="lineno">  327</span>            <span class="keywordflow">if</span> (rsvbits != 3)</div>
<div class="line"><span class="lineno">  328</span>            {</div>
<div class="line"><span class="lineno">  329</span>                scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> = <a class="code hl_variable" href="astcenc__internal_8h.html#abbaedf878cfb7c16b1d10b72128b5ee7">SYM_BTYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  330</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  331</span>            }</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>            <span class="comment">// Low values span 3 bytes so need two read_bits calls</span></div>
<div class="line"><span class="lineno">  334</span>            <span class="keywordtype">int</span> vx_low_s = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(8, 12, pcb) | (<a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(5, 12 + 8, pcb) &lt;&lt; 8);</div>
<div class="line"><span class="lineno">  335</span>            <span class="keywordtype">int</span> vx_high_s = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(13, 25, pcb);</div>
<div class="line"><span class="lineno">  336</span>            <span class="keywordtype">int</span> vx_low_t = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(8, 38, pcb) | (<a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(5, 38 + 8, pcb) &lt;&lt; 8);</div>
<div class="line"><span class="lineno">  337</span>            <span class="keywordtype">int</span> vx_high_t = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(13, 51, pcb);</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>            <span class="keywordtype">int</span> all_ones = vx_low_s == 0x1FFF &amp;&amp; vx_high_s == 0x1FFF &amp;&amp;</div>
<div class="line"><span class="lineno">  340</span>                           vx_low_t == 0x1FFF &amp;&amp; vx_high_t == 0x1FFF;</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>            <span class="keywordflow">if</span> ((vx_low_s &gt;= vx_high_s || vx_low_t &gt;= vx_high_t) &amp;&amp; !all_ones)</div>
<div class="line"><span class="lineno">  343</span>            {</div>
<div class="line"><span class="lineno">  344</span>                scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> = <a class="code hl_variable" href="astcenc__internal_8h.html#abbaedf878cfb7c16b1d10b72128b5ee7">SYM_BTYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  345</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  346</span>            }</div>
<div class="line"><span class="lineno">  347</span>        }</div>
<div class="line"><span class="lineno">  348</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  349</span>        {</div>
<div class="line"><span class="lineno">  350</span>            <span class="comment">// 3D void-extent</span></div>
<div class="line"><span class="lineno">  351</span>            <span class="keywordtype">int</span> vx_low_s = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(9, 10, pcb);</div>
<div class="line"><span class="lineno">  352</span>            <span class="keywordtype">int</span> vx_high_s = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(9, 19, pcb);</div>
<div class="line"><span class="lineno">  353</span>            <span class="keywordtype">int</span> vx_low_t = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(9, 28, pcb);</div>
<div class="line"><span class="lineno">  354</span>            <span class="keywordtype">int</span> vx_high_t = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(9, 37, pcb);</div>
<div class="line"><span class="lineno">  355</span>            <span class="keywordtype">int</span> vx_low_r = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(9, 46, pcb);</div>
<div class="line"><span class="lineno">  356</span>            <span class="keywordtype">int</span> vx_high_r = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(9, 55, pcb);</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>            <span class="keywordtype">int</span> all_ones = vx_low_s == 0x1FF &amp;&amp; vx_high_s == 0x1FF &amp;&amp;</div>
<div class="line"><span class="lineno">  359</span>                           vx_low_t == 0x1FF &amp;&amp; vx_high_t == 0x1FF &amp;&amp;</div>
<div class="line"><span class="lineno">  360</span>                           vx_low_r == 0x1FF &amp;&amp; vx_high_r == 0x1FF;</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>            <span class="keywordflow">if</span> ((vx_low_s &gt;= vx_high_s || vx_low_t &gt;= vx_high_t || vx_low_r &gt;= vx_high_r) &amp;&amp; !all_ones)</div>
<div class="line"><span class="lineno">  363</span>            {</div>
<div class="line"><span class="lineno">  364</span>                scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> = <a class="code hl_variable" href="astcenc__internal_8h.html#abbaedf878cfb7c16b1d10b72128b5ee7">SYM_BTYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  365</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  366</span>            }</div>
<div class="line"><span class="lineno">  367</span>        }</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  370</span>    }</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> packed_index = bsd.<a class="code hl_variable" href="structblock__size__descriptor.html#ad2a7804c5aa2d87b691f9899d85c5bc6">block_mode_packed_index</a>[<a class="code hl_struct" href="structblock__mode.html">block_mode</a>];</div>
<div class="line"><span class="lineno">  373</span>    <span class="keywordflow">if</span> (packed_index == <a class="code hl_variable" href="astcenc__internal_8h.html#a9909bfb0b9a42a121838a9a145a8612f">BLOCK_BAD_BLOCK_MODE</a>)</div>
<div class="line"><span class="lineno">  374</span>    {</div>
<div class="line"><span class="lineno">  375</span>        scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> = <a class="code hl_variable" href="astcenc__internal_8h.html#abbaedf878cfb7c16b1d10b72128b5ee7">SYM_BTYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  376</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  377</span>    }</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bm = bsd.<a class="code hl_function" href="structblock__size__descriptor.html#a13608eb55e48c96b6243f4830278ebf3">get_block_mode</a>(<a class="code hl_struct" href="structblock__mode.html">block_mode</a>);</div>
<div class="line"><span class="lineno">  380</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; di = bsd.<a class="code hl_function" href="structblock__size__descriptor.html#a688445f2f90b13188372d812baf8e02d">get_decimation_info</a>(bm.decimation_mode);</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>    <span class="keywordtype">int</span> weight_count = di.<a class="code hl_variable" href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">weight_count</a>;</div>
<div class="line"><span class="lineno">  383</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(weight_count &gt; 0);</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>    <a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a> weight_quant_method = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(bm.quant_mode);</div>
<div class="line"><span class="lineno">  386</span>    <span class="keywordtype">int</span> is_dual_plane = bm.is_dual_plane;</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordtype">int</span> real_weight_count = is_dual_plane ? 2 * weight_count : weight_count;</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>    <span class="keywordtype">int</span> partition_count = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(2, 11, pcb) + 1;</div>
<div class="line"><span class="lineno">  391</span>    <a class="code hl_define" href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a>(partition_count &gt; 0);</div>
<div class="line"><span class="lineno">  392</span> </div>
<div class="line"><span class="lineno">  393</span>    scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a7ba54ca805498286add2148b3b86546b">block_mode</a> = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(<a class="code hl_struct" href="structblock__mode.html">block_mode</a>);</div>
<div class="line"><span class="lineno">  394</span>    scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a6ac68bba1c38975e28fb3e67e974c551">partition_count</a> = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(partition_count);</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; i++)</div>
<div class="line"><span class="lineno">  397</span>    {</div>
<div class="line"><span class="lineno">  398</span>        bswapped[i] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="#ac8ea7de26c1e90f79a9e315407ab04ff">bitrev8</a>(pcb[15 - i]));</div>
<div class="line"><span class="lineno">  399</span>    }</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordtype">int</span> bits_for_weights = <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19">get_ise_sequence_bitcount</a>(real_weight_count, weight_quant_method);</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>    <span class="keywordtype">int</span> below_weights_pos = 128 - bits_for_weights;</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>    uint8_t indices[64];</div>
<div class="line"><span class="lineno">  406</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; qat = <a class="code hl_variable" href="astcenc__internal_8h.html#a9d58fe49f85551cd8c9ccadb5aece318">quant_and_xfer_tables</a>[weight_quant_method];</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>    <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#a1cc25f0a98b60ff2bc5fd65f6b4190fa">decode_ise</a>(weight_quant_method, real_weight_count, bswapped, indices, 0);</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordflow">if</span> (is_dual_plane)</div>
<div class="line"><span class="lineno">  411</span>    {</div>
<div class="line"><span class="lineno">  412</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; weight_count; i++)</div>
<div class="line"><span class="lineno">  413</span>        {</div>
<div class="line"><span class="lineno">  414</span>            scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a4c7260c4aa675446ffcb37f09e92dd0b">weights</a>[i] = qat.unscramble_and_unquant_map[indices[2 * i]];</div>
<div class="line"><span class="lineno">  415</span>            scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a4c7260c4aa675446ffcb37f09e92dd0b">weights</a>[i + <a class="code hl_variable" href="astcenc__internal_8h.html#a2dcf39b1f3c1e5f152abdf1f24e698da">WEIGHTS_PLANE2_OFFSET</a>] = qat.unscramble_and_unquant_map[indices[2 * i + 1]];</div>
<div class="line"><span class="lineno">  416</span>        }</div>
<div class="line"><span class="lineno">  417</span>    }</div>
<div class="line"><span class="lineno">  418</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  419</span>    {</div>
<div class="line"><span class="lineno">  420</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; weight_count; i++)</div>
<div class="line"><span class="lineno">  421</span>        {</div>
<div class="line"><span class="lineno">  422</span>            scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a4c7260c4aa675446ffcb37f09e92dd0b">weights</a>[i] = qat.unscramble_and_unquant_map[indices[i]];</div>
<div class="line"><span class="lineno">  423</span>        }</div>
<div class="line"><span class="lineno">  424</span>    }</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>    <span class="keywordflow">if</span> (is_dual_plane &amp;&amp; partition_count == 4)</div>
<div class="line"><span class="lineno">  427</span>    {</div>
<div class="line"><span class="lineno">  428</span>        scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> = <a class="code hl_variable" href="astcenc__internal_8h.html#abbaedf878cfb7c16b1d10b72128b5ee7">SYM_BTYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  429</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  430</span>    }</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>    scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a2ad392432ebf011c42f7a72f49000d13">color_formats_matched</a> = 0;</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>    <span class="comment">// Determine the format of each endpoint pair</span></div>
<div class="line"><span class="lineno">  435</span>    <span class="keywordtype">int</span> color_formats[<a class="code hl_variable" href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a>];</div>
<div class="line"><span class="lineno">  436</span>    <span class="keywordtype">int</span> encoded_type_highpart_size = 0;</div>
<div class="line"><span class="lineno">  437</span>    <span class="keywordflow">if</span> (partition_count == 1)</div>
<div class="line"><span class="lineno">  438</span>    {</div>
<div class="line"><span class="lineno">  439</span>        color_formats[0] = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(4, 13, pcb);</div>
<div class="line"><span class="lineno">  440</span>        scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a17d42e08747747b32c650a48fe1b5b6e">partition_index</a> = 0;</div>
<div class="line"><span class="lineno">  441</span>    }</div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  443</span>    {</div>
<div class="line"><span class="lineno">  444</span>        encoded_type_highpart_size = (3 * partition_count) - 4;</div>
<div class="line"><span class="lineno">  445</span>        below_weights_pos -= encoded_type_highpart_size;</div>
<div class="line"><span class="lineno">  446</span>        <span class="keywordtype">int</span> encoded_type = <a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(6, 13 + <a class="code hl_variable" href="astcenc__internal_8h.html#a51d28e088618b740724c2dd2862fa1f7">PARTITION_INDEX_BITS</a>, pcb) |</div>
<div class="line"><span class="lineno">  447</span>                          (<a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(encoded_type_highpart_size, below_weights_pos, pcb) &lt;&lt; 6);</div>
<div class="line"><span class="lineno">  448</span>        <span class="keywordtype">int</span> baseclass = encoded_type &amp; 0x3;</div>
<div class="line"><span class="lineno">  449</span>        <span class="keywordflow">if</span> (baseclass == 0)</div>
<div class="line"><span class="lineno">  450</span>        {</div>
<div class="line"><span class="lineno">  451</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  452</span>            {</div>
<div class="line"><span class="lineno">  453</span>                color_formats[i] = (encoded_type &gt;&gt; 2) &amp; 0xF;</div>
<div class="line"><span class="lineno">  454</span>            }</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>            below_weights_pos += encoded_type_highpart_size;</div>
<div class="line"><span class="lineno">  457</span>            scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a2ad392432ebf011c42f7a72f49000d13">color_formats_matched</a> = 1;</div>
<div class="line"><span class="lineno">  458</span>            encoded_type_highpart_size = 0;</div>
<div class="line"><span class="lineno">  459</span>        }</div>
<div class="line"><span class="lineno">  460</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  461</span>        {</div>
<div class="line"><span class="lineno">  462</span>            <span class="keywordtype">int</span> bitpos = 2;</div>
<div class="line"><span class="lineno">  463</span>            baseclass--;</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  466</span>            {</div>
<div class="line"><span class="lineno">  467</span>                color_formats[i] = (((encoded_type &gt;&gt; bitpos) &amp; 1) + baseclass) &lt;&lt; 2;</div>
<div class="line"><span class="lineno">  468</span>                bitpos++;</div>
<div class="line"><span class="lineno">  469</span>            }</div>
<div class="line"><span class="lineno">  470</span> </div>
<div class="line"><span class="lineno">  471</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  472</span>            {</div>
<div class="line"><span class="lineno">  473</span>                color_formats[i] |= (encoded_type &gt;&gt; bitpos) &amp; 3;</div>
<div class="line"><span class="lineno">  474</span>                bitpos += 2;</div>
<div class="line"><span class="lineno">  475</span>            }</div>
<div class="line"><span class="lineno">  476</span>        }</div>
<div class="line"><span class="lineno">  477</span>        scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a17d42e08747747b32c650a48fe1b5b6e">partition_index</a> = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(10, 13, pcb));</div>
<div class="line"><span class="lineno">  478</span>    }</div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  481</span>    {</div>
<div class="line"><span class="lineno">  482</span>        scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a21dc79a4f976f6aa78d564576dcdde60">color_formats</a>[i] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(color_formats[i]);</div>
<div class="line"><span class="lineno">  483</span>    }</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>    <span class="comment">// Determine number of color endpoint integers</span></div>
<div class="line"><span class="lineno">  486</span>    <span class="keywordtype">int</span> color_integer_count = 0;</div>
<div class="line"><span class="lineno">  487</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  488</span>    {</div>
<div class="line"><span class="lineno">  489</span>        <span class="keywordtype">int</span> endpoint_class = color_formats[i] &gt;&gt; 2;</div>
<div class="line"><span class="lineno">  490</span>        color_integer_count += (endpoint_class + 1) * 2;</div>
<div class="line"><span class="lineno">  491</span>    }</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>    <span class="keywordflow">if</span> (color_integer_count &gt; 18)</div>
<div class="line"><span class="lineno">  494</span>    {</div>
<div class="line"><span class="lineno">  495</span>        scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> = <a class="code hl_variable" href="astcenc__internal_8h.html#abbaedf878cfb7c16b1d10b72128b5ee7">SYM_BTYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  496</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  497</span>    }</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>    <span class="comment">// Determine the color endpoint format to use</span></div>
<div class="line"><span class="lineno">  500</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> color_bits_arr[5] { -1, 115 - 4, 113 - 4 - <a class="code hl_variable" href="astcenc__internal_8h.html#a51d28e088618b740724c2dd2862fa1f7">PARTITION_INDEX_BITS</a>, 113 - 4 - <a class="code hl_variable" href="astcenc__internal_8h.html#a51d28e088618b740724c2dd2862fa1f7">PARTITION_INDEX_BITS</a>, 113 - 4 - <a class="code hl_variable" href="astcenc__internal_8h.html#a51d28e088618b740724c2dd2862fa1f7">PARTITION_INDEX_BITS</a> };</div>
<div class="line"><span class="lineno">  501</span>    <span class="keywordtype">int</span> color_bits = color_bits_arr[partition_count] - bits_for_weights - encoded_type_highpart_size;</div>
<div class="line"><span class="lineno">  502</span>    <span class="keywordflow">if</span> (is_dual_plane)</div>
<div class="line"><span class="lineno">  503</span>    {</div>
<div class="line"><span class="lineno">  504</span>        color_bits -= 2;</div>
<div class="line"><span class="lineno">  505</span>    }</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>    <span class="keywordflow">if</span> (color_bits &lt; 0)</div>
<div class="line"><span class="lineno">  508</span>    {</div>
<div class="line"><span class="lineno">  509</span>        color_bits = 0;</div>
<div class="line"><span class="lineno">  510</span>    }</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>    <span class="keywordtype">int</span> color_quant_level = <a class="code hl_variable" href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a>[color_integer_count &gt;&gt; 1][color_bits];</div>
<div class="line"><span class="lineno">  513</span>    <span class="keywordflow">if</span> (color_quant_level &lt; <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>)</div>
<div class="line"><span class="lineno">  514</span>    {</div>
<div class="line"><span class="lineno">  515</span>        scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> = <a class="code hl_variable" href="astcenc__internal_8h.html#abbaedf878cfb7c16b1d10b72128b5ee7">SYM_BTYPE_ERROR</a>;</div>
<div class="line"><span class="lineno">  516</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  517</span>    }</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>    <span class="comment">// Unpack the integer color values and assign to endpoints</span></div>
<div class="line"><span class="lineno">  520</span>    scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a449d8e3e4362348f1bd588eecaaa12c9">quant_mode</a> = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(color_quant_level);</div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>    uint8_t values_to_decode[32];</div>
<div class="line"><span class="lineno">  523</span>    <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#a1cc25f0a98b60ff2bc5fd65f6b4190fa">decode_ise</a>(<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a><span class="keyword">&gt;</span>(color_quant_level), color_integer_count, pcb,</div>
<div class="line"><span class="lineno">  524</span>               values_to_decode, (partition_count == 1 ? 17 : 19 + <a class="code hl_variable" href="astcenc__internal_8h.html#a51d28e088618b740724c2dd2862fa1f7">PARTITION_INDEX_BITS</a>));</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>    <span class="keywordtype">int</span> valuecount_to_decode = 0;</div>
<div class="line"><span class="lineno">  527</span>    <span class="keyword">const</span> uint8_t* unpack_table = <a class="code hl_variable" href="astcenc__internal_8h.html#af171dec074f8e2972c41a02ba04096d9">color_scrambled_pquant_to_uquant_tables</a>[scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a449d8e3e4362348f1bd588eecaaa12c9">quant_mode</a> - <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>];</div>
<div class="line"><span class="lineno">  528</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  529</span>    {</div>
<div class="line"><span class="lineno">  530</span>        <span class="keywordtype">int</span> vals = 2 * (color_formats[i] &gt;&gt; 2) + 2;</div>
<div class="line"><span class="lineno">  531</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; vals; j++)</div>
<div class="line"><span class="lineno">  532</span>        {</div>
<div class="line"><span class="lineno">  533</span>            scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ad539bb907ce654690e8a89cf62196f9c">color_values</a>[i][j] = unpack_table[values_to_decode[j + valuecount_to_decode]];</div>
<div class="line"><span class="lineno">  534</span>        }</div>
<div class="line"><span class="lineno">  535</span>        valuecount_to_decode += vals;</div>
<div class="line"><span class="lineno">  536</span>    }</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>    <span class="comment">// Fetch component for second-plane in the case of dual plane of weights.</span></div>
<div class="line"><span class="lineno">  539</span>    scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a49f36c368c0d976f230c76c33aed2b9d">plane2_component</a> = -1;</div>
<div class="line"><span class="lineno">  540</span>    <span class="keywordflow">if</span> (is_dual_plane)</div>
<div class="line"><span class="lineno">  541</span>    {</div>
<div class="line"><span class="lineno">  542</span>        scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a49f36c368c0d976f230c76c33aed2b9d">plane2_component</a> = <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="#a6062008b44453960d62c54f571cccfe1">read_bits</a>(2, below_weights_pos - 2, pcb));</div>
<div class="line"><span class="lineno">  543</span>    }</div>
<div class="line"><span class="lineno">  544</span>}</div>
<div class="ttc" id="aastcenc__integer__sequence_8cpp_html_a1cc25f0a98b60ff2bc5fd65f6b4190fa"><div class="ttname"><a href="astcenc__integer__sequence_8cpp.html#a1cc25f0a98b60ff2bc5fd65f6b4190fa">decode_ise</a></div><div class="ttdeci">void decode_ise(quant_method quant_level, unsigned int character_count, const uint8_t *input_data, uint8_t *output_data, unsigned int bit_offset)</div><div class="ttdoc">Decode a packed string using BISE.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__integer__sequence_8cpp_source.html#l00651">astcenc_integer_sequence.cpp:651</a></div></div>
<div class="ttc" id="aastcenc__integer__sequence_8cpp_html_af46c9322b401332698e9cb93c968fe19"><div class="ttname"><a href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19">get_ise_sequence_bitcount</a></div><div class="ttdeci">unsigned int get_ise_sequence_bitcount(unsigned int character_count, quant_method quant_level)</div><div class="ttdoc">Return the number of bits needed to encode an ISE sequence.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__integer__sequence_8cpp_source.html#l00419">astcenc_integer_sequence.cpp:419</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a2cce51c3362aa0b5040437ac0e7f8969"><div class="ttname"><a href="astcenc__internal_8h.html#a2cce51c3362aa0b5040437ac0e7f8969">promise</a></div><div class="ttdeci">#define promise(cond)</div><div class="ttdoc">Functions and data declarations.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00061">astcenc_internal.h:61</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a2dcf39b1f3c1e5f152abdf1f24e698da"><div class="ttname"><a href="astcenc__internal_8h.html#a2dcf39b1f3c1e5f152abdf1f24e698da">WEIGHTS_PLANE2_OFFSET</a></div><div class="ttdeci">static constexpr unsigned int WEIGHTS_PLANE2_OFFSET</div><div class="ttdoc">The offset of the plane 2 weights in shared weight arrays.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00108">astcenc_internal.h:108</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a31f42bb3da7abe95be4b6960feead130"><div class="ttname"><a href="astcenc__internal_8h.html#a31f42bb3da7abe95be4b6960feead130">BLOCK_MAX_PARTITIONS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_PARTITIONS</div><div class="ttdoc">The maximum number of partitions a block can support.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00078">astcenc_internal.h:78</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a51d28e088618b740724c2dd2862fa1f7"><div class="ttname"><a href="astcenc__internal_8h.html#a51d28e088618b740724c2dd2862fa1f7">PARTITION_INDEX_BITS</a></div><div class="ttdeci">static constexpr unsigned int PARTITION_INDEX_BITS</div><div class="ttdoc">The number of partition index bits supported by the ASTC format .</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00105">astcenc_internal.h:105</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a62b894529f4eb2badc6656c94ca1c003"><div class="ttname"><a href="astcenc__internal_8h.html#a62b894529f4eb2badc6656c94ca1c003">SYM_BTYPE_NONCONST</a></div><div class="ttdeci">static constexpr uint8_t SYM_BTYPE_NONCONST</div><div class="ttdoc">The block is a normal non-constant color block.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01063">astcenc_internal.h:1063</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a67050b7e3e5e5c4ff2021c8f266dd903"><div class="ttname"><a href="astcenc__internal_8h.html#a67050b7e3e5e5c4ff2021c8f266dd903">quant_mode_table</a></div><div class="ttdeci">const int8_t quant_mode_table[10][128]</div><div class="ttdoc">The precomputed quant mode storage table.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__quantization_8cpp_source.html#l00802">astcenc_quantization.cpp:802</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a806a5b8001942a6fa06d788ffec45a75"><div class="ttname"><a href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a></div><div class="ttdeci">quant_method</div><div class="ttdoc">The ASTC quantization methods.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00203">astcenc_internal.h:204</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a"><div class="ttname"><a href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a></div><div class="ttdeci">@ QUANT_6</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00209">astcenc_internal.h:209</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a9909bfb0b9a42a121838a9a145a8612f"><div class="ttname"><a href="astcenc__internal_8h.html#a9909bfb0b9a42a121838a9a145a8612f">BLOCK_BAD_BLOCK_MODE</a></div><div class="ttdeci">static constexpr uint16_t BLOCK_BAD_BLOCK_MODE</div><div class="ttdoc">The index indicating a bad (unused) block mode in the remap array.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00099">astcenc_internal.h:99</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a9d58fe49f85551cd8c9ccadb5aece318"><div class="ttname"><a href="astcenc__internal_8h.html#a9d58fe49f85551cd8c9ccadb5aece318">quant_and_xfer_tables</a></div><div class="ttdeci">const quant_and_transfer_table quant_and_xfer_tables[12]</div><div class="ttdoc">The precomputed quant and transfer table.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__weight__quant__xfer__tables_8cpp_source.html#l00026">astcenc_weight_quant_xfer_tables.cpp:26</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_abbaedf878cfb7c16b1d10b72128b5ee7"><div class="ttname"><a href="astcenc__internal_8h.html#abbaedf878cfb7c16b1d10b72128b5ee7">SYM_BTYPE_ERROR</a></div><div class="ttdeci">static constexpr uint8_t SYM_BTYPE_ERROR</div><div class="ttdoc">The block is an error block, and will return error color or NaN.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01054">astcenc_internal.h:1054</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_adb59df7fefb94a8c52948d49ce70b1f5"><div class="ttname"><a href="astcenc__internal_8h.html#adb59df7fefb94a8c52948d49ce70b1f5">SYM_BTYPE_CONST_U16</a></div><div class="ttdeci">static constexpr uint8_t SYM_BTYPE_CONST_U16</div><div class="ttdoc">The block is a constant color block using UNORM16 colors.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01060">astcenc_internal.h:1060</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_aebc278aa5ca9c97969af61d9186f9172"><div class="ttname"><a href="astcenc__internal_8h.html#aebc278aa5ca9c97969af61d9186f9172">SYM_BTYPE_CONST_F16</a></div><div class="ttdeci">static constexpr uint8_t SYM_BTYPE_CONST_F16</div><div class="ttdoc">The block is a constant color block using FP16 colors.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01057">astcenc_internal.h:1057</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_af171dec074f8e2972c41a02ba04096d9"><div class="ttname"><a href="astcenc__internal_8h.html#af171dec074f8e2972c41a02ba04096d9">color_scrambled_pquant_to_uquant_tables</a></div><div class="ttdeci">const uint8_t * color_scrambled_pquant_to_uquant_tables[17]</div><div class="ttdoc">The precomputed table for unpacking color values.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__quantization_8cpp_source.html#l00780">astcenc_quantization.cpp:780</a></div></div>
<div class="ttc" id="aastcenc__symbolic__physical_8cpp_html_a6062008b44453960d62c54f571cccfe1"><div class="ttname"><a href="#a6062008b44453960d62c54f571cccfe1">read_bits</a></div><div class="ttdeci">static int read_bits(int bitcount, int bitoffset, const uint8_t *ptr)</div><div class="ttdoc">Read up to 8 bits at an arbitrary bit offset.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__symbolic__physical_8cpp_source.html#l00054">astcenc_symbolic_physical.cpp:54</a></div></div>
<div class="ttc" id="aastcenc__symbolic__physical_8cpp_html_ac8ea7de26c1e90f79a9e315407ab04ff"><div class="ttname"><a href="#ac8ea7de26c1e90f79a9e315407ab04ff">bitrev8</a></div><div class="ttdeci">static int bitrev8(int p)</div><div class="ttdoc">Functions for converting between symbolic and physical encodings.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__symbolic__physical_8cpp_source.html#l00033">astcenc_symbolic_physical.cpp:33</a></div></div>
<div class="ttc" id="astructblock__mode_html"><div class="ttname"><a href="structblock__mode.html">block_mode</a></div><div class="ttdoc">Metadata for single block mode for a specific block size.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00415">astcenc_internal.h:416</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a13608eb55e48c96b6243f4830278ebf3"><div class="ttname"><a href="structblock__size__descriptor.html#a13608eb55e48c96b6243f4830278ebf3">block_size_descriptor::get_block_mode</a></div><div class="ttdeci">const block_mode &amp; get_block_mode(unsigned int block_mode) const</div><div class="ttdoc">Get the block mode structure for index block_mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00636">astcenc_internal.h:636</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_a688445f2f90b13188372d812baf8e02d"><div class="ttname"><a href="structblock__size__descriptor.html#a688445f2f90b13188372d812baf8e02d">block_size_descriptor::get_decimation_info</a></div><div class="ttdeci">const decimation_info &amp; get_decimation_info(unsigned int decimation_mode) const</div><div class="ttdoc">Get the decimation info structure for index decimation_mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00670">astcenc_internal.h:670</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_ad2a7804c5aa2d87b691f9899d85c5bc6"><div class="ttname"><a href="structblock__size__descriptor.html#ad2a7804c5aa2d87b691f9899d85c5bc6">block_size_descriptor::block_mode_packed_index</a></div><div class="ttdeci">uint16_t block_mode_packed_index[WEIGHTS_MAX_BLOCK_MODES]</div><div class="ttdoc">The packed block mode array index, or BLOCK_BAD_BLOCK_MODE if not active.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00586">astcenc_internal.h:586</a></div></div>
<div class="ttc" id="astructblock__size__descriptor_html_afc7428efe69cba2425ae335d9d266714"><div class="ttname"><a href="structblock__size__descriptor.html#afc7428efe69cba2425ae335d9d266714">block_size_descriptor::zdim</a></div><div class="ttdeci">uint8_t zdim</div><div class="ttdoc">The block Z dimension, in texels.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00539">astcenc_internal.h:539</a></div></div>
<div class="ttc" id="astructdecimation__info_html_af7d0c86be805995a20a6c09f6c3ab8ca"><div class="ttname"><a href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">decimation_info::weight_count</a></div><div class="ttdeci">uint8_t weight_count</div><div class="ttdoc">The total number of weights stored.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00355">astcenc_internal.h:355</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_a17d42e08747747b32c650a48fe1b5b6e"><div class="ttname"><a href="structsymbolic__compressed__block.html#a17d42e08747747b32c650a48fe1b5b6e">symbolic_compressed_block::partition_index</a></div><div class="ttdeci">uint16_t partition_index</div><div class="ttdoc">The partition index; valid for NONCONST blocks if 2 or more partitions.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01090">astcenc_internal.h:1090</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_a21dc79a4f976f6aa78d564576dcdde60"><div class="ttname"><a href="structsymbolic__compressed__block.html#a21dc79a4f976f6aa78d564576dcdde60">symbolic_compressed_block::color_formats</a></div><div class="ttdeci">uint8_t color_formats[BLOCK_MAX_PARTITIONS]</div><div class="ttdoc">The endpoint color formats for each partition; valid for NONCONST blocks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01093">astcenc_internal.h:1093</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_a2ad392432ebf011c42f7a72f49000d13"><div class="ttname"><a href="structsymbolic__compressed__block.html#a2ad392432ebf011c42f7a72f49000d13">symbolic_compressed_block::color_formats_matched</a></div><div class="ttdeci">uint8_t color_formats_matched</div><div class="ttdoc">Non-zero if the color formats matched; valid for NONCONST blocks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01081">astcenc_internal.h:1081</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_a449d8e3e4362348f1bd588eecaaa12c9"><div class="ttname"><a href="structsymbolic__compressed__block.html#a449d8e3e4362348f1bd588eecaaa12c9">symbolic_compressed_block::quant_mode</a></div><div class="ttdeci">quant_method quant_mode</div><div class="ttdoc">The endpoint color quant mode; valid for NONCONST blocks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01096">astcenc_internal.h:1096</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_a49f36c368c0d976f230c76c33aed2b9d"><div class="ttname"><a href="structsymbolic__compressed__block.html#a49f36c368c0d976f230c76c33aed2b9d">symbolic_compressed_block::plane2_component</a></div><div class="ttdeci">int8_t plane2_component</div><div class="ttdoc">The plane 2 color component, or -1 if single plane; valid for NONCONST blocks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01084">astcenc_internal.h:1084</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_a4c7260c4aa675446ffcb37f09e92dd0b"><div class="ttname"><a href="structsymbolic__compressed__block.html#a4c7260c4aa675446ffcb37f09e92dd0b">symbolic_compressed_block::weights</a></div><div class="ttdeci">ASTCENC_ALIGNAS uint8_t weights[BLOCK_MAX_WEIGHTS]</div><div class="ttdoc">The quantized and decimated weights.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01118">astcenc_internal.h:1118</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_a6ac68bba1c38975e28fb3e67e974c551"><div class="ttname"><a href="structsymbolic__compressed__block.html#a6ac68bba1c38975e28fb3e67e974c551">symbolic_compressed_block::partition_count</a></div><div class="ttdeci">uint8_t partition_count</div><div class="ttdoc">The number of partitions; valid for NONCONST blocks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01078">astcenc_internal.h:1078</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_a7ba54ca805498286add2148b3b86546b"><div class="ttname"><a href="structsymbolic__compressed__block.html#a7ba54ca805498286add2148b3b86546b">symbolic_compressed_block::block_mode</a></div><div class="ttdeci">uint16_t block_mode</div><div class="ttdoc">The block mode; valid for NONCONST blocks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01087">astcenc_internal.h:1087</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_abb86a3a9a9bf54d5138c1883ed6159a5"><div class="ttname"><a href="structsymbolic__compressed__block.html#abb86a3a9a9bf54d5138c1883ed6159a5">symbolic_compressed_block::constant_color</a></div><div class="ttdeci">int constant_color[BLOCK_MAX_COMPONENTS]</div><div class="ttdoc">The constant color; valid for CONST blocks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01104">astcenc_internal.h:1104</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_ac4c50ed170ee1fdbf19d288af74a8909"><div class="ttname"><a href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">symbolic_compressed_block::block_type</a></div><div class="ttdeci">uint8_t block_type</div><div class="ttdoc">The block type, one of the SYM_BTYPE_* constants.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01075">astcenc_internal.h:1075</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_ad539bb907ce654690e8a89cf62196f9c"><div class="ttname"><a href="structsymbolic__compressed__block.html#ad539bb907ce654690e8a89cf62196f9c">symbolic_compressed_block::color_values</a></div><div class="ttdeci">uint8_t color_values[BLOCK_MAX_PARTITIONS][8]</div><div class="ttdoc">The quantized endpoint color pairs; valid for NONCONST blocks.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01107">astcenc_internal.h:1107</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__symbolic__physical_8cpp_acd6272d8cee006f73e936e16739c4cab_cgraph.png" border="0" usemap="#aastcenc__symbolic__physical_8cpp_acd6272d8cee006f73e936e16739c4cab_cgraph" alt=""/></div>
<map name="aastcenc__symbolic__physical_8cpp_acd6272d8cee006f73e936e16739c4cab_cgraph" id="aastcenc__symbolic__physical_8cpp_acd6272d8cee006f73e936e16739c4cab_cgraph">
<area shape="rect" title="Convert a binary physical encoding into a symbolic representation." alt="" coords="5,144,152,169"/>
<area shape="rect" href="astcenc__symbolic__physical_8cpp.html#ac8ea7de26c1e90f79a9e315407ab04ff" title="Functions for converting between symbolic and physical encodings." alt="" coords="261,5,319,31"/>
<area shape="poly" title=" " alt="" coords="88,142,132,92,163,64,199,40,222,29,247,22,248,27,224,34,201,44,167,68,136,96,92,146"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#a1cc25f0a98b60ff2bc5fd65f6b4190fa" title="Decode a packed string using BISE." alt="" coords="246,55,334,80"/>
<area shape="poly" title=" " alt="" coords="99,142,144,116,199,90,232,79,233,84,201,95,147,121,102,146"/>
<area shape="rect" href="structblock__size__descriptor.html#a13608eb55e48c96b6243f4830278ebf3" title="Get the block mode structure for index block_mode." alt="" coords="216,105,364,145"/>
<area shape="poly" title=" " alt="" coords="152,143,202,135,203,141,153,148"/>
<area shape="rect" href="structblock__size__descriptor.html#a688445f2f90b13188372d812baf8e02d" title="Get the decimation info structure for index decimation_mode." alt="" coords="216,169,364,209"/>
<area shape="poly" title=" " alt="" coords="153,165,203,173,202,178,152,170"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19" title="Return the number of bits needed to encode an ISE sequence." alt="" coords="200,233,380,259"/>
<area shape="poly" title=" " alt="" coords="102,167,147,192,201,218,225,227,223,232,199,223,144,197,99,172"/>
<area shape="rect" href="astcenc__symbolic__physical_8cpp.html#a6062008b44453960d62c54f571cccfe1" title="Read up to 8 bits at an arbitrary bit offset." alt="" coords="428,195,503,220"/>
<area shape="poly" title=" " alt="" coords="90,168,133,220,165,248,201,269,249,285,289,289,330,284,379,269,413,251,441,228,444,232,416,255,381,274,331,289,289,295,248,290,199,274,161,252,129,224,86,171"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#a203e1098560cd6c7b9b9004d9704123e" title="Read up to 16 bits from two bytes." alt="" coords="428,100,503,125"/>
<area shape="poly" title=" " alt="" coords="335,76,415,97,414,102,333,81"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="551,148,605,173"/>
<area shape="poly" title=" " alt="" coords="497,123,539,141,537,146,495,128"/>
<area shape="poly" title=" " alt="" coords="496,192,537,175,539,180,498,197"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__symbolic__physical_8cpp_acd6272d8cee006f73e936e16739c4cab_icgraph.png" border="0" usemap="#aastcenc__symbolic__physical_8cpp_acd6272d8cee006f73e936e16739c4cab_icgraph" alt=""/></div>
<map name="aastcenc__symbolic__physical_8cpp_acd6272d8cee006f73e936e16739c4cab_icgraph" id="aastcenc__symbolic__physical_8cpp_acd6272d8cee006f73e936e16739c4cab_icgraph">
<area shape="rect" title="Convert a binary physical encoding into a symbolic representation." alt="" coords="880,62,1027,88"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a062987fc41b9df7d34d8eb668f29eb21" title="Decompress an image." alt="" coords="475,26,621,66"/>
<area shape="poly" title=" " alt="" coords="866,71,621,53,622,48,866,66"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a4138a9fb500526b5bfd98ea53a3ecec7" title="Provide a high level summary of a block&#39;s encoding." alt="" coords="673,88,832,113"/>
<area shape="poly" title=" " alt="" coords="867,88,832,93,832,88,866,83"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,33,207,58"/>
<area shape="poly" title=" " alt="" coords="468,25,422,16,339,8,255,16,220,24,188,35,187,30,219,19,254,11,339,3,423,11,469,20"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a02c55a799cc33b39f9d733b1a7e91281" title="Runner callback function for a decompression worker thread." alt="" coords="255,26,423,66"/>
<area shape="poly" title=" " alt="" coords="461,48,423,48,423,43,461,43"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,33,56,58"/>
<area shape="poly" title=" " alt="" coords="90,48,57,48,57,43,90,43"/>
<area shape="poly" title=" " alt="" coords="241,48,207,48,207,43,241,43"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#ac1760850c83dafab500f7cf8ab789246" title="Populate a single diagnostic image showing aspects of the encoding." alt="" coords="471,90,625,116"/>
<area shape="poly" title=" " alt="" coords="660,104,626,105,626,99,660,99"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a65c87ee1ff0ed0736cffa06692853479" title="Print a set of diagnostic images showing aspects of the encoding." alt="" coords="257,90,420,116"/>
<area shape="poly" title=" " alt="" coords="457,106,420,106,420,100,457,100"/>
<area shape="poly" title=" " alt="" coords="281,89,254,80,194,61,196,56,255,75,283,84"/>
</map>
</div>

</div>
</div>
<a id="a6062008b44453960d62c54f571cccfe1" name="a6062008b44453960d62c54f571cccfe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6062008b44453960d62c54f571cccfe1">&#9670;&#160;</a></span>read_bits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int read_bits </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>bitcount</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>bitoffset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>ptr</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read up to 8 bits at an arbitrary bit offset. </p>
<p>The stored value is at most 8 bits, but can be stored at an offset of between 0 and 7 bits so may span two separate bytes in memory.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">bitcount</td><td>The number of bits to read. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bitoffset</td><td>The bit offset to read from, between 0 and 7. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ptr</td><td>The data pointer to read from.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>반환값</dt><dd>The read value. </dd></dl>

<p class="definition"><a class="el" href="astcenc__symbolic__physical_8cpp_source.html">astcenc_symbolic_physical.cpp</a> 파일의 <a class="el" href="astcenc__symbolic__physical_8cpp_source.html#l00054">54</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>  {</div>
<div class="line"><span class="lineno">   59</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = (1 &lt;&lt; bitcount) - 1;</div>
<div class="line"><span class="lineno">   60</span>    ptr += bitoffset &gt;&gt; 3;</div>
<div class="line"><span class="lineno">   61</span>    bitoffset &amp;= 7;</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordtype">int</span> value = ptr[0] | (ptr[1] &lt;&lt; 8);</div>
<div class="line"><span class="lineno">   63</span>    value &gt;&gt;= bitoffset;</div>
<div class="line"><span class="lineno">   64</span>    value &amp;= <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>;</div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">return</span> value;</div>
<div class="line"><span class="lineno">   66</span>}</div>
<div class="ttc" id="aastcenc__vecmathlib__avx2__8_8h_html_ad922a3ed6098767968916265154b6f82"><div class="ttname"><a href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a></div><div class="ttdeci">ASTCENC_SIMD_INLINE unsigned int mask(vmask8 a)</div><div class="ttdoc">Return a 8-bit mask code indicating mask status.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__vecmathlib__avx2__8_8h_source.html#l00355">astcenc_vecmathlib_avx2_8.h:355</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__symbolic__physical_8cpp_a6062008b44453960d62c54f571cccfe1_cgraph.png" border="0" usemap="#aastcenc__symbolic__physical_8cpp_a6062008b44453960d62c54f571cccfe1_cgraph" alt=""/></div>
<map name="aastcenc__symbolic__physical_8cpp_a6062008b44453960d62c54f571cccfe1_cgraph" id="aastcenc__symbolic__physical_8cpp_a6062008b44453960d62c54f571cccfe1_cgraph">
<area shape="rect" title="Read up to 8 bits at an arbitrary bit offset." alt="" coords="5,5,80,31"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="128,5,183,31"/>
<area shape="poly" title=" " alt="" coords="80,15,114,15,114,21,80,21"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__symbolic__physical_8cpp_a6062008b44453960d62c54f571cccfe1_icgraph.png" border="0" usemap="#aastcenc__symbolic__physical_8cpp_a6062008b44453960d62c54f571cccfe1_icgraph" alt=""/></div>
<map name="aastcenc__symbolic__physical_8cpp_a6062008b44453960d62c54f571cccfe1_icgraph" id="aastcenc__symbolic__physical_8cpp_a6062008b44453960d62c54f571cccfe1_icgraph">
<area shape="rect" title="Read up to 8 bits at an arbitrary bit offset." alt="" coords="1075,62,1149,88"/>
<area shape="rect" href="astcenc__symbolic__physical_8cpp.html#acd6272d8cee006f73e936e16739c4cab" title="Convert a binary physical encoding into a symbolic representation." alt="" coords="880,62,1027,88"/>
<area shape="poly" title=" " alt="" coords="1061,78,1027,78,1027,72,1061,72"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a062987fc41b9df7d34d8eb668f29eb21" title="Decompress an image." alt="" coords="475,26,621,66"/>
<area shape="poly" title=" " alt="" coords="866,71,621,53,622,48,866,66"/>
<area shape="rect" href="astcenc__entry_8cpp.html#a4138a9fb500526b5bfd98ea53a3ecec7" title="Provide a high level summary of a block&#39;s encoding." alt="" coords="673,88,832,113"/>
<area shape="poly" title=" " alt="" coords="867,88,832,93,832,88,866,83"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,33,207,58"/>
<area shape="poly" title=" " alt="" coords="468,25,422,16,339,8,255,16,220,24,188,35,187,30,219,19,254,11,339,3,423,11,469,20"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a02c55a799cc33b39f9d733b1a7e91281" title="Runner callback function for a decompression worker thread." alt="" coords="255,26,423,66"/>
<area shape="poly" title=" " alt="" coords="461,48,423,48,423,43,461,43"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,33,56,58"/>
<area shape="poly" title=" " alt="" coords="90,48,57,48,57,43,90,43"/>
<area shape="poly" title=" " alt="" coords="241,48,207,48,207,43,241,43"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#ac1760850c83dafab500f7cf8ab789246" title="Populate a single diagnostic image showing aspects of the encoding." alt="" coords="471,90,625,116"/>
<area shape="poly" title=" " alt="" coords="660,104,626,105,626,99,660,99"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a65c87ee1ff0ed0736cffa06692853479" title="Print a set of diagnostic images showing aspects of the encoding." alt="" coords="257,90,420,116"/>
<area shape="poly" title=" " alt="" coords="457,106,420,106,420,100,457,100"/>
<area shape="poly" title=" " alt="" coords="281,89,254,80,194,61,196,56,255,75,283,84"/>
</map>
</div>

</div>
</div>
<a id="af7b1f1696c0ee5cbfd6f2546fa400011" name="af7b1f1696c0ee5cbfd6f2546fa400011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7b1f1696c0ee5cbfd6f2546fa400011">&#9670;&#160;</a></span>symbolic_to_physical()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void symbolic_to_physical </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structblock__size__descriptor.html">block_size_descriptor</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bsd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structsymbolic__compressed__block.html">symbolic_compressed_block</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>scb</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pcb</em></span>[16]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a symbolic representation into a binary physical encoding. </p>
<p>It is assumed that the symbolic encoding is valid and encodable, or previously flagged as an error block if an error color it to be encoded.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">bsd</td><td>The block size information. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">scb</td><td>The symbolic representation. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pcb</td><td>The physical compressed block output. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__symbolic__physical_8cpp_source.html">astcenc_symbolic_physical.cpp</a> 파일의 <a class="el" href="astcenc__symbolic__physical_8cpp_source.html#l00102">102</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  106</span>  {</div>
<div class="line"><span class="lineno">  107</span>    assert(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> != <a class="code hl_variable" href="astcenc__internal_8h.html#abbaedf878cfb7c16b1d10b72128b5ee7">SYM_BTYPE_ERROR</a>);</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>    <span class="comment">// Constant color block using UNORM16 colors</span></div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">if</span> (scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> == <a class="code hl_variable" href="astcenc__internal_8h.html#adb59df7fefb94a8c52948d49ce70b1f5">SYM_BTYPE_CONST_U16</a>)</div>
<div class="line"><span class="lineno">  111</span>    {</div>
<div class="line"><span class="lineno">  112</span>        <span class="comment">// There is currently no attempt to coalesce larger void-extents</span></div>
<div class="line"><span class="lineno">  113</span>        <span class="keyword">static</span> <span class="keyword">const</span> uint8_t cbytes[8] { 0xFC, 0xFD, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF };</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 8; i++)</div>
<div class="line"><span class="lineno">  115</span>        {</div>
<div class="line"><span class="lineno">  116</span>            pcb[i] = cbytes[i];</div>
<div class="line"><span class="lineno">  117</span>        }</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#acfaa28ad6768cb0ebe7f535fc8a9e6df">BLOCK_MAX_COMPONENTS</a>; i++)</div>
<div class="line"><span class="lineno">  120</span>        {</div>
<div class="line"><span class="lineno">  121</span>            pcb[2 * i + 8] = scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#abb86a3a9a9bf54d5138c1883ed6159a5">constant_color</a>[i] &amp; 0xFF;</div>
<div class="line"><span class="lineno">  122</span>            pcb[2 * i + 9] = (scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#abb86a3a9a9bf54d5138c1883ed6159a5">constant_color</a>[i] &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><span class="lineno">  123</span>        }</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  126</span>    }</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>    <span class="comment">// Constant color block using FP16 colors</span></div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">if</span> (scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ac4c50ed170ee1fdbf19d288af74a8909">block_type</a> == <a class="code hl_variable" href="astcenc__internal_8h.html#aebc278aa5ca9c97969af61d9186f9172">SYM_BTYPE_CONST_F16</a>)</div>
<div class="line"><span class="lineno">  130</span>    {</div>
<div class="line"><span class="lineno">  131</span>        <span class="comment">// There is currently no attempt to coalesce larger void-extents</span></div>
<div class="line"><span class="lineno">  132</span>        <span class="keyword">static</span> <span class="keyword">const</span> uint8_t cbytes[8]  { 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF };</div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 8; i++)</div>
<div class="line"><span class="lineno">  134</span>        {</div>
<div class="line"><span class="lineno">  135</span>            pcb[i] = cbytes[i];</div>
<div class="line"><span class="lineno">  136</span>        }</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="astcenc__internal_8h.html#acfaa28ad6768cb0ebe7f535fc8a9e6df">BLOCK_MAX_COMPONENTS</a>; i++)</div>
<div class="line"><span class="lineno">  139</span>        {</div>
<div class="line"><span class="lineno">  140</span>            pcb[2 * i + 8] = scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#abb86a3a9a9bf54d5138c1883ed6159a5">constant_color</a>[i] &amp; 0xFF;</div>
<div class="line"><span class="lineno">  141</span>            pcb[2 * i + 9] = (scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#abb86a3a9a9bf54d5138c1883ed6159a5">constant_color</a>[i] &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><span class="lineno">  142</span>        }</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  145</span>    }</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> partition_count = scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a6ac68bba1c38975e28fb3e67e974c551">partition_count</a>;</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>    <span class="comment">// Compress the weights.</span></div>
<div class="line"><span class="lineno">  150</span>    <span class="comment">// They are encoded as an ordinary integer-sequence, then bit-reversed</span></div>
<div class="line"><span class="lineno">  151</span>    uint8_t weightbuf[16] { 0 };</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bm = bsd.<a class="code hl_function" href="structblock__size__descriptor.html#a13608eb55e48c96b6243f4830278ebf3">get_block_mode</a>(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a7ba54ca805498286add2148b3b86546b">block_mode</a>);</div>
<div class="line"><span class="lineno">  154</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; di = bsd.<a class="code hl_function" href="structblock__size__descriptor.html#a688445f2f90b13188372d812baf8e02d">get_decimation_info</a>(bm.decimation_mode);</div>
<div class="line"><span class="lineno">  155</span>    <span class="keywordtype">int</span> weight_count = di.<a class="code hl_variable" href="structdecimation__info.html#af7d0c86be805995a20a6c09f6c3ab8ca">weight_count</a>;</div>
<div class="line"><span class="lineno">  156</span>    <a class="code hl_enumeration" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75">quant_method</a> weight_quant_method = bm.get_weight_quant_mode();</div>
<div class="line"><span class="lineno">  157</span>    <span class="keywordtype">float</span> weight_quant_levels = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code hl_function" href="astcenc__internal_8h.html#aec456deb917676d5506d91947c6d5726">get_quant_level</a>(weight_quant_method));</div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordtype">int</span> is_dual_plane = bm.is_dual_plane;</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; qat = <a class="code hl_variable" href="astcenc__internal_8h.html#a9d58fe49f85551cd8c9ccadb5aece318">quant_and_xfer_tables</a>[weight_quant_method];</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordtype">int</span> real_weight_count = is_dual_plane ? 2 * weight_count : weight_count;</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordtype">int</span> bits_for_weights = <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19">get_ise_sequence_bitcount</a>(real_weight_count, weight_quant_method);</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    uint8_t weights[64];</div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">if</span> (is_dual_plane)</div>
<div class="line"><span class="lineno">  168</span>    {</div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; weight_count; i++)</div>
<div class="line"><span class="lineno">  170</span>        {</div>
<div class="line"><span class="lineno">  171</span>            <span class="keywordtype">float</span> uqw = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a4c7260c4aa675446ffcb37f09e92dd0b">weights</a>[i]);</div>
<div class="line"><span class="lineno">  172</span>            <span class="keywordtype">float</span> qw = (uqw / 64.0f) * (weight_quant_levels - 1.0f);</div>
<div class="line"><span class="lineno">  173</span>            <span class="keywordtype">int</span> qwi = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(qw + 0.5f);</div>
<div class="line"><span class="lineno">  174</span>            weights[2 * i] = qat.scramble_map[qwi];</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>            uqw = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a4c7260c4aa675446ffcb37f09e92dd0b">weights</a>[i + <a class="code hl_variable" href="astcenc__internal_8h.html#a2dcf39b1f3c1e5f152abdf1f24e698da">WEIGHTS_PLANE2_OFFSET</a>]);</div>
<div class="line"><span class="lineno">  177</span>            qw = (uqw / 64.0f) * (weight_quant_levels - 1.0f);</div>
<div class="line"><span class="lineno">  178</span>            qwi = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(qw + 0.5f);</div>
<div class="line"><span class="lineno">  179</span>            weights[2 * i + 1] = qat.scramble_map[qwi];</div>
<div class="line"><span class="lineno">  180</span>        }</div>
<div class="line"><span class="lineno">  181</span>    }</div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  183</span>    {</div>
<div class="line"><span class="lineno">  184</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; weight_count; i++)</div>
<div class="line"><span class="lineno">  185</span>        {</div>
<div class="line"><span class="lineno">  186</span>            <span class="keywordtype">float</span> uqw = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a4c7260c4aa675446ffcb37f09e92dd0b">weights</a>[i]);</div>
<div class="line"><span class="lineno">  187</span>            <span class="keywordtype">float</span> qw = (uqw / 64.0f) * (weight_quant_levels - 1.0f);</div>
<div class="line"><span class="lineno">  188</span>            <span class="keywordtype">int</span> qwi = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(qw + 0.5f);</div>
<div class="line"><span class="lineno">  189</span>            weights[i] = qat.scramble_map[qwi];</div>
<div class="line"><span class="lineno">  190</span>        }</div>
<div class="line"><span class="lineno">  191</span>    }</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#a1e3b68510a3fa2766d2decf242132f2f">encode_ise</a>(weight_quant_method, real_weight_count, weights, weightbuf, 0);</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; i++)</div>
<div class="line"><span class="lineno">  196</span>    {</div>
<div class="line"><span class="lineno">  197</span>        pcb[i] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="#ac8ea7de26c1e90f79a9e315407ab04ff">bitrev8</a>(weightbuf[15 - i]));</div>
<div class="line"><span class="lineno">  198</span>    }</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>    <a class="code hl_function" href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a>(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a7ba54ca805498286add2148b3b86546b">block_mode</a>, 11, 0, pcb);</div>
<div class="line"><span class="lineno">  201</span>    <a class="code hl_function" href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a>(partition_count - 1, 2, 11, pcb);</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordtype">int</span> below_weights_pos = 128 - bits_for_weights;</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    <span class="comment">// Encode partition index and color endpoint types for blocks with 2+ partitions</span></div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">if</span> (partition_count &gt; 1)</div>
<div class="line"><span class="lineno">  207</span>    {</div>
<div class="line"><span class="lineno">  208</span>        <a class="code hl_function" href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a>(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a17d42e08747747b32c650a48fe1b5b6e">partition_index</a>, 6, 13, pcb);</div>
<div class="line"><span class="lineno">  209</span>        <a class="code hl_function" href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a>(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a17d42e08747747b32c650a48fe1b5b6e">partition_index</a> &gt;&gt; 6, <a class="code hl_variable" href="astcenc__internal_8h.html#a51d28e088618b740724c2dd2862fa1f7">PARTITION_INDEX_BITS</a> - 6, 19, pcb);</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">if</span> (scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a2ad392432ebf011c42f7a72f49000d13">color_formats_matched</a>)</div>
<div class="line"><span class="lineno">  212</span>        {</div>
<div class="line"><span class="lineno">  213</span>            <a class="code hl_function" href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a>(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a21dc79a4f976f6aa78d564576dcdde60">color_formats</a>[0] &lt;&lt; 2, 6, 13 + <a class="code hl_variable" href="astcenc__internal_8h.html#a51d28e088618b740724c2dd2862fa1f7">PARTITION_INDEX_BITS</a>, pcb);</div>
<div class="line"><span class="lineno">  214</span>        }</div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  216</span>        {</div>
<div class="line"><span class="lineno">  217</span>            <span class="comment">// Check endpoint types for each partition to determine the lowest class present</span></div>
<div class="line"><span class="lineno">  218</span>            <span class="keywordtype">int</span> low_class = 4;</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  221</span>            {</div>
<div class="line"><span class="lineno">  222</span>                <span class="keywordtype">int</span> class_of_format = scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a21dc79a4f976f6aa78d564576dcdde60">color_formats</a>[i] &gt;&gt; 2;</div>
<div class="line"><span class="lineno">  223</span>                low_class = <a class="code hl_function" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a>(class_of_format, low_class);</div>
<div class="line"><span class="lineno">  224</span>            }</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>            <span class="keywordflow">if</span> (low_class == 3)</div>
<div class="line"><span class="lineno">  227</span>            {</div>
<div class="line"><span class="lineno">  228</span>                low_class = 2;</div>
<div class="line"><span class="lineno">  229</span>            }</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>            <span class="keywordtype">int</span> encoded_type = low_class + 1;</div>
<div class="line"><span class="lineno">  232</span>            <span class="keywordtype">int</span> bitpos = 2;</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  235</span>            {</div>
<div class="line"><span class="lineno">  236</span>                <span class="keywordtype">int</span> classbit_of_format = (scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a21dc79a4f976f6aa78d564576dcdde60">color_formats</a>[i] &gt;&gt; 2) - low_class;</div>
<div class="line"><span class="lineno">  237</span>                encoded_type |= classbit_of_format &lt;&lt; bitpos;</div>
<div class="line"><span class="lineno">  238</span>                bitpos++;</div>
<div class="line"><span class="lineno">  239</span>            }</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; partition_count; i++)</div>
<div class="line"><span class="lineno">  242</span>            {</div>
<div class="line"><span class="lineno">  243</span>                <span class="keywordtype">int</span> lowbits_of_format = scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a21dc79a4f976f6aa78d564576dcdde60">color_formats</a>[i] &amp; 3;</div>
<div class="line"><span class="lineno">  244</span>                encoded_type |= lowbits_of_format &lt;&lt; bitpos;</div>
<div class="line"><span class="lineno">  245</span>                bitpos += 2;</div>
<div class="line"><span class="lineno">  246</span>            }</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>            <span class="keywordtype">int</span> encoded_type_lowpart = encoded_type &amp; 0x3F;</div>
<div class="line"><span class="lineno">  249</span>            <span class="keywordtype">int</span> encoded_type_highpart = encoded_type &gt;&gt; 6;</div>
<div class="line"><span class="lineno">  250</span>            <span class="keywordtype">int</span> encoded_type_highpart_size = (3 * partition_count) - 4;</div>
<div class="line"><span class="lineno">  251</span>            <span class="keywordtype">int</span> encoded_type_highpart_pos = 128 - bits_for_weights - encoded_type_highpart_size;</div>
<div class="line"><span class="lineno">  252</span>            <a class="code hl_function" href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a>(encoded_type_lowpart, 6, 13 + <a class="code hl_variable" href="astcenc__internal_8h.html#a51d28e088618b740724c2dd2862fa1f7">PARTITION_INDEX_BITS</a>, pcb);</div>
<div class="line"><span class="lineno">  253</span>            <a class="code hl_function" href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a>(encoded_type_highpart, encoded_type_highpart_size, encoded_type_highpart_pos, pcb);</div>
<div class="line"><span class="lineno">  254</span>            below_weights_pos -= encoded_type_highpart_size;</div>
<div class="line"><span class="lineno">  255</span>        }</div>
<div class="line"><span class="lineno">  256</span>    }</div>
<div class="line"><span class="lineno">  257</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  258</span>    {</div>
<div class="line"><span class="lineno">  259</span>        <a class="code hl_function" href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a>(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a21dc79a4f976f6aa78d564576dcdde60">color_formats</a>[0], 4, 13, pcb);</div>
<div class="line"><span class="lineno">  260</span>    }</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>    <span class="comment">// In dual-plane mode, encode the color component of the second plane of weights</span></div>
<div class="line"><span class="lineno">  263</span>    <span class="keywordflow">if</span> (is_dual_plane)</div>
<div class="line"><span class="lineno">  264</span>    {</div>
<div class="line"><span class="lineno">  265</span>        <a class="code hl_function" href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a>(scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a49f36c368c0d976f230c76c33aed2b9d">plane2_component</a>, 2, below_weights_pos - 2, pcb);</div>
<div class="line"><span class="lineno">  266</span>    }</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>    <span class="comment">// Encode the color components</span></div>
<div class="line"><span class="lineno">  269</span>    uint8_t values_to_encode[32];</div>
<div class="line"><span class="lineno">  270</span>    <span class="keywordtype">int</span> valuecount_to_encode = 0;</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>    <span class="keyword">const</span> uint8_t* pack_table = <a class="code hl_variable" href="astcenc__internal_8h.html#a834f3531350f3a55d6271b4dc18a223d">color_uquant_to_scrambled_pquant_tables</a>[scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a449d8e3e4362348f1bd588eecaaa12c9">quant_mode</a> - <a class="code hl_enumvalue" href="astcenc__internal_8h.html#a806a5b8001942a6fa06d788ffec45a75a39d85e9e6cd35a99788a893bef840f1a">QUANT_6</a>];</div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a6ac68bba1c38975e28fb3e67e974c551">partition_count</a>; i++)</div>
<div class="line"><span class="lineno">  274</span>    {</div>
<div class="line"><span class="lineno">  275</span>        <span class="keywordtype">int</span> vals = 2 * (scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a21dc79a4f976f6aa78d564576dcdde60">color_formats</a>[i] &gt;&gt; 2) + 2;</div>
<div class="line"><span class="lineno">  276</span>        assert(vals &lt;= 8);</div>
<div class="line"><span class="lineno">  277</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; vals; j++)</div>
<div class="line"><span class="lineno">  278</span>        {</div>
<div class="line"><span class="lineno">  279</span>            values_to_encode[j + valuecount_to_encode] = pack_table[scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#ad539bb907ce654690e8a89cf62196f9c">color_values</a>[i][j]];</div>
<div class="line"><span class="lineno">  280</span>        }</div>
<div class="line"><span class="lineno">  281</span>        valuecount_to_encode += vals;</div>
<div class="line"><span class="lineno">  282</span>    }</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>    <a class="code hl_function" href="astcenc__integer__sequence_8cpp.html#a1e3b68510a3fa2766d2decf242132f2f">encode_ise</a>(scb.<a class="code hl_function" href="structsymbolic__compressed__block.html#af290ce908b76242bc89e3eae4d948454">get_color_quant_mode</a>(), valuecount_to_encode, values_to_encode, pcb,</div>
<div class="line"><span class="lineno">  285</span>               scb.<a class="code hl_variable" href="structsymbolic__compressed__block.html#a6ac68bba1c38975e28fb3e67e974c551">partition_count</a> == 1 ? 17 : 19 + <a class="code hl_variable" href="astcenc__internal_8h.html#a51d28e088618b740724c2dd2862fa1f7">PARTITION_INDEX_BITS</a>);</div>
<div class="line"><span class="lineno">  286</span>}</div>
<div class="ttc" id="aastcenc__integer__sequence_8cpp_html_a1e3b68510a3fa2766d2decf242132f2f"><div class="ttname"><a href="astcenc__integer__sequence_8cpp.html#a1e3b68510a3fa2766d2decf242132f2f">encode_ise</a></div><div class="ttdeci">void encode_ise(quant_method quant_level, unsigned int character_count, const uint8_t *input_data, uint8_t *output_data, unsigned int bit_offset)</div><div class="ttdoc">Encode a packed string using BISE.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__integer__sequence_8cpp_source.html#l00493">astcenc_integer_sequence.cpp:493</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_a834f3531350f3a55d6271b4dc18a223d"><div class="ttname"><a href="astcenc__internal_8h.html#a834f3531350f3a55d6271b4dc18a223d">color_uquant_to_scrambled_pquant_tables</a></div><div class="ttdeci">const uint8_t color_uquant_to_scrambled_pquant_tables[17][256]</div><div class="ttdoc">The precomputed table for packing quantized color values.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__quantization_8cpp_source.html#l00338">astcenc_quantization.cpp:338</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_acfaa28ad6768cb0ebe7f535fc8a9e6df"><div class="ttname"><a href="astcenc__internal_8h.html#acfaa28ad6768cb0ebe7f535fc8a9e6df">BLOCK_MAX_COMPONENTS</a></div><div class="ttdeci">static constexpr unsigned int BLOCK_MAX_COMPONENTS</div><div class="ttdoc">The maximum number of components a block can support.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00075">astcenc_internal.h:75</a></div></div>
<div class="ttc" id="aastcenc__internal_8h_html_aec456deb917676d5506d91947c6d5726"><div class="ttname"><a href="astcenc__internal_8h.html#aec456deb917676d5506d91947c6d5726">get_quant_level</a></div><div class="ttdeci">static unsigned int get_quant_level(quant_method method)</div><div class="ttdoc">The number of levels use by an ASTC quantization method.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l00235">astcenc_internal.h:235</a></div></div>
<div class="ttc" id="aastcenc__symbolic__physical_8cpp_html_ae8ca963a290faa03da1eed39553521ec"><div class="ttname"><a href="#ae8ca963a290faa03da1eed39553521ec">write_bits</a></div><div class="ttdeci">static void write_bits(int value, int bitcount, int bitoffset, uint8_t *ptr)</div><div class="ttdoc">Write up to 8 bits at an arbitrary bit offset.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__symbolic__physical_8cpp_source.html#l00081">astcenc_symbolic_physical.cpp:81</a></div></div>
<div class="ttc" id="anamespaceastc_html_af78c0d31374aa9923633a3a2abf8d738"><div class="ttname"><a href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738">astc::min</a></div><div class="ttdeci">static T min(T p, T q)</div><div class="ttdoc">Return the minimum of two values.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__mathlib_8h_source.html#l00159">astcenc_mathlib.h:159</a></div></div>
<div class="ttc" id="astructsymbolic__compressed__block_html_af290ce908b76242bc89e3eae4d948454"><div class="ttname"><a href="structsymbolic__compressed__block.html#af290ce908b76242bc89e3eae4d948454">symbolic_compressed_block::get_color_quant_mode</a></div><div class="ttdeci">quant_method get_color_quant_mode() const</div><div class="ttdoc">Get the weight quantization used by this block mode.</div><div class="ttdef"><b>Definition</b> <a href="astcenc__internal_8h_source.html#l01125">astcenc_internal.h:1125</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__symbolic__physical_8cpp_af7b1f1696c0ee5cbfd6f2546fa400011_cgraph.png" border="0" usemap="#aastcenc__symbolic__physical_8cpp_af7b1f1696c0ee5cbfd6f2546fa400011_cgraph" alt=""/></div>
<map name="aastcenc__symbolic__physical_8cpp_af7b1f1696c0ee5cbfd6f2546fa400011_cgraph" id="aastcenc__symbolic__physical_8cpp_af7b1f1696c0ee5cbfd6f2546fa400011_cgraph">
<area shape="rect" title="Convert a symbolic representation into a binary physical encoding." alt="" coords="5,240,152,265"/>
<area shape="rect" href="astcenc__symbolic__physical_8cpp.html#ac8ea7de26c1e90f79a9e315407ab04ff" title="Functions for converting between symbolic and physical encodings." alt="" coords="270,5,329,31"/>
<area shape="poly" title=" " alt="" coords="81,239,94,200,117,146,151,89,173,62,198,40,226,25,255,18,257,23,228,30,202,44,177,66,156,92,122,148,99,202,86,241"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#a1e3b68510a3fa2766d2decf242132f2f" title="Encode a packed string using BISE." alt="" coords="255,55,343,80"/>
<area shape="poly" title=" " alt="" coords="83,239,99,208,124,168,158,126,198,90,219,80,241,72,243,78,221,85,202,95,161,130,129,171,104,211,88,241"/>
<area shape="rect" href="structblock__size__descriptor.html#a13608eb55e48c96b6243f4830278ebf3" title="Get the block mode structure for index block_mode." alt="" coords="225,105,373,145"/>
<area shape="poly" title=" " alt="" coords="91,238,136,197,199,154,212,148,215,152,201,159,140,201,95,242"/>
<area shape="rect" href="structsymbolic__compressed__block.html#af290ce908b76242bc89e3eae4d948454" title="Get the weight quantization used by this block mode." alt="" coords="200,169,399,209"/>
<area shape="poly" title=" " alt="" coords="123,237,216,210,218,215,124,242"/>
<area shape="rect" href="structblock__size__descriptor.html#a688445f2f90b13188372d812baf8e02d" title="Get the decimation info structure for index decimation_mode." alt="" coords="225,233,373,273"/>
<area shape="poly" title=" " alt="" coords="153,250,212,250,212,255,153,255"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#af46c9322b401332698e9cb93c968fe19" title="Return the number of bits needed to encode an ISE sequence." alt="" coords="209,297,389,323"/>
<area shape="poly" title=" " alt="" coords="128,263,201,282,236,291,235,297,199,287,127,268"/>
<area shape="rect" href="astcenc__internal_8h.html#aec456deb917676d5506d91947c6d5726" title="The number of levels use by an ASTC quantization method." alt="" coords="244,347,355,372"/>
<area shape="poly" title=" " alt="" coords="97,263,142,297,201,332,232,343,230,348,199,336,139,302,94,268"/>
<area shape="rect" href="namespaceastc.html#af78c0d31374aa9923633a3a2abf8d738" title="Return the minimum of two values." alt="" coords="261,396,337,421"/>
<area shape="poly" title=" " alt="" coords="90,264,133,322,164,355,201,382,224,393,249,400,247,405,222,398,199,387,161,359,129,325,86,267"/>
<area shape="rect" href="astcenc__symbolic__physical_8cpp.html#ae8ca963a290faa03da1eed39553521ec" title="Write up to 8 bits at an arbitrary bit offset." alt="" coords="447,300,524,325"/>
<area shape="poly" title=" " alt="" coords="86,265,99,300,122,348,156,395,177,415,201,432,254,455,299,462,345,454,397,432,423,413,444,388,472,337,477,339,449,391,427,417,400,436,346,460,299,468,252,460,199,436,174,420,152,399,118,350,94,302,81,266"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="572,105,627,131"/>
<area shape="poly" title=" " alt="" coords="344,67,428,74,525,90,560,100,558,105,523,95,427,80,343,72"/>
<area shape="rect" href="astcenc__integer__sequence_8cpp.html#a52b08548f8002494f05802fc24d36489" title="Write up to 8 bits at an arbitrary bit offset." alt="" coords="447,105,524,131"/>
<area shape="poly" title=" " alt="" coords="344,76,399,90,434,100,433,105,398,95,343,81"/>
<area shape="poly" title=" " alt="" coords="524,115,559,115,559,121,524,121"/>
<area shape="poly" title=" " alt="" coords="492,299,581,142,586,144,496,301"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__symbolic__physical_8cpp_af7b1f1696c0ee5cbfd6f2546fa400011_icgraph.png" border="0" usemap="#aastcenc__symbolic__physical_8cpp_af7b1f1696c0ee5cbfd6f2546fa400011_icgraph" alt=""/></div>
<map name="aastcenc__symbolic__physical_8cpp_af7b1f1696c0ee5cbfd6f2546fa400011_icgraph" id="aastcenc__symbolic__physical_8cpp_af7b1f1696c0ee5cbfd6f2546fa400011_icgraph">
<area shape="rect" title="Convert a symbolic representation into a binary physical encoding." alt="" coords="1015,5,1161,31"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,5,967,31"/>
<area shape="poly" title=" " alt="" coords="1001,21,967,21,967,15,1001,15"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,5,801,31"/>
<area shape="poly" title=" " alt="" coords="835,21,802,21,802,15,835,15"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,5,632,31"/>
<area shape="poly" title=" " alt="" coords="666,21,632,21,632,15,666,15"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,5,207,31"/>
<area shape="poly" title=" " alt="" coords="444,17,409,17,255,17,207,18,207,13,255,11,409,11,444,12"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,26,409,66"/>
<area shape="poly" title=" " alt="" coords="444,34,410,38,409,33,443,29"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,57,21,57,15,90,15"/>
<area shape="poly" title=" " alt="" coords="241,34,206,29,207,23,242,29"/>
</map>
</div>

</div>
</div>
<a id="ae8ca963a290faa03da1eed39553521ec" name="ae8ca963a290faa03da1eed39553521ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8ca963a290faa03da1eed39553521ec">&#9670;&#160;</a></span>write_bits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void write_bits </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>value</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>bitcount</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>bitoffset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>ptr</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write up to 8 bits at an arbitrary bit offset. </p>
<p>The stored value is at most 8 bits, but can be stored at an offset of between 0 and 7 bits so may span two separate bytes in memory.</p>
<dl class="params"><dt>매개변수</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">value</td><td>The value to write. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bitcount</td><td>The number of bits to write, starting from LSB. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bitoffset</td><td>The bit offset to store at, between 0 and 7. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ptr</td><td>The data pointer to write to. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition"><a class="el" href="astcenc__symbolic__physical_8cpp_source.html">astcenc_symbolic_physical.cpp</a> 파일의 <a class="el" href="astcenc__symbolic__physical_8cpp_source.html#l00081">81</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">   86</span>  {</div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = (1 &lt;&lt; bitcount) - 1;</div>
<div class="line"><span class="lineno">   88</span>    value &amp;= <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>;</div>
<div class="line"><span class="lineno">   89</span>    ptr += bitoffset &gt;&gt; 3;</div>
<div class="line"><span class="lineno">   90</span>    bitoffset &amp;= 7;</div>
<div class="line"><span class="lineno">   91</span>    value &lt;&lt;= bitoffset;</div>
<div class="line"><span class="lineno">   92</span>    <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> &lt;&lt;= bitoffset;</div>
<div class="line"><span class="lineno">   93</span>    <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> = ~mask;</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    ptr[0] &amp;= <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a>;</div>
<div class="line"><span class="lineno">   96</span>    ptr[0] |= value;</div>
<div class="line"><span class="lineno">   97</span>    ptr[1] &amp;= <a class="code hl_function" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82">mask</a> &gt;&gt; 8;</div>
<div class="line"><span class="lineno">   98</span>    ptr[1] |= value &gt;&gt; 8;</div>
<div class="line"><span class="lineno">   99</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__symbolic__physical_8cpp_ae8ca963a290faa03da1eed39553521ec_cgraph.png" border="0" usemap="#aastcenc__symbolic__physical_8cpp_ae8ca963a290faa03da1eed39553521ec_cgraph" alt=""/></div>
<map name="aastcenc__symbolic__physical_8cpp_ae8ca963a290faa03da1eed39553521ec_cgraph" id="aastcenc__symbolic__physical_8cpp_ae8ca963a290faa03da1eed39553521ec_cgraph">
<area shape="rect" title="Write up to 8 bits at an arbitrary bit offset." alt="" coords="5,5,83,31"/>
<area shape="rect" href="astcenc__vecmathlib__avx2__8_8h.html#ad922a3ed6098767968916265154b6f82" title="Return a 8&#45;bit mask code indicating mask status." alt="" coords="131,5,185,31"/>
<area shape="poly" title=" " alt="" coords="83,15,117,15,117,21,83,21"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="astcenc__symbolic__physical_8cpp_ae8ca963a290faa03da1eed39553521ec_icgraph.png" border="0" usemap="#aastcenc__symbolic__physical_8cpp_ae8ca963a290faa03da1eed39553521ec_icgraph" alt=""/></div>
<map name="aastcenc__symbolic__physical_8cpp_ae8ca963a290faa03da1eed39553521ec_icgraph" id="aastcenc__symbolic__physical_8cpp_ae8ca963a290faa03da1eed39553521ec_icgraph">
<area shape="rect" title="Write up to 8 bits at an arbitrary bit offset." alt="" coords="1209,5,1287,31"/>
<area shape="rect" href="astcenc__symbolic__physical_8cpp.html#af7b1f1696c0ee5cbfd6f2546fa400011" title="Convert a symbolic representation into a binary physical encoding." alt="" coords="1015,5,1161,31"/>
<area shape="poly" title=" " alt="" coords="1195,21,1162,21,1162,15,1195,15"/>
<area shape="rect" href="astcenc__compress__symbolic_8cpp.html#a579b9a2ceeecda2fb3abe63b8311df1c" title="Compress an image block into a physical block." alt="" coords="849,5,967,31"/>
<area shape="poly" title=" " alt="" coords="1001,21,967,21,967,15,1001,15"/>
<area shape="rect" href="astcenc__entry_8cpp.html#acbecfd32ce013d567cac16a877c20f42" title="Compress an image, after any preflight has completed." alt="" coords="680,5,801,31"/>
<area shape="poly" title=" " alt="" coords="835,21,802,21,802,15,835,15"/>
<area shape="rect" href="astcenc__entry_8cpp.html#ad762aa055eed75156c99309158a40e90" title="Compress an image." alt="" coords="457,5,632,31"/>
<area shape="poly" title=" " alt="" coords="666,21,632,21,632,15,666,15"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a073d18880f24fd648661b01d2e20340e" title="Application entry point." alt="" coords="104,5,207,31"/>
<area shape="poly" title=" " alt="" coords="444,17,409,17,255,17,207,18,207,13,255,11,409,11,444,12"/>
<area shape="rect" href="astcenccli__toplevel_8cpp.html#a57bafe66bbd689a53aad2d190fe7a3fa" title="Runner callback function for a compression worker thread." alt="" coords="255,26,409,66"/>
<area shape="poly" title=" " alt="" coords="444,34,410,38,409,33,443,29"/>
<area shape="rect" href="astcenccli__entry_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,57,21,57,15,90,15"/>
<area shape="poly" title=" " alt="" coords="241,34,206,29,207,23,242,29"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_211b531afad3b7391864460492782af6.html">astc-encoder-main</a></li><li class="navelem"><a class="el" href="dir_7df889ea08e038e0b05c337eccc30153.html">Source</a></li><li class="navelem"><a class="el" href="astcenc__symbolic__physical_8cpp.html">astcenc_symbolic_physical.cpp</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
